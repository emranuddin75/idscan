{"version":3,"file":"idscan-jcs.min.js","mappings":"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,gFACA,oFACA,kEACA,oEACA,8EACA,4DACA,sFACA,4FACA,0EACA,gFACA,8FACA,4FACA,wFACA,gFACA,kGACA,oIACA,kIACA,0GACA,sFACA,kEACA,8EACA,4EACA,0CACA,sDACA,gDACA,uDACA,4CACA,0CACA,4CACA,4DACA,oCACA,4CACA,kDACA,oCACA,wDACA,sDACA,0CACA,wCACA,4CACA,sCACA,gDACA,kDACA,8DACA,4EACA,wEACA,oEACA,kDACA,oDACA,oEACA,8CACA,kDACA,kDACA,kDACA,gEACA,4DACA,wDACA,oEACA,kFACA,8EACA,0EACA,8DACA,wDACA,sEACA,kEACA,8DACA,8DACA,gEACA,4EACA,wDACA,sEACA,kEACA,oFACA,sDACA,gEACA,kFACA,8DACA,8CACA,0CACA,sCACA,8CACA,gCACA,wCACA,8CACA,8DACA,8DACA,8CACA,kDACA,4DACA,kDACA,sDACA,gEACA,kEACA,wCACA,0CACA,oDACA,0CACA,wCACA,8EACA,wFACA,8EACA,gDACA,wCACA,sCACA,8DACA,wEACA,wEACA,sEACA,8DACA,4EACA,sFACA,sFACA,oFACA,0DACA,wEACA,kFACA,kFACA,gFACA,sDACA,oEACA,8EACA,8EACA,4EACA,0CACA,kCACA,4DACA,kDACA,8CACA,gDACA,0DACA,0DACA,0DACA,kDACA,oCACA,oDACA,oEACA,wDACA,sDACA,4DACA,kDACA,oDACA,8CACA,4DACA,4CACA,gEACA,kEACA,8DACA,kCACA,gCACA,kCACA,wCACA,wCACA,gDACA,kCACA,kCACA,kCACA,kDACA,kCACA,kCACA,8BACA,wCACA,kDACA,gDACA,oDACA,gEACA,oCACA,8CACA,4CACA,kDACA,kCACA,0DACA,kEACA,0DACA,0EACA,sFACA,mEACA,qEACA,oEACA,wDACA,sDACA,8DACA,gHACA,kHACA,gHACA,uGACA,wGACA,8GACA,uFACA,yFACA,+FACA,kGACA,iGACA,mFACA,iGACA,kFACA,8EACA,wFACA,kFACA,8EACA,0EACA,oFACA,8FACA,wGACA,oFACA,wDACA,kEACA,kFACA,wFACA,4EACA,0BACA,oCACA,wBACA,0BACA,0BACA,wBACA,gCACA,4BACA,kCACA,0DACA,4CACA,kDACA,oDACA,gDACA,wDACA,0DACA,8CACA,wCACA,8CACA,8CACA,oDACA,sDACA,kDACA,0DACA,4DACA,gDACA,0CACA,gDACA,oDACA,kDACA,kCACA,sEACA,oEACA,oDAEA,8DACA,oEACA,4DACA,0EACA,gFACA,sEACA,4EACA,wEACA,8EACA,gFACA,0FAEA,oDACA,0DAEA,8CACA,oDACA,4CACA,0DACA,gEACA,sDACA,4DACA,wDACA,8DACA,gEACA,0EAEA,kDACA,wDACA,gDACA,8DACA,oEACA,0DACA,gEACA,4DACA,kEACA,oEACA,8EAEA,8CAEA,wBACA,oDACA,kGACA,8FACA,sFACA,kGACA,gDACA,4EACA,0FACA,0EACA,8DACA,gHACA,oGACA,4GACA,8HACA,wHACA,4FACA,wFACA,oGACA,oGACA,0FACA,8FACA,8FACA,sFACA,oEACA,0EACA,wEACA,4DACA,gFACA,wCACA,oEACA,kEACA,4FACA,sGACA,kFACA,oFACA,sCACA,8DACA,4EACA,4EACA,gGACA,8EACA,4EACA,0DACA,wFACA,8GACA,4GACA,0GACA,8EACA,gFACA,sEACA,kEACA,wEACA,wEACA,uGACA,4EACA,wEACA,kEACA,0EACA,oEACA,sEACA,8EACA,gFACA,4EACA,0DACA,gEACA,kEACA,8EACA,0EACA,wGACA,gEACA,sEACA,4DACA,gEACA,gGACA,gEACA,8EACA,oEACA,4EACA,wEACA,+DACA,wEACA,wEACA,wEACA,sGACA,kEACA,mEACA,wGACA,oGACA,oGACA,4DACA,sEACA,oDACA,0EACA,oEACA,gEACA,0DACA,8DACA,wEACA,4EACA,+DACA,+DACA,uEACA,4EACA,8CACA,6DACA,+DACA,2FACA,2DACA,qEACA,0FACA,2DACA,qEACA,0EACA,6DACA,2DACA,yDACA,uEACA,yEACA,iEACA,wEACA,uEACA,6DACA,4EACA,sEACA,yDACA,qEACA,uEACA,iEACA,sEACA,wEACA,4EACA,uDACA,0DACA,0DACA,0DACA,uEACA,yEACA,uEACA,mEACA,4DACA,+DACA,wDACA,kEACA,kEACA,kEACA,kEACA,iEACA,uEACA,iFACA,gFACA,mEACA,qEACA,sEACA,yEACA,yEACA,yEACA,yEACA,sEACA,wEACA,8EACA,wFACA,uFACA,8FACA,0EACA,4EACA,+EACA,iEACA,+DACA,8DACA,mEACA,oDACA,oDACA,2DACA,yDACA,yDACA,+EACA,qFACA,gDACA,6DACA,6DACA,sDACA,sDACA,+EACA,kEACA,2DACA,kDACA,oDACA,oDACA,oDACA,sDACA,sDACA,mEACA,kDACA,8DACA,gEACA,0EACA,8DACA,gEACA,0EACA,8DACA,gEACA,0EACA,0DACA,0DACA,wEACA,gFACA,4EACA,4EACA,mEACA,0EACA,qGACA,wEACA,+FACA,+DACA,mEACA,2DACA,wDACA,kEACA,4EACA,yEACA,iFACA,mFACA,4GACA,uFACA,gFACA,+EACA,wFACA,sGACA,mFACA,iGACA,8GACA,sFACA,+FACA,yGACA,kHACA,+FACA,wFACA,uFACA,iFACA,kFACA,0DACA,wDACA,6DACA,4EACA,8DACA,oEACA,kEACA,wDACA,2DACA,yEACA,+DACA,kEACA,kEACA,kEACA,0EACA,kGACA,wFACA,0FACA,kGACA,uFACA,sFACA,8DACA,mEACA,4DACA,wDACA,sFACA,2EACA,sEACA,oEACA,oEACA,wEACA,oFACA,wEACA,wEACA,0EACA,wEACA,6EACA,6EACA,6EACA,qEACA,qEACA,qEACA,qEACA,qEACA,mDACA,mDACA,mDACA,mDACA,mDACA,mEACA,yEACA,sEACA,sEACA,sEACA,sEACA,kFACA,gDACA,gEACA,oDACA,kFACA,2FACA,8CACA,kDACA,gDACA,sEACA,sEACA,sEACA,sEACA,0EACA,oFACA,kFACA,wCACA,oDACA,gDACA,kDACA,8CACA,kCACA,8DACA,kDACA,oCACA,kDACA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","sources":["webpack://GBG.Idscan/webpack/universalModuleDefinition","webpack://GBG.Idscan/webpack/runtime/chunk loaded","webpack://GBG.Idscan/./src/idscan/enums/JourneyStep.ts","webpack://GBG.Idscan/./src/helpers/classes/TemplateService.ts","webpack://GBG.Idscan/./src/helpers/classes/SecretService.ts","webpack://GBG.Idscan/./src/helpers/classes/SocketService.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/cropper.html","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/journey-select.html","webpack://GBG.Idscan/./src/idscan/enums/JourneyEvent.ts","webpack://GBG.Idscan/./src/idscan/enums/ImageFormat.ts","webpack://GBG.Idscan/./src/helpers/functions/functions.ts","webpack://GBG.Idscan/./src/helpers/classes/ImageService.ts","webpack://GBG.Idscan/./src/helpers/classes/Croppy.ts","webpack://GBG.Idscan/./src/idscan/renderers/step/login.ts","webpack://GBG.Idscan/./src/helpers/classes/LanguageService.ts","webpack://GBG.Idscan/./src/idscan/configuration/StorageKeys.ts","webpack://GBG.Idscan/./src/idscan/enums/HighLevelResult.ts","webpack://GBG.Idscan/./src/idscan/classes/JourneyManager.ts","webpack://GBG.Idscan/./src/helpers/utils/browserDetection.ts","webpack://GBG.Idscan/./src/idscan/renderers/provider/image.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/terms-and-conditions.html","webpack://GBG.Idscan/./src/ides/host.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/camera.html","webpack://GBG.Idscan/./src/idscan/classes/JourneyFlow.ts","webpack://GBG.Idscan/./src/retina/MediaChannelType/camera/helper.ts","webpack://GBG.Idscan/./src/helpers/classes/EventService.ts","webpack://GBG.Idscan/./src/idscan/renderers/step/results.ts","webpack://GBG.Idscan/./src/idscan/renderers/step/dataChecks.ts","webpack://GBG.Idscan/./src/helpers/functions/object.ts","webpack://GBG.Idscan/./src/helpers/classes/HttpService.ts","webpack://GBG.Idscan/./src/helpers/classes/CameraService.ts","webpack://GBG.Idscan/./src/idscan/renderers/step/passiveLiveness.ts","webpack://GBG.Idscan/./src/idscan/configuration/AuthDefaults.ts","webpack://GBG.Idscan/./src/helpers/functions/arrays.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/triple-scan-guidance.html","webpack://GBG.Idscan/./src/retina/types.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/data-checks.html","webpack://GBG.Idscan/./src/retina/helper.ts","webpack://GBG.Idscan/./src/idscan/classes/DataService.ts","webpack://GBG.Idscan/./src/idscan/configuration/DataStoreDefaults.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/initializing.html","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/result.html","webpack://GBG.Idscan/./src/idscan/renderers/provider/camera.ts","webpack://GBG.Idscan/./src/idscan/enums/Templates.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/smart-capture.html","webpack://GBG.Idscan/./src/idscan/enums/RequiredInputImage.ts","webpack://GBG.Idscan/./src/idscan/enums/ResponseType.ts","webpack://GBG.Idscan/./src/helpers/classes/TransformationService.ts","webpack://GBG.Idscan/./src/helpers/polyfills/toBlob.ts","webpack://GBG.Idscan/./src/helpers/classes/CaseDictionaryService.ts","webpack://GBG.Idscan/./src/idscan/configuration/Constants.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/view.html","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/file-system.html","webpack://GBG.Idscan/./src/idscan/renderers/step/liveness.ts","webpack://GBG.Idscan/./src/idscan/renderers/step/termsAndConditions.ts","webpack://GBG.Idscan/./src/retina/factory.ts","webpack://GBG.Idscan/./src/idscan/enums/DocumentSource.ts","webpack://GBG.Idscan/./src/helpers/classes/DataStore.ts","webpack://GBG.Idscan/./src/helpers/classes/HttpResponse.ts","webpack://GBG.Idscan/./src/idscan/configuration/CaseDictionary.ts","webpack://GBG.Idscan/./src/idscan/configuration/Endpoints.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/gateway.html","webpack://GBG.Idscan/./src/helpers/classes/ReductionService.ts","webpack://GBG.Idscan/./src/idscan-jcs.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/liveness.html","webpack://GBG.Idscan/./src/retina/MediaChannelType/camera/sendingFramesManager.ts","webpack://GBG.Idscan/./src/idscan/enums/CurrentResult.ts","webpack://GBG.Idscan/./src/idscan/enums/Translation.ts","webpack://GBG.Idscan/./src/idscan/configuration/DefaultTemplates.ts","webpack://GBG.Idscan/./src/idscan/renderers/step/gateway.ts","webpack://GBG.Idscan/./src/retina/baseImageCaptureService.ts","webpack://GBG.Idscan/./src/helpers/functions/getPlatform.ts","webpack://GBG.Idscan/./src/idscan/enums/Mode.ts","webpack://GBG.Idscan/./src/idscan/enums/JourneyState.ts","webpack://GBG.Idscan/./src/helpers/classes/RenderingService.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/has-no-camera.html","webpack://GBG.Idscan/./src/ides/enums/messages.ts","webpack://GBG.Idscan/./src/helpers/classes/StorageService.ts","webpack://GBG.Idscan/./src/idscan/enums/JourneyDefinition.ts","webpack://GBG.Idscan/./src/helpers/enums/Templates.ts","webpack://GBG.Idscan/./src/helpers/enums/smartCaptureFailingReasons.ts","webpack://GBG.Idscan/./src/idscan/enums/FlowState.ts","webpack://GBG.Idscan/./src/idscan/renderers/provider/cropper.ts","webpack://GBG.Idscan/./src/retina/httpRequestService.ts","webpack://GBG.Idscan/./src/retina/MediaChannelType/camera/cameraCaptureService.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/passive-liveness.html","webpack://GBG.Idscan/./src/idscan/renderers/provider/scanner.ts","webpack://GBG.Idscan/./src/idscan/enums/Scanner.ts","webpack://GBG.Idscan/./src/helpers/classes/ExceptionManager.ts","webpack://GBG.Idscan/./src/idscan/enums/Camera.ts","webpack://GBG.Idscan/./src/idscan/classes/Journey.ts","webpack://GBG.Idscan/./src/idscan/enums/RequiredAction.ts","webpack://GBG.Idscan/./src/idscan/enums/DocumentRole.ts","webpack://GBG.Idscan/./src/idscan/configuration/TranslationDictionary.ts","webpack://GBG.Idscan/./src/idscan/renderers/provider/fileSystem.ts","webpack://GBG.Idscan/./src/helpers/classes/AnimationService.ts","webpack://GBG.Idscan/./src/idscan/classes/JourneyContainer.ts","webpack://GBG.Idscan/./src/idscan/renderers/provider/smart-capture.ts","webpack://GBG.Idscan/./src/idscan/enums/InputProvider.ts","webpack://GBG.Idscan/./src/idscan/enums/DocumentSide.ts","webpack://GBG.Idscan/./src/idscan/enums/JourneyAction.ts","webpack://GBG.Idscan/./src/idscan/renderers/provider/triple-scan-guidance.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/login.html","webpack://GBG.Idscan/./src/retina/MediaChannelType/camera/cameraCapture.ts","webpack://GBG.Idscan/./src/idscan/renderers/step/journeySelect.ts","webpack://GBG.Idscan/./src/retina/retinaService.ts","webpack://GBG.Idscan/./src/idscan/configuration/defaultTemplates/scanner.html","webpack://GBG.Idscan/webpack/bootstrap","webpack://GBG.Idscan/webpack/runtime/amd options","webpack://GBG.Idscan/webpack/runtime/compat get default export","webpack://GBG.Idscan/webpack/runtime/define property getters","webpack://GBG.Idscan/webpack/runtime/ensure chunk","webpack://GBG.Idscan/webpack/runtime/global","webpack://GBG.Idscan/webpack/runtime/hasOwnProperty shorthand","webpack://GBG.Idscan/webpack/runtime/make namespace object","webpack://GBG.Idscan/webpack/runtime/node module decorator","webpack://GBG.Idscan/webpack/runtime/publicPath","webpack://GBG.Idscan/webpack/runtime/jsonp chunk loading","webpack://GBG.Idscan/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"GBG\"] = factory();\n\telse\n\t\troot[\"GBG\"] = root[\"GBG\"] || {}, root[\"GBG\"][\"Idscan\"] = factory();\n})(this, () => {\nreturn ","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/**\r\n * The current capture state of the journey. The value of this is dictated by\r\n * the server. These values are usually used alongside the `RequiredAction` enum\r\n * values returned with events.\r\n *\r\n * @public\r\n */\r\nexport enum JourneyStep {\r\n\t/**\r\n\t * Supported proof of address document.\r\n\t */\r\n\tADDRESSDOCUMENT = 'ADDRESSDOCUMENT',\r\n\t/**\r\n\t * Rear of supported identity document.\r\n\t */\r\n\tBACKSIDE = 'BACKSIDE',\r\n\t/**\r\n\t * Front of supported identity document.\r\n\t */\r\n\tFRONTSIDE = 'FRONTSIDE',\r\n\t/**\r\n\t * Nothing required at this time.\r\n\t */\r\n\tNONE = 'NONE',\r\n\t/**\r\n\t * Self portrait photograph.\r\n\t */\r\n\tSELFIE = 'SELFIE',\r\n\t/**\r\n\t * Liveness capturing.\r\n\t */\r\n\tLIVENESS = 'LIVENESS',\r\n\t/**\r\n\t * Covid capturing.\r\n\t */\r\n\tCOVIDPASS = 'COVIDPASS',\r\n\t/**\r\n\t * General capturing.\r\n\t */\r\n\tGENERAL = 'GENERAL',\r\n\t/**\r\n\t * Data checks (CIFAS & ID3)\r\n\t */\r\n\tDATACHECKS = 'DATACHECKS'\r\n}\r\n","import * as Mustache from 'mustache';\r\nimport { Templates } from '../../idscan/enums/Templates';\r\nimport { TranslationKey } from '../../idscan/enums/Translation';\r\nimport { TemplateDictionary } from '../../idscan/interfaces/ContainerConfiguration';\r\nimport { PreProcessor, TemplateType } from '../enums/Templates';\r\nimport { IFunctionTemplateConfiguration, IPromiseTemplateConfiguration, IRenderableTemplate, IStringTemplateConfiguration, ITemplateConfiguration, IUrlTemplateConfiguration } from '../interfaces/Templates';\r\nimport { TemplateFunction } from '../types/Templates';\r\nimport { ExceptionManager } from './ExceptionManager';\r\nimport LanguageService from './LanguageService';\r\nimport RenderingService from './RenderingService';\r\ndeclare var ENV: string;\r\n/**\r\n * @internal\r\n */\r\nexport class TemplateService {\r\n\tprivate _templates?: TemplateDictionary;\r\n\tprivate _mustache = new Mustache.Writer();\r\n\r\n\tpublic updateTemplates = (templates: Partial<TemplateDictionary>): this => {\r\n\t\tthis._templates = {\r\n\t\t\t...this._templates,\r\n\t\t\t...templates\r\n\t\t};\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic get templates() {\r\n\t\treturn { ...this._templates };\r\n\t}\r\n\r\n\tpublic renderToContainer = <C extends HTMLElement = HTMLElement>(container?: C, templateName: Templates = Templates.None, data: Record<string, any> = {}): Promise<C> => {\r\n\t\tif (ENV === 'DEVELOPMENT') {\r\n\t\t\tconsole.log(`Rendering template ${templateName}`);\r\n\t\t}\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (container instanceof HTMLElement) {\r\n\t\t\t\tcontainer.innerHTML = '';\r\n\r\n\t\t\t\treturn this.getTemplate(templateName)\r\n\t\t\t\t\t.then((renderableTemplate) => this.processTemplate(container, renderableTemplate, data))\r\n\t\t\t\t\t.then(resolve);\r\n\t\t\t} else {\r\n\t\t\t\treturn reject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getElements = <C extends HTMLElement = HTMLElement, E extends {} = {}>(container?: C, elements: Partial<Record<keyof E, string>> = {}): Promise<Partial<Record<keyof E, HTMLElement>>> => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (container instanceof HTMLElement) {\r\n\t\t\t\treturn resolve(Object.keys(elements).reduce((out, element: string) => ({\r\n\t\t\t\t\t...out,\r\n\t\t\t\t\t[element]: container.querySelectorAll((elements as Record<string, string>)[element])[0]\r\n\t\t\t\t}), {}));\r\n\t\t\t} else {\r\n\t\t\t\treturn reject(new ExceptionManager.TemplateException(TranslationKey.EXCEPTION_TEMPLATE_SOURCE_ELEMENT_MISSING));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getTemplate = (templateName: Templates): Promise<IRenderableTemplate> => new Promise((resolve, reject) => {\r\n\t\tconst configuration = (this._templates || {})[templateName] as ITemplateConfiguration;\r\n\t\tconst { type = TemplateType.Null } = configuration;\r\n\r\n\t\tswitch (type) {\r\n\t\t\t// If the provider is a promise, we want to just allow this through\r\n\t\t\tcase TemplateType.Promise:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst { provider, processor } = configuration as IPromiseTemplateConfiguration;\r\n\t\t\t\t\treturn (provider as Promise<string>)\r\n\t\t\t\t\t\t.then((template) => resolve({ type, processor, template }));\r\n\t\t\t\t}\r\n\t\t\t// If the provider is a function, we want to execute it and return its output\r\n\t\t\tcase TemplateType.Function:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst { provider, processor } = configuration as IFunctionTemplateConfiguration;\r\n\t\t\t\t\treturn resolve({\r\n\t\t\t\t\t\tprocessor,\r\n\t\t\t\t\t\ttemplate: (provider as TemplateFunction)(templateName),\r\n\t\t\t\t\t\ttype,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t// If the provider is a URL, we want to pass it to the `getFile` function to handle\r\n\t\t\tcase TemplateType.Url:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst { provider, processor } = configuration as IUrlTemplateConfiguration;\r\n\t\t\t\t\treturn RenderingService.getFile(provider as string)\r\n\t\t\t\t\t\t.then((template) => resolve({ type, processor, template }));\r\n\t\t\t\t}\r\n\t\t\t// If the provider is a string, we just want to return that in a resolved promise\r\n\t\t\tcase TemplateType.String:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst { provider, processor } = configuration as IStringTemplateConfiguration;\r\n\t\t\t\t\treturn resolve({ type, processor, template: (provider as string) });\r\n\t\t\t\t}\r\n\t\t\t// Otherwise we want to throw an error\r\n\t\t\tcase TemplateType.Null:\r\n\t\t\tdefault:\r\n\t\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.TemplateException(TranslationKey.EXCEPTION_TEMPLATE_MISSING)));\r\n\t\t}\r\n\t})\r\n\r\n\tprivate processTemplate = <C extends HTMLElement = HTMLElement>(container: C, { processor, template }: IRenderableTemplate, data: Record<string, any> = {}): Promise<C> => new Promise((resolve) => {\r\n\t\tswitch (processor) {\r\n\t\t\tcase PreProcessor.Mustache:\r\n\t\t\t\tcontainer.innerHTML = this._mustache.render(template, { ...LanguageService.dictionary, ...data }, {});\r\n\t\t\t\treturn resolve(container);\r\n\t\t\tcase PreProcessor.None:\r\n\t\t\tdefault:\r\n\t\t\t\tcontainer.innerHTML = template;\r\n\t\t\t\treturn resolve(container);\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport default new TemplateService();\r\n","import * as sjcl from 'sjcl';\r\nimport { TranslationKey } from '../../idscan/enums/Translation';\r\nimport { ExceptionManager } from './ExceptionManager';\r\n\r\n/**\r\n * Service for encryption of easily visible variables such as token\r\n *\r\n * @class SecretService\r\n *\r\n * @internal\r\n */\r\nexport class SecretService {\r\n\t/**\r\n\t * Encrypt and return the encoded value\r\n\t * @param val\r\n\t */\r\n\tpublic static encrypt = (val: any) => {\r\n\t\ttry {\r\n\t\t\treturn Buffer.from(JSON.stringify(sjcl.encrypt(SecretService.secret, JSON.stringify(val)))).toString('base64');\r\n\t\t} catch (e) {\r\n\t\t\tthrow ExceptionManager.process(new ExceptionManager.InvalidParameterException(TranslationKey.EXCEPTION_INVALID_PARAMETER_VALUE_NOT_VALID));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Decrypt and return the decoded value\r\n\t * @param val\r\n\t */\r\n\tpublic static decrypt = <T>(val: string = ''): T => {\r\n\t\tlet decodedJson;\r\n\t\ttry {\r\n\t\t\ttry {\r\n\t\t\t\tdecodedJson = JSON.parse(Buffer.from(val, 'base64').toString());\r\n\t\t\t} catch (err) {\r\n\t\t\t\t// IEOS-2066 - In case Buffer.from is not supported\r\n\t\t\t\tdecodedJson = JSON.parse(atob(val));\r\n\t\t\t}\r\n\t\t\treturn JSON.parse(sjcl.decrypt(SecretService.secret, decodedJson));\r\n\t\t} catch (e) {\r\n\t\t\tthrow ExceptionManager.process(new ExceptionManager.InvalidParameterException(TranslationKey.EXCEPTION_INVALID_PARAMETER_VALUE_DAMAGED));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static secret: string = 'IDS_FEVER';\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport { hubConnection } from 'signalr-no-jquery';\r\nimport { STORAGE_KEYS } from '../../idscan/configuration/StorageKeys';\r\nimport { ScannerError, ScannerState, ScanProcess } from '../../idscan/enums/Scanner';\r\nimport { IScannerState } from '../../idscan/interfaces/ScannerState';\r\nimport StorageService from './StorageService';\r\nimport { osName, osVersion, browserName, fullBrowserVersion, mobileVendor, mobileModel, isMobile } from '../utils/browserDetection';\r\nimport JourneyManager from '../../idscan/classes/JourneyManager';\r\nimport { Mode } from '../../idscan/enums/Mode';\r\n\r\n//global version string\r\ndeclare var VERSION: string;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport enum SocketEvents {\r\n\tRESULT = 'result',\r\n\tUPDATE = 'update',\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nenum HubEvents {\r\n\tTERMINAL_STATUS_UPDATED = 'terminalStatusUpdated',\r\n\tBATCH_SCAN_WORKFLOW_SCAN_STARTED = 'batchScanWorkflowScanStarted',\r\n\tBATCH_SCAN_WORKFLOW_SCAN_FINISHED = 'batchScanWorkflowScanFinished',\r\n\tBATCH_SCAN_WORKFLOW_PROCESSING_FINISHED = 'batchScanWorkflowProcessingFinished',\r\n\tIMAGE_SOURCE_BUSY = 'imageSourceBusy',\r\n\tIMAGE_SOURCE_CONNECTED = 'imageSourceConnected',\r\n\tIMAGE_SOURCE_DISCONNECTED = 'imageSourceDisconnected',\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nenum HubActions {\r\n\tRELEASE_TERMINAL = 'releaseTerminal',\r\n\tREGISTER_AND_OCCUPY_SCANNER = 'registerAndOccupyScanner',\r\n\tRESET = 'reset',\r\n\tSET_SCANNER_TRIGGER_MODE = 'setScannerTriggerMode',\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class SocketService extends EventEmitter {\r\n\r\n\tpublic get state(): number {\r\n\t\treturn this._state;\r\n\t}\r\n\r\n\tprivate _connection?: any;\r\n\tprivate _state: number = 0;\r\n\tprivate _hub?: any;\r\n\r\n\tprivate _socketUrl?: string;\r\n\tprivate _logging?: boolean;\r\n\r\n\tprivate _journeyDefinitionId: string = '';\r\n\tprivate _journeyId: string | undefined;\r\n\r\n\tprivate _scannerState: IScannerState = {\r\n\t\tconnected: false,\r\n\t\terror: undefined,\r\n\t\tscanProcess: ScanProcess.EMPTY,\r\n\t\tstate: undefined\r\n\t};\r\n\r\n\tprivate _oldScannerState: IScannerState = {\r\n\t\tconnected: false,\r\n\t\terror: undefined,\r\n\t\tscanProcess: ScanProcess.EMPTY,\r\n\t\tstate: undefined\r\n\t};\r\n\r\n\tpublic configure = (socketUrl: string | undefined = this._socketUrl, logging: boolean = false): Promise<void> => new Promise((resolve) => {\r\n\t\tthis._socketUrl = socketUrl ? socketUrl : this._socketUrl;\r\n\t\tthis._logging = logging;\r\n\r\n\t\treturn resolve();\r\n\t})\r\n\r\n\tpublic initialise = (): Promise<void> => new Promise((resolve) => {\r\n\t\tthis.removeAllListeners();\r\n\r\n\t\tthis.clearListeners();\r\n\r\n\t\tthis._connection = hubConnection(this._socketUrl, {\r\n\t\t\tlogging: this._logging,\r\n\t\t\tuseDefaultPath: false\r\n\t\t});\r\n\r\n\t\tthis._connection.qs = `Authorization=${StorageService.get(STORAGE_KEYS.defaultToken)}`;\r\n\r\n\t\tthis._hub = this._connection.createHubProxy('signalRMethodCallHub');\r\n\r\n\t\tthis.setListeners();\r\n\r\n\t\treturn resolve();\r\n\t})\r\n\r\n\t/**\r\n\t * Release the terminal\r\n\t */\r\n\tpublic release = (): Promise<void> => new Promise((resolve) => {\r\n\t\tif (this._hub && this._state === 1) {\r\n\t\t\treturn this._hub.invoke(HubActions.RELEASE_TERMINAL)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis._scannerState = {\r\n\t\t\t\t\t\tconnected: false,\r\n\t\t\t\t\t\terror: ScannerError.IS_RELEASED,\r\n\t\t\t\t\t\tscanProcess: ScanProcess.EMPTY,\r\n\t\t\t\t\t\tstate: undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t})\r\n\t\t\t\t.then(this.pushState)\r\n\t\t\t\t.then(resolve);\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Assign the state of the signalR connection to a variable\r\n\t * @param change\r\n\t */\r\n\tpublic stateChanged = (change: any) => {\r\n\t\t/*\r\n\t\t\t0: Connecting\r\n\t\t\t1: Connected\r\n\t\t\t2: Reconnecting\r\n\t\t\t4: Disconnected\r\n\t\t*/\r\n\t\tthis._state = change.newState;\r\n\t}\r\n\r\n\t/**\r\n\t * Start a new connection and subscribe to events\r\n\t */\r\n\tpublic start = (journeyDefinitionId: string, journeyId: string): Promise<IScannerState> => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (this._connection) {\r\n\t\t\t\tthis._journeyDefinitionId = journeyDefinitionId;\r\n\t\t\t\tthis._journeyId = journeyId;\r\n\t\t\t\treturn this._connection.start()\r\n\t\t\t\t\t.done(() => {\r\n\t\t\t\t\t\tthis.tryRegistering()\r\n\t\t\t\t\t\t\t.then(() => resolve(this._scannerState));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.fail(() => reject({\r\n\t\t\t\t\t\tconnected: false,\r\n\t\t\t\t\t\terror: `Cannot reach the server`,\r\n\t\t\t\t\t\tscanProcess: ScanProcess.EMPTY,\r\n\t\t\t\t\t\tstate: undefined\r\n\t\t\t\t\t}));\r\n\t\t\t} else {\r\n\t\t\t\treturn reject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic clearListeners = () => {\r\n\t\tconst { _hub } = this;\r\n\r\n\t\tif (_hub) {\r\n\t\t\t_hub.off(HubEvents.TERMINAL_STATUS_UPDATED);\r\n\t\t\t_hub.off(HubEvents.BATCH_SCAN_WORKFLOW_SCAN_STARTED);\r\n\t\t\t_hub.off(HubEvents.BATCH_SCAN_WORKFLOW_SCAN_FINISHED);\r\n\t\t\t_hub.off(HubEvents.BATCH_SCAN_WORKFLOW_PROCESSING_FINISHED);\r\n\t\t\t_hub.off(HubEvents.IMAGE_SOURCE_BUSY);\r\n\t\t\t_hub.off(HubEvents.IMAGE_SOURCE_CONNECTED);\r\n\t\t\t_hub.off(HubEvents.IMAGE_SOURCE_DISCONNECTED);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set listeners for the signalR hub\r\n\t */\r\n\tpublic setListeners = () => {\r\n\t\tconst { _connection, _hub } = this;\r\n\r\n\t\tif (_connection) {\r\n\t\t\t_connection.stateChanged(this.stateChanged);\r\n\r\n\t\t\t_connection.error((error: any) => {\r\n\t\t\t\tconsole.warn(error);\r\n\t\t\t\tthis.setSourceState(ScannerState.DISCONNECTED);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (_hub) {\r\n\t\t\t_hub.on(HubEvents.TERMINAL_STATUS_UPDATED, this.setState);\r\n\r\n\t\t\t_hub.on(HubEvents.BATCH_SCAN_WORKFLOW_SCAN_STARTED, () => {\r\n\t\t\t\tthis.setScanProcess(ScanProcess.SCANNING);\r\n\t\t\t});\r\n\r\n\t\t\t_hub.on(HubEvents.BATCH_SCAN_WORKFLOW_SCAN_FINISHED, () => {\r\n\t\t\t\tthis.setScanProcess(ScanProcess.PROCESSING);\r\n\t\t\t});\r\n\r\n\t\t\t_hub.on(HubEvents.BATCH_SCAN_WORKFLOW_PROCESSING_FINISHED, (result: any) => {\r\n\t\t\t\tthis.setScanProcess(ScanProcess.EMPTY)\r\n\t\t\t\t\t.then(this.turnOffAutoTriggerMode)\r\n\t\t\t\t\t.then(() => this.emit(SocketEvents.RESULT, result));\r\n\t\t\t});\r\n\r\n\t\t\t_hub.on(HubEvents.IMAGE_SOURCE_BUSY, () => {\r\n\t\t\t\tthis.setSourceState(ScannerState.BUSY);\r\n\t\t\t});\r\n\r\n\t\t\t_hub.on(HubEvents.IMAGE_SOURCE_CONNECTED, () => {\r\n\t\t\t\tthis.setSourceState(ScannerState.CONNECTED);\r\n\t\t\t});\r\n\r\n\t\t\t_hub.on(HubEvents.IMAGE_SOURCE_DISCONNECTED, () => {\r\n\t\t\t\tthis.setSourceState(ScannerState.DISCONNECTED);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Stop the connection\r\n\t */\r\n\tpublic stop = (): Promise<boolean> => new Promise((resolve) => {\r\n\t\tthis.release()\r\n\t\t\t.then(() => this._connection ? this._connection.stop() : undefined)\r\n\t\t\t.then(() => resolve(true));\r\n\t})\r\n\r\n\t/**\r\n\t * Try registering the scanner\r\n\t */\r\n\tpublic tryRegistering = (platform: string | undefined = this._journeyDefinitionId, journeyId: string | undefined = this._journeyId) => new Promise((resolve, reject) => {\r\n\r\n\t\t// will send MetaData for first request(Identity front)\r\n\t\tlet metaData: any[] = [];\r\n\t\tif (JourneyManager.mode === Mode.WEB) {\r\n\t\t\tmetaData = [{\r\n\t\t\t\tname: 'Channel', // Mobile, Web, or Capture Studio\r\n\t\t\t\tvalue: 'Web',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Web Sdk Version', // Version Number of WEB SDK\r\n\t\t\t\tvalue: VERSION,\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Platform', // Windows, MacOS, Android, iOS, Linux, etc\r\n\t\t\t\tvalue: osName,\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Platform Version', // The version number of the above-mentioned platform\r\n\t\t\t\tvalue: osVersion,\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Browser', // Chrome, Safari, etc\r\n\t\t\t\tvalue: browserName,\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Browser Version', // Browser version\r\n\t\t\t\tvalue: fullBrowserVersion,\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}];\r\n\t\t} else if (JourneyManager.mode === Mode.CAPTURESTUDIO) {\r\n\t\t\tmetaData = [{\r\n\t\t\t\tname: 'Platform', // Windows, MacOS, Android, iOS, Linux, etc\r\n\t\t\t\tvalue: osName,\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Platform Version', // The version number of the above-mentioned platform\r\n\t\t\t\tvalue: osVersion,\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Browser', // Chrome, Safari, etc\r\n\t\t\t\tvalue: browserName,\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Browser Version', // Browser version\r\n\t\t\t\tvalue: fullBrowserVersion,\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}];\r\n\t\t}\r\n\r\n\t\tif (this._hub) {\r\n\t\t\treturn this._hub.invoke(HubActions.REGISTER_AND_OCCUPY_SCANNER, { platform, deviceId: '0', metaData, journeyId })\r\n\t\t\t\t.then(this.setState)\r\n\t\t\t\t.then(resolve);\r\n\t\t} else {\r\n\t\t\treturn reject();\r\n\t\t}\r\n\t})\r\n\r\n\tpublic setScannerTriggerMode = (state: string | undefined) => new Promise((resolve, reject) => {\r\n\t\tif (this._hub) {\r\n\t\t\treturn this._hub.invoke(HubActions.SET_SCANNER_TRIGGER_MODE, 'trigger', state)\r\n\t\t\t\t.then(resolve);\r\n\t\t} else {\r\n\t\t\treturn reject();\r\n\t\t}\r\n\t})\r\n\r\n\tpublic resetTerminal = () => new Promise((resolve, reject) => {\r\n\t\tif (this._hub && this._state !== 4) {\r\n\t\t\treturn this._hub.invoke(HubActions.RESET).then(resolve);\r\n\t\t} else {\r\n\t\t\treturn reject();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Set scan process\r\n\t * @param process\r\n\t */\r\n\tprivate setScanProcess = (process: ScanProcess) => {\r\n\t\tthis._scannerState.scanProcess = process;\r\n\r\n\t\treturn this.pushState();\r\n\t}\r\n\r\n\t/**\r\n\t * Set source state to be either busy, connected, or disconnected\r\n\t * @param sourceState\r\n\t */\r\n\tprivate setSourceState = (sourceState: ScannerState) => {\r\n\t\tthis._scannerState.state = sourceState;\r\n\t\tthis.pushState();\r\n\t}\r\n\r\n\t/**\r\n\t * Set state of the connection and push the change\r\n\t * @param state\r\n\t */\r\n\tprivate setState = (state: any): void => {\r\n\t\tthis._scannerState.state = this._scannerState.state;\r\n\t\tthis._scannerState.error = state.failReason && state.failReason !== 'None' ? state.failReason : undefined;\r\n\t\tthis._scannerState.connected = state.isOccupiedSuccessfully && state.scannerInfo.isConnected;\r\n\r\n\t\tif (this._scannerState.state === undefined && this._scannerState.error === undefined && this._scannerState.connected === true) {\r\n\t\t\tthis._scannerState.state = ScannerState.CONNECTED;\r\n\t\t}\r\n\r\n\t\tthis.pushState();\r\n\t}\r\n\r\n\t/**\r\n\t * Check the difference and if different, publish the scan state event\r\n\t */\r\n\tprivate pushState = (): Promise<void> => new Promise((resolve) => {\r\n\t\tif (JSON.stringify(this._scannerState) !== JSON.stringify(this._oldScannerState)) {\r\n\t\t\tthis.emit(SocketEvents.UPDATE, this._scannerState);\r\n\t\t}\r\n\r\n\t\tthis._oldScannerState = Object.assign({}, this._scannerState);\r\n\r\n\t\treturn resolve();\r\n\t})\r\n\r\n\t/**\r\n\t * Call the register method after the scan round is finished\r\n\t*/\r\n\tprivate turnOffAutoTriggerMode = (): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (this._state !== 4) {\r\n\t\t\treturn this.setScannerTriggerMode('false')\r\n\t\t\t\t.then(() => resolve());\r\n\t\t} else {\r\n\t\t\treturn reject();\r\n\t\t}\r\n\r\n\t})\r\n\r\n}\r\n\r\nexport default new SocketService();\r\n","module.exports = \"<h2 class=\\\"section-title\\\">{{PROVIDER_TITLE_CROPPER}}</h2>\\r\\n<div class=\\\"info-container\\\">\\r\\n\\t<p class=\\\"info-item journey-state\\\">\\r\\n\\t\\t<span class=\\\"info-item__name\\\">{{INFO_JOURNEY_STATE}}</span>\\r\\n\\t\\t<span data-jcs-element=\\\"info__journey__state\\\" class=\\\"info-item__value\\\">...</span>\\r\\n\\t</p>\\r\\n\\t<p class=\\\"info-item journey-action\\\">\\r\\n\\t\\t<span class=\\\"info-item__name\\\">{{INFO_JOURNEY_ACTION}}</span>\\r\\n\\t\\t<span data-jcs-element=\\\"info__journey__action\\\" class=\\\"info-item__value\\\">...</span>\\r\\n\\t</p>\\r\\n\\t<p class=\\\"info-item journey-action-attempt\\\">\\r\\n\\t\\t<span class=\\\"info-item__name\\\">{{INFO_JOURNEY_ACTION_ATTEMPT}}</span>\\r\\n\\t\\t<span data-jcs-element=\\\"info__journey__action__attempt\\\" class=\\\"info-item__value\\\">...</span>\\r\\n\\t</p>\\r\\n</div>\\r\\n<div class=\\\"cropper--container\\\">\\r\\n\\t<canvas data-jcs-element=\\\"cropper__canvas\\\" class=\\\"cropper\\\"></canvas>\\r\\n</div>\\r\\n<form class=\\\"button-container\\\">\\r\\n\\t<input data-jcs-element=\\\"cropper__retry\\\" class=\\\"button button--secondary\\\" type=\\\"button\\\" value=\\\"{{CROPPER_RETRY}}\\\" />\\r\\n\\t<input data-jcs-element=\\\"cropper__submit\\\" class=\\\"button button--primary\\\" type=\\\"button\\\" value=\\\"{{CROPPER_UPLOAD}}\\\" />\\r\\n</form>\\r\\n<div data-jcs-element=\\\"cropper__status\\\">\\r\\n\\t<p data-jcs-element=\\\"cropper__status__message\\\"></p>\\r\\n</div>\\r\\n\";","module.exports = \"<h2 class=\\\"section-title\\\">{{PROVIDER_TITLE_JOURNEY_SELECT}}</h2>\\r\\n<div class=\\\"journey-select--choices\\\">\\r\\n\\t<select class=\\\"journey-choice\\\" data-jcs-element=\\\"journey-select__choices\\\"></select>\\r\\n</div>\\r\\n<form class=\\\"button-container\\\">\\r\\n\\t<input data-jcs-element=\\\"journey-select__continue\\\" class=\\\"button button--primary\\\" type=\\\"button\\\"\\r\\n\\t\\tvalue=\\\"{{JOURNEY_SELECT_CONTINUE}}\\\" />\\r\\n</form>\\r\\n\";","/**\r\n * An event which can occur during the lifetime of the Journey.\r\n *\r\n * @public\r\n */\r\nexport enum JourneyEvent {\r\n\t/**\r\n\t * Triggered when the authentication state in the SDK has changed.\r\n\t */\r\n\tAUTH_CHANGE = 'AUTH:CHANGE',\r\n\r\n\t/**\r\n\t * Triggered when there is a camera change, and due to this change the canvas displaying the image is resized.\r\n\t */\r\n\tCAMERA_CANVAS_RESIZE = 'CAMERA:CANVAS_RESIZE',\r\n\r\n\t/**\r\n\t * Triggered when the camera choice has been changed by the user.\r\n\t */\r\n\tCAMERA_CHANGE = 'CAMERA:CHANGE',\r\n\r\n\t/**\r\n\t * Triggered when the camera action has finished and has been closed.\r\n\t */\r\n\tCAMERA_DONE = 'CAMERA:DONE',\r\n\r\n\t/**\r\n\t * Triggered when the camera action has been paused remotely.\r\n\t */\r\n\tCAMERA_PAUSE = 'CAMERA:PAUSE',\r\n\r\n\t/**\r\n\t * Triggered when the service requires the user to pose for the camera. This\r\n\t * will usually trigger several times in succession with different poses for\r\n\t * the user to act upon.\r\n\t */\r\n\tCAMERA_POSE = 'CAMERA:POSE',\r\n\r\n\t/**\r\n\t * Triggered when the camera and service are ready to begin. Clicking the\r\n\t * `retina__start` button will begin the next section of the journey.\r\n\t */\r\n\tCAMERA_READY = 'CAMERA:READY',\r\n\r\n\t/**\r\n\t * Triggered when the user clicks the `retina__start` button and\r\n\t * transmission of frames to the remote server has begun.\r\n\t */\r\n\tCAMERA_START = 'CAMERA:START',\r\n\r\n\t/**\r\n\t * Triggered when the camera session has stopped.\r\n\t */\r\n\tCAMERA_STOP = 'CAMERA:STOP',\r\n\r\n\t/**\r\n\t * Triggered when the camera session has feedback to provide such as an\r\n\t * image being captured, or the service rejecting an image.\r\n\t */\r\n\tCAMERA_FEEDBACK = 'CAMERA:FEEDBACK',\r\n\r\n\t/**\r\n\t * Triggered when the observed capabilities of the devices found on this\r\n\t * system have been updated. Note that they may not have changed, the data\r\n\t * has just been refreshed when this has been triggered.\r\n\t */\r\n\tCAMERA_CAPABILITIES_UPDATED = 'CAMERA:CAPABILITIES_UPDATED',\r\n\r\n\t/**\r\n\t * Triggered when the input provider has been changed and the new UI has\r\n\t * been rendered to the specified container.\r\n\t */\r\n\tDISPLAY_PROVIDER = 'DISPLAY:PROVIDER',\r\n\r\n\t/**\r\n\t * Triggered when the input provider has been changed and the new UI has\r\n\t * been rendered to the specified container.\r\n\t */\r\n\tDISPLAY_INFO = 'DISPLAY:INFO',\r\n\r\n\t/**\r\n\t * Triggered when the current step in the journey has changed and the new UI\r\n\t * has been rendered to the specified container.\r\n\t */\r\n\tDISPLAY_STEP = 'DISPLAY:STEP',\r\n\r\n\t/**\r\n\t * Triggered when an error has occurred in the SDK. This can be triggered\r\n\t * for both fatal and recoverable exceptions.\r\n\t */\r\n\tERROR = 'ERROR',\r\n\r\n\t/**\r\n\t * Triggered when the current journey has been cancelled.\r\n\t */\r\n\tJOURNEY_CANCEL = 'JOURNEY:CANCEL',\r\n\r\n\t/**\r\n\t * Triggered when the state of the current journey has been cleared/reset.\r\n\t */\r\n\tJOURNEY_CLEAR = 'JOURNEY:CLEAR',\r\n\r\n\t/**\r\n\t * Triggered when the journey has ended naturally.\r\n\t */\r\n\tJOURNEY_END = 'JOURNEY:END',\r\n\r\n\t/**\r\n\t * Triggered when the journey has progressed.\r\n\t */\r\n\tJOURNEY_PROGRESS = 'JOURNEY:PROGRESS',\r\n\r\n\t/**\r\n\t * Triggered when the journey has started.\r\n\t */\r\n\tJOURNEY_START = 'JOURNEY:START',\r\n\r\n\t/**\r\n\t * Triggered when the scanner has a result. It is accompanied with the\r\n\t * results of the scan in the event.\r\n\t */\r\n\tSCANNER_RESULT = 'SCANNER:RESULT',\r\n\r\n\t/**\r\n\t * Triggered when the scanner has an update such as a scan beginning, or\r\n\t * processing beginning on a captured image.\r\n\t */\r\n\tSCANNER_UPDATE = 'SCANNER:UPDATE',\r\n\r\n\t/**\r\n\t * Triggered when a file transfer has completed successfully. This can\r\n\t * trigger for any file transfer including templates requested over the\r\n\t * network and file uploads. The name specified when the request was made\r\n\t * will be specified.\r\n\t */\r\n\tTRANSFER_COMPLETE = 'TRANSFER:COMPLETE',\r\n\r\n\t/**\r\n\t * Triggered when a file transfer has failed during transit. This can\r\n\t * trigger for any file transfer including templates requested over the\r\n\t * network and file uploads. The name specified when the request was made\r\n\t * will be specified.\r\n\t */\r\n\tTRANSFER_FAILED = 'TRANSFER:FAILED',\r\n\r\n\t/**\r\n\t * Triggered when there has been progress in a file transfer. The values\r\n\t * will be from 0-50 during the upload phase, and 50-100 during the download\r\n\t * phase. This can trigger for any file transfer including templates\r\n\t * requested over the network and file uploads. The name specified when the\r\n\t * request was made will be specified.\r\n\t */\r\n\tTRANSFER_PROGRESS = 'TRANSFER:PROGRESS',\r\n\r\n\t/**\r\n\t * Triggered when a file transfer has started. This can trigger for any file\r\n\t * transfer including templates requested over the network and file uploads.\r\n\t * The name specified when the request was made will be specified.\r\n\t */\r\n\tTRANSFER_STARTED = 'TRANSFER:STARTED',\r\n\t/**\r\n\t * Triggered when the liveness is processing.\r\n\t */\r\n\tLIVENESS_PROCESSING = 'LIVENESS:PROCESSING',\r\n\r\n\t/**\r\n\t * Triggered when Passive Liveness response has been received.\r\n\t */\r\n\tPASSIVE_LIVENESS_FINISHED = 'PASSIVE_LIVENESS:FINISHED',\r\n\t/**\r\n\t * Triggered when the liveness processing has finished.\r\n\t */\r\n\tLIVENESS_FINISHED = 'LIVENESS:FINISHED',\r\n\t/**\r\n\t * Triggered when the covid processing has finished.\r\n\t */\r\n\tCOVID_FINISHED = 'COVID:FINISHED',\r\n\t/**\r\n\t * Activity History Check finished.\r\n\t */\r\n\tDATACHECKS_FINISHED = 'DATACHECKS:FINISHED',\r\n}\r\n","/**\r\n * Type for ImageFormat\r\n *\r\n * @public\r\n */\r\nexport enum ImageFormat {\r\n\tBmp = 'bmp',\r\n\tJpeg = 'jpeg',\r\n\tJpg = 'jpg',\r\n\tPng = 'png',\r\n\tPdf = 'pdf',\r\n}\r\n","import CancellationToken from \"cancellationtoken\";\r\n\r\nexport const wait = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\nexport const retryOperation = <T = any>(operation: () => Promise<T>, delay: number, times: number): Promise<T> => new Promise((resolve, reject) => {\r\n\treturn operation()\r\n\t\t.then(resolve)\r\n\t\t.catch((reason: any) => {\r\n\t\t\tif (reason === false) {\r\n\t\t\t\treturn reject(reason);\r\n\t\t\t} else if (times - 1 > 0) {\r\n\t\t\t\treturn wait(delay)\r\n\t\t\t\t\t.then(retryOperation.bind(null, operation, delay, times - 1))\r\n\t\t\t\t\t.then(resolve as () => T)\r\n\t\t\t\t\t.catch(reject);\r\n\t\t\t}\r\n\t\t\treturn reject(reason);\r\n\t\t});\r\n});\r\n\r\nexport const retryOperationWithTimeout = <T = any>(operation: () => Promise<T>, delay: number, expiryTime: Date, cancellationToken: CancellationToken): Promise<T> => new Promise((resolve, reject) => {\r\n\tif (!cancellationToken.isCancelled) {\r\n\t\treturn operation()\r\n\t\t\t.then(resolve)\r\n\t\t\t.catch((reason: any) => {\r\n\t\t\t\tconst currentTime = new Date();\r\n\t\t\t\tif (reason === false) {\r\n\t\t\t\t\treturn reject(reason);\r\n\t\t\t\t} else if (currentTime < expiryTime) {\r\n\t\t\t\t\treturn wait(delay)\r\n\t\t\t\t\t\t.then(retryOperationWithTimeout.bind(null, operation, delay, expiryTime, cancellationToken))\r\n\t\t\t\t\t\t.then(resolve as () => T)\r\n\t\t\t\t\t\t.catch(reject);\r\n\t\t\t\t}\r\n\t\t\t\treturn reject(reason);\r\n\t\t\t});\r\n\t} else {\r\n\t\treject(cancellationToken.reason);\r\n\t}\r\n});\r\n","import { ImageFormat } from '../../idscan/enums/ImageFormat';\r\nimport { TranslationKey } from '../../idscan/enums/Translation';\r\nimport { IBase64Components } from '../interfaces/Images';\r\nimport { ExceptionManager } from './ExceptionManager';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class ImageService {\r\n\t/**\r\n\t * Base method that takes a blob and encodes it, then resolves a string.\r\n\t * @param blob: Blob\r\n\t */\r\n\tpublic static convert(blob: Blob): Promise<any> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.readAsDataURL(blob);\r\n\t\t\treader.onerror = (error) => {\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.PlatformException(TranslationKey.EXCEPTION_PLATFORM_UNSUPPORTED));\r\n\t\t\t};\r\n\t\t\treader.onload = () => {\r\n\t\t\t\tresolve(reader.result);\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Get the ImageFormat from the specified MIME Type\r\n\t * @param mime - The MIME type to extract form\r\n\t */\r\n\tpublic static resolveImageFormat(mime: string): ImageFormat {\r\n\t\tconst [, subtype] = mime.split('/');\r\n\r\n\t\treturn subtype as ImageFormat;\r\n\t}\r\n\r\n\t/**\r\n\t * Extract the elements of the base64 string\r\n\t *\r\n\t * @param str - The string to process\r\n\t */\r\n\tpublic static getBase64Components(str: string): IBase64Components {\r\n\t\tconst [contentType = '', content = ''] = str.split(';');\r\n\t\tconst [, type] = contentType.split(':');\r\n\t\tconst [, data] = content.split(',');\r\n\r\n\t\treturn { type: ImageService.resolveImageFormat(type), data };\r\n\t}\r\n\r\n\t/**\r\n\t * Remap the names of an IBase64Component object for server consumption\r\n\t *\r\n\t * @param param0 - The type to remap\r\n\t */\r\n\tpublic static remapNames({ data, type: imageFormat }: IBase64Components) {\r\n\t\treturn { data, imageFormat };\r\n\t}\r\n}\r\n","/*\r\n * Created by: IDScan @ 14-12-2015\r\n * Last Updated by: Degree 53 @ 15-05-2019\r\n * Version 1.1.0\r\n */\r\n\r\n// tslint:disable: array-type\r\n\r\nexport interface ICroppyOptions {\r\n\timageSrc: string;\r\n\tmagnifierCanvasId: string;\r\n\tselection: {\r\n\t\tcoordsTextColor: string,\r\n\t\thighlightColor: string,\r\n\t\tlineColor: string,\r\n\t};\r\n\tshowCornersAlways: boolean;\r\n\ttargetCanvasId: string;\r\n\tpadding: number;\r\n}\r\n\r\ninterface IWorkspace {\r\n\theight: number;\r\n\theightFactor: number;\r\n\twidth: number;\r\n\twidthFactor: number;\r\n}\r\n\r\nconst defaults: ICroppyOptions = {\r\n\timageSrc: '',\r\n\tmagnifierCanvasId: '',\r\n\tselection: {\r\n\t\tcoordsTextColor: '#005EA5',\r\n\t\thighlightColor: '#f00',\r\n\t\tlineColor: '#000',\r\n\t},\r\n\tshowCornersAlways: true,\r\n\ttargetCanvasId: '',\r\n\tpadding: 0,\r\n};\r\n\r\nexport class Croppy {\r\n\tpublic static getFloat = (value: number) => {\r\n\t\treturn parseFloat(value.toFixed(3));\r\n\t}\r\n\r\n\tpublic static getOffset = (el: HTMLElement) => {\r\n\t\tconst rect = el.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\tleft: rect.left + document.body.scrollLeft,\r\n\t\t\ttop: rect.top + document.body.scrollTop,\r\n\t\t};\r\n\t}\r\n\r\n\tprivate static normalize = (value: number, min: number, max: number) => Math.min(max, Math.max(min, value));\r\n\r\n\tprivate static between = (value: number, min: number, max: number) => value >= min && value <= max;\r\n\r\n\tprivate options: ICroppyOptions;\r\n\r\n\tprivate $targetCanvas: HTMLCanvasElement;\r\n\tprivate targetCanvasContext: CanvasRenderingContext2D;\r\n\tprivate $magnifier: HTMLCanvasElement | null;\r\n\tprivate magnifierContext: CanvasRenderingContext2D | null;\r\n\r\n\tprivate image?: HTMLImageElement;\r\n\tprivate workspace: IWorkspace = {\r\n\t\theight: 0,\r\n\t\theightFactor: 0,\r\n\t\twidth: 0,\r\n\t\twidthFactor: 0,\r\n\t};\r\n\tprivate selectionArea!: SelectionArea;\r\n\tprivate rotationDegrees = 0;\r\n\tprivate off = 10;\r\n\tprivate zs = 10;\r\n\tprivate magSZ = this.off * this.zs;\r\n\tprivate mouseDragging = false;\r\n\tprivate isInTouchMode = false;\r\n\r\n\tprivate cursorDraggingIcon = 'grabbing';\r\n\tprivate cursorIcon = 'grab';\r\n\r\n\tconstructor(options: Partial<ICroppyOptions>) {\r\n\t\tthis.options = Object.assign({}, defaults, options);\r\n\r\n\t\tthis.$targetCanvas = document.getElementById(this.options.targetCanvasId) as HTMLCanvasElement;\r\n\t\tthis.targetCanvasContext = this.$targetCanvas.getContext('2d') as CanvasRenderingContext2D;\r\n\t\tthis.$magnifier = document.getElementById(this.options.magnifierCanvasId) as HTMLCanvasElement;\r\n\t\tthis.magnifierContext = this.$magnifier ? this.$magnifier.getContext('2d') : null;\r\n\t}\r\n\r\n\tpublic init = (selectionAreaPoints: Array<Array<number>>, areOriginalCoords: boolean) => {\r\n\t\tthis.image = new Image();\r\n\r\n\t\tthis.image.onload = () => {\r\n\t\t\tthis.setWorkspace();\r\n\r\n\t\t\tselectionAreaPoints = (selectionAreaPoints && (selectionAreaPoints.length > 0) ? selectionAreaPoints : null) as any;\r\n\t\t\tthis.setSelectionAreaValues(selectionAreaPoints, areOriginalCoords);\r\n\r\n\t\t\tthis.drawScene();\r\n\t\t};\r\n\r\n\t\tthis.image.src = this.options.imageSrc;\r\n\r\n\t\tthis.setCursor(false);\r\n\r\n\t\tthis.setEvents();\r\n\t}\r\n\r\n\tpublic crop = (elementContainerId: string) => {\r\n\t\tconst tempCanvas = document.createElement('canvas');\r\n\t\ttempCanvas.width = this.$targetCanvas.width;\r\n\t\ttempCanvas.height = this.$targetCanvas.height;\r\n\r\n\t\tthis.drawScene(true);\r\n\r\n\t\tconst tCtx = tempCanvas.getContext('2d')!;\r\n\t\tthis.drawPath(tCtx);\r\n\t\ttCtx.clip();\r\n\t\ttCtx.drawImage(this.$targetCanvas, 0, 0);\r\n\t\ttCtx.restore();\r\n\t\tthis.drawScene();\r\n\r\n\t\tconst element = document.getElementById(elementContainerId)!;\r\n\t\tArray.from(element.children).forEach((el) => element.removeChild(el));\r\n\t\telement.append(tempCanvas);\r\n\t}\r\n\r\n\tpublic getOriginalSelectionAreaPoints = (): { points: Array<Array<number>>, rotation: number } => {\r\n\t\tconst points = [];\r\n\t\tlet x;\r\n\t\tlet y;\r\n\r\n\t\tfor (let i = 0; i < this.selectionArea.points.length; i++) {\r\n\t\t\tx = this.selectionArea.points[i][0];\r\n\t\t\ty = this.selectionArea.points[i][1];\r\n\r\n\t\t\tx = x / this.workspace.widthFactor;\r\n\t\t\ty = y / this.workspace.heightFactor;\r\n\r\n\t\t\tx = Croppy.getFloat(x);\r\n\t\t\ty = Croppy.getFloat(y);\r\n\r\n\t\t\t//points.push([x, y]);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tpoints,\r\n\t\t\trotation: Croppy.getFloat(this.rotationDegrees)\r\n\t\t};\r\n\t}\r\n\r\n\tpublic getSelectionAreaPoints = () => {\r\n\t\treturn [this.selectionArea.points, this.rotationDegrees];\r\n\t}\r\n\r\n\tpublic rotate = (degrees: number) => {\r\n\t\tthis.rotationDegrees = degrees;\r\n\t\tthis.rotateCanvas(this.targetCanvasContext);\r\n\t\tthis.drawSelectionArea();\r\n\t}\r\n\r\n\tprivate setWorkspace = () => {\r\n\t\tif (!this.image) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!this.$targetCanvas.getAttribute('width')) {\r\n\t\t\tthis.workspace.width = this.image.width;\r\n\t\t} else {\r\n\t\t\tthis.workspace.width = parseInt(this.$targetCanvas.getAttribute('width')!, 10);\r\n\t\t}\r\n\r\n\t\tif (!this.$targetCanvas.getAttribute('height')) {\r\n\t\t\tconst ratio = this.image.width / this.image.height;\r\n\t\t\tthis.workspace.height = this.workspace.width / ratio;\r\n\t\t} else {\r\n\t\t\tthis.workspace.height = parseInt(this.$targetCanvas.getAttribute('height')!, 10);\r\n\t\t}\r\n\r\n\t\tconst widthWithPadding = this.workspace.width;\r\n\t\tconst heightWithPadding = this.workspace.height;\r\n\r\n\t\tthis.workspace.widthFactor = (this.workspace.width / this.image.width);\r\n\t\tthis.workspace.heightFactor = (this.workspace.height / this.image.height);\r\n\r\n\t\tthis.$targetCanvas.setAttribute('width', widthWithPadding.toString());\r\n\t\tthis.$targetCanvas.setAttribute('height', heightWithPadding.toString());\r\n\r\n\t\tif (this.$magnifier) {\r\n\t\t\tthis.$magnifier.setAttribute('width', this.magSZ.toString());\r\n\t\t\tthis.$magnifier.setAttribute('height', this.magSZ.toString());\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setSelectionAreaValues = (pts: Array<Array<number>>, areOriginalCoords: boolean) => {\r\n\t\tif (pts) {\r\n\t\t\tthis.selectionArea = new SelectionArea({\r\n\t\t\t\tpts,\r\n\t\t\t\tareOriginalCoords,\r\n\t\t\t\toptions: this.options,\r\n\t\t\t\tworkspace: this.workspace,\r\n\t\t\t\ttargetCanvas: this.$targetCanvas\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.selectionArea = new SelectionArea({\r\n\t\t\t\tpts: this.initSelectAreaPoints(this.workspace.width, this.workspace.height),\r\n\t\t\t\tareOriginalCoords: false,\r\n\t\t\t\toptions: this.options,\r\n\t\t\t\tworkspace: this.workspace,\r\n\t\t\t\ttargetCanvas: this.$targetCanvas\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onTouchStart = (e: TouchEvent) => {\r\n\t\tif (this.pointerDownFunc(e)) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tthis.isInTouchMode = true;\r\n\r\n\t\t\tthis.$targetCanvas.addEventListener('touchmove', this.onMove, { passive: true });\r\n\t\t\tthis.$targetCanvas.addEventListener('touchend', this.onTouchEnd, { passive: true });\r\n\t\t\tthis.$targetCanvas.addEventListener('touchcancel', this.onTouchEnd, { passive: true });\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onTouchEnd = (e: TouchEvent) => {\r\n\t\tthis.pointerUpFunc(e);\r\n\r\n\t\tthis.$targetCanvas.removeEventListener('touchmove', this.onMove);\r\n\t\tthis.$targetCanvas.removeEventListener('touchend', this.onTouchEnd);\r\n\t\tthis.$targetCanvas.removeEventListener('touchcancel', this.onTouchEnd);\r\n\t}\r\n\r\n\tprivate onMouseDown = (e: MouseEvent) => {\r\n\t\tif (this.pointerDownFunc(e)) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tthis.isInTouchMode = false;\r\n\r\n\t\t\tthis.$targetCanvas.addEventListener('mousemove', this.onMove, { passive: true });\r\n\t\t\tthis.$targetCanvas.addEventListener('mouseup', this.onMouseUp, { passive: true });\r\n\t\t\tthis.$targetCanvas.addEventListener('mouseout', this.onMouseUp, { passive: true });\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onMouseUp = (e: MouseEvent) => {\r\n\t\tthis.pointerUpFunc(e);\r\n\r\n\t\tthis.$targetCanvas.removeEventListener('mousemove', this.onMove);\r\n\t\tthis.$targetCanvas.removeEventListener('mouseup', this.onMouseUp);\r\n\t\tthis.$targetCanvas.removeEventListener('mouseout', this.onMouseUp);\r\n\t}\r\n\r\n\tprivate onMove = (e: TouchEvent | MouseEvent) => {\r\n\t\tconst target = e.target as HTMLCanvasElement;\r\n\t\tconst { clientX, clientY } = this.getPointerLocation(e);\r\n\t\tconst { x, y } = this.getRelativeTouchPosition(target, clientX, clientY);\r\n\r\n\t\treturn this.moveCubes(Croppy.normalize(x, 0, target.width), Croppy.normalize(y, 0, target.height));\r\n\t}\r\n\r\n\tprivate getRelativeTouchPosition = (target: HTMLCanvasElement, clientX: number, clientY: number) => {\r\n\t\tlet containerRect = target.getClientRects()[0];\r\n\t\tif (containerRect == undefined) {\r\n\t\t\tcontainerRect = new DOMRect();\r\n\t\t}\r\n\t\tconst rect = this.getTargetActualSize(true, containerRect.width, containerRect.height, target.width, target.height);\r\n\t\tconst scale = this.getTargetScale();\r\n\r\n\t\treturn {\r\n\t\t\tx: (clientX - containerRect.left - rect.x) * scale.scaleX,\r\n\t\t\ty: (clientY - containerRect.top - rect.y) * scale.scaleY\r\n\t\t};\r\n\t}\r\n\r\n\tprivate setEvents = () => {\r\n\t\tthis.$targetCanvas.addEventListener('touchstart', this.onTouchStart);\r\n\t\tthis.$targetCanvas.addEventListener('mousedown', this.onMouseDown);\r\n\r\n\t\t// Watch to see if the canvas is resized and repaint if it is\r\n\t\tif (typeof (window as any).ResizeObserver === 'function') {\r\n\t\t\tnew (window as any).ResizeObserver(() => this.drawScene())\r\n\t\t\t\t.observe(this.$targetCanvas);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getPointerLocation = (e: TouchEvent | MouseEvent) => {\r\n\t\tif (e instanceof TouchEvent) {\r\n\t\t\tconst { clientX, clientY } = e.touches[0];\r\n\t\t\treturn { clientX, clientY };\r\n\t\t} else if (e instanceof MouseEvent) {\r\n\t\t\tconst { clientX, clientY } = e;\r\n\t\t\treturn { clientX, clientY };\r\n\t\t} else {\r\n\t\t\treturn { clientX: 0, clientY: 0 };\r\n\t\t}\r\n\t}\r\n\r\n\tprivate pointerDownFunc = (e: TouchEvent | MouseEvent) => {\r\n\t\tconst { clientX, clientY } = this.getPointerLocation(e);\r\n\t\tconst target = e.target as HTMLCanvasElement;\r\n\t\tconst { x, y } = this.getRelativeTouchPosition(target, clientX, clientY);\r\n\t\tconst pointer = this.getPointUnderCursor(x, y);\r\n\r\n\t\tif (pointer) {\r\n\t\t\tthis.selectionArea.hovering[pointer.index] = true;\r\n\t\t\tthis.selectionArea.dragging[pointer.index] = true;\r\n\t\t\tthis.mouseDragging = true;\r\n\t\t\tthis.drawScene();\r\n\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate pointerUpFunc = (e: TouchEvent | MouseEvent) => {\r\n\t\t// Set all the drag statuses to false\r\n\t\tfor (let i = 0; i < this.selectionArea.points.length; i++) {\r\n\t\t\tthis.mouseDragging = false;\r\n\t\t\tthis.selectionArea.dragging[i] = false;\r\n\t\t\tthis.selectionArea.hovering[i] = false;\r\n\t\t}\r\n\r\n\t\t// Clear the magnified view\r\n\t\tif (this.magnifierContext) {\r\n\t\t\tthis.magnifierContext.clearRect(0, 0, this.magSZ, this.magSZ);\r\n\t\t}\r\n\r\n\t\tthis.drawScene();\r\n\t}\r\n\r\n\tprivate getPointUnderCursor = (xPos: number, yPos: number): { index: number; x: number; y: number; } | undefined => {\r\n\t\t// Calculate the position of the mouse on the canvas\r\n\t\tconst mouseX = Croppy.normalize(Math.floor(xPos), 0, this.workspace.width);\r\n\t\tconst mouseY = Croppy.normalize(Math.floor(yPos), 0, this.workspace.height);\r\n\r\n\t\t// Hovering over resize cubes\r\n\t\tif (this.selectionArea) {\r\n\t\t\tconst scale = this.getTargetScale();\r\n\r\n\t\t\tfor (let i = 0; i < this.selectionArea.points.length; i++) {\r\n\t\t\t\tconst x = this.selectionArea.points[i][0];\r\n\t\t\t\tconst y = this.selectionArea.points[i][1];\r\n\r\n\t\t\t\tconst sx = this.selectionArea.cSizeH * scale.scaleX;\r\n\t\t\t\tconst sy = this.selectionArea.cSizeH * scale.scaleY;\r\n\r\n\t\t\t\tif (Croppy.between(mouseX, (x - sx), (x + sx)) && Croppy.between(mouseY, (y - sy), (y + sy))) {\r\n\t\t\t\t\treturn { index: i, x, y };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tprivate moveCubes = (x: number, y: number) => {\r\n\t\tconst draggingPointerIndex = this.selectionArea.dragging.indexOf(true);\r\n\r\n\t\t// Hovering over resize cubes\r\n\t\tif (draggingPointerIndex >= 0) {\r\n\t\t\tif (this.selectionArea.hovering[draggingPointerIndex]) {\r\n\t\t\t\tthis.selectionArea.dragging[draggingPointerIndex] = this.selectionArea.hovering[draggingPointerIndex];\r\n\t\t\t}\r\n\r\n\t\t\tif (this.selectionArea.dragging[draggingPointerIndex]) {\r\n\t\t\t\tthis.selectionArea.points[draggingPointerIndex][0] = x;\r\n\t\t\t\tthis.selectionArea.points[draggingPointerIndex][1] = y;\r\n\t\t\t}\r\n\r\n\t\t\tthis.drawScene();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate setCursor = (isDragging: boolean) => {\r\n\t\tif (isDragging) {\r\n\t\t\tthis.$targetCanvas.style.cursor = this.cursorDraggingIcon;\r\n\t\t} else {\r\n\t\t\tthis.$targetCanvas.style.cursor = this.cursorIcon;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate drawPath = (context: CanvasRenderingContext2D) => {\r\n\t\tcontext.beginPath();\r\n\r\n\t\tfor (let i = 0; i < this.selectionArea.points.length; i++) {\r\n\t\t\tconst x = parseInt(String(this.selectionArea.points[i][0]).trim(), 10);\r\n\t\t\tconst y = parseInt(String(this.selectionArea.points[i][1]).trim(), 10);\r\n\r\n\t\t\tif (i === 0) {\r\n\t\t\t\tcontext.moveTo(x, y);\r\n\t\t\t} else {\r\n\t\t\t\tcontext.lineTo(x, y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcontext.closePath();\r\n\t}\r\n\r\n\tprivate rotateCanvas = (context: CanvasRenderingContext2D) => {\r\n\r\n\t\tconst canvas = context.canvas;\r\n\r\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t// save the un-rotated context of the canvas so we can restore it later\r\n\t\t// the alternative is to un-translate & un-rotate after drawing\r\n\t\tcontext.save();\r\n\r\n\t\tconst centerX = canvas.width / 2;\r\n\t\tconst centerY = canvas.height / 2;\r\n\r\n\t\t// move to the center of the canvas\r\n\t\tcontext.translate(centerX, centerY);\r\n\r\n\t\t// rotate the canvas to the specified degrees\r\n\t\tcontext.rotate(this.rotationDegrees * Math.PI / 180);\r\n\r\n\t\t// draw the image\r\n\t\t// since the context is rotated, the image will be rotated also\r\n\t\tcontext.drawImage(this.image!, -centerX, -centerY, this.workspace.width, this.workspace.height);\r\n\r\n\t\t// we're done with the rotating so restore the un-rotated context\r\n\t\tcontext.restore();\r\n\t}\r\n\r\n\tprivate initSelectAreaPoints = (width: number, height: number) => {\r\n\t\tconst x1 = 0;\r\n\t\tconst y1 = 0;\r\n\t\tconst x2 = width;\r\n\t\tconst y2 = height;\r\n\r\n\t\treturn [[x1, y1], [x1, y2], [x2, y2], [x2, y1]];\r\n\t}\r\n\r\n\tprivate drawSelectionArea = () => {\r\n\r\n\t\tif (!this.selectionArea) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setDynamicLineWidth();\r\n\r\n\t\tconst scale = this.getTargetScale();\r\n\r\n\t\tconst sx = this.selectionArea.cSize * scale.scaleX;\r\n\t\tconst sy = this.selectionArea.cSize * scale.scaleY;\r\n\r\n\t\tlet drawn = false;\r\n\t\tlet draggedCubeFound = !this.mouseDragging;\r\n\r\n\t\t// Draw grip cubes\r\n\t\tfor (let i = 0; i < this.selectionArea.points.length; i++) {\r\n\t\t\tthis.targetCanvasContext.fillStyle =\r\n\t\t\t\tthis.selectionArea.dragging[i] ? this.selectionArea.highlight : this.selectionArea.textColor;\r\n\r\n\t\t\tconst x = this.selectionArea.points[i][0];\r\n\t\t\tconst y = this.selectionArea.points[i][1];\r\n\r\n\t\t\tif (this.selectionArea.dragging[i]) {\r\n\r\n\t\t\t\tdraggedCubeFound = true;\r\n\r\n\t\t\t\tthis.drawMagnifier(x, y);\r\n\r\n\t\t\t\tif (!drawn) {\r\n\t\t\t\t\tthis.drawLineBetweenCubes();\r\n\t\t\t\t\tdrawn = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetCanvasContext.strokeStyle = this.selectionArea.highlight;\r\n\r\n\t\t\t\tif (this.isInTouchMode) {\r\n\t\t\t\t\tthis.targetCanvasContext.beginPath();\r\n\t\t\t\t\tthis.targetCanvasContext.ellipse(x, y, (sx * 3), (sy * 3), 0, 0 * Math.PI, 2 * Math.PI);\r\n\t\t\t\t\tthis.targetCanvasContext.closePath();\r\n\r\n\t\t\t\t\tthis.targetCanvasContext.stroke();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.targetCanvasContext.strokeRect(x - ((sx * 2) / 2), y - ((sy * 2) / 2), (sx * 2), (sy * 2));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// First draw the grip cube\r\n\t\t\t\tthis.targetCanvasContext.strokeStyle = this.selectionArea.lineColor;\r\n\t\t\t} else {\r\n\t\t\t\tif (draggedCubeFound && !drawn) {\r\n\t\t\t\t\tthis.drawLineBetweenCubes();\r\n\t\t\t\t\tdrawn = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Draw filled cubes for the grips, larger if hovered over\r\n\t\t\t\tif (this.selectionArea.hovering[i]) {\r\n\t\t\t\t\tthis.targetCanvasContext.fillRect(x - ((sx * 2) / 2), y - ((sy * 2) / 2), (sx * 2), (sy * 2));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.targetCanvasContext.fillRect(x - (sx / 2), y - (sy / 2), sx, sy);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// drawCoordinatesText(i);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate drawMagnifier = (x: number, y: number) => {\r\n\t\tif (this.$magnifier && this.magnifierContext) {\r\n\t\t\t// Next we'll draw a magnified portion of the part of the\r\n\t\t\t// image under the cursor, with cross-hairs\r\n\t\t\tthis.magnifierContext.clearRect(0, 0, this.magSZ, this.magSZ);\r\n\r\n\t\t\tconst xPos = x < this.off ? 0 : x - this.off;\r\n\t\t\tconst yPos = y < this.off ? 0 : y - this.off;\r\n\t\t\tconst fromRight = this.$targetCanvas.width - x;\r\n\t\t\tconst fromBottom = this.$targetCanvas.height - y;\r\n\t\t\tconst wid = fromRight <= this.off ? this.off + fromRight - 1 : this.off * 2;\r\n\t\t\tconst hgt = fromBottom <= this.off ? this.off + fromBottom - 1 : this.off * 2;\r\n\t\t\tconst fac = 1 / (this.off * 2);\r\n\r\n\t\t\tthis.magnifierContext.drawImage(this.$targetCanvas, xPos, yPos, wid, hgt, (xPos - (x - this.off)) * this.zs / 2, (yPos - (y - this.off)) * this.zs / 2, Math.floor(wid * fac * this.magSZ), Math.floor(hgt * fac * this.magSZ));\r\n\r\n\t\t\t// Vertical\r\n\t\t\tthis.magnifierContext.beginPath();\r\n\t\t\tthis.magnifierContext.moveTo(this.magSZ / 2, 0);\r\n\t\t\tthis.magnifierContext.lineTo(this.magSZ / 2, this.magSZ);\r\n\t\t\tthis.magnifierContext.closePath();\r\n\t\t\tthis.magnifierContext.stroke();\r\n\r\n\t\t\t// Horizontal\r\n\r\n\t\t\tthis.magnifierContext.beginPath();\r\n\t\t\tthis.magnifierContext.moveTo(0, this.magSZ / 2);\r\n\t\t\tthis.magnifierContext.lineTo(this.magSZ, this.magSZ / 2);\r\n\t\t\tthis.magnifierContext.closePath();\r\n\t\t\tthis.magnifierContext.stroke();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate drawLineBetweenCubes = () => {\r\n\t\t// Draw lines between the corners\r\n\t\tthis.targetCanvasContext.strokeStyle = this.selectionArea.lineColor;\r\n\r\n\t\tthis.setDynamicLineWidth();\r\n\r\n\t\tthis.targetCanvasContext.beginPath();\r\n\t\tthis.targetCanvasContext.moveTo(this.selectionArea.points[0][0], this.selectionArea.points[0][1]);\r\n\t\tfor (let j = 1; j < this.selectionArea.points.length; j++) {\r\n\t\t\tthis.targetCanvasContext.lineTo(this.selectionArea.points[j][0], this.selectionArea.points[j][1]);\r\n\t\t}\r\n\t\tthis.targetCanvasContext.lineTo(this.selectionArea.points[0][0], this.selectionArea.points[0][1]);\r\n\t\tthis.targetCanvasContext.closePath();\r\n\t\tthis.targetCanvasContext.stroke();\r\n\t}\r\n\r\n\tprivate drawScene = (noSquares: boolean = false) => {\r\n\t\tthis.rotateCanvas(this.targetCanvasContext);\r\n\r\n\t\tif (!noSquares) {\r\n\t\t\tthis.drawSelectionArea();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getTargetActualSize = (contains: boolean, containerWidth: number, containerHeight: number, width: number, height: number) => {\r\n\t\tconst doRatio = width / height;\r\n\t\tconst cRatio = containerWidth / containerHeight;\r\n\t\tlet targetWidth = 0;\r\n\t\tlet targetHeight = 0;\r\n\t\tconst test = contains ? (doRatio > cRatio) : (doRatio < cRatio);\r\n\r\n\t\tif (test) {\r\n\t\t\ttargetWidth = containerWidth;\r\n\t\t\ttargetHeight = targetWidth / doRatio;\r\n\t\t} else {\r\n\t\t\ttargetHeight = containerHeight;\r\n\t\t\ttargetWidth = targetHeight * doRatio;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\theight: targetHeight,\r\n\t\t\twidth: targetWidth,\r\n\t\t\tx: (containerWidth - targetWidth) / 2,\r\n\t\t\ty: (containerHeight - targetHeight) / 2,\r\n\t\t};\r\n\t}\r\n\r\n\tprivate getTargetScale = () => {\r\n\t\tlet containerRect = this.$targetCanvas.getClientRects()[0];\r\n\t\tif (containerRect == undefined) {\r\n\t\t\tcontainerRect = new DOMRect();\r\n\t\t}\r\n\t\tconst rect = this.getTargetActualSize(\r\n\t\t\ttrue,\r\n\t\t\tcontainerRect.width,\r\n\t\t\tcontainerRect.height,\r\n\t\t\tthis.$targetCanvas.width,\r\n\t\t\tthis.$targetCanvas.height,\r\n\t\t);\r\n\r\n\t\tif (rect) {\r\n\t\t\treturn {\r\n\t\t\t\tscaleX: this.$targetCanvas.width / rect.width,\r\n\t\t\t\tscaleY: this.$targetCanvas.height / rect.height,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\tscaleX: 1,\r\n\t\t\t\tscaleY: 1,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setDynamicLineWidth = () => {\r\n\t\tconst scale = this.getTargetScale();\r\n\r\n\t\tthis.targetCanvasContext.lineWidth = 2 * ((scale.scaleX + scale.scaleY) / 2);\r\n\t}\r\n\r\n}\r\n\r\nclass SelectionArea {\r\n\tpublic points: Array<Array<number>>;\r\n\tpublic highlight: string;\r\n\tpublic lineColor: string;\r\n\tpublic textColor: string;\r\n\tpublic hovering: [boolean, boolean, boolean, boolean] = [false, false, false, false];\r\n\tpublic dragging: [boolean, boolean, boolean, boolean] = [false, false, false, false];\r\n\r\n\tpublic cSize: number = 10;\r\n\tpublic cSizeH: number = 20;\r\n\r\n\tprivate initCanvasLeft: number;\r\n\tprivate initCanvasTop: number;\r\n\r\n\tconstructor({ pts,\r\n\t\tareOriginalCoords,\r\n\t\toptions,\r\n\t\tworkspace,\r\n\t\ttargetCanvas\r\n\t}: {\r\n\t\tpts: Array<Array<number>>;\r\n\t\tareOriginalCoords: boolean;\r\n\t\toptions: ICroppyOptions;\r\n\t\tworkspace: IWorkspace;\r\n\t\ttargetCanvas: HTMLCanvasElement;\r\n\t}) {\r\n\t\tif (areOriginalCoords) {\r\n\t\t\tfor (let i = 0; i < pts.length; i++) {\r\n\t\t\t\tpts[i][0] = Croppy.getFloat(pts[i][0] * workspace.widthFactor);\r\n\t\t\t\tpts[i][0] = pts[i][0] < workspace.width\r\n\t\t\t\t\t? pts[i][0] > 0 ? pts[i][0] : 0\r\n\t\t\t\t\t: workspace.width;\r\n\r\n\t\t\t\tpts[i][1] = Croppy.getFloat(pts[i][1] * workspace.heightFactor);\r\n\t\t\t\tpts[i][1] = pts[i][1] < workspace.height\r\n\t\t\t\t\t? pts[i][1] > 0 ? pts[i][1] : 0\r\n\t\t\t\t\t: workspace.height;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.points = pts;\r\n\r\n\t\tthis.highlight = options.selection.highlightColor;\r\n\t\tthis.lineColor = options.selection.lineColor;\r\n\t\tthis.textColor = options.selection.coordsTextColor;\r\n\r\n\t\tconst canvasOffset = Croppy.getOffset(targetCanvas);\r\n\r\n\t\tthis.initCanvasLeft = canvasOffset.left;\r\n\t\tthis.initCanvasTop = canvasOffset.top;\r\n\t}\r\n\r\n}\r\n","import EventService from '../../../helpers/classes/EventService';\r\nimport { ExceptionManager } from '../../../helpers/classes/ExceptionManager';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport JourneyManager from '../../classes/JourneyManager';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { TranslationKey } from '../../enums/Translation';\r\n\r\nexport class LoginStep {\r\n\tpublic static render(this: JourneyContainer) {\r\n\t\treturn TemplateService.renderToContainer(this._container, Templates.Login)\r\n\t\t\t.then((element) => TemplateService.getElements(element, {\r\n\t\t\t\tpassword: '[data-jcs-element=\"login__password\"]',\r\n\t\t\t\tform: '[data-jcs-element=\"login__form\"]',\r\n\t\t\t\tsubmit: '[data-jcs-element=\"login__submit\"]',\r\n\t\t\t\tusername: '[data-jcs-element=\"login__username\"]',\r\n\t\t\t\terrors: '[data-jcs-element=\"login__errors\"]',\r\n\t\t\t}))\r\n\t\t\t.then(({ submit, username, password, errors, form }) => {\r\n\t\t\t\tif (form instanceof HTMLFormElement && submit instanceof HTMLInputElement && username instanceof HTMLInputElement && password instanceof HTMLInputElement) {\r\n\t\t\t\t\tform.addEventListener('submit', (e) => {\r\n\t\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\t\tthis.clearJourney()\r\n\t\t\t\t\t\t\t.then(() => RenderingService.setText(errors))\r\n\t\t\t\t\t\t\t.then(() => RenderingService.setEnabled(submit, false))\r\n\t\t\t\t\t\t\t.then(() => JourneyManager.login({\r\n\t\t\t\t\t\t\t\tarea: 'scanning',\r\n\t\t\t\t\t\t\t\tpassword: password.value,\r\n\t\t\t\t\t\t\t\tusername: username.value\r\n\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t.catch(LoginStep.renderErrors.bind(this))\r\n\t\t\t\t\t\t\t.then(() => RenderingService.setEnabled(submit, true));\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(new ExceptionManager.TemplateException(TranslationKey.EXCEPTION_TEMPLATE_ELEMENTS_MISSING));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_STEP, { step: Templates.Login }));\r\n\t}\r\n\r\n\tprivate static renderErrors(this: JourneyContainer, error: ExceptionManager.Exception) {\r\n\t\tTemplateService.getElements(this._container, {\r\n\t\t\terrors: '[data-jcs-element=\"login__errors\"]',\r\n\t\t}).then(({ errors }) => {\r\n\t\t\tRenderingService.setText(errors, LanguageService.getTranslation(error.message as TranslationKey));\r\n\t\t});\r\n\t}\r\n}\r\n","import {\r\n\tDefaultTranslations,\r\n\tTranslationDictionary,\r\n} from '../../idscan/configuration/TranslationDictionary';\r\nimport { TranslationKey } from '../../idscan/enums/Translation';\r\n\r\n/**\r\n * Function which accepts a key, language and props to produce a translated\r\n * string\r\n *\r\n * @public\r\n */\r\nexport type Translator = (\r\n\tkey: TranslationKey,\r\n\tlanguage: string,\r\n\tprops: Record<string, any>\r\n) => string;\r\n\r\n/**\r\n * @public\r\n */\r\nexport class LanguageService {\r\n\tprivate _language: string = 'en_GB';\r\n\tprivate _dictionary: TranslationDictionary = DefaultTranslations;\r\n\r\n\tprivate defaultTranslator = (\r\n\t\tkey: TranslationKey,\r\n\t\tlanguage: string = this._language,\r\n\t\tprops: Record<string, any> = {}\r\n\t) => {\r\n\t\tconsole.log('defaultTranslator called with key:', key);\r\n\t\tconsole.log(\r\n\t\t\t'Available dictionary keys sample:',\r\n\t\t\tObject.keys(this._dictionary).slice(0, 5)\r\n\t\t);\r\n\t\tconst result = this._dictionary[key];\r\n\t\tconsole.log('Dictionary lookup result:', result);\r\n\t\treturn result;\r\n\t};\r\n\r\n\tprivate _translator: Translator = this.defaultTranslator;\r\n\r\n\tpublic get dictionary(): TranslationDictionary {\r\n\t\treturn { ...this._dictionary };\r\n\t}\r\n\r\n\tpublic setLanguage = (language?: string) =>\r\n\t\t(this._language = language ? language : this._language);\r\n\tpublic setTranslator = (translator?: Translator) =>\r\n\t\t(this._translator = translator ? translator : this._translator);\r\n\tpublic setDictionary = (dictionary?: Partial<TranslationDictionary>) =>\r\n\t\t(this._dictionary = { ...this._dictionary, ...dictionary });\r\n\r\n\tpublic getTranslation = (\r\n\t\tkey: TranslationKey,\r\n\t\tprops: Record<string, any> = {}\r\n\t) => {\r\n\t\tconsole.log('LanguageService.getTranslation called with key:', key);\r\n\t\tconst translation = this._translator(key, this._language, props);\r\n\t\tconsole.log('Translation result:', translation);\r\n\t\tconsole.log(\r\n\t\t\t'Translation is undefined?',\r\n\t\t\ttypeof translation === 'undefined'\r\n\t\t);\r\n\r\n\t\tif (typeof translation === 'undefined') {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'Key not found in dictionary. Available keys sample:',\r\n\t\t\t\tObject.keys(this._dictionary).slice(0, 10)\r\n\t\t\t);\r\n\t\t\tconsole.log('Looking for key in dictionary:', key in this._dictionary);\r\n\t\t}\r\n\r\n\t\treturn typeof translation !== 'undefined'\r\n\t\t\t? translation\r\n\t\t\t: '__NO_TRANSLATION__';\r\n\t};\r\n}\r\n\r\nexport default new LanguageService();\r\n","export const STORAGE_KEYS = {\r\n\tuserName: 'jcs__loggedin__username',\r\n\tuserGroups: 'jcs__loggedin__groups',\r\n\tdefaultToken: 'jcs__default__token',\r\n\tjourneyId:  'jcs__default__journeyId',\r\n\tjourneyDefinitionId :'jcs__default__journeyDefinitionId'\r\n};\r\n","/**\r\n * The current result of the journey. This will change as the journey progresses\r\n * and will only be finalised at the end of the journey process.\r\n *\r\n * @public\r\n */\r\nexport enum HighLevelResult {\r\n\t/**\r\n\t * The journey was aborted before it was completed.\r\n\t */\r\n\tAborted = 'Aborted',\r\n\t/**\r\n\t * The identity documents provided has expired and the process has\r\n\t * failed. In the event this state is returned by the system, it is\r\n\t * suggested the user should retry with different documents if possible.\r\n\t */\r\n\tExpired = 'Expired',\r\n\t/**\r\n\t * The identity documents provided are known, but not accepted by the\r\n\t * system. It is suggested that the user should retry with different\r\n\t * documents if this state is returned by the system.\r\n\t */\r\n\tNotAccepted = 'NotAccepted',\r\n\t/**\r\n\t * The identity documents provided are not known by the system. This could\r\n\t * be caused due to a poor capture, severe tampering, or specimens used for\r\n\t * checking could be out of date.\r\n\t */\r\n\tNotSupported = 'NotSupported',\r\n\t/**\r\n\t * The identity documents provided are satisfactory and the user's identity\r\n\t * has been confirmed to a suitable level as defined by the configuration\r\n\t * provided.\r\n\t */\r\n\tPassed = 'Passed',\r\n\t/**\r\n\t * The identity documents provided do not match each other to a suitable\r\n\t * level and the system has recommended that a human manually review the\r\n\t * application\r\n\t */\r\n\tRefer = 'Refer',\r\n\t/**\r\n\t * There has either been a fatal error in the application or the process has\r\n\t * not been started at this time. Please review other values accompanying\r\n\t * `HighLevelResult` when this value is seen for more details.\r\n\t */\r\n\tUndefined = 'Undefined',\r\n\t/**\r\n\t * User did not agree the Terms and Conditions\r\n\t * Journey process aborted because of disagree selected T&C\r\n\t */\r\n\tTCCDisagree = 'TCCDisagree'\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport enum HighLevelResultDetails {\r\n\tACCUMULATIVE_LIVENESS_RESULT = 'ACCUMULATIVELIVENESSRESULT',\r\n\tDOCUMENT_BACK_SIDE_CHECK = 'DOCUMENTBACKSIDECHECK',\r\n\tDOCUMENT_BLOCKING_POLICY = 'DOCUMENTBLOCKINGPOLICY',\r\n\tDOCUMENT_EXPIRY = 'DOCUMENTEXPIRY',\r\n\tDOCUMENT_SUPPORT = 'DOCUMENTSUPPORT',\r\n\tDOCUMENT_VALIDATION = 'DOCUMENTVALIDATION',\r\n\tDOCUMENT_PROOF_POLICY = 'DOCUMENTPROOFPOLICY',\r\n\tFACEMATCH_VALIDATION = 'FACEMATCHVALIDATION',\r\n\tUNDERAGE_RULE = 'UNDERAGERULE',\r\n\tDATACHECKS = 'DATACHECKS'\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport enum HighLevelResultDetailValues {\r\n\tFAILED = 'FAILED',\r\n\tNOTNEEDED = 'NOTNEEDED',\r\n\tPASSED = 'PASSED',\r\n\tSKIPPED = 'SKIPPED',\r\n\tUNDETERMINED = 'UNDETERMINED'\r\n}\r\n","import { CaseDictionaryService } from '../../helpers/classes/CaseDictionaryService';\r\nimport { ExceptionManager } from '../../helpers/classes/ExceptionManager';\r\nimport HttpService from '../../helpers/classes/HttpService';\r\nimport { ImageService } from '../../helpers/classes/ImageService';\r\nimport { ReductionService } from '../../helpers/classes/ReductionService';\r\nimport SocketService from '../../helpers/classes/SocketService';\r\nimport StorageService from '../../helpers/classes/StorageService';\r\nimport { dictionary } from '../configuration/CaseDictionary';\r\nimport { constants } from '../configuration/Constants';\r\nimport { ENDPOINTS } from '../configuration/Endpoints';\r\nimport { STORAGE_KEYS } from '../configuration/StorageKeys';\r\nimport { ResponseType } from '../enums/ResponseType';\r\nimport { TranslationKey } from '../enums/Translation';\r\nimport { IAuthSettings } from '../interfaces/AuthSettings';\r\nimport { IConfiguration } from '../interfaces/Configuration';\r\nimport { IEndpoints } from '../interfaces/Endpoints';\r\nimport { IFinalResult } from '../interfaces/FinalResult';\r\nimport { IJourneyDefinition } from '../interfaces/JourneyDefinition';\r\nimport { ILoginOptions } from '../interfaces/LoginOptions';\r\nimport { IUserCredentials } from '../interfaces/UserCredentials';\r\nimport { IUserInfo } from '../interfaces/UserInfo';\r\nimport { IVersionInfo } from '../interfaces/VersionInfo';\r\nimport { Journey } from './Journey';\r\nimport { IAdditionalData } from '../interfaces/AdditionalData';\r\nimport { Mode } from '../enums/Mode';\r\n\r\nexport class JourneyManager {\r\n\r\n\tpublic get journeys() {\r\n\t\treturn this._journeys;\r\n\t}\r\n\r\n\tpublic get mode() {\r\n\t\treturn this._mode;\r\n\t}\r\n\r\n\tprivate _case: CaseDictionaryService = new CaseDictionaryService(dictionary);\r\n\tprivate _journeys: Journey[] = [];\r\n\tprivate _endpoints?: IEndpoints;\r\n\tprivate _authSettings?: false | IAuthSettings;\r\n\tprivate _config?: IConfiguration;\r\n\tprivate _version?: IVersionInfo;\r\n\tprivate _mode?: Mode;\r\n\tprivate _isVerboseLoggingEnabled?: boolean;\r\n\r\n\tpublic configure = (config: IConfiguration): Promise<this> => {\r\n\t\tthis._config = config;\r\n\r\n\t\tconst { auth, backendUrl, endpoints, mode, isVerboseLogEnabled, hideLogo } = this._config;\r\n\r\n\t\tthis._endpoints = endpoints ? endpoints : constants.ENDPOINTS;\r\n\t\tthis._authSettings = auth !== true ? auth : constants.AUTH_DEFAULTS;\r\n\t\tthis._mode = mode ? mode : Mode.WEB;\r\n\t\tthis._isVerboseLoggingEnabled = isVerboseLogEnabled;\r\n\r\n\t\treturn SocketService.configure(backendUrl + this._endpoints.socket)\r\n\t\t\t.then(() => this.assertBackendUrlExists(config))\r\n\t\t\t.then(() => this);\r\n\t}\r\n\r\n\tpublic initialize = ({ token }: { token?: string }): Promise<this> => {\r\n\t\tvar startTime = performance.now();\r\n\r\n\t\treturn HttpService.configure({\r\n\t\t\tauthSettings: this._authSettings!,\r\n\t\t\tbackendUrl: this._config!.backendUrl,\r\n\t\t\tendpoints: this._endpoints!,\r\n\t\t\tresponseType: ResponseType.REFINED\r\n\t\t})\r\n\t\t\t.then(() => HttpService.initialize())\r\n\t\t\t.then(() => {\r\n\t\t\t\tif (token) {\r\n\t\t\t\t\treturn this.assertAuthEnabled()\r\n\t\t\t\t\t\t.then(() => HttpService.injectToken(token))\r\n\t\t\t\t\t\t.then(() => this.setUserInfo());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar endTime = performance.now();\r\n\t\t\t\tif (this._isVerboseLoggingEnabled)\r\n\t\t\t\t\tconsole.log(`JourneyManager initialize method took: ${endTime - startTime} miliseconds`);\r\n\t\t\t})\r\n\t\t\t.then(() => this);\r\n\t}\r\n\r\n\tpublic caseDic = (res: any): any => this._case!.convert(res, 'beautify');\r\n\r\n\t/**\r\n\t * Returns the version of the library and the backend\r\n\t */\r\n\tpublic getVersion = (): Promise<IVersionInfo> => {\r\n\t\tif (this._version !== undefined) {\r\n\t\t\treturn Promise.resolve(this._version);\r\n\t\t} else {\r\n\t\t\treturn HttpService.get(this._endpoints!.getVersion + '?channel=' + this._mode, {}, 'version')\r\n\t\t\t\t.then(({ buildVersion, edition, CapturingMedia = 'FileUpload' }: any) => {\r\n\t\t\t\t\treturn this._version = {\r\n\t\t\t\t\t\tbackend: buildVersion,\r\n\t\t\t\t\t\tbackendEdition: edition,\r\n\t\t\t\t\t\tcapturingMedia: CapturingMedia,\r\n\t\t\t\t\t\tlibrary: constants.VERSION,\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Injects a token to httpService, useful for dynamic token refresh\r\n\t * @param token\r\n\t */\r\n\tpublic injectToken = (token: string) => this.assertAuthEnabled()\r\n\t\t.then(() => HttpService.injectToken(token))\r\n\r\n\t/**\r\n\t * Sets the userName and userGroups values in storage\r\n\t */\r\n\tpublic setUserInfo = (): Promise<IUserInfo> => HttpService.post(ENDPOINTS.postToken)\r\n\t\t.then((res) => {\r\n\t\t\tif (STORAGE_KEYS.journeyId) { StorageService.set(STORAGE_KEYS.journeyId, res.journeyId, 24); }\r\n\t\t\tif (STORAGE_KEYS.journeyDefinitionId) { StorageService.set(STORAGE_KEYS.journeyDefinitionId, res.journeyDefinitionId, 24); }\t\t\r\n\t\t\treturn res;\r\n\t\t})\r\n\t\t.catch((e) => {\r\n\t\t\tthrow new ExceptionManager.AuthorizationException('error while getting userInfo');\r\n\t\t})\r\n\r\n\t/**\r\n\t * This is an example of a comment.\r\n\t * @param user\r\n\t */\r\n\tpublic login = (user: IUserCredentials): Promise<IUserInfo> => {\r\n\t\tuser.area = user.area ? user.area : 'scanning';\r\n\r\n\t\treturn this.assertUsernameExists(user)\r\n\t\t\t.then(() => this.assertPasswordExists(user))\r\n\t\t\t.then(() => this.doLogin(user))\r\n\t\t\t.then((res) => {\r\n\t\t\t\tconst options: ILoginOptions = { fullName: false };\r\n\t\t\t\tconst originalResponse = ReductionService.reduce(res, options);\r\n\r\n\t\t\t\tStorageService.set(STORAGE_KEYS.userName, user.username, 24);\r\n\t\t\t\tStorageService.set(STORAGE_KEYS.userGroups, user.memberOf, 24);\r\n\t\t\t\tStorageService.set(STORAGE_KEYS.journeyId, user.journeyId, 24);\r\n\t\t\t\tStorageService.set(STORAGE_KEYS.journeyDefinitionId, user.journeyDefinitionId, 24);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfullName: originalResponse.fullName,\r\n\t\t\t\t\tusername: originalResponse['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name'],\r\n\t\t\t\t\trole: originalResponse['http://schemas.microsoft.com/ws/2008/06/identity/claims/role'],\r\n\t\t\t\t\ttoken: originalResponse.access_token,\r\n\t\t\t\t\tmemberOf: originalResponse.memberOf,\r\n\t\t\t\t\tjourneyId: originalResponse.journeyId,\r\n\t\t\t\t\tjourneyDefinitionId: originalResponse.journeyDefinitionId,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * To logout from the server\r\n\t */\r\n\tpublic logout = (): Promise<void> => this.assertUserAuthenticated()\r\n\t\t.then(() => this.doLogout())\r\n\r\n\t/**\r\n\t * Creates a journey instance and returns the id of the instance.\r\n\t * @param id\r\n\t * @param additionalData\r\n\t */\r\n\tpublic createJourney = (id?: string, additionalData: IAdditionalData[] = []): Promise<Journey> => this.assertUserAuthenticated()\r\n\t\t.then(() => {\r\n\t\t\tvar startTime = performance.now();\r\n\t\t\tconst journey = new Journey(additionalData, id);\r\n\t\t\tthis._journeys.push(journey);\r\n\r\n\t\t\tvar endTime = performance.now();\r\n\t\t\tif (this._isVerboseLoggingEnabled)\r\n\t\t\t\tconsole.log(`JourneyManager createJourney method took: ${endTime - startTime} miliseconds`);\r\n\r\n\t\t\treturn journey;\r\n\t\t})\r\n\t\t.then((journey) => journey.start())\r\n\r\n\t/**\r\n\t * Blob to string conversion\r\n\t * @param blob\r\n\t */\r\n\tpublic toBase64 = (blob: any): Promise<string> => ImageService.convert(blob);\r\n\r\n\tpublic getToken = () => StorageService.get(STORAGE_KEYS.defaultToken);\r\n\r\n\t/**\r\n\t * Retrieve result of journey FUNCTION\r\n\t *\r\n\t * @param journeyId\r\n\t */\r\n\tpublic getResults = (journeyId: string): Promise<IFinalResult> => {\r\n\t\treturn this.assertUserAuthenticated()\r\n\t\t\t.then(() => {\r\n\t\t\t\tvar startTime = performance.now();\r\n\t\t\t\tconst headersRequest = {\r\n\t\t\t\t\t'journeyId': `${journeyId}`,\r\n\t\t\t\t};\r\n\t\t\t\tvar journeyResult = HttpService.get(`${this._endpoints!.getJourney}`, {headers :headersRequest}, 'getJourney');\r\n\r\n\t\t\t\tvar endTime = performance.now();\r\n\t\t\t\tif (this._isVerboseLoggingEnabled)\r\n\t\t\t\t\tconsole.log(`JourneyManager getResults method took: ${endTime - startTime} miliseconds`);\r\n\r\n\t\t\t\treturn journeyResult;\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tif (e.response && e.response.status === 401) {\r\n\t\t\t\t\treturn ExceptionManager.process(new ExceptionManager.AuthorizationException(TranslationKey.EXCEPTION_AUTHORIZATION_ACCOUNT_NOT_AUTHORIZED, e.response));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn ExceptionManager.process(new ExceptionManager.ServerException(TranslationKey.EXCEPTION, e.response));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic getJourneyDefinitions = (): Promise<IJourneyDefinition[]> => {\r\n\t\treturn HttpService.get(ENDPOINTS.journeyDefinitions + '?channelType=' + this._mode)\r\n\t\t\t.then((res: Record<string, IJourneyDefinition>) => Object.keys(res).map((key) => res[key]));\r\n\t}\r\n\r\n\tpublic getCapturingMedia = (journeyDefinitionId: string): Promise<string> => {\r\n\t\treturn HttpService.get(ENDPOINTS.getCapturingMedia + '?channelType=' + this._mode + '&journeyDefinitionId=' + journeyDefinitionId)\r\n\t\t\t.then((res: any) => res);\r\n\t}\r\n\r\n\tprivate doLogin = (user: IUserCredentials) => HttpService.post(\r\n\t\tthis._endpoints!.login,\r\n\t\t`userName=${encodeURIComponent(user.username)}&password=${encodeURIComponent(user.password)}&area=${encodeURIComponent(user.area!)}&login-form-type=pwd&grant_type=password`,\r\n\t\t{\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\r\n\t\t\t}\r\n\t\t},\r\n\t\t'login'\r\n\t).catch((e) => {\r\n\r\n\t\tif (e.response === undefined) {\r\n\t\t\tthrow ExceptionManager.process(new ExceptionManager.Exception(TranslationKey.EXCEPTION_SERVER_UNREACHABLE, e.response));\r\n\t\t}\r\n\t\tconst { response: { status } } = e || { response: { status: 0 } } as any;\r\n\r\n\t\tswitch (status) {\r\n\t\t\tcase 400:\r\n\t\t\tcase 401:\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.AuthorizationException(TranslationKey.EXCEPTION_AUTHORIZATION_AUTH_DETAILS_INVALID, e.response));\r\n\t\t\tcase 500:\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.ServerException(TranslationKey.EXCEPTION_SERVER, e.response));\r\n\t\t\tdefault:\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.Exception(TranslationKey.EXCEPTION, e.response));\r\n\t\t}\r\n\t})\r\n\r\n\tprivate doLogout = () => HttpService.post(this._endpoints!.logout, undefined, undefined, 'logout').catch((e) => {\r\n\t\tconst { response: { status } } = e || { response: { status: 0 } } as any;\r\n\r\n\t\tswitch (status) {\r\n\t\t\tdefault:\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.Exception(TranslationKey.EXCEPTION, e.response));\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Assert if user is authenticated for this process.\r\n\t */\r\n\tprivate assertUserAuthenticated = (): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (HttpService.auth !== true && this._authSettings !== false) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.AuthorizationException(TranslationKey.EXCEPTION_AUTHORIZATION_PROCESS_NOT_AUTHORIZED)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Assert if user is authenticated for this process.\r\n\t */\r\n\tprivate assertAuthEnabled = (): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (this._authSettings === false) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.AuthorizationException(TranslationKey.EXCEPTION_AUTHORIZATION_AUTH_NOT_ENABLED)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Assert if Configuration include a backendUrl parameter.\r\n\t * @param config\r\n\t */\r\n\tprivate assertBackendUrlExists = ({ backendUrl }: IConfiguration): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (!backendUrl) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_MISSING_PARAMETER_BACKEND_URL_MISSING)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Assert if the Supplied parameters contain username.\r\n\t * @param user\r\n\t */\r\n\tprivate assertUsernameExists = (user: IUserCredentials): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (!user.username) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_MISSING_PARAMETER_USERNAME_MISSING)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Assert if the Supplied parameters contain password.\r\n\t * @param user\r\n\t */\r\n\tprivate assertPasswordExists = (user: IUserCredentials): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (!user.password) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_MISSING_PARAMETER_PASSWORD_MISSING)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport default new JourneyManager();\r\n","const Bowser = require('bowser');\r\n\r\n// Safely get user agent string for browser and non-browser environments\r\nconst userAgent: string =\r\n    typeof window !== 'undefined' && window.navigator && window.navigator.userAgent\r\n        ? window.navigator.userAgent\r\n        : '';\r\nconst browser = Bowser.getParser(userAgent);\r\n\r\n// OS information\r\nexport const osName = browser.getOSName();\r\nexport const osVersion = browser.getOSVersion();\r\n\r\n// Browser information  \r\nexport const browserName = browser.getBrowserName();\r\nexport const fullBrowserVersion = browser.getBrowserVersion();\r\n\r\n// Mobile device information\r\nconst platformType = browser.getPlatformType();\r\nexport const isMobile = platformType === 'mobile' || platformType === 'tablet';\r\n\r\n// Device vendor and model (Bowser doesn't provide these, so we'll extract from user agent)\r\nconst ua = window.navigator.userAgent;\r\nexport const mobileVendor = extractVendor(ua);\r\nexport const mobileModel = extractModel(ua);\r\n\r\n// Browser-specific flags\r\nexport const isFirefox = browser.getBrowserName() === 'Firefox';\r\nexport const isSafari = browser.getBrowserName() === 'Safari';\r\nexport const isChrome = browser.getBrowserName() === 'Chrome';\r\nexport const isIOS = browser.getOSName() === 'iOS';\r\n\r\n// Helper functions to extract vendor and model from user agent\r\nfunction extractVendor(userAgent: string): string {\r\n    if (/iPhone|iPad|iPod/i.test(userAgent)) return 'Apple';\r\n    if (/Android/i.test(userAgent)) {\r\n        if (/Samsung/i.test(userAgent)) return 'Samsung';\r\n        if (/Huawei/i.test(userAgent)) return 'Huawei';\r\n        if (/Xiaomi/i.test(userAgent)) return 'Xiaomi';\r\n        if (/OnePlus/i.test(userAgent)) return 'OnePlus';\r\n        return 'Android';\r\n    }\r\n    return '';\r\n}\r\n\r\nfunction extractModel(userAgent: string): string {\r\n    // Basic model extraction - this is simplified compared to mobile-device-detect\r\n    if (/iPhone/i.test(userAgent)) return 'iPhone';\r\n    if (/iPad/i.test(userAgent)) return 'iPad';\r\n    if (/iPod/i.test(userAgent)) return 'iPod';\r\n\r\n    // Android device model extraction\r\n    const androidMatch = userAgent.match(/Android.*?;\\s*(.*?)\\)/);\r\n    if (androidMatch && androidMatch[1]) {\r\n        // Android device model extraction (improved regex and validation)\r\n        // Typical Android UA: \"...Android 9; Pixel 3 XL Build/PQ3A.190705.003...\"\r\n        const androidMatch = userAgent.match(/Android\\s[\\d\\.]+;\\s*([^)]+?)\\s*(?:Build\\/[^\\s)]+)?\\)/);\r\n        if (androidMatch && androidMatch[1]) {\r\n            const model = androidMatch[1].trim();\r\n            // Validate: model should not be empty, not generic, and not contain suspicious characters\r\n            if (\r\n                model &&\r\n                !/^Linux$/i.test(model) &&\r\n                !/^[\\s\\/]+$/.test(model) &&\r\n                model.length > 1 &&\r\n                /^[A-Za-z0-9\\- _+.]+$/.test(model)\r\n            ) {\r\n                return model;\r\n            }\r\n        }\r\n\r\n        return '';\r\n    }\r\n    return '';\r\n}\r\n","import EventService from '../../../helpers/classes/EventService';\r\nimport { ImageService } from '../../../helpers/classes/ImageService';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { removeNullOrUndefined } from '../../../helpers/functions/object';\r\nimport DataService, { DataStoreType } from '../../classes/DataService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { RequiredInputImage } from '../../enums/RequiredInputImage';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { IIdScanData } from '../../interfaces/DataFormats';\r\nimport { IExtendedDocument } from '../../interfaces/Document';\r\nimport { IPerson } from '../../interfaces/Person';\r\nimport { UploadResponse } from '../../interfaces/UploadResponse';\r\nimport { ImageFormat } from '../../enums/ImageFormat';\r\nimport { IMetaData } from '../../interfaces/MetaData';\r\nimport { FlowState } from '../../enums/FlowState';\r\nimport HttpService from '../../../helpers/classes/HttpService';\r\nimport * as lottie from 'lottie-web/build/player/lottie';\r\nimport { AnimationService } from '../../../helpers/classes/AnimationService';\r\n\r\nexport class ImageProvider {\r\n\tpublic static render(this: JourneyContainer, base64: string, metaData: IMetaData[]) {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tproviderContainer: '[data-jcs-element=\"provider__container\"]',\r\n\t\t})\r\n\t\t\t.then(({ providerContainer }) => TemplateService.renderToContainer(providerContainer, Templates.View))\r\n\t\t\t.then((providerContainer) => TemplateService.getElements(providerContainer, {\r\n\t\t\t\tretry: '[data-jcs-element=\"view__retry\"]',\r\n\t\t\t\tcrop: '[data-jcs-element=\"view__begin__crop\"]',\r\n\t\t\t\timage: '[data-jcs-element=\"view__preview\"]',\r\n\t\t\t\tupload: '[data-jcs-element=\"view__upload\"]',\r\n\t\t\t\tstatus: '[data-jcs-element=\"view__status\"]',\r\n\t\t\t\tstatusMessage: '[data-jcs-element=\"view__status__message\"]',\r\n\t\t\t\topenPreviewInfoId: '[data-jcs-element=\"preview__page__open__info__id\"]',\r\n\t\t\t\tpreviewInfoContainerId: '[data-jcs-element=\"preview__info__container__id\"]',\r\n\t\t\t\tclosePreviewInfoId: '[data-jcs-element=\"preview__page__close__info__id\"]',\r\n\t\t\t\topenPreviewInfoFM: '[data-jcs-element=\"preview__page__open__info__fm\"]',\r\n\t\t\t\tpreviewInfoContainerFM: '[data-jcs-element=\"preview__info__container__fm\"]',\r\n\t\t\t\tclosePreviewInfoFM: '[data-jcs-element=\"preview__page__close__info__fm\"]',\r\n\t\t\t\topenPreviewInfoPOA: '[data-jcs-element=\"preview__page__open__info__poa\"]',\r\n\t\t\t\topenPreviewInfoCovid: '[data-jcs-element=\"preview__page__open__info__covid\"]',\r\n\t\t\t\tpreviewInfoContainerPOA: '[data-jcs-element=\"preview__info__container__poa\"]',\r\n\t\t\t\tpreviewInfoContainerCovid: '[data-jcs-element=\"preview__info__container__covid\"]',\r\n\t\t\t\tclosePreviewInfoPOA: '[data-jcs-element=\"preview__page__close__info__poa\"]',\r\n\t\t\t\tclosePreviewInfoCovid: '[data-jcs-element=\"preview__page__close__info__covid\"]',\r\n\t\t\t\tidDocumentContainer: '[data-jcs-element=\"identity__document__preview\"]',\r\n\t\t\t\tfacematchContainer: '[data-jcs-element=\"facematch__preview\"]',\r\n\t\t\t\taddressContainer: '[data-jcs-element=\"address__preview\"]',\r\n\t\t\t\tcovidContainer: '[data-jcs-element=\"covid__preview\"]',\r\n\t\t\t\tattemptCountContainer: '[data-jcs-element=\"attempt__count__container\"]',\r\n\t\t\t\tattemptCounter: '[data-jcs-element=\"attempt__counter\"]',\r\n\t\t\t\tloadingAnimationContainer: '[data-jcs-element=\"loading-animation\"]',\r\n\t\t\t}))\r\n\t\t\t.then(({ image, retry, upload, crop, status, statusMessage, openPreviewInfoId, previewInfoContainerId, closePreviewInfoId, openPreviewInfoCovid, previewInfoContainerCovid, closePreviewInfoCovid, openPreviewInfoFM, previewInfoContainerFM, closePreviewInfoFM, openPreviewInfoPOA, previewInfoContainerPOA, closePreviewInfoPOA, idDocumentContainer, facematchContainer, addressContainer, covidContainer, attemptCountContainer, attemptCounter, loadingAnimationContainer }) => {\r\n\t\t\t\tRenderingService.hideObject(previewInfoContainerId);\r\n\t\t\t\tRenderingService.hideObject(previewInfoContainerFM);\r\n\t\t\t\tRenderingService.hideObject(previewInfoContainerPOA);\r\n\t\t\t\tRenderingService.hideObject(previewInfoContainerCovid);\r\n\t\t\t\tRenderingService.hideObject(closePreviewInfoId);\r\n\t\t\t\tRenderingService.hideObject(closePreviewInfoFM);\r\n\t\t\t\tRenderingService.hideObject(closePreviewInfoPOA);\r\n\t\t\t\tRenderingService.hideObject(previewInfoContainerCovid);\r\n\t\t\t\tRenderingService.hideObject(closePreviewInfoCovid);\r\n\t\t\t\tRenderingService.hideObject(idDocumentContainer);\r\n\t\t\t\tRenderingService.hideObject(facematchContainer);\r\n\t\t\t\tRenderingService.hideObject(addressContainer);\r\n\t\t\t\tRenderingService.hideObject(covidContainer);\r\n\t\t\t\tRenderingService.hideObject(loadingAnimationContainer);\r\n\t\t\t\tRenderingService.setEnabled(upload as HTMLInputElement, true);\r\n\t\t\t\tRenderingService.setEnabled(crop as HTMLInputElement, true);\r\n\t\t\t\tRenderingService.setEnabled(retry as HTMLInputElement, true);\r\n\t\t\t\tImageProvider.loadingAnimation = AnimationService.CreateAnimation(loadingAnimationContainer as HTMLDivElement, this.assetsFolder + '/animations/loading.json', true, true, {});\r\n\t\t\t\tTemplateService.getElements(this._container, {\r\n\t\t\t\t\tuploadToggleButton: '[data-jcs-element=\"gateway__upload__toggle\"]',\r\n\t\t\t\t}).then(({ uploadToggleButton }) => {\r\n\t\t\t\t\tRenderingService.hideObject(uploadToggleButton);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (this._journey) {\r\n\t\t\t\t\tswitch (this._journey.action) {\r\n\t\t\t\t\t\tcase FlowState.SELFIE:\r\n\t\t\t\t\t\tcase FlowState.PASSIVE_LIVENESS:\r\n\t\t\t\t\t\t\tRenderingService.showObject(facematchContainer);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase FlowState.IDENTITY_BACK:\r\n\t\t\t\t\t\tcase FlowState.IDENTITY_FRONT:\r\n\t\t\t\t\t\t\tRenderingService.showObject(idDocumentContainer);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase FlowState.ADDRESS:\r\n\t\t\t\t\t\t\tRenderingService.showObject(addressContainer);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase FlowState.COVIDPASS:\r\n\t\t\t\t\t\t\tRenderingService.showObject(covidContainer);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tswitch (this._journey.actionAttempt) {\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '2');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '1');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tRenderingService.hideObject(attemptCountContainer);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (crop && this._journey!.action === 'SELFIE') {\r\n\t\t\t\t\tcrop.style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t\tconst { type } = ImageService.getBase64Components(base64);\r\n\t\t\t\tif (image) {\r\n\t\t\t\t\timage.setAttribute('data-type', type);\r\n\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\t\tcase ImageFormat.Pdf:\r\n\t\t\t\t\t\t\tif (this._journey!.action === 'SELFIE') {\r\n\t\t\t\t\t\t\t\tRenderingService.hideObject(upload);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\timage.setAttribute('src', 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMjMgMTMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnIGZpbGw9IiM5MjkyOTIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSJub25lIiA+PHBhdGggZD0iTTMsMGMtMS42NjEsMCwtMy4wMDcsMS4zNDIsLTMuMDA3LDIuOTk5bDAsNy4wMDJjMCwxLjY1NiwxLjMzNiwyLjk5OSwzLjAwNywyLjk5OWwxNi45ODYsMGMxLjY2MSwwLDMuMDA3LC0xLjM0MiwzLjAwNywtMi45OTlsMCwtNy4wMDJjMCwtMS42NTYsLTEuMzM2LC0yLjk5OSwtMy4wMDcsLTIuOTk5bC0xNi45ODYsMGwwLDB6bS0wLjAxMiwxYy0xLjEwMiwwLC0xLjk5NSwwLjksLTEuOTk1LDEuOTkybDAsNy4wMTZjMCwxLjEsMC45MDIsMS45OTIsMS45OTUsMS45OTJsMTcuMDExLDBjMS4xMDEsMCwxLjk5NCwtMC45LDEuOTk0LC0xLjk5MmwwLC03LjAxNmMwLC0xLjEsLTAuOTAyLC0xLjk5MiwtMS45OTQsLTEuOTkybC0xNy4wMTEsMGwwLDB6bTEzLjAwNSw1bDAsLTJsNCwwbDAsLTFsLTUsMGwwLDdsMSwwbDAsLTNsMywwbDAsLTFsLTMsMGwwLDB6bS0xMywtMWwwLDVsMSwwbDAsLTNsMS45OTUsMGMxLjEwNywwLDIuMDA1LC0wLjg4OCwyLjAwNSwtMmMwLC0xLjEwNSwtMC44OTQsLTIsLTIuMDA1LC0ybC0yLjk5NSwwbDAsMmwwLDB6bTEsLTFsMCwybDIuMDAxLDBjMC41NTIsMCwwLjk5OSwtMC40NDQsMC45OTksLTFjMCwtMC41NTIsLTAuNDQzLC0xLC0wLjk5OSwtMWwtMi4wMDEsMGwwLDB6bTUsLTFsMCw3bDIuOTk1LDBjMS4xMDcsMCwyLjAwNSwtMC44ODcsMi4wMDUsLTIuMDA2bDAsLTIuOTg4YzAsLTEuMTA4LC0wLjg5NCwtMi4wMDYsLTIuMDA1LC0yLjAwNmwtMi45OTUsMGwwLDB6bTEsMWwwLDVsMi4wMDEsMGMwLjU1MiwwLDAuOTk5LC0wLjQ0NCwwLjk5OSwtMWwwLC0zYzAsLTAuNTUyLC0wLjQ0MywtMSwtMC45OTksLTFsLTIuMDAxLDBsMCwweiIvPjwvZz48L3N2Zz4=');\r\n\t\t\t\t\t\t\tif (crop) {\r\n\t\t\t\t\t\t\t\tcrop.style.display = 'none';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase ImageFormat.Bmp:\r\n\t\t\t\t\t\tcase ImageFormat.Jpeg:\r\n\t\t\t\t\t\tcase ImageFormat.Jpg:\r\n\t\t\t\t\t\tcase ImageFormat.Png:\r\n\t\t\t\t\t\t\timage.setAttribute('src', base64);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\timage.removeAttribute('src');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (openPreviewInfoId instanceof HTMLElement) {\r\n\t\t\t\t\topenPreviewInfoId.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.showObject(previewInfoContainerId);\r\n\t\t\t\t\t\tRenderingService.showObject(closePreviewInfoId);\r\n\t\t\t\t\t\tRenderingService.hideObject(openPreviewInfoId);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (closePreviewInfoId instanceof HTMLElement) {\r\n\t\t\t\t\tclosePreviewInfoId.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.hideObject(previewInfoContainerId);\r\n\t\t\t\t\t\tRenderingService.hideObject(closePreviewInfoId);\r\n\t\t\t\t\t\tRenderingService.showObject(openPreviewInfoId);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (openPreviewInfoFM instanceof HTMLElement) {\r\n\t\t\t\t\topenPreviewInfoFM.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.showObject(previewInfoContainerFM);\r\n\t\t\t\t\t\tRenderingService.showObject(closePreviewInfoFM);\r\n\t\t\t\t\t\tRenderingService.hideObject(openPreviewInfoFM);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (closePreviewInfoFM instanceof HTMLElement) {\r\n\t\t\t\t\tclosePreviewInfoFM.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.hideObject(previewInfoContainerFM);\r\n\t\t\t\t\t\tRenderingService.hideObject(closePreviewInfoFM);\r\n\t\t\t\t\t\tRenderingService.showObject(openPreviewInfoFM);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (openPreviewInfoPOA instanceof HTMLElement) {\r\n\t\t\t\t\topenPreviewInfoPOA.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.showObject(previewInfoContainerPOA);\r\n\t\t\t\t\t\tRenderingService.showObject(closePreviewInfoPOA);\r\n\t\t\t\t\t\tRenderingService.hideObject(openPreviewInfoPOA);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (closePreviewInfoPOA instanceof HTMLElement) {\r\n\t\t\t\t\tclosePreviewInfoPOA.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.hideObject(previewInfoContainerPOA);\r\n\t\t\t\t\t\tRenderingService.hideObject(closePreviewInfoPOA);\r\n\t\t\t\t\t\tRenderingService.showObject(openPreviewInfoPOA);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (openPreviewInfoCovid instanceof HTMLElement) {\r\n\t\t\t\t\topenPreviewInfoCovid.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.showObject(previewInfoContainerCovid);\r\n\t\t\t\t\t\tRenderingService.showObject(closePreviewInfoCovid);\r\n\t\t\t\t\t\tRenderingService.hideObject(openPreviewInfoCovid);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (closePreviewInfoCovid instanceof HTMLElement) {\r\n\t\t\t\t\tclosePreviewInfoCovid.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.hideObject(previewInfoContainerCovid);\r\n\t\t\t\t\t\tRenderingService.hideObject(closePreviewInfoCovid);\r\n\t\t\t\t\t\tRenderingService.showObject(openPreviewInfoCovid);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (retry instanceof HTMLElement) {\r\n\t\t\t\t\tretry.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.setEnabled(crop as HTMLInputElement, false);\r\n\t\t\t\t\t\tRenderingService.setEnabled(retry as HTMLInputElement, false);\r\n\t\t\t\t\t\tRenderingService.setEnabled(upload as HTMLInputElement, false);\r\n\t\t\t\t\t\tthis._retry = true;\r\n\t\t\t\t\t\tthis.evaluate();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (crop instanceof HTMLElement) {\r\n\t\t\t\t\tcrop.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.setEnabled(crop as HTMLInputElement, false);\r\n\t\t\t\t\t\tRenderingService.setEnabled(retry as HTMLInputElement, false);\r\n\t\t\t\t\t\tRenderingService.setEnabled(upload as HTMLInputElement, false);\r\n\r\n\t\t\t\t\t\tRenderingService.showObject(status as HTMLElement);\r\n\t\t\t\t\t\tRenderingService.setText(statusMessage as HTMLElement, LanguageService.getTranslation(TranslationKey.VIEW_CROPPING));\r\n\r\n\t\t\t\t\t\tthis._journey!.crop({\r\n\t\t\t\t\t\t\tdata: ImageService.getBase64Components(base64).data,\r\n\t\t\t\t\t\t\tinputFormat: 0\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\t\t\tthis._cropResponse = result;\r\n\t\t\t\t\t\t\t\tthis.evaluate();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(status as HTMLElement);\r\n\t\t\t\t\t\t\t\tRenderingService.setText(statusMessage as HTMLElement, LanguageService.getTranslation(TranslationKey.EXCEPTION_NETWORK));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tRenderingService.setEnabled(crop as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\tRenderingService.setEnabled(retry as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\tRenderingService.setEnabled(upload as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (upload instanceof HTMLElement) {\r\n\t\t\t\t\tupload.addEventListener('click', async () => {\r\n\r\n\t\t\t\t\t\tif (this._journey !== undefined && this._journey.action === FlowState.PASSIVE_LIVENESS) {\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(crop as HTMLInputElement, false);\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(retry as HTMLInputElement, false);\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(upload as HTMLInputElement, false);\r\n\t\t\t\t\t\t\tRenderingService.showObject(loadingAnimationContainer);\r\n\t\t\t\t\t\t\tconst response = await HttpService.post(\r\n\t\t\t\t\t\t\t\tHttpService.endpoints.passiveLiveness,\r\n\t\t\t\t\t\t\t\tJSON.stringify({\r\n\t\t\t\t\t\t\t\t\tBase64Input: base64,\r\n\t\t\t\t\t\t\t\t\tJourneyId: this._journey!.id,\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tundefined,\r\n\t\t\t\t\t\t\t\t'passiveLiveness'\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\treturn EventService.publish(JourneyEvent.PASSIVE_LIVENESS_FINISHED, response);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (this._journey !== undefined && this._journey.action === FlowState.COVIDPASS) {\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(crop as HTMLInputElement, false);\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(retry as HTMLInputElement, false);\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(upload as HTMLInputElement, false);\r\n\t\t\t\t\t\t\tRenderingService.showObject(status as HTMLElement);\r\n\t\t\t\t\t\t\tRenderingService.showObject(loadingAnimationContainer);\r\n\r\n\t\t\t\t\t\t\treturn this.assertImageExists(base64)\r\n\t\t\t\t\t\t\t\t.then(() => this.getJourney())\r\n\t\t\t\t\t\t\t\t.then((journey) => journey.continueCovid(\r\n\t\t\t\t\t\t\t\t\tbase64,\r\n\t\t\t\t\t\t\t\t\tthis._journey!.id)\r\n\t\t\t\t\t\t\t\t\t.then((res) => DataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN).update(ImageProvider.parseResponseCovidData(res)))\r\n\t\t\t\t\t\t\t\t\t.then(() => this.evaluate())\r\n\t\t\t\t\t\t\t\t\t.then(this.updateJourneyFields)).catch((ex) => {\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.showObject(status as HTMLElement);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setText(statusMessage as HTMLElement, LanguageService.getTranslation(TranslationKey.EXCEPTION_NETWORK));\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(crop as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(retry as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(upload as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (metaData.length === 0) {\r\n\t\t\t\t\t\t\t\tconst _metaData: IMetaData[] = [{\r\n\t\t\t\t\t\t\t\t\tname: 'Capture Type',\r\n\t\t\t\t\t\t\t\t\tvalue: 'File Upload',\r\n\t\t\t\t\t\t\t\t\tstep: '',\r\n\t\t\t\t\t\t\t\t\ttype: 'Simple'\r\n\t\t\t\t\t\t\t\t}];\r\n\r\n\t\t\t\t\t\t\t\tmetaData.push(..._metaData);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(crop as HTMLInputElement, false);\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(retry as HTMLInputElement, false);\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(upload as HTMLInputElement, false);\r\n\r\n\t\t\t\t\t\t\tRenderingService.showObject(status as HTMLElement);\r\n\t\t\t\t\t\t\tRenderingService.showObject(loadingAnimationContainer);\r\n\t\t\t\t\t\t\treturn this.assertImageExists(base64)\r\n\t\t\t\t\t\t\t\t.then(() => this.getJourney())\r\n\t\t\t\t\t\t\t\t.then((journey) => journey.continue({\r\n\t\t\t\t\t\t\t\t\timgList: [{\r\n\t\t\t\t\t\t\t\t\t\t...ImageService.remapNames(ImageService.getBase64Components(base64)),\r\n\t\t\t\t\t\t\t\t\t\tname: journey.action === 'SELFIE' ? RequiredInputImage.SelfiePhoto : RequiredInputImage.WhiteImage,\r\n\t\t\t\t\t\t\t\t\t\tinputFormat: type === 'pdf' ? 1 : 0\r\n\t\t\t\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t\t\t\tjourneyDefinitionId: this._journeyDefinitionId\r\n\t\t\t\t\t\t\t\t}, metaData)\r\n\t\t\t\t\t\t\t\t\t.then((res) => DataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN).update(ImageProvider.parseResponseData(res)))\r\n\t\t\t\t\t\t\t\t\t.then(() => this.evaluate())\r\n\t\t\t\t\t\t\t\t\t.then(this.updateJourneyFields))\r\n\t\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\t\tRenderingService.showObject(status as HTMLElement);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setText(statusMessage as HTMLElement, LanguageService.getTranslation(TranslationKey.EXCEPTION_NETWORK));\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(crop as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(retry as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(upload as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_PROVIDER, { provider: Templates.View }));\r\n\t}\r\n\r\n\tpublic static parseResponseData = ({\r\n\t\tentryData,\r\n\t\tentryDateTime,\r\n\t\tjourneyId,\r\n\t\trequiredAction,\r\n\t\thighLevelResult,\r\n\t\tcurrentResult,\r\n\t\thasError,\r\n\t\tisFinished\r\n\t}: UploadResponse): Partial<IIdScanData> => ({\r\n\t\tjourneyId,\r\n\t\tjourneyReference: entryData.scanReference,\r\n\t\tblurCheck: entryData.glareCheck,\r\n\t\tglareCheck: entryData.blurCheck,\r\n\t\tlowResolutionCheck: entryData.lowResolutionCheck,\r\n\t\tfullDocumentInViewCheck: entryData.fullDocumentInViewCheck,\r\n\t\ttripleScanReason: entryData.tripleScanReason,\r\n\t\tdocuments: (entryData.documents || []).map((doc): IExtendedDocument => removeNullOrUndefined({\r\n\t\t\texpirationDate: doc.expirationDate,\r\n\t\t\tissueDate: doc.issueDate,\r\n\t\t\tissueNumber: doc.issueNumber,\r\n\t\t\tnumber: doc.number,\r\n\t\t\ttype: doc.type,\r\n\t\t\tblurCheck: entryData.blurCheck === 'Good',\r\n\t\t\tglareCheck: entryData.glareCheck === 'Good',\r\n\t\t\tlowResolutionCheck: entryData.lowResolutionCheck === 'Good',\r\n\t\t\tfullDocumentInViewCheck: entryData.fullDocumentInViewCheck === 'Good',\r\n\t\t\tscanReference: entryData.scanReference,\r\n\t\t\ttripleScanReason: entryData.tripleScanReason,\r\n\t\t\tscannerIp: entryData.scannerIp,\r\n\t\t\tdateTime: entryDateTime ? new Date(entryDateTime) : undefined\r\n\t\t})),\r\n\t\tperson: removeNullOrUndefined({\r\n\t\t\taddress: {\r\n\t\t\t\tcity: entryData.holder.address.city,\r\n\t\t\t\tfull: entryData.holder.address.full,\r\n\t\t\t\tpostCode: entryData.holder.address.postCode,\r\n\t\t\t},\r\n\t\t\tbirthDate: entryData.holder.birthDate,\r\n\t\t\tbirthPlace: entryData.holder.birthPlace,\r\n\t\t\tfirstName: entryData.holder.firstName,\r\n\t\t\tfullName: entryData.holder.fullName,\r\n\t\t\tmiddleName: entryData.holder.middleName,\r\n\t\t\tlastName: entryData.holder.lastName,\r\n\t\t\tgender: entryData.holder.gender,\r\n\t\t}) as IPerson,\r\n\t\trequiredAction,\r\n\t\thighLevelResult,\r\n\t\tcurrentResult,\r\n\t\thasError,\r\n\t\tisFinished\r\n\t})\r\n\r\n\tpublic static parseResponseCovidData = ({\r\n\t\tentryData,\r\n\t\tentryDateTime,\r\n\t\tjourneyId,\r\n\t\trequiredAction,\r\n\t\thighLevelResult,\r\n\t\tcurrentResult,\r\n\t\thasError,\r\n\t\tisFinished\r\n\t}: UploadResponse): Partial<IIdScanData> => ({\r\n\t\tjourneyId,\r\n\t\tjourneyReference: entryData.scanReference,\r\n\t\tblurCheck: entryData.glareCheck,\r\n\t\tglareCheck: entryData.blurCheck,\r\n\t\tlowResolutionCheck: entryData.lowResolutionCheck,\r\n\t\tfullDocumentInViewCheck: entryData.fullDocumentInViewCheck,\r\n\t\ttripleScanReason: entryData.tripleScanReason,\r\n\t\tdocuments: (entryData.documents || []).map((doc): IExtendedDocument => removeNullOrUndefined({\r\n\t\t\texpirationDate: doc.expirationDate,\r\n\t\t\tissueDate: doc.issueDate,\r\n\t\t\tissueNumber: doc.issueNumber,\r\n\t\t\tnumber: doc.number,\r\n\t\t\ttype: doc.type,\r\n\t\t\tblurCheck: entryData.blurCheck === 'Good',\r\n\t\t\tglareCheck: entryData.glareCheck === 'Good',\r\n\t\t\tlowResolutionCheck: entryData.lowResolutionCheck === 'Good',\r\n\t\t\tfullDocumentInViewCheck: entryData.fullDocumentInViewCheck === 'Good',\r\n\t\t\tscanReference: entryData.scanReference,\r\n\t\t\ttripleScanReason: entryData.tripleScanReason,\r\n\t\t\tscannerIp: entryData.scannerIp,\r\n\t\t\tdateTime: entryDateTime ? new Date(entryDateTime) : undefined\r\n\t\t})),\r\n\t\trequiredAction,\r\n\t\thighLevelResult,\r\n\t\tcurrentResult,\r\n\t\thasError,\r\n\t\tisFinished\r\n\t})\r\n\r\n\tprivate static loadingAnimation: lottie.AnimationItem | undefined;\r\n\r\n}\r\n","module.exports = \"<div class=\\\"terms-and-conditions-container\\\" data-jcs-element=\\\"terms__and__conditions__container\\\">\\r\\n    <div data-jcs-element=\\\"terms__and__conditions__container\\\">\\r\\n        <h2>{{PROVIDER_TITLE_TERMS_AND_CONDITIONS}}</h2>\\r\\n        <div class=\\\"terms-and-conditions-text\\\" data-jcs-element=\\\"terms__and__conditions__text\\\"></div>\\r\\n\\r\\n        <!-- TCC1 Tickbox -->\\r\\n        <div class=\\\"terms-and-conditions-tickbox-container\\\" style=\\\"display: flex; flex-direction: row; align-items: flex-start; margin-top: 10px; margin-bottom: 10px; width: 100%;\\\">\\r\\n            <div style=\\\"min-width: 30px; display: flex; align-items: flex-start; justify-content: flex-start;\\\">\\r\\n                <input type=\\\"checkbox\\\" id=\\\"tcc1Tickbox\\\" data-jcs-element=\\\"terms__and__conditions__tickbox1\\\" style=\\\"margin: 4px 0 0 0; min-width: 20px;\\\"/>\\r\\n            </div>\\r\\n            <label for=\\\"tcc1Tickbox\\\" data-jcs-element=\\\"terms__and__conditions__tickbox1text\\\" style=\\\"text-align: left; flex: 1;\\\"></label>\\r\\n        </div>\\r\\n\\r\\n        <!-- TCC2 Tickbox -->\\r\\n        <div class=\\\"terms-and-conditions-tickbox-container\\\" style=\\\"display: flex; flex-direction: row; align-items: flex-start; margin-top: 0; margin-bottom: 15px; width: 100%;\\\">\\r\\n            <div style=\\\"min-width: 30px; display: flex; align-items: flex-start; justify-content: flex-start;\\\">\\r\\n                <input type=\\\"checkbox\\\" id=\\\"tcc2Tickbox\\\" data-jcs-element=\\\"terms__and__conditions__tickbox2\\\" style=\\\"margin: 4px 0 0 0; min-width: 20px;\\\"/>\\r\\n            </div>\\r\\n            <label for=\\\"tcc2Tickbox\\\" data-jcs-element=\\\"terms__and__conditions__tickbox2text\\\" style=\\\"text-align: left; flex: 1;\\\"></label>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"terms-and-conditions-action-buttons\\\" style=\\\"display: flex; flex-direction: row;margin-top: 10px;\\\">\\r\\n            <div data-jcs-element=\\\"terms__and__conditions__modal__disagree\\\" style=\\\"margin-right: auto;\\\">\\r\\n                <svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n                    <circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n                    <path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n                </svg>\\r\\n                <p class=\\\"action-caption\\\">{{REQUIRED_ACTION_DISAGREE}}</p>\\r\\n            </div>\\r\\n            <div data-jcs-element=\\\"terms__and__conditions__modal__agree\\\" style=\\\"margin-left: auto;\\\">\\r\\n                <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"help-button-modal-close\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\">\\r\\n                    <path stroke-width=\\\"0\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" d=\\\"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4.393 7.5l-5.643 5.784-2.644-2.506-1.856 1.858 4.5 4.364 7.5-7.643-1.857-1.857z\\\" />\\r\\n                </svg>\\r\\n                <p class=\\\"action-caption\\\">{{REQUIRED_ACTION_AGREE}}</p>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\";","import { IdesMicroWorkerMessages } from './enums/messages';\r\nimport { IImageResult } from './interfaces/image';\r\nimport { IWorkerMessageEvent } from './interfaces/message';\r\nimport EventService from '../helpers/classes/EventService';\r\nimport { JourneyEvent } from '../idscan-jcs';\r\n\r\nexport class IdesMicroHost {\r\n\r\n\tprivate idesMicroWorker?: Worker;\r\n\r\n\tpublic isWorkerSupported = () => typeof (Worker) !== 'undefined';\r\n\r\n\tpublic createWorker = (workerScriptUrl: string, asmScriptUrl: string, timeout: number, timeLogsEnabled: boolean): Promise<void> => new Promise((resolve, reject) => {\r\n\r\n\t\tif (this.idesMicroWorker) {\r\n\t\t\treturn this.makeRequest(IdesMicroWorkerMessages.Initialise, { asmScriptUrl, timeout, timeLogsEnabled})\r\n\t\t\t\t.then(resolve)\r\n\t\t\t\t.catch(reject);\r\n\t\t} else {\r\n\t\t\tEventService.publish(JourneyEvent.TRANSFER_STARTED, {\r\n\t\t\t\tname: 'ides',\r\n\t\t\t\tstatus: 'started',\r\n\t\t\t\tpercentage: 0,\r\n\t\t\t})\r\n\t\t\t\t.then(() => this.idesMicroWorker =  this.createCrossDomainWorker(workerScriptUrl))\r\n\t\t\t\t.then(() => this.makeRequest(IdesMicroWorkerMessages.Initialise, { asmScriptUrl, timeout, timeLogsEnabled }))\r\n\t\t\t\t.then(() => EventService.publish(JourneyEvent.TRANSFER_COMPLETE, {\r\n\t\t\t\t\tname: 'ides',\r\n\t\t\t\t\tstatus: 'complete',\r\n\t\t\t\t\tpercentage: 100,\r\n\t\t\t\t}))\r\n\t\t\t\t.then(resolve)\r\n\t\t\t\t.catch(reject);\r\n\t\t}\r\n\t})\r\n\r\n\tprivate createCrossDomainWorker(workerUrl: string) : Worker | undefined {\r\n\t\tvar worker;\r\n\t\ttry {\r\n\t\t\tif (this.testSameOrigin(workerUrl)) {\r\n\t\t\t\tworker = new Worker(workerUrl);\r\n\t\t\t\tworker.onerror =  (event) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tworker = this.createWorkerFallback(workerUrl);\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tworker = this.createWorkerFallback(workerUrl);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tworker = this.createWorkerFallback(workerUrl);\r\n\t\t}\r\n\t\treturn worker;\r\n\t}\r\n\r\n\tprivate createWorkerFallback (workerUrl: string) : Worker | undefined {\r\n\t\tvar worker;\r\n\t\ttry\r\n\t\t{\r\n\t\t\tvar blob;\r\n\t\t\ttry {\r\n\t\t\t\tblob = new Blob([\"importScripts('\" + workerUrl + \"');\"], { \"type\": 'text/javascript' });\r\n\t\t\t}\r\n\t\t\tcatch (blobEx) {\r\n\t\t\t\tvar blobBuilder = new (window && (window as any).BlobBuilder || window && (window as any).WebKitBlobBuilder || window && (window as any).MozBlobBuilder)();\r\n\t\t\t\tblobBuilder.append(\"importScripts('\" + workerUrl + \"');\");\r\n\t\t\t\tblob = blobBuilder.getBlob('text/javascript');\r\n\t\t\t}\r\n\r\n\t\t\tvar url = window && (window as any).URL || window && (window as any).webkitURL;\r\n\t\t\tvar blobUrl = url.createObjectURL(blob);\r\n\t\t\treturn new Worker(blobUrl);\r\n\t\t} catch (e1) {\r\n\t\t\tconsole.log('WorkerFallback', e1);\r\n\t\t}\r\n\t\treturn worker;\r\n\t}\r\n\r\n\tpublic createNewWorker = (workerScriptUrl: string, asmScriptUrl: string, timeout: number, timeLogsEnabled: boolean) => this.destroyWorker()\r\n\t\t.then(() => this.createWorker(workerScriptUrl, asmScriptUrl, timeout, timeLogsEnabled))\r\n\r\n\tpublic destroyWorker = () => new Promise<void>((resolve) => {\r\n\t\tif (this.idesMicroWorker) {\r\n\t\t\treturn this.makeRequest(IdesMicroWorkerMessages.Terminate, {})\r\n\t\t\t\t.then(() => this.idesMicroWorker!.terminate())\r\n\t\t\t\t.then(() => this.idesMicroWorker = undefined)\r\n\t\t\t\t.then(resolve);\r\n\t\t} else {\r\n\t\t\tresolve();\r\n\t\t}\r\n\t})\r\n\r\n\tpublic checkImage = (imageBlob: Blob): Promise<IImageResult> => this.generateFile(imageBlob)\r\n\t\t.then((image) => this.makeRequest(IdesMicroWorkerMessages.PerformQualityCheck, { image }))\r\n\r\n\tprivate makeRequest = <I = any, O = any>(\r\n\t\trequestMessage: IdesMicroWorkerMessages,\r\n\t\trequestData: I,\r\n\t\trequestId: string = new Date().getTime().toString()\r\n\t): Promise<O> => new Promise((resolve, reject) => {\r\n\t\tif (this.idesMicroWorker) {\r\n\t\t\tconst responseHandler = ({ data }: IWorkerMessageEvent<O>) => {\r\n\t\t\t\tif (data.id === requestId) {\r\n\t\t\t\t\tthis.idesMicroWorker!.removeEventListener('message', responseHandler);\r\n\t\t\t\t\tthis.idesMicroWorker!.removeEventListener('error', errorHandler);\r\n\r\n\t\t\t\t\tswitch (data.message) {\r\n\t\t\t\t\t\tcase IdesMicroWorkerMessages.Error:\r\n\t\t\t\t\t\t\treturn reject();\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn resolve(data.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst errorHandler = (e: any) => {\r\n\t\t\t\tthis.idesMicroWorker!.removeEventListener('message', responseHandler);\r\n\t\t\t\tthis.idesMicroWorker!.removeEventListener('error', errorHandler);\r\n\r\n\t\t\t\treturn reject(e);\r\n\t\t\t};\r\n\r\n\t\t\tthis.idesMicroWorker.addEventListener('message', responseHandler);\r\n\t\t\tthis.idesMicroWorker.addEventListener('error', errorHandler);\r\n\r\n\t\t\tthis.idesMicroWorker!.postMessage({\r\n\t\t\t\tid: requestId,\r\n\t\t\t\tmessage: requestMessage,\r\n\t\t\t\tdata: requestData,\r\n\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject();\r\n\t\t}\r\n\t})\r\n\r\n\tprivate generateFile = (blob: Blob): Promise<Uint8Array> => new Promise((resolve, reject) => {\r\n\t\tconst fileReader = new FileReader();\r\n\r\n\t\tfileReader.addEventListener('load', (e) => {\r\n\t\t\tresolve(new Uint8Array((e.target as FileReader).result as ArrayBuffer));\r\n\t\t});\r\n\r\n\t\tfileReader.addEventListener('error', reject);\r\n\r\n\t\tfileReader.readAsArrayBuffer(blob);\r\n\t})\r\n\r\n\r\n\tprivate testSameOrigin (url: string) {\r\n\t\tvar loc = window.location;\r\n\t\tvar a = document.createElement('a');\r\n\t\ta.href = url;\r\n\t\treturn a.hostname === loc.hostname && a.port === loc.port && a.protocol === loc.protocol;\r\n\t}\r\n\r\n}\r\n\r\n// TODO: Ideally this string wants to come from webpack...\r\nexport default new IdesMicroHost();\r\n","module.exports = \"<div ng-cloak class=\\\"dark-inner-provider-container\\\">\\r\\n\\t<div>\\r\\n\\t\\t<form class=\\\"camera-options--container\\\">\\r\\n\\t\\t\\t<select data-jcs-element=\\\"camera__select\\\"\\r\\n\\t\\t\\t\\tclass=\\\"camera-choices camera-choices-half-s camera-choices-full-xs control control--select\\\"\\r\\n\\t\\t\\t\\tstyle=\\\"display: none\\\"></select>\\r\\n\\t\\t</form>\\r\\n\\t\\t<div class=\\\"help-container\\\">\\r\\n\\t\\t\\t<div class=\\\"camera-viewfinder--container\\\">\\r\\n\\t\\t\\t\\t<canvas data-jcs-element=\\\"camera__viewfinder\\\" class=\\\"camera-viewfinder\\\"></canvas>\\r\\n\\t\\t\\t\\t<div data-jcs-element=\\\"overlay_viewfinder\\\" class=\\\"camera-viewfinder--overlay--transparent\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"loading-animation-container\\\" data-jcs-element=\\\"loading-animation\\\" style=\\\"display:none\\\">\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div data-jcs-element=\\\"info__journey__action__container\\\" class=\\\"camera-capture--caption\\\"\\r\\n\\t\\t\\t\\tstyle=\\\"display: none\\\">\\r\\n\\t\\t\\t\\t<p data-jcs-element=\\\"info__journey__action__text\\\"></p>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div data-jcs-element=\\\"info__journey__action__selfie__container\\\" class=\\\"camera-capture--caption\\\"\\r\\n\\t\\t\\t\\tstyle=\\\"display: none\\\">\\r\\n\\t\\t\\t\\t{{CAMERA_CAPTURE_SELFIE_CAPTION}}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div data-jcs-element=\\\"info__journey__action__address__container\\\" class=\\\"camera-capture--caption\\\"\\r\\n\\t\\t\\t\\tstyle=\\\"display: none\\\">\\r\\n\\t\\t\\t\\t{{CAMERA_CAPTURE_ADDRESS_CAPTION}}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div data-jcs-element=\\\"info__journey__action__covid__container\\\" class=\\\"camera-capture--caption\\\"\\r\\n\\t\\t\\t\\tstyle=\\\"display: none\\\">\\r\\n\\t\\t\\t\\t{{CAMERA_CAPTURE_COVID_CAPTION}}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"help-inner-container\\\" data-jcs-element=\\\"capture__help__container\\\" style=\\\"display:none\\\">\\r\\n\\t\\t\\t\\t<h2>{{HELP_MODAL_AUTOCAPTURE_TITLE}}</h2>\\r\\n\\t\\t\\t\\t<p class=\\\"help-inner-container-subtitle\\\">{{HELP_MODAL_AUTOCAPTURE_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t<b>{{HELP_MODAL_AUTOCAPTURE_TIPS}}</b>\\r\\n\\t\\t\\t\\t<div class=\\\"help-images-container\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\" data-jcs-element=\\\"capture__modal__glare__animation__container\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_AUTOCAPTURE_GLARE_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_AUTOCAPTURE_GLARE_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\" data-jcs-element=\\\"capture__modal__low__res__animation__container\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_AUTOCAPTURE_FAR_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_AUTOCAPTURE_FAR_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\" data-jcs-element=\\\"capture__modal__blur__animation__container\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_AUTOCAPTURE_BLUR_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_AUTOCAPTURE_BLUR_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"modal-footer modal-bottom modal-actions-container\\\">\\r\\n\\t\\t\\t\\t\\t<p data-jcs-element=\\\"capture__modal__manual__capture__text\\\">\\r\\n\\t\\t\\t\\t\\t\\t{{HELP_MODAL_AUTOCAPTURE_MANUAL_CAPTURE}}</p>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"actions-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div data-jcs-element=\\\"capture__modal__camera__manual__capture\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control control--switch manual--mode--switch\\\" aria-label=\\\"switch\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" data-jcs-element=\\\"capture__modal__camera__manual__capture__check\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tchecked />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control__switch control__switch__blue\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"icon ico-checkmark-16 control__switchIcon text-black\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<svg width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"icon ico-checkmark-16 control__switchIcon text-black\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M13 4L6 12L3 9\\\" stroke=\\\"white\\\" stroke-width=\\\"1.5\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tstroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"></path>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{HELP_MODAL_AUTOCAPTURE_TURN_MANUAL_CAPTURE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"spacer\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-button-container\\\" data-jcs-element=\\\"capture__modal__close__help\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"help-inner-container\\\" data-jcs-element=\\\"capture__selfie__help__container\\\" style=\\\"display:none\\\">\\r\\n\\t\\t\\t\\t<h2>{{HELP_MODAL_SELFIE_TITLE}}</h2>\\r\\n\\t\\t\\t\\t<p class=\\\"help-inner-container-subtitle\\\">{{HELP_MODAL_SELFIE_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t<div class=\\\"show-mobile\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-info-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-title\\\">{{PREVIEW_INFO_TITLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-partial.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-glasses.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"modal-close-button close-preview-info-button\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tdata-jcs-element=\\\"capture__selfie__modal__close__help\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"show-desktop preview-info-container\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"preview-info-title\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<ul class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/selfie-good.svg\") + \"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-partial.svg\") + \"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-glasses.svg\") + \"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-blurred.svg\") + \"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"help-inner-container\\\" data-jcs-element=\\\"capture__address__help__container\\\" style=\\\"display:none\\\">\\r\\n\\t\\t\\t\\t<h2>{{HELP_MODAL_POA_TITLE}}</h2>\\r\\n\\t\\t\\t\\t<p class=\\\"help-inner-container-subtitle\\\">{{HELP_MODAL_POA_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t<b>{{HELP_MODAL_POA_TIPS}}</b>\\r\\n\\t\\t\\t\\t<div class=\\\"help-images-container\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\" data-jcs-element=\\\"capture__address__modal__glare__animation__container\\\">\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_POA_GLARE_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_POA_GLARE_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tdata-jcs-element=\\\"capture__address__modal__low__res__animation__container\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_POA_FAR_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_POA_FAR_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\" data-jcs-element=\\\"capture__address__modal__blur__animation__container\\\">\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_POA_BLUR_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_POA_BLUR_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"modal-footer modal-bottom modal-actions-container\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"actions-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"spacer\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-button-container\\\" data-jcs-element=\\\"capture__address__modal__close__help\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\r\\n\\t\\t\\t<div class=\\\"help-inner-container\\\" data-jcs-element=\\\"capture__covid__help__container\\\" style=\\\"display:none\\\">\\r\\n\\t\\t\\t\\t<h2>{{HELP_MODAL_COVID_TITLE}}</h2>\\r\\n\\t\\t\\t\\t<p class=\\\"help-inner-container-subtitle\\\">{{HELP_MODAL_COVID_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t<b>{{HELP_MODAL_COVID_TIPS}}</b>\\r\\n\\t\\t\\t\\t<div class=\\\"help-images-container\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\" data-jcs-element=\\\"capture__covid__modal__glare__animation__container\\\">\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_COVID_GLARE_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_COVID_GLARE_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tdata-jcs-element=\\\"capture__covid__modal__low__res__animation__container\\\">\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_COVID_FAR_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_COVID_FAR_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\" data-jcs-element=\\\"capture__covid__modal__blur__animation__container\\\">\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_COVID_BLUR_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_COVID_BLUR_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"modal-footer modal-bottom modal-actions-container\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"actions-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"spacer\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-button-container\\\" data-jcs-element=\\\"capture__covid__modal__close__help\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\r\\n\\t<div class=\\\"actions-container\\\">\\r\\n\\t\\t<div data-jcs-element=\\\"camera__manual__capture\\\" class=\\\"item\\\">\\r\\n\\t\\t\\t<div data-jcs-element=\\\"camera__manual__capture__inner\\\" style=\\\"display: none;\\\">\\r\\n\\t\\t\\t\\t<label class=\\\"control control--switch manual--mode--switch\\\" aria-label=\\\"switch\\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" checked />\\r\\n\\t\\t\\t\\t\\t<div class=\\\"control__switch\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"icon ico-checkmark-16 control__switchIcon text-black\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<svg width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"icon ico-checkmark-16 control__switchIcon text-black\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M13 4L6 12L3 9\\\" stroke=\\\"rgb(0, 13, 26)\\\" stroke-width=\\\"1.5\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tstroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"></path>\\r\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{HELP_MODAL_POA_TURN_MANUAL_CAPTURE}}</p>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<form class=\\\"manual-capture-button-container item\\\">\\r\\n\\t\\t\\t<div class=\\\"camera-capture--container\\\">\\r\\n\\t\\t\\t\\t<input data-jcs-element=\\\"camera__capture\\\" class=\\\"camera-capture--button\\\" type=\\\"button\\\" />\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</form>\\r\\n\\t\\t<div class=\\\"item\\\">\\r\\n\\t\\t\\t<div class=\\\"help-button-container\\\" data-jcs-element=\\\"capture__close__help\\\" style=\\\"display: none\\\">\\r\\n\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke=\\\"white\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke=\\\"white\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"help-button-container\\\" data-jcs-element=\\\"capture__open__help\\\">\\r\\n\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\"\\r\\n\\t\\t\\t\\t\\t\\td=\\\"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12ZM12 7C11.0445 7 10 7.68564 10 9C10 9.55228 9.55229 10 9 10C8.44771 10 8 9.55228 8 9C8 6.31436 10.227 5 12 5C14.2091 5 16 6.79086 16 9C16 10.8638 14.7252 12.4299 13 12.874V12.8746V12.8787V12.8827V12.8868V12.8909V12.895V12.8991V12.9031V12.9072V12.9113V12.9153V12.9194V12.9234V12.9275V12.9315V12.9355V12.9396V12.9436V12.9476V12.9517V12.9557V12.9597V12.9637V12.9677V12.9717V12.9757V12.9796V12.9836V12.9876V12.9915V12.9955V12.9995V13.0034V13.0073V13.0113V13.0152V13.0191V13.023V13.0269V13.0308V13.0347V13.0386V13.0425V13.0463V13.0502V13.0541V13.0579V13.0617V13.0656V13.0694V13.0732V13.077V13.0808V13.0846V13.0884V13.0922V13.0959V13.0997V13.1034V13.1071V13.1109V13.1146V13.1183V13.122V13.1257V13.1294V13.133V13.1367V13.1403V13.144V13.1476V13.1512V13.1548V13.1584V13.162V13.1656V13.1691V13.1727V13.1762V13.1797V13.1832V13.1868V13.1902V13.1937V13.1972V13.2007V13.2041V13.2075V13.211V13.2144V13.2178V13.2211V13.2245V13.2279V13.2312V13.2345V13.2379V13.2412V13.2445V13.2477V13.251V13.2542V13.2575V13.2607V13.2639V13.2671V13.2703V13.2735V13.2766V13.2797V13.2829V13.286V13.2891V13.2921V13.2952V13.2983V13.3013V13.3043V13.3073V13.3103V13.3133V13.3162V13.3191V13.3221V13.325V13.3279V13.3307V13.3336V13.3364V13.3392V13.342V13.3448V13.3476V13.3504V13.3531V13.3558V13.3585V13.3612V13.3639V13.3665V13.3691V13.3718V13.3744V13.3769V13.3795V13.382V13.3845V13.387V13.3895V13.392V13.3944V13.3969V13.3993V13.4017V13.404V13.4064V13.4087V13.411V13.4133V13.4156V13.4178V13.42V13.4223V13.4244V13.4266V13.4288V13.4309V13.433V13.4351V13.4371V13.4392V13.4412V13.4432V13.4452V13.4471V13.4491V13.451V13.4529V13.4547V13.4566V13.4584V13.4602V13.462V13.4637V13.4655V13.4672V13.4689V13.4705V13.4722V13.4738V13.4754V13.477V13.4785V13.48V13.4815V13.483V13.4845V13.4859V13.4873V13.4887V13.49V13.4914V13.4927V13.494V13.4952V13.4965V13.4977V13.4988V13.5C13 14.0523 12.5523 14.5 12 14.5C11.4477 14.5 11 14.0523 11 13.5V13.4988V13.4977V13.4965V13.4952V13.494V13.4927V13.4914V13.49V13.4887V13.4873V13.4859V13.4845V13.483V13.4815V13.48V13.4785V13.477V13.4754V13.4738V13.4722V13.4705V13.4689V13.4672V13.4655V13.4637V13.462V13.4602V13.4584V13.4566V13.4547V13.4529V13.451V13.4491V13.4471V13.4452V13.4432V13.4412V13.4392V13.4371V13.4351V13.433V13.4309V13.4288V13.4266V13.4244V13.4223V13.42V13.4178V13.4156V13.4133V13.411V13.4087V13.4064V13.404V13.4017V13.3993V13.3969V13.3944V13.392V13.3895V13.387V13.3845V13.382V13.3795V13.3769V13.3744V13.3718V13.3691V13.3665V13.3639V13.3612V13.3585V13.3558V13.3531V13.3504V13.3476V13.3448V13.342V13.3392V13.3364V13.3336V13.3307V13.3279V13.325V13.3221V13.3191V13.3162V13.3133V13.3103V13.3073V13.3043V13.3013V13.2983V13.2952V13.2921V13.2891V13.286V13.2829V13.2797V13.2766V13.2735V13.2703V13.2671V13.2639V13.2607V13.2575V13.2542V13.251V13.2477V13.2445V13.2412V13.2379V13.2345V13.2312V13.2279V13.2245V13.2211V13.2178V13.2144V13.211V13.2075V13.2041V13.2007V13.1972V13.1937V13.1902V13.1868V13.1832V13.1797V13.1762V13.1727V13.1691V13.1656V13.162V13.1584V13.1548V13.1512V13.1476V13.144V13.1403V13.1367V13.133V13.1294V13.1257V13.122V13.1183V13.1146V13.1109V13.1071V13.1034V13.0997V13.0959V13.0922V13.0884V13.0846V13.0808V13.077V13.0732V13.0694V13.0656V13.0617V13.0579V13.0541V13.0502V13.0463V13.0425V13.0386V13.0347V13.0308V13.0269V13.023V13.0191V13.0152V13.0113V13.0073V13.0034V12.9995V12.9955V12.9915V12.9876V12.9836V12.9796V12.9757V12.9717V12.9677V12.9637V12.9597V12.9557V12.9517V12.9476V12.9436V12.9396V12.9355V12.9315V12.9275V12.9234V12.9194V12.9153V12.9113V12.9072V12.9031V12.8991V12.895V12.8909V12.8868V12.8827V12.8787V12.8746V12.8705V12.8664V12.8623V12.8582V12.8541V12.85V12.8459V12.8418V12.8376V12.8335V12.8294V12.8253V12.8212V12.8171V12.8129V12.8088V12.8047V12.8006V12.7964V12.7923V12.7882V12.784V12.7799V12.7758V12.7716V12.7675V12.7634V12.7592V12.7551V12.751V12.7469V12.7427V12.7386V12.7345V12.7303V12.7262V12.7221V12.718V12.7138V12.7097V12.7056V12.7015V12.6973V12.6932V12.6891V12.685V12.6809V12.6768V12.6727V12.6686V12.6645V12.6604V12.6563V12.6522V12.6481V12.644V12.6399V12.6358V12.6317V12.6277V12.6236V12.6195V12.6155V12.6114V12.6073V12.6033V12.5992V12.5952V12.5912V12.5871V12.5831V12.5791V12.575V12.571V12.567V12.563V12.559V12.555V12.551V12.547V12.5431V12.5391V12.5351V12.5312V12.5272V12.5233V12.5193V12.5154V12.5114V12.5075V12.5036V12.4997V12.4958V12.4919V12.488V12.4841V12.4803V12.4764V12.4725V12.4687V12.4648V12.461V12.4572V12.4534V12.4496V12.4458V12.442V12.4382V12.4344V12.4306V12.4269V12.4231V12.4194V12.4157V12.4119V12.4082V12.4045V12.4008V12.3971V12.3935V12.3898V12.3862V12.3825V12.3789V12.3753V12.3716V12.368V12.3645V12.3609V12.3573V12.3538V12.3502V12.3467V12.3432V12.3396V12.3361V12.3327V12.3292V12.3257V12.3223V12.3188V12.3154V12.312V12.3086V12.3052V12.3018V12.2984V12.2951V12.2917V12.2884V12.2851V12.2818V12.2785V12.2753V12.272V12.2687V12.2655V12.2623V12.2591V12.2559V12.2527V12.2496V12.2464V12.2433V12.2402V12.2371V12.234V12.2309V12.2279V12.2248V12.2218V12.2188V12.2158V12.2128V12.2099V12.2069V12.204V12.2011V12.1982V12.1953V12.1924V12.1896V12.1867V12.1839V12.1811V12.1784V12.1756V12.1728V12.1701V12.1674V12.1647V12.162V12.1594V12.1567V12.1541V12.1515V12.1489V12.1463V12.1438V12.1413V12.1388V12.1363V12.1338V12.1313V12.1289V12.1265V12.1241V12.1217V12.1193V12.117V12.1147V12.1124V12.1101V12.1078V12.1056V12.1034V12.1012V12.099V12.0968V12.0947V12.0926V12.0905V12.0884V12.0864V12.0843V12.0823V12.0803V12.0783V12.0764V12.0745V12.0726V12.0707V12.0688V12.067V12.0652V12.0634V12.0616V12.0599V12.0581V12.0564V12.0548V12.0531V12.0515V12.0499V12.0483V12.0467V12.0452V12.0437V12.0422V12.0407V12.0393V12.0378V12.0365V12.0351V12.0337V12.0324V12.0311V12.0298V12.0286V12.0274V12.0262V12.025V12.0239V12.0227V12.0216V12.0206V12.0195V12.0185V12.0175V12.0166V12.0156V12.0147V12.0138V12.013V12.0121V12.0113V12.0105V12.0098V12.0091V12.0084V12.0077V12.007V12.0064V12.0058V12.0053V12.0047V12.0042V12.0037V12.0033V12.0029V12.0025V12.0021V12.0018V12.0015V12.0012V12.0009V12.0007V12.0005V12.0004V12.0002V12.0001V12.0001V12L12 12H11C11 11.4477 11.4477 11 12 11C13.1046 11 14 10.1046 14 9C14 7.89543 13.1046 7 12 7ZM12 18C12.5523 18 13 17.5523 13 17C13 16.4477 12.5523 16 12 16C11.4477 16 11 16.4477 11 17C11 17.5523 11.4477 18 12 18Z\\\"\\r\\n\\t\\t\\t\\t\\t\\tfill=\\\"white\\\" />\\r\\n\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{HELP_MODAL_NEED_HELP}}</p>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n</div>\\r\\n<div class=\\\"notification notification-blue\\\" data-jcs-element=\\\"attempt__count__container\\\">\\r\\n\\t<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\">\\r\\n\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\"\\r\\n\\t\\t\\td=\\\"M0.25 8C0.25 3.71979 3.71979 0.25 8 0.25H8.00081C12.2787 0.254627 15.7454 3.72135 15.75 7.99919L15.75 8C15.75 12.2802 12.2802 15.75 8 15.75C3.71979 15.75 0.25 12.2802 0.25 8ZM7.99958 1.75C4.54799 1.75023 1.75 4.54836 1.75 8C1.75 11.4518 4.54822 14.25 8 14.25C11.4515 14.25 14.2496 11.4522 14.25 8.00081C14.2463 4.55026 11.4501 1.75394 7.99958 1.75ZM8 5C7.44772 5 7 4.55228 7 4C7 3.44772 7.44772 3 8 3C8.55229 3 9 3.44772 9 4C9 4.55228 8.55229 5 8 5ZM7 6.25C6.58579 6.25 6.25 6.58579 6.25 7C6.25 7.41421 6.58579 7.75 7 7.75H7.25V11.25H6.5C6.08579 11.25 5.75 11.5858 5.75 12C5.75 12.4142 6.08579 12.75 6.5 12.75H8H9.5C9.91421 12.75 10.25 12.4142 10.25 12C10.25 11.5858 9.91421 11.25 9.5 11.25H8.75V7C8.75 6.58579 8.41421 6.25 8 6.25H7Z\\\"\\r\\n\\t\\t\\tfill=\\\"#4A88C6\\\" />\\r\\n\\t</svg>\\r\\n\\t<p>{{ATTEMPTS_REMAINING}}<span data-jcs-element=\\\"attempt__counter\\\"></span>\\r\\n\\t</p>\\r\\n</div>\\r\\n<div data-jcs-element=\\\"view__status\\\">\\r\\n\\t<p data-jcs-element=\\\"view__status__message\\\"></p>\\r\\n</div> \";","import { ExceptionManager } from '../../helpers/classes/ExceptionManager';\r\nimport { FlowState } from '../enums/FlowState';\r\nimport { RequiredAction } from '../enums/RequiredAction';\r\nimport { TranslationKey } from '../enums/Translation';\r\n\r\nexport class JourneyFlow {\r\n\tpublic get state(): FlowState {\r\n\t\treturn this._state;\r\n\t}\r\n\r\n\tpublic get attempt(): number {\r\n\t\treturn this._attempt;\r\n\t}\r\n\r\n\tpublic get history(): FlowState[] {\r\n\t\treturn this._history;\r\n\t}\r\n\r\n\tprivate _state: FlowState;\r\n\tprivate _history: FlowState[] = [];\r\n\tprivate _attempt: number;\r\n\r\n\tconstructor(\r\n\t\tstate: FlowState = FlowState.IDENTITY_FRONT,\r\n\t\tattempt: number = 1\r\n\t) {\r\n\t\tthis._state = state;\r\n\t\tthis._attempt = attempt;\r\n\t\tthis.setFlowVariables(this._state, this._attempt);\r\n\t}\r\n\r\n\t/**\r\n\t * Takes an internal state identifier and parses it into state and attempt\r\n\t * @param internalState\r\n\t */\r\n\tpublic proceed = (internalState: RequiredAction): Promise<void> => {\r\n\t\tswitch (internalState) {\r\n\t\t\tcase RequiredAction.FRONTSIDE_FIRST_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.IDENTITY_FRONT, 1);\r\n\t\t\tcase RequiredAction.FRONTSIDE_SECOND_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.IDENTITY_FRONT, 2);\r\n\t\t\tcase RequiredAction.FRONTSIDE_THIRD_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.IDENTITY_FRONT, 3);\r\n\t\t\tcase RequiredAction.BACKSIDE_FIRST_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.IDENTITY_BACK, 1);\r\n\t\t\tcase RequiredAction.BACKSIDE_SECOND_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.IDENTITY_BACK, 2);\r\n\t\t\tcase RequiredAction.BACKSIDE_THIRD_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.IDENTITY_BACK, 3);\r\n\t\t\tcase RequiredAction.ADDRESSDOCUMENT_FIRST_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.ADDRESS, 1);\r\n\t\t\tcase RequiredAction.ADDRESSDOCUMENT_SECOND_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.ADDRESS, 2);\r\n\t\t\tcase RequiredAction.ADDRESSDOCUMENT_THIRD_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.ADDRESS, 3);\r\n\t\t\tcase RequiredAction.SELFIE_FIRST_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.SELFIE, 1);\r\n\t\t\tcase RequiredAction.SELFIE_SECOND_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.SELFIE, 2);\r\n\t\t\tcase RequiredAction.SELFIE_THIRD_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.SELFIE, 3);\r\n\t\t\tcase RequiredAction.LIVENESS:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.LIVENESS, 1);\r\n\t\t\tcase RequiredAction.PASSIVE_LIVENESS:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.PASSIVE_LIVENESS, 1);\r\n\t\t\tcase RequiredAction.COVIDPASS_FIRST_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.COVIDPASS, 1);\r\n\t\t\tcase RequiredAction.COVIDPASS_SECOND_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.COVIDPASS, 2);\r\n\t\t\tcase RequiredAction.COVIDPASS_THIRD_SCAN:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.COVIDPASS, 3);\r\n\t\t\tcase RequiredAction.DATACHECKS:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.DATACHECKS, 1);\r\n\t\t\tcase RequiredAction.NONE:\r\n\t\t\t\treturn this.setFlowVariables(FlowState.NONE, 0);\r\n\t\t\tdefault:\r\n\t\t\t\treturn Promise.reject(\r\n\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\tnew ExceptionManager.FlowStateException(\r\n\t\t\t\t\t\t\tTranslationKey.EXCEPTION_FLOW_STATE_MISSING,\r\n\t\t\t\t\t\t\tinternalState\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Sets the state and attempt based on the interpreter results\r\n\t * @param state\r\n\t * @param attempt\r\n\t */\r\n\tprivate setFlowVariables = (\r\n\t\tstate: FlowState,\r\n\t\tattempt: number\r\n\t): Promise<void> => {\r\n\t\tthis._attempt = attempt;\r\n\t\tthis._state = state;\r\n\r\n\t\treturn this.pushState();\r\n\t};\r\n\r\n\t/**\r\n\t * Pushes the current state into the history stack.\r\n\t */\r\n\tprivate pushState = (): Promise<void> => {\r\n\t\tthis._history.push(this._state);\r\n\r\n\t\treturn Promise.resolve();\r\n\t};\r\n}\r\n","/**\r\n * @internal\r\n */\r\nexport class Helper {\r\n\r\n\tpublic static isValidIntNumber = (param: any) => {\r\n\t\treturn (\r\n\t\t\tHelper.isDefined(param) && isFinite(param) && isFinite(parseInt(param, 10)) && Helper.isNumber(parseInt(param, 10))\r\n\t\t);\r\n\t}\r\n\r\n\tpublic static isValidFloatNumber = (param: any) => {\r\n\t\treturn (\r\n\t\t\tHelper.isDefined(param) && isFinite(param) && isFinite(parseFloat(param)) && Helper.isNumber(parseFloat(param))\r\n\t\t);\r\n\t}\r\n\r\n\tpublic static isNumber = (value: any) => typeof value === 'number';\r\n\r\n\tpublic static isDefined = (value: any) => typeof value !== 'undefined';\r\n\r\n\tpublic static boundValue = (value: number, min: number = 0, max: number = 1) => {\r\n\t\tif (value <= min) { return min; }\r\n\t\telse if (value >= max) { return max; }\r\n\t\telse { return value; }\r\n\t}\r\n\r\n\tpublic static newGuid = () => {\r\n\t\tfunction s4() {\r\n\t\t\treturn Math.floor((1 + Math.random()) * 0x10000)\r\n\t\t\t\t.toString(16)\r\n\t\t\t\t.substring(1);\r\n\t\t}\r\n\r\n\t\treturn s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\r\n\t}\r\n\r\n\tpublic static getCurrentTime = () => {\r\n\t\tconst date = new Date();\r\n\t\tconst currentTime = date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds() + ':' + date.getMilliseconds();\r\n\r\n\t\treturn currentTime;\r\n\t}\r\n\r\n\tpublic static mediaDevicesimplementationForOlderBrowsers = () => {\r\n\t\tconst _navigator = (navigator as any);\r\n\r\n\t\t// Older browsers might not implement mediaDevices at all, so we set an empty object first\r\n\t\tif (_navigator.mediaDevices === undefined) {\r\n\t\t\t(_navigator as any).mediaDevices = {} as MediaDevices;\r\n\t\t}\r\n\r\n\t\t// Some browsers partially implement mediaDevices. We can't just assign an object\r\n\t\t// with getUserMedia as it would overwrite existing properties.\r\n\t\t// Here, we will just add the getUserMedia property if it's missing.\r\n\t\tif (_navigator.mediaDevices.getUserMedia === undefined) {\r\n\t\t\t_navigator.mediaDevices.getUserMedia = (constraints: MediaStreamConstraints) => {\r\n\r\n\t\t\t\t// First get ahold of the legacy getUserMedia, if present\r\n\t\t\t\t// var getUserMedia = _navigator.webkitGetUserMedia || _navigator.mozGetUserMedia;\r\n\t\t\t\tconst getUserMedia = (_navigator.getUserMedia || _navigator.webkitGetUserMedia || _navigator.mozGetUserMedia || _navigator.msGetUserMedia);\r\n\r\n\t\t\t\t// Some browsers just don't implement it - return a rejected promise with an error\r\n\t\t\t\t// to keep a consistent interface\r\n\t\t\t\tif (!getUserMedia) {\r\n\t\t\t\t\treturn Promise.reject(new Error('getUserMedia is not implemented in this browser'));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Otherwise, wrap the call to the old _navigator.getUserMedia with a Promise\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tgetUserMedia.call(_navigator, constraints, resolve, reject);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static setWebSocketPort = (path: string) => {\r\n\t\tlet temp = path;\r\n\t\tif (path.endsWith('/')) {\r\n\t\t\ttemp = path.slice(0, path.length - 1);\r\n\t\t}\r\n\r\n\t\tlet base = temp.split(':')[0];\r\n\t\tbase += `:8088/`;\r\n\r\n\t\treturn base;\r\n\t}\r\n\r\n\tpublic static checkCameraCompatibility = () => {\r\n\t\tconst area: string = 'camera media channel: ';\r\n\r\n\t\t// Check canvas support\r\n\t\tif (!Helper.isCanvasSupported()) {\r\n\t\t\tthrow new Error(area + ' Canvas is not supported or at least getContext(\"2d\") is not.');\r\n\t\t}\r\n\r\n\t\t// Check toBolb functionality\r\n\t\tif (!Helper.isBolbSupported()) {\r\n\t\t\tthrow new Error(area + 'toBolb is not supported.');\r\n\t\t}\r\n\r\n\t\t// Check Websockets capability\r\n\t\tif (!Helper.isWebsocketsSupported()) {\r\n\t\t\tthrow new Error(area + 'Websockets is not supported in the current browser.');\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// https://webrtc.github.io/samples/src/content/getusermedia/resolution/\r\n\r\n\tprivate static isCanvasSupported = () => {\r\n\t\tconst elem = document.createElement('canvas');\r\n\t\treturn !!(elem.getContext && elem.getContext('2d'));\r\n\t}\r\n\r\n\tprivate static isBolbSupported = () => {\r\n\t\tconst canvasPrototype = HTMLCanvasElement && HTMLCanvasElement.prototype;\r\n\r\n\t\tif (!HTMLCanvasElement || !canvasPrototype.toBlob) {\r\n\t\t\t// $log.info(area + ' no getUserMedia object of any kind !');\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprivate static isWebsocketsSupported = () => {\r\n\t\treturn 'WebSocket' in window || 'MozWebSocket' in window;\r\n\t}\r\n}\r\n","import DataService, { DataStoreType } from '../../idscan/classes/DataService';\r\nimport { JourneyEvent } from '../../idscan/enums/JourneyEvent';\r\nimport { TranslationKey } from '../../idscan/enums/Translation';\r\nimport { IIdScanData } from '../../idscan/interfaces/DataFormats';\r\nimport { IEventSubscriber } from '../../idscan/interfaces/EventSubscriber';\r\nimport { IUnsubscribable } from '../../idscan/interfaces/Unsubscribable';\r\nimport { ExceptionManager } from './ExceptionManager';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class EventService {\r\n\tprivate _topics: Partial<Record<JourneyEvent, IEventSubscriber[]>> = {};\r\n\r\n\t/**\r\n\t * Publishes an event for the listeners, and feeds the function with the given data\r\n\t * @param event\r\n\t * @param data\r\n\t */\r\n\tpublic publish = (event: JourneyEvent, data?: any): Promise<void> => new Promise((resolve) => {\r\n\t\t(this._topics[event] || []).forEach((subscriber) => {\r\n\t\t\tsubscriber.fn({ timestamp: new Date().getTime(), ...data });\r\n\t\t});\r\n\r\n\t\tresolve();\r\n\t})\r\n\r\n\t/**\r\n\t * Subscribes to a specific event with a bound function, returns an Unsubscribable.\r\n\t * @param event\r\n\t * @param fn\r\n\t * @param priority\r\n\t */\r\n\tpublic subscribe(event: JourneyEvent, fn: any, priority?: number): IUnsubscribable {\r\n\t\tthis.assertStringEvent(event);\r\n\t\tthis.assertValidFunction(fn);\r\n\t\tthis.assertValidPriority(priority);\r\n\r\n\t\tconst subscriber: IEventSubscriber = {\r\n\t\t\tfn,\r\n\t\t\tpriority\r\n\t\t};\r\n\r\n\t\tif (!this._topics[event]) {\r\n\t\t\tthis._topics[event] = [];\r\n\t\t}\r\n\r\n\t\tthis._topics[event]!.push(subscriber);\r\n\t\tthis.sort(event);\r\n\r\n\t\treturn {\r\n\t\t\tunsubscribe: () => {\r\n\t\t\t\tthis.unsubscribe(event, subscriber);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tpublic terminate = () => new Promise((resolve) => {\r\n\t\tDataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN).reset();\r\n\t\tthis.unsubscribeAll()\r\n\t\t\t.then(resolve);\r\n\t})\r\n\r\n\tpublic unsubscribeAll = () => new Promise<void>((resolve) => {\r\n\t\tObject.keys(this._topics).forEach((topic) => {\r\n\t\t\t(this._topics as Record<JourneyEvent, IEventSubscriber[]>)[topic as JourneyEvent]\r\n\t\t\t\t.forEach((sub) => this.unsubscribe(topic, sub));\r\n\t\t});\r\n\r\n\t\treturn resolve();\r\n\t})\r\n\r\n\tunsubscribeTopic(event: JourneyEvent) {\r\n\t\tvar topic = (this._topics as Record<JourneyEvent, IEventSubscriber[]>)[event as JourneyEvent];\r\n\r\n\t\tif (topic) {\r\n\t\t\ttopic.forEach((sub) => this.unsubscribe(event, sub));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Unsubscribes a function from being triggered in case of an event\r\n\t * @param event\r\n\t * @param subscriber\r\n\t */\r\n\tpublic unsubscribe(event: string, subscriber: IEventSubscriber): void {\r\n\t\tif (this._topics[event as JourneyEvent]) {\r\n\t\t\tthis._topics[event as JourneyEvent] = this._topics[event as JourneyEvent]!.filter((sub: any) => subscriber.fn !== sub.fn);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * An algorithm to sort given event subscribers according to their priority\r\n\t * @param event\r\n\t */\r\n\tprivate sort(event: string) {\r\n\t\tif (this._topics[event as JourneyEvent]) {\r\n\t\t\tthis._topics[event as JourneyEvent]!.sort((a: IEventSubscriber, b: IEventSubscriber) => {\r\n\t\t\t\treturn a.priority !== undefined && b.priority !== undefined ?\r\n\t\t\t\t\ta.priority > b.priority ?\r\n\t\t\t\t\t\t1 :\r\n\t\t\t\t\t\tb.priority > a.priority ?\r\n\t\t\t\t\t\t\t-1 :\r\n\t\t\t\t\t\t\t0 :\r\n\t\t\t\t\ta.priority === undefined && b.priority === undefined ?\r\n\t\t\t\t\t\t0 :\r\n\t\t\t\t\t\ta.priority === undefined ?\r\n\t\t\t\t\t\t\t1 :\r\n\t\t\t\t\t\t\t-1;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Makes sure that the event name is string\r\n\t * @param event\r\n\t */\r\n\tprivate assertStringEvent(event: string) {\r\n\t\tif (typeof event !== 'string') {\r\n\t\t\tthrow ExceptionManager.process(new ExceptionManager.InvalidParameterException(TranslationKey.EXCEPTION_INVALID_PARAMETER_NAME_MUST_BE_STRING));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Make sure that the callback paramter is a valid function\r\n\t * @param fn\r\n\t */\r\n\tprivate assertValidFunction(fn: any) {\r\n\t\tif (fn instanceof Function === false) {\r\n\t\t\tthrow ExceptionManager.process(new ExceptionManager.InvalidParameterException(TranslationKey.EXCEPTION_INVALID_PARAMETER_CALLBACK_MUST_BE_FUNCTION));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Make sure that the priority is a positive number or undefined\r\n\t * @param priority\r\n\t */\r\n\tprivate assertValidPriority(priority: number | undefined) {\r\n\t\tif (priority !== undefined) {\r\n\t\t\tif (typeof priority !== 'number') {\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.InvalidParameterException(TranslationKey.EXCEPTION_INVALID_PARAMETER_PRIORITY_MUST_BE_NUMBER));\r\n\t\t\t} else if (priority < 0) {\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.InvalidParameterException(TranslationKey.EXCEPTION_INVALID_PARAMETER_PRIORITY_MUST_BE_POSITIVE_NUMBER));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default new EventService();\r\n","import EventService from '../../../helpers/classes/EventService';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport JourneyManager from '../../classes/JourneyManager';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { IDocumentImage } from '../../interfaces/DocumentImage';\r\nimport { JourneySelectStep } from '../../renderers/step/journeySelect';\r\n\r\nexport class ResultsStep {\r\n\tpublic static render(this: JourneyContainer) {\r\n\t\treturn TemplateService.renderToContainer(this._container, Templates.Result)\r\n\t\t\t.then(() => JourneyManager.getResults(this._journey!.id))\r\n\t\t\t.then((results) => {\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tresult: LanguageService.getTranslation(\r\n\t\t\t\t\t\t`RESULTS_HIGH_LEVEL_${results.highLevelResult}` as TranslationKey\r\n\t\t\t\t\t),\r\n\t\t\t\t\tresultMessage:\r\n\t\t\t\t\t\tresults.highLevelResult == 'Expired'\r\n\t\t\t\t\t\t\t? LanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\tTranslationKey.RESULTS_HIGH_LEVEL_EXPIRED_MESSAGE_VALUE\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\treferenceId: results.referenceNumber,\r\n\t\t\t\t\tjourneyId: (results as any).JourneyId,\r\n\t\t\t\t\tresultDetails: (results as any).HighLevelResultDetails.filter(\r\n\t\t\t\t\t\t(x: string) =>\r\n\t\t\t\t\t\t\t!x.startsWith('DOCUMENTBACKSIDECHECK') &&\r\n\t\t\t\t\t\t\t!x.startsWith('DATACHECKS')\r\n\t\t\t\t\t).map((result: string) => {\r\n\t\t\t\t\t\tconst [name, value] = result.split(':');\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t_name: name.toLowerCase(),\r\n\t\t\t\t\t\t\tname: LanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t`RESULTS_HIGH_LEVEL_DETAIL_${name}` as TranslationKey\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tvalue: LanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t`RESULTS_HIGH_LEVEL_DETAIL_VALUE_${value}` as TranslationKey\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tdataLookBackCheckDetails: ResultsStep.getLookBackCheckDetails(\r\n\t\t\t\t\t\t(results as any).JourneySteps\r\n\t\t\t\t\t),\r\n\t\t\t\t\ttrustScoreDetails: ResultsStep.getTrustScoreDetails(\r\n\t\t\t\t\t\t(results as any).additionalData\r\n\t\t\t\t\t),\r\n\t\t\t\t\tGBGScoreDetails: ResultsStep.getGBGScoreDetails(\r\n\t\t\t\t\t\t(results as any).additionalData\r\n\t\t\t\t\t),\r\n\t\t\t\t\tdataChecksDetails: ResultsStep.getDataCheckDetails(\r\n\t\t\t\t\t\t(results as any).JourneySteps.find(\r\n\t\t\t\t\t\t\t(step: any) => step.Type === 'ADDITIONALDATA'\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t),\r\n\t\t\t\t\tIADResultDetails: ResultsStep.getIADResult(\r\n\t\t\t\t\t\t(results as any).additionalData\r\n\t\t\t\t\t),\r\n\t\t\t\t\tdocuments: results.processedDocuments.map((document: any) => {\r\n\t\t\t\t\t\tconsole.log('Raw document object:', document);\r\n\t\t\t\t\t\tconsole.log('Document keys:', Object.keys(document));\r\n\t\t\t\t\t\tconsole.log('document.documentType:', document.documentType);\r\n\t\t\t\t\t\tconsole.log('document.DocumentType:', document.DocumentType);\r\n\t\t\t\t\t\tconsole.log('document.documentSide:', document.documentSide);\r\n\t\t\t\t\t\tconsole.log('document.DocumentSide:', document.DocumentSide);\r\n\r\n\t\t\t\t\t\t// Determine document type with fallback for PoA documents\r\n\t\t\t\t\t\tconst documentType =\r\n\t\t\t\t\t\t\tResultsStep.getDocumentTypeForDisplay(document);\r\n\t\t\t\t\t\tconst highLevelResult =\r\n\t\t\t\t\t\t\tdocument.highLevelResult ||\r\n\t\t\t\t\t\t\tdocument.HighLevelResult ||\r\n\t\t\t\t\t\t\t'Undefined';\r\n\r\n\t\t\t\t\t\tconsole.log('Processing document with type:', documentType);\r\n\r\n\t\t\t\t\t\tlet normalizedTypeKey = documentType\r\n\t\t\t\t\t\t\t.trim()\r\n\t\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t\t.replace(/\\s+/g, '');\r\n\t\t\t\t\t\tlet normalizedType = documentTypeMap[normalizedTypeKey];\r\n\r\n\t\t\t\t\t\tif (!normalizedType) {\r\n\t\t\t\t\t\t\tnormalizedTypeKey = documentType.trim().toLowerCase();\r\n\t\t\t\t\t\t\tnormalizedType = documentTypeMap[normalizedTypeKey];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!normalizedType) {\r\n\t\t\t\t\t\t\tnormalizedType = documentType.toUpperCase().replace(/\\s+/g, '_');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconsole.log('Normalized type key:', normalizedTypeKey);\r\n\t\t\t\t\t\tconsole.log('Normalized type:', normalizedType);\r\n\r\n\t\t\t\t\t\tlet translatedType = '__NO_TRANSLATION__';\r\n\r\n\t\t\t\t\t\tconst translationKey1 =\r\n\t\t\t\t\t\t\t`SUPPORTED_DOCUMENT_${normalizedType}` as TranslationKey;\r\n\t\t\t\t\t\tconsole.log('Trying translation key 1:', translationKey1);\r\n\t\t\t\t\t\ttranslatedType = LanguageService.getTranslation(translationKey1);\r\n\r\n\t\t\t\t\t\tif (translatedType === '__NO_TRANSLATION__') {\r\n\t\t\t\t\t\t\tconst translationKey2 = normalizedType as TranslationKey;\r\n\t\t\t\t\t\t\tconsole.log('Trying translation key 2:', translationKey2);\r\n\t\t\t\t\t\t\ttranslatedType = LanguageService.getTranslation(translationKey2);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (translatedType === '__NO_TRANSLATION__') {\r\n\t\t\t\t\t\t\tconsole.log('No translation found, using original document type');\r\n\t\t\t\t\t\t\ttranslatedType = documentType;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconsole.log('Final translated type:', translatedType);\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t_type: documentType.toLowerCase(),\r\n\t\t\t\t\t\t\t_result: highLevelResult.toLowerCase(),\r\n\t\t\t\t\t\t\ttype: translatedType,\r\n\t\t\t\t\t\t\tresult: LanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t`RESULTS_HIGH_LEVEL_${highLevelResult}` as TranslationKey\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\textractedFields: (\r\n\t\t\t\t\t\t\t\tdocument.extractedFields ||\r\n\t\t\t\t\t\t\t\tdocument.ExtractedFields ||\r\n\t\t\t\t\t\t\t\t[]\r\n\t\t\t\t\t\t\t).map((field: any) => {\r\n\t\t\t\t\t\t\t\tconst fieldName = field.Name || field.name;\r\n\t\t\t\t\t\t\t\tconst fieldValue = field.Value || field.value;\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t_name: fieldName.toLowerCase(),\r\n\t\t\t\t\t\t\t\t\tname: LanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t\t\t`EXTRACTED_FIELDS_${fieldName}` as TranslationKey\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\tvalue: fieldValue,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\timages: (document.documentImages || document.DocumentImages || [])\r\n\t\t\t\t\t\t\t\t.filter((x: IDocumentImage) => x.role.includes('WhiteImage'))\r\n\t\t\t\t\t\t\t\t.map((image) => ({\r\n\t\t\t\t\t\t\t\t\t_type: image.type,\r\n\t\t\t\t\t\t\t\t\t_role: image.role,\r\n\t\t\t\t\t\t\t\t\t_url: image.url,\r\n\t\t\t\t\t\t\t\t})),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn TemplateService.renderToContainer(\r\n\t\t\t\t\tthis._container,\r\n\t\t\t\t\tTemplates.Result,\r\n\t\t\t\t\tdata\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t\t.catch((ex) => {\r\n\t\t\t\tconsole.error('Error rendering results:', ex);\r\n\t\t\t\treturn TemplateService.renderToContainer(\r\n\t\t\t\t\tthis._container,\r\n\t\t\t\t\tTemplates.Result,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tresult: LanguageService.getTranslation(\r\n\t\t\t\t\t\t\t`RESULTS_HIGH_LEVEL_${this._journey!.result}` as TranslationKey\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tjourneyId: this._journey!.id,\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t\t.then(() =>\r\n\t\t\t\tTemplateService.getElements(this._container, {\r\n\t\t\t\t\tlogout: '[data-jcs-element=\"result__logout\"]',\r\n\t\t\t\t\tstart: '[data-jcs-element=\"result__journey__restart\"]',\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.then(({ start, logout }) => {\r\n\t\t\t\tif (start) {\r\n\t\t\t\t\tstart.addEventListener('click', () =>\r\n\t\t\t\t\t\tthis.clearJourney()\r\n\t\t\t\t\t\t\t// .then(() => this.getJourney())\r\n\t\t\t\t\t\t\t// .then(() => this.evaluate())\r\n\t\t\t\t\t\t\t.then(() => JourneySelectStep.render.call(this))\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (logout) {\r\n\t\t\t\t\tlogout.addEventListener('click', () =>\r\n\t\t\t\t\t\tthis.clearJourney()\r\n\t\t\t\t\t\t\t.then(() => (this._journeyDefinitionId = ''))\r\n\t\t\t\t\t\t\t.then(() => JourneyManager.logout())\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() =>\r\n\t\t\t\tEventService.publish(JourneyEvent.DISPLAY_STEP, {\r\n\t\t\t\t\tstep: Templates.Result,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Helper function to determine document type for display purposes\r\n\t * Handles PoA documents that may not have a documentType field\r\n\t */\r\n\tpublic static getDocumentTypeForDisplay(document: any): string {\r\n\t\t// Check for both camelCase and PascalCase documentType in main object\r\n\t\tconst docType = document.documentType || document.DocumentType;\r\n\t\tif (docType) {\r\n\t\t\tconsole.log('Document has documentType (any case):', docType);\r\n\t\t\treturn docType;\r\n\t\t}\r\n\r\n\t\t// Check for documentType in extracted fields (either directly or in ExtractedFields property)\r\n\t\tconst extractedFields =\r\n\t\t\tdocument.extractedFields || document.ExtractedFields || [];\r\n\t\tconst documentTypeField = extractedFields.find(\r\n\t\t\t(field: any) =>\r\n\t\t\t\t(field.Name === 'DocumentType' || field.name === 'DocumentType') &&\r\n\t\t\t\t(field.Value || field.value)\r\n\t\t);\r\n\r\n\t\tif (documentTypeField) {\r\n\t\t\tconst docTypeValue = documentTypeField.Value || documentTypeField.value;\r\n\t\t\tconsole.log('Found DocumentType in extracted fields:', docTypeValue);\r\n\t\t\treturn docTypeValue;\r\n\t\t}\r\n\r\n\t\t// Check if document category is available in extracted fields\r\n\t\tconst documentCategoryField = extractedFields.find(\r\n\t\t\t(field: any) =>\r\n\t\t\t\t(field.Name === 'DocumentCategory' ||\r\n\t\t\t\t\tfield.name === 'DocumentCategory') &&\r\n\t\t\t\t(field.Value || field.value)\r\n\t\t);\r\n\r\n\t\tif (documentCategoryField) {\r\n\t\t\tconst categoryValue =\r\n\t\t\t\tdocumentCategoryField.Value || documentCategoryField.value;\r\n\t\t\tconsole.log('Found DocumentCategory in extracted fields:', categoryValue);\r\n\t\t\treturn categoryValue;\r\n\t\t}\r\n\r\n\t\t// Check if this is a PoA document by looking at DocumentSide (both cases)\r\n\t\tconst documentSide = document.documentSide || document.DocumentSide;\r\n\t\tif (documentSide === 'Paper document') {\r\n\t\t\t// Get field names from extracted fields, handling different property names\r\n\t\t\tconst fieldNames = extractedFields.map(\r\n\t\t\t\t(field: any) => field.Name || field.name || ''\r\n\t\t\t);\r\n\r\n\t\t\t// Get values as well for broader analysis\r\n\t\t\tconst fieldValues: Record<string, string> = {};\r\n\t\t\textractedFields.forEach((field: any) => {\r\n\t\t\t\tconst name = field.Name || field.name || '';\r\n\t\t\t\tconst value = field.Value || field.value || '';\r\n\t\t\t\tif (name) fieldValues[name.toLowerCase()] = String(value).toLowerCase();\r\n\t\t\t});\r\n\r\n\t\t\tconsole.log('PoA document detected. Field names:', fieldNames);\r\n\t\t\tconsole.log('Field values:', fieldValues);\r\n\r\n\t\t\t// Check for Bank Statement indicators (now including broader checks)\r\n\t\t\tconst hasBankFields =\r\n\t\t\t\tfieldNames.some((name: string) =>\r\n\t\t\t\t\t['Iban', 'AccountNumber', 'Issuer'].includes(name)\r\n\t\t\t\t) ||\r\n\t\t\t\tObject.keys(fieldValues).some(\r\n\t\t\t\t\t(key) =>\r\n\t\t\t\t\t\tkey.includes('account') ||\r\n\t\t\t\t\t\tkey.includes('iban') ||\r\n\t\t\t\t\t\tkey.includes('issuer')\r\n\t\t\t\t) ||\r\n\t\t\t\tObject.values(fieldValues).some(\r\n\t\t\t\t\t(value: string) =>\r\n\t\t\t\t\t\tvalue.includes('bank') ||\r\n\t\t\t\t\t\tvalue.includes('barclays') ||\r\n\t\t\t\t\t\tvalue.includes('hsbc') ||\r\n\t\t\t\t\t\tvalue.includes('natwest')\r\n\t\t\t\t);\r\n\r\n\t\t\t// Check for recipient fields with more flexible matching\r\n\t\t\tconst hasRecipientFields =\r\n\t\t\t\tfieldNames.some(\r\n\t\t\t\t\t(name: string) =>\r\n\t\t\t\t\t\tname.includes('Recipient') ||\r\n\t\t\t\t\t\tname.includes('Name') ||\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t'RecipientName',\r\n\t\t\t\t\t\t\t'RecipientAddress',\r\n\t\t\t\t\t\t\t'RecipientAddressFull',\r\n\t\t\t\t\t\t].includes(name)\r\n\t\t\t\t) ||\r\n\t\t\t\tObject.keys(fieldValues).some(\r\n\t\t\t\t\t(key) =>\r\n\t\t\t\t\t\tkey.includes('recipient') ||\r\n\t\t\t\t\t\tkey.includes('name') ||\r\n\t\t\t\t\t\tkey.includes('address')\r\n\t\t\t\t);\r\n\r\n\t\t\tconsole.log(\r\n\t\t\t\t'Has bank fields:',\r\n\t\t\t\thasBankFields,\r\n\t\t\t\t'Has recipient fields:',\r\n\t\t\t\thasRecipientFields\r\n\t\t\t);\r\n\r\n\t\t\t// If it has bank-related fields, it's likely a Bank Statement\r\n\t\t\tif (hasBankFields && hasRecipientFields) {\r\n\t\t\t\tconsole.log('Detected as Bank Statement');\r\n\t\t\t\treturn 'Bank Statement';\r\n\t\t\t}\r\n\r\n\t\t\t// If it has recipient fields but no bank fields, it could be another PoA type\r\n\t\t\tif (hasRecipientFields) {\r\n\t\t\t\t// Check for utility bill indicators with more flexible matching\r\n\t\t\t\tconst hasUtilityFields =\r\n\t\t\t\t\tfieldNames.some(\r\n\t\t\t\t\t\t(name: string) =>\r\n\t\t\t\t\t\t\tname.toLowerCase().includes('utility') ||\r\n\t\t\t\t\t\t\tname.toLowerCase().includes('bill')\r\n\t\t\t\t\t) ||\r\n\t\t\t\t\tObject.values(fieldValues).some(\r\n\t\t\t\t\t\t(value: string) =>\r\n\t\t\t\t\t\t\tvalue.includes('utility') ||\r\n\t\t\t\t\t\t\tvalue.includes('electric') ||\r\n\t\t\t\t\t\t\tvalue.includes('gas') ||\r\n\t\t\t\t\t\t\tvalue.includes('water') ||\r\n\t\t\t\t\t\t\tvalue.includes('bill')\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\tif (hasUtilityFields) {\r\n\t\t\t\t\tconsole.log('Detected as Utility Bill');\r\n\t\t\t\t\treturn 'Utility Bill';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Default to Bank Document for most PoA documents with recipient info\r\n\t\t\t\tconsole.log('Detected as Bank Document (fallback)');\r\n\t\t\t\treturn 'Bank Document';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Fallback for unknown document types\r\n\t\tconsole.log('Detected as Unknown document');\r\n\t\treturn 'Unknown';\r\n\t}\r\n\r\n\tpublic static getLookBackCheckDetails(steps: any) {\r\n\t\tconst step = steps.find((step: any) => step.Type === 'ADDITIONALDATA');\r\n\r\n\t\tif (step) {\r\n\t\t\tconst lookBackCheck = step.ValidationChecks.find((check: string) =>\r\n\t\t\t\tcheck.startsWith('LOOKBACKCHECK')\r\n\t\t\t);\r\n\r\n\t\t\tif (lookBackCheck) {\r\n\t\t\t\tconst [name, value] = lookBackCheck.split(':');\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t_name: 'lookbackcheck',\r\n\t\t\t\t\tname: LanguageService.getTranslation(\r\n\t\t\t\t\t\t`ADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK` as TranslationKey\r\n\t\t\t\t\t),\r\n\t\t\t\t\tvalue: LanguageService.getTranslation(\r\n\t\t\t\t\t\t`RESULTS_HIGH_LEVEL_DETAIL_VALUE_${value}` as TranslationKey\r\n\t\t\t\t\t),\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t_name: 'lookbackcheck',\r\n\t\t\tname: LanguageService.getTranslation(\r\n\t\t\t\t`ADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK` as TranslationKey\r\n\t\t\t),\r\n\t\t\tvalue: LanguageService.getTranslation(\r\n\t\t\t\t`ADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK_NA` as TranslationKey\r\n\t\t\t),\r\n\t\t};\r\n\t}\r\n\r\n\tpublic static getTrustScoreDetails(additionalData: any) {\r\n\t\tconst data = additionalData.find(\r\n\t\t\t(additionalData: any) => additionalData.name === 'SipTrustScore'\r\n\t\t);\r\n\r\n\t\tif (data) {\r\n\t\t\tconst trustScoreValue = data.value;\r\n\r\n\t\t\tif (trustScoreValue) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t_name: 'trustScore',\r\n\t\t\t\t\tname: LanguageService.getTranslation(\r\n\t\t\t\t\t\t`GBG_TRUST_SCORE` as TranslationKey\r\n\t\t\t\t\t),\r\n\t\t\t\t\tvalue: trustScoreValue,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static getGBGScoreDetails(additionalData: any) {\r\n\t\tconst data = additionalData.find(\r\n\t\t\t(additionalData: any) => additionalData.name === 'GBGScore'\r\n\t\t);\r\n\r\n\t\tif (data) {\r\n\t\t\tconst GBGScoreValue = data.value;\r\n\r\n\t\t\tif (GBGScoreValue) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t_name: 'GBGScore',\r\n\t\t\t\t\tname: LanguageService.getTranslation(`GBG_SCORE` as TranslationKey),\r\n\t\t\t\t\tvalue: GBGScoreValue,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static getIADResult(additionalData: any) {\r\n\t\tconst data = additionalData.find(\r\n\t\t\t(additionalData: any) => additionalData.name === 'IADResult'\r\n\t\t);\r\n\r\n\t\tif (data) {\r\n\t\t\tconst IADResultValue = data.value;\r\n\r\n\t\t\tif (IADResultValue) {\r\n\r\n\t\t\t\tif (IADResultValue === \"N/A\") {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t_name: 'IADResult',\r\n\t\t\t\t\t\tname: LanguageService.getTranslation(`IAD_RESULT` as TranslationKey),\r\n\t\t\t\t\t\tvalue: LanguageService.getTranslation(\r\n\t\t\t\t\t\t\t`RESULTS_HIGH_LEVEL_DETAIL_VALUE_NA` as TranslationKey\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t_name: 'IADResult',\r\n\t\t\t\t\tname: LanguageService.getTranslation(`IAD_RESULT` as TranslationKey),\r\n\t\t\t\t\tvalue: LanguageService.getTranslation(\r\n\t\t\t\t\t\t`RESULTS_HIGH_LEVEL_DETAIL_VALUE_${IADResultValue}` as TranslationKey\r\n\t\t\t\t\t)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t_name: 'IADResult',\r\n\t\t\tname: LanguageService.getTranslation(`IAD_RESULT` as TranslationKey),\r\n\t\t\tvalue: LanguageService.getTranslation(\r\n\t\t\t\t`RESULTS_HIGH_LEVEL_DETAIL_VALUE_NA` as TranslationKey\r\n\t\t\t)\r\n\t\t};\r\n\t}\r\n\r\n\tpublic static getDataCheckDetails(step: any) {\r\n\t\tif (step) {\r\n\t\t\tconst dataCheck = step.ValidationChecks.find((check: string) =>\r\n\t\t\t\tcheck.startsWith('DATACHECKS')\r\n\t\t\t);\r\n\r\n\t\t\tif (dataCheck) {\r\n\t\t\t\tconst [name, value] = dataCheck.split(':');\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t_name: name.toLowerCase(),\r\n\t\t\t\t\tname: LanguageService.getTranslation(\r\n\t\t\t\t\t\t`ADDITIONAL_CHECKS_DETAIL_DATACHECKS` as TranslationKey\r\n\t\t\t\t\t),\r\n\t\t\t\t\tvalue: LanguageService.getTranslation(\r\n\t\t\t\t\t\t`RESULTS_HIGH_LEVEL_DETAIL_VALUE_${value}` as TranslationKey\r\n\t\t\t\t\t),\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst documentTypeMap: Record<string, string> = {\r\n\t'bank statement': 'BANK_STATEMENT',\r\n\tbankstatement: 'BANK_STATEMENT',\r\n\t'bank doc': 'BANK_DOCUMENT',\r\n\t'bank document': 'BANK_DOCUMENT',\r\n\tbankdocument: 'BANK_DOCUMENT',\r\n\t'utility bill': 'UTILITY_BILL',\r\n\tutilitybill: 'UTILITY_BILL',\r\n\t'utility document': 'UTILITY_DOCUMENT',\r\n\tutilitydocument: 'UTILITY_DOCUMENT',\r\n\t'driving license': 'DRIVING_LICENSE',\r\n\tdrivinglicense: 'DRIVING_LICENSE',\r\n\t'driving licence': 'DRIVING_LICENSE',\r\n\tdrivinglicence: 'DRIVING_LICENSE',\r\n\tdl: 'DRIVING_LICENSE',\r\n\t'paper document': 'PAPER_DOCUMENT',\r\n\tpaperdocument: 'PAPER_DOCUMENT',\r\n\tpoa: 'PAPER_DOCUMENT',\r\n\t'proof of address': 'PAPER_DOCUMENT',\r\n\tproofofaddress: 'PAPER_DOCUMENT',\r\n\tunknown: 'UNKNOWN',\r\n};\r\n","import * as lottie from 'lottie-web/build/player/lottie';\r\nimport { AnimationService } from \"../../../helpers/classes/AnimationService\";\r\nimport EventService from \"../../../helpers/classes/EventService\";\r\nimport { ExceptionManager } from \"../../../helpers/classes/ExceptionManager\";\r\nimport LanguageService from \"../../../helpers/classes/LanguageService\";\r\nimport RenderingService from \"../../../helpers/classes/RenderingService\";\r\nimport TemplateService from \"../../../helpers/classes/TemplateService\";\r\nimport { JourneyContainer } from \"../../classes/JourneyContainer\";\r\nimport { JourneyEvent } from \"../../enums/JourneyEvent\";\r\nimport { Templates } from \"../../enums/Templates\";\r\nimport { TranslationKey } from \"../../enums/Translation\";\r\n\r\nexport class DataChecksStep {\r\n\r\n\tpublic static render(this: JourneyContainer) {\r\n\t\treturn TemplateService.renderToContainer(this._container, Templates.DataChecks)\r\n\t\t\t.then((element) => TemplateService.getElements(element, {\r\n\t\t\t\tform: '[data-jcs-element=\"user__input__form\"]',\r\n\t\t\t\thouseNumber: '[data-jcs-element=\"user__input__house__name__number\"]',\r\n\t\t\t\tstreetName: '[data-jcs-element=\"user__input__street__name\"]',\r\n\t\t\t\ttown: '[data-jcs-element=\"user__input__town\"]',\r\n\t\t\t\tpostalCode: '[data-jcs-element=\"user__input__postal__code\"]',\r\n\t\t\t\terrors: '[data-jcs-element=\"user__input__errors\"]',\r\n\t\t\t\tsubmit: '[data-jcs-element=\"user__input__submit\"]',\r\n\t\t\t\tloadingAnimationContainer: '[data-jcs-element=\"loading-animation\"]'\r\n\t\t\t}))\r\n\t\t\t.then(({ form, houseNumber, streetName, town, postalCode, errors, submit, loadingAnimationContainer }) => {\r\n\t\t\t\tif (form instanceof HTMLFormElement &&\r\n\t\t\t\t\thouseNumber instanceof HTMLInputElement &&\r\n\t\t\t\t\tstreetName instanceof HTMLInputElement &&\r\n\t\t\t\t\ttown instanceof HTMLInputElement &&\r\n\t\t\t\t\tpostalCode instanceof HTMLInputElement &&\r\n\t\t\t\t\tsubmit instanceof HTMLInputElement) {\r\n\r\n\t\t\t\t\tif (this._journey) {\r\n\t\t\t\t\t\tRenderingService.setValue(town, this._journey.information.holder.address.city);\r\n\t\t\t\t\t\tRenderingService.setValue(postalCode, this._journey.information.holder.address.postCode);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tform.addEventListener('submit', async (e) => {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tRenderingService.setText(errors);\r\n\r\n\t\t\t\t\t\tDataChecksStep.validateInputs(houseNumber, streetName, town, postalCode)\r\n\t\t\t\t\t\t\t.catch(DataChecksStep.renderErrors.bind(this))\r\n\t\t\t\t\t\t\t.then((validationResult) => { RenderingService.setEnabled(submit, true); return validationResult })\r\n\t\t\t\t\t\t\t.then(async (validationResult) => {\r\n\t\t\t\t\t\t\t\tif (validationResult) {\r\n\t\t\t\t\t\t\t\t\tDataChecksStep.loadingAnimation = AnimationService.CreateAnimation(loadingAnimationContainer as HTMLDivElement, this.assetsFolder + '/animations/loading.json', true, true, {});\r\n\t\t\t\t\t\t\t\t\tRenderingService.showObject(loadingAnimationContainer);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(submit, false);\r\n\t\t\t\t\t\t\t\t\tawait this._journey?.continueDataChecks({\r\n\t\t\t\t\t\t\t\t\t\tjourneyId: this._journey!.id,\r\n\t\t\t\t\t\t\t\t\t\thouseName: houseNumber.value,\r\n\t\t\t\t\t\t\t\t\t\tstreetName: streetName.value,\r\n\t\t\t\t\t\t\t\t\t\ttown: town.value,\r\n\t\t\t\t\t\t\t\t\t\tpostCode: postalCode.value\r\n\t\t\t\t\t\t\t\t\t}).then(() => this.evaluate());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(new ExceptionManager.TemplateException(TranslationKey.EXCEPTION_TEMPLATE_ELEMENTS_MISSING));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_STEP, { step: Templates.DataChecks }));\r\n\t}\r\n\r\n\tprivate static validateInputs = (houseNumber: HTMLInputElement, streetName: HTMLInputElement, town: HTMLInputElement, postalCode: HTMLInputElement): Promise<boolean> => new Promise((resolve, reject) => {\r\n\t\tvar validationResult = true;\r\n\r\n\t\tif (!houseNumber.value) {\r\n\t\t\tRenderingService.addClass(houseNumber, \"input_failure\");\r\n\t\t\tvalidationResult = false;\r\n\t\t} else\r\n\t\t\tRenderingService.removeClass(houseNumber, \"input_failure\");\r\n\r\n\t\tif (!streetName.value) {\r\n\t\t\tRenderingService.addClass(streetName, \"input_failure\");\r\n\t\t\tvalidationResult = false;\r\n\t\t} else\r\n\t\t\tRenderingService.removeClass(streetName, \"input_failure\");\r\n\r\n\t\tif (!town.value) {\r\n\t\t\tRenderingService.addClass(town, \"input_failure\");\r\n\t\t\tvalidationResult = false;\r\n\t\t} else\r\n\t\t\tRenderingService.removeClass(town, \"input_failure\");\r\n\r\n\t\tif (!postalCode.value) {\r\n\t\t\tRenderingService.addClass(postalCode, \"input_failure\");\r\n\t\t\tvalidationResult = false;\r\n\t\t} else\r\n\t\t\tRenderingService.removeClass(postalCode, \"input_failure\");\r\n\r\n\t\tif (!validationResult) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_MISSING_REQUIRED_FIELD_MISSING)));\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tif (postalCode.value.length < 5 || postalCode.value.length > 8 || postalCode.value.trim().length===0) {\r\n\t\t\t\tRenderingService.addClass(postalCode, \"input_failure\");\r\n\t\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_POSTCODE_FORMAT_ERROR)));\r\n\t\t\t}\r\n\t\t\tif (houseNumber.value.length < 1 || houseNumber.value.trim().length===0) {\r\n\t\t\t\tRenderingService.addClass(houseNumber, \"input_failure\");\r\n\t\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_HOUSENUMBER_FORMAT_ERROR)));\r\n\t\t\t}\r\n\t\t\tif (streetName.value.length < 1 || streetName.value.length > 30 ||streetName.value.trim().length===0) {\r\n\t\t\t\tRenderingService.addClass(streetName, \"input_failure\");\r\n\t\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_STREETNAME_FORMAT_ERROR)));\r\n\t\t\t}\r\n\t\t\tif (town.value.length < 1 ||town.value.length > 20  ||town.value.trim().length===0) {\r\n\t\t\t\tRenderingService.addClass(town, \"input_failure\");\r\n\t\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_TOWN_FORMAT_ERROR)));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\telse\r\n\t\t\t\treturn resolve(validationResult);\r\n\t\t}\r\n\t})\r\n\r\n\tprivate static renderErrors(this: JourneyContainer, error: ExceptionManager.Exception) {\r\n\t\tTemplateService.getElements(this._container, {\r\n\t\t\terrors: '[data-jcs-element=\"user__input__errors\"]',\r\n\t\t}).then(({ errors }) => {\r\n\t\t\tRenderingService.setText(errors, LanguageService.getTranslation(error.message as TranslationKey));\r\n\t\t});\r\n\t}\r\n\r\n\tprivate static loadingAnimation: lottie.AnimationItem;\r\n}","import * as deepMerge from 'deepmerge';\r\n\r\nexport function removeNullOrUndefined<T extends { [key: string]: any } = {}>(input: T = {} as T): Partial<T> {\r\n\tconst output = deepMerge<T>({}, input);\r\n\r\n\tObject.keys(output).forEach((key) => {\r\n\t\tconst obj = output[key];\r\n\r\n\t\tif (typeof obj === 'object' && obj !== null) {\r\n\t\t\tif (obj instanceof Date) { }\r\n\t\t\telse if (obj instanceof RegExp) { }\r\n\t\t\telse {\r\n\t\t\t\toutput[key].value = removeNullOrUndefined(obj);\r\n\t\t\t}\r\n\t\t} else if (obj === null || typeof obj === 'undefined') {\r\n\t\t\tdelete output[key];\r\n\t\t}\r\n\t});\r\n\r\n\treturn output;\r\n}\r\n","import axios, { AxiosDefaults, AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\r\nimport { dictionary } from '../../idscan/configuration/CaseDictionary';\r\nimport { JourneyEvent } from '../../idscan/enums/JourneyEvent';\r\nimport { ResponseType } from '../../idscan/enums/ResponseType';\r\nimport { TranslationKey } from '../../idscan/enums/Translation';\r\nimport { IAuthSettings } from '../../idscan/interfaces/AuthSettings';\r\nimport { IEndpoints } from '../../idscan/interfaces/Endpoints';\r\nimport { IHttpServiceConfiguration } from '../interfaces/HttpServiceConfiguration';\r\nimport { CaseDictionaryService } from './CaseDictionaryService';\r\nimport EventService from './EventService';\r\nimport { ExceptionManager } from './ExceptionManager';\r\nimport { HttpResponse } from './HttpResponse';\r\nimport StorageService from './StorageService';\r\nimport { TransformationService } from './TransformationService';\r\nimport { STORAGE_KEYS } from '../../idscan/configuration/StorageKeys';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class HttpService {\r\n\r\n\tpublic get auth(): boolean {\r\n\t\treturn !!this._axios.defaults.headers.common['Authorization'];\r\n\t}\r\n\r\n\tpublic get authSettings(): boolean | IAuthSettings {\r\n\t\treturn this._httpConfig!.authSettings;\r\n\t}\r\n\r\n\tpublic get endpoints(): IEndpoints {\r\n\t\treturn this._httpConfig!.endpoints;\r\n\t}\r\n\r\n\tprivate get tokenName() {\r\n\t\treturn this._httpConfig!.authSettings && this._httpConfig!.authSettings.persistence.tokenName ? this._httpConfig!.authSettings.persistence.tokenName : undefined;\r\n\t}\r\n\r\n\tprivate get tokenTTL() {\r\n\t\treturn this._httpConfig!.authSettings && this._httpConfig!.authSettings.persistence.expire ? this._httpConfig!.authSettings.persistence.expire : undefined;\r\n\t}\r\n\r\n\t// An instance of the axios library.\r\n\tprivate _axios!: AxiosInstance;\r\n\r\n\t// An instance of CaseDictionaryService.\r\n\tprivate _caseDictionaryService!: CaseDictionaryService;\r\n\r\n\tprivate _httpConfig?: IHttpServiceConfiguration;\r\n\r\n\tpublic configure = (httpConfig: IHttpServiceConfiguration): Promise<this> => new Promise((resolve) => {\r\n\t\tthis._httpConfig = httpConfig;\r\n\r\n\t\treturn resolve(this);\r\n\t})\r\n\r\n\t/**\r\n\t * Initializes the internal services\r\n\t */\r\n\tpublic initialize = (): Promise<this> => new Promise((resolve) => {\r\n\t\tthis._caseDictionaryService = new CaseDictionaryService(dictionary);\r\n\t\tthis.setDefaults();\r\n\r\n\t\treturn resolve(this);\r\n\t})\r\n\r\n\t/**\r\n\t * Generic post function that takes a url and a data object\r\n\t * @param url The URL for the request\r\n\t * @param data Body Data to send with the request\r\n\t * @param config Additional configuration for the request\r\n\t * @param name The name to assign to the request\r\n\t */\r\n\tpublic post = (url: string, data?: any, config?: AxiosRequestConfig, name: string = ''): Promise<any> => {\r\n\t\tEventService.publish(JourneyEvent.TRANSFER_STARTED, {\r\n\t\t\tname,\r\n\t\t\tstatus: 'started',\r\n\t\t\tpercentage: 0\r\n\t\t});\r\n\r\n\t\treturn this._axios.post(url, data, {\r\n\t\t\tonDownloadProgress: this.onDownloadProgress(name),\r\n\t\t\tonUploadProgress: this.onUploadProgress(name),\r\n\t\t\t...config\r\n\t\t}).then(this.onPostSuccess(name)).catch(this.onPostFailure(name));\r\n\t}\r\n\t\r\n\tprivate onPostSuccess = (name: string) => (res: any) => {\r\n\t\tvar journeyId = StorageService.get(STORAGE_KEYS.journeyId);\r\n\t\t\tif (res.journeyId == journeyId || res?.Workflow?.PersonEntryId == journeyId){\r\n\t\t\treturn EventService.publish(JourneyEvent.TRANSFER_COMPLETE, {\r\n\t\t\t\tname,\r\n\t\t\t\tstatus: 'complete',\r\n\t\t\t\tpercentage: 100,\r\n\t\t\t\tJourneyId: StorageService.get(STORAGE_KEYS.journeyId)\r\n\t\t\t}).then(() => res);}\r\n\t\telse {\r\n\t\t\treturn name ? undefined : res;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onPostFailure = (name: string) => (e: any) => {\r\n\t\tEventService.publish(JourneyEvent.TRANSFER_FAILED, {\r\n\t\t\tname,\r\n\t\t\tstatus: 'failed',\r\n\t\t});\r\n\t\tthrow e;\r\n\t}\r\n\r\n\t/**\r\n\t * Generic get function that takes a url\r\n\t * @param url The URL for the request\r\n\t * @param config Additional configuration for the request\r\n\t * @param name The name to assign to the request\r\n\t */\r\n\tpublic get = (url: string, config?: AxiosRequestConfig, name: string = ''): Promise<any> => {\r\n\t\tEventService.publish(JourneyEvent.TRANSFER_STARTED, {\r\n\t\t\tname,\r\n\t\t\tstatus: 'started',\r\n\t\t\tpercentage: 0,\r\n\t\t});\r\n\r\n\t\treturn this._axios.get(url, {\r\n\t\t\tonDownloadProgress: this.onDownloadProgress(name),\r\n\t\t\tonUploadProgress: this.onUploadProgress(name),\r\n\t\t\t...config\r\n\t\t}).then((res) => EventService.publish(JourneyEvent.TRANSFER_COMPLETE, {\r\n\t\t\tname,\r\n\t\t\tstatus: 'complete',\r\n\t\t\tpercentage: 100,\r\n\t\t}).then(() => res)\r\n\t\t).catch((e) => {\r\n\t\t\tEventService.publish(JourneyEvent.TRANSFER_FAILED, {\r\n\t\t\t\tname,\r\n\t\t\t\tstatus: 'failed',\r\n\t\t\t});\r\n\r\n\t\t\tthrow e;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Created for dynamic token injection\r\n\t */\r\n\tpublic injectToken = (token: string): void => {\r\n\t\tthis.removeToken();\r\n\t\tthis.writeToken(token);\r\n\t\tthis.setToken(token);\r\n\t}\r\n\r\n\t/**\r\n\t * Writes the http service defaults to console for debuggins.\r\n\t */\r\n\tpublic debug = (): AxiosDefaults<any> => {\r\n\t\treturn this._axios.defaults;\r\n\t}\r\n\r\n\t/**\r\n\t * Tries to get the token from the storage.\r\n\t */\r\n\tpublic getToken = (): string | undefined => {\r\n\t\ttry {\r\n\t\t\tif (this.tokenName) {\r\n\t\t\t\treturn StorageService.get(this.tokenName)!;\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\t// There is a technical exception here that occurs when the token is modified or expired.\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getUrlString = (urlPart: string = '', base: string = this._httpConfig!.backendUrl): string | undefined => {\r\n\t\ttry {\r\n\t\t\tconst url = new URL(urlPart, base);\r\n\t\t\treturn url.pathname;\r\n\t\t} catch {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the base request options\r\n\t */\r\n\tprivate setDefaults = (): Promise<this> => new Promise((resolve) => {\r\n\t\tthis._axios = axios.create({\r\n\t\t\tadapter: require('../../../node_modules/axios/lib/adapters/http.js'),\r\n\t\t\tbaseURL: this._httpConfig!.backendUrl,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t},\r\n\t\t\tonDownloadProgress: this.onDownloadProgress,\r\n\t\t\tonUploadProgress: this.onUploadProgress,\r\n\t\t\ttimeout: 0\r\n\t\t});\r\n\r\n\t\tif (this.isAuthEnabled()) {\r\n\t\t\tthis.setToken(this.getToken());\r\n\t\t}\r\n\r\n\t\tthis.setHttpResponse();\r\n\t\tthis.setCaseDictionaryInterceptors();\r\n\t\tthis.setTransformationInterception();\r\n\t\tthis.setTokenInterceptor();\r\n\t\tthis.setCatchInterception();\r\n\t\tthis.setResponseFormattingInterception();\r\n\r\n\t\treturn resolve(this);\r\n\t})\r\n\r\n\t/**\r\n\t * Callback for upload progress\r\n\t * @param e\r\n\t */\r\n\tprivate onUploadProgress = (name: string) => (event: ProgressEvent) => {\r\n\t\tconst percentCompleted = Math.floor(((event.loaded || 1) * 50) / (event.total || 1));\r\n\r\n\t\tEventService.publish(JourneyEvent.TRANSFER_PROGRESS, {\r\n\t\t\tname,\r\n\t\t\tstatus: percentCompleted < 50 ? 'uploading' : 'processing',\r\n\t\t\tpercentage: percentCompleted,\r\n\t\t\tjourneyId: StorageService.get(STORAGE_KEYS.journeyId)\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Callback for download progress\r\n\t * @param e\r\n\t */\r\n\tprivate onDownloadProgress = (name: string) => (event: ProgressEvent) => {\r\n\t\tconst percentCompleted = Math.floor(((event.loaded || 1) * 50) / (event.total || 1));\r\n\r\n\t\tEventService.publish(JourneyEvent.TRANSFER_PROGRESS, {\r\n\t\t\tname,\r\n\t\t\tstatus: 'downloading',\r\n\t\t\tpercentage: 50 + percentCompleted,\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Puts the token into the Authorization header or removes the header completely.\r\n\t * @param token\r\n\t */\r\n\tprivate setToken = (token?: string): void => {\r\n\t\tif (token) {\r\n\t\t\tthis._axios.defaults.headers.common['Authorization'] = token;\r\n\t\t\tEventService.publish(JourneyEvent.AUTH_CHANGE, { authorized: true });\r\n\t\t} else {\r\n\t\t\tdelete this._axios.defaults.headers.common['Authorization'];\r\n\t\t\tEventService.publish(JourneyEvent.AUTH_CHANGE, { authorized: false });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Puts the token in the session storage or some variable\r\n\t * @param token\r\n\t */\r\n\tprivate writeToken = (token: string): void => {\r\n\t\tif (this.tokenName && this.tokenTTL) {\r\n\t\t\tStorageService.set(this.tokenName, token, this.tokenTTL);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes the token\r\n\t */\r\n\tprivate removeToken = () => {\r\n\t\tif (this.tokenName) {\r\n\t\t\tStorageService.remove(this.tokenName);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the interceptor to convert axios response to generic HttpResponse class.\r\n\t */\r\n\tprivate setHttpResponse = () => {\r\n\t\tthis._axios.interceptors.response.use((res: AxiosResponse): HttpResponse<any> => {\r\n\t\t\treturn new HttpResponse<any>(res);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the interceptors for case dictionary.\r\n\t */\r\n\tprivate setCaseDictionaryInterceptors = () => {\r\n\t\tthis._axios.interceptors.request.use((req: any) => {\r\n\t\t\treq.data = this._caseDictionaryService.convert(req.data, 'uglify');\r\n\t\t\treturn req;\r\n\t\t});\r\n\r\n\t\tthis._axios.interceptors.response.use((res: HttpResponse<any>) => {\r\n\t\t\tres.data = this._caseDictionaryService.convert(res.data, 'beautify');\r\n\t\t\treturn res;\r\n\t\t});\r\n\t}\r\n\r\n\tprivate setTransformationInterception = () => {\r\n\t\tthis._axios.interceptors.response.use((res: HttpResponse<any>): HttpResponse<any> => {\r\n\t\t\tlet result = res;\r\n\r\n\t\t\tif (res.config.url) {\r\n\t\t\t\tif (res.config.url.match(/\\/journey\\/get/)) {\r\n\t\t\t\t\t// Will be enabled when getResult is enabled.\r\n\t\t\t\t\t// result = TransformationService.convert('journey-retrieval', res);\r\n\t\t\t\t} else if (res.config.url.match(this._httpConfig!.endpoints.upload) && res.data.entryData) {\r\n\t\t\t\t\tresult = TransformationService.convert('journey-upload', res);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the interceptor for the token check.\r\n\t */\r\n\tprivate setTokenInterceptor = () => {\r\n\t\tthis._axios.interceptors.response.use((res: any): Promise<HttpResponse<any>> => {\r\n\t\t\tif (res.config.url.match(this._httpConfig!.endpoints.login) && res.data.access_token !== undefined) {\r\n\t\t\t\tthis.setToken(res.data.access_token);\r\n\t\t\t\tthis.writeToken(res.data.access_token);\r\n\t\t\t} else if (res.config.url.match(this._httpConfig!.endpoints.logout)) {\r\n\t\t\t\tStorageService.clear();\r\n\t\t\t\tthis.removeToken();\r\n\t\t\t\tthis.setToken();\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the interceptor for exception handling on general issues.\r\n\t */\r\n\tprivate setCatchInterception = () => {\r\n\t\tthis._axios.interceptors.response.use((res) => res, (e: any) => {\r\n\t\t\tif (e.name === 'NetworkError') {\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.NetworkException(TranslationKey.EXCEPTION_NETWORK, e.response));\r\n\t\t\t} else if (e.response && e.response.status === 400) {\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.BadRequestException(TranslationKey.EXCEPTION_BAD_REQUEST, e.response));\r\n\t\t\t} else if (e.response && e.response.status === 401) {\r\n\t\t\t\tif (this.getToken()) {\r\n\t\t\t\t\tthis.removeToken();\r\n\t\t\t\t\tthis.setToken();\r\n\t\t\t\t}\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.AuthorizationException(TranslationKey.EXCEPTION_AUTHORIZATION, e.response));\r\n\t\t\t} else if (e.response && e.response.status === 500) {\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.ServerException(TranslationKey.EXCEPTION_SERVER, e.response));\r\n\t\t\t} else {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the interceptor for successful response formatting.\r\n\t */\r\n\tprivate setResponseFormattingInterception = () => {\r\n\t\tthis._axios.interceptors.response.use((res: HttpResponse<any>): HttpResponse<any> | any => {\r\n\t\t\tif (this._httpConfig!.responseType === ResponseType.RAW) {\r\n\t\t\t\treturn res;\r\n\t\t\t} else {\r\n\t\t\t\treturn res.data;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate isAuthEnabled = (): boolean => {\r\n\t\treturn this._httpConfig!.authSettings !== false;\r\n\t}\r\n\r\n}\r\n\r\nexport default new HttpService();\r\n","import * as deepmerge from 'deepmerge';\r\nimport { HintType, ReticleType } from '../../idscan/enums/Camera';\r\nimport { JourneyEvent } from '../../idscan/enums/JourneyEvent';\r\nimport { TranslationKey } from '../../idscan/enums/Translation';\r\nimport { ICameraOptions } from '../../idscan/interfaces/CameraConfiguration';\r\nimport { IOverlayConfiguration } from '../../idscan/interfaces/ContainerConfiguration';\r\nimport { retryOperation, wait } from '../functions/functions';\r\nimport {\r\n\tICamera,\r\n\tIDeviceCapabilities,\r\n\tIResolution,\r\n} from '../interfaces/Camera';\r\nimport EventService from './EventService';\r\nimport { ExceptionManager } from './ExceptionManager';\r\nimport { isFirefox } from '../utils/browserDetection';\r\n\r\nexport enum CameraPermissionState {\r\n\tUNKNOWN = 'unknown',\r\n\tPROMPT = 'prompt',\r\n\tGRANTED = 'granted',\r\n\tDENIED = 'denied',\r\n}\r\n\r\nexport enum CameraFacingMode {\r\n\tFRONT = 'FRONT',\r\n\tBACK = 'BACK',\r\n\tENVIRONMENT = 'ENVIRONMENT', //new facing mode for devices have multiple cameras\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IStreamRenderOptions {\r\n\tgrayscale?: boolean;\r\n\tmirror?: boolean;\r\n\treticleType?: ReticleType;\r\n\thintType?: HintType;\r\n\twatermark?: boolean;\r\n}\r\n\r\nconst defaultDocumentReticlePath = (\r\n\twidth: number,\r\n\theight: number,\r\n\tinset: number = 50,\r\n\tthickness: number = 5,\r\n\tlength: number = width > height ? 600 : 700\r\n) => `\r\n\tM${inset},${inset} L${inset + thickness + length},${inset} L${inset + thickness + length\r\n\t},${inset + thickness} L${inset + thickness},${inset + thickness} L${inset + thickness\r\n\t},${inset + thickness + length} L${inset},${inset + thickness + length\r\n\t} L${inset},${inset} Z\r\n\tM${width - inset - length - thickness},${inset} L${width - inset},${inset} L${width - inset\r\n\t},${inset + thickness + length} L${width - inset - thickness},${inset + thickness + length\r\n\t} L${width - inset - thickness},${inset + thickness} L${width - inset - length - thickness\r\n\t},${inset + thickness} L${width - inset - length - thickness},${inset} Z\r\n\tM${width - inset - thickness},${height - inset - thickness - length} L${width - inset\r\n\t},${height - inset - thickness - length} L${width - inset},${height - inset} L${width - inset - thickness - length\r\n\t},${height - inset} L${width - inset - thickness - length},${height - inset - thickness\r\n\t} L${width - inset - thickness},${height - inset - thickness} L${width - inset - thickness\r\n\t},${height - inset - thickness - length} Z\r\n\tM${inset},${height - inset - thickness - length} L${inset + thickness},${height - inset - thickness - length\r\n\t} L${inset + thickness},${height - inset - thickness} L${inset + thickness + length\r\n\t},${height - inset - thickness} L${inset + thickness + length},${height - inset\r\n\t} L${inset},${height - inset} L${inset},${height - inset - thickness - length} Z\r\n`;\r\n\r\nconst defaultPortraitReticlePath = (width: number, height: number) => {\r\n\tconst widthRatio = (width > height ? 576 : 360) / width;\r\n\tconst heightRatio = (width > height ? 360 : 576) / height;\r\n\tconst ovalHeight = 295 / heightRatio;\r\n\r\n\t// Calculate the center position\r\n\tconst centerX = width / 2;\r\n\r\n\t// In the original formula, centerY is positioned such that\r\n\t// the top of the oval aligns with a specific point, not the center of the oval\r\n\tconst topY = (height - ovalHeight) / 2;  // This is where the top of the oval should be\r\n\tconst centerY = topY + ovalHeight / 2;     // Actual center of the oval\r\n\r\n\t// Create the outer rectangle path (clockwise)\r\n\tlet reticle = `\r\n        M 0,0\r\n        L ${width},0\r\n        L ${width},${height}\r\n        L 0,${height}\r\n        Z\r\n    `;\r\n\r\n\t// Create the oval cutout (counter-clockwise)\r\n\t// The horizontal radius stays the same\r\n\tconst horizontalRadius = 110 / widthRatio;\r\n\t// The vertical radius is half the oval height\r\n\tconst verticalRadius = ovalHeight / 2;\r\n\r\n\treticle += `\r\n        M ${centerX + horizontalRadius},${centerY}\r\n        A ${horizontalRadius},${verticalRadius} 0 1,0 ${centerX - horizontalRadius},${centerY}\r\n        A ${horizontalRadius},${verticalRadius} 0 1,0 ${centerX + horizontalRadius},${centerY}\r\n        Z\r\n    `;\r\n\r\n\treturn reticle.trim();\r\n};\r\n\r\nconst defaultWatermarkPath = (\r\n\twidth: number,\r\n\theight: number,\r\n\tlogoWidth: number = 160,\r\n\tlogoHeight: number = 31\r\n) => `\r\n\tM${width / 2 - logoWidth / 2\r\n\t},${logoHeight} m22.03-12.583l-10.9664 0l-.9078 2.9528l8.6788 0c-.2796 1.7674-1.1798 3.3848-2.5464 4.575c-1.3666 1.19-3.1146 1.8788-4.9442 1.9482c-1.8296.0692-3.627-.4852-5.0838-1.5682c-1.457-1.0832-2.4828-2.6276-2.9016-4.3686c-.4188-1.741-.2048-3.57.6058-5.1736c.8104-1.6036 2.1668-2.882 3.8364-3.6158c1.6698-.734 3.5488-.8778 5.3152-.4068c1.7664.471 3.31 1.5274 4.3662 2.9882h3.6948c-1.1234-2.4514-3.1362-4.4098-5.6504-5.4976c-2.5142-1.0878-5.3516-1.2282-7.9654-.3938c-2.6138.8342-4.8188 2.5842-6.19 4.9122c-1.3712 2.328-1.8116 5.0694-1.2362 7.6958c.5754 2.6264 2.1258 4.9516 4.3524 6.5276c2.2266 1.576 4.9718 2.2912 7.7062 2.0076c2.7344-.2836 5.2646-1.5458 7.1026-3.5434c1.8382-1.9976 2.854-4.589 2.852-7.2748c-.0022-.5938-.0508-1.1868-.1452-1.7734zm11.1572-8.9288c1.1604-.0356 2.3026.2884 3.2632.9256c.9604.637 1.6898 1.5546 2.084 2.6212c.9078 2.1192.599 4.9566-1.607 6.4906c1.037.3658 1.928 1.0438 2.5448 1.9362c.6168.8924.9274 1.9532.8868 3.0294c0 3.2186-2.1696 6.4728-6.3548 6.4728h-9.9678l0-21.4758l9.1508 0zm-6.0006 18.4258h6.7904c.4462-.0072.886-.1034 1.2924-.283c.4066-.1794.7712-.4382 1.0714-.7606c.3002-.3222.5298-.7012.6744-1.1134c.1446-.4122.2012-.849.1664-1.2834c.0256-.4128-.0408-.826-.1944-1.2114c-.1536-.3854-.3906-.7336-.6952-1.021c-.3046-.2874-.669-.5068-1.0688-.6434c-.3996-.1366-.8246-.187-1.2462-.1478h-6.7904l0 6.464zm0-9.541l5.9372 0c3.4588 0 3.5222-5.9674.0634-5.9674l-6.0006 0v5.9674zm36.4944.0442l-10.9664 0l-.9078 2.9528l8.7422 0c-.2794 1.7674-1.1798 3.3848-2.5464 4.575c-1.3666 1.19-3.1146 1.8788-4.9442 1.9482c-1.8296.0694-3.627-.4852-5.0838-1.5682c-1.457-1.0832-2.4828-2.6276-2.9018-4.3686c-.4188-1.741-.2048-3.57.6058-5.1736c.8104-1.6036 2.1668-2.882 3.8364-3.6158c1.6698-.734 3.5488-.8778 5.3152-.4068c1.7664.471 3.31 1.5274 4.3662 2.9882h3.6948c-1.1274-2.4444-3.1412-4.3948-5.6532-5.4752c-2.5122-1.0804-5.3448-1.2144-7.9522-.3762c-2.6072.8382-4.8046 2.5894-6.1686 4.916c-1.364 2.3266-1.798 5.064-1.2184 7.6846c.5794 2.6206 2.1316 4.939 4.357 6.5082c2.2256 1.5694 4.967 2.2784 7.6962 1.991c2.729-.2876 5.2524-1.5518 7.084-3.5486c1.8318-1.9968 2.8418-4.5852 2.8356-7.2662c-.0006-.5944-.0522-1.1876-.1542-1.7734zm8.425-13.442v30.4404h1.2v-30.4404h-1.2zm9.0852 5.205l3.2046 0v20.9528h-3.2046v-20.9528zm7.7074.1948c2.038-.3326 4.0982-.5194 6.164-.5586c7.072 0 10.3764 3.4226 10.3764 10.8532c0 7.4306-3.268 10.7912-10.6032 10.7912c-1.9854-.011-3.9682-.1414-5.9372-.3902v-20.6954zm5.8646 18.2748c5.2744 0 7.3714-2.1192 7.3714-7.9182c0-5.799-2.097-8.14-7.1718-8.14c-.9592.0134-1.9168.0784-2.8686.195v15.7388c.9712.0976 1.9698.1242 2.669.1242zm12.7186-.3546c1.4916.3236 3.0116.5078 4.539.5498c1.9064 0 3.3046-.4878 3.3046-1.8532c0-1.3656-1.271-1.5962-3.5314-2.3144c-2.542-.8158-4.7026-1.7734-4.7026-4.4334c0-2.66 2.2968-4.4334 6.1642-4.4334c1.46.0122 2.9146.1756 4.3394.4876l-.3996 2.5802c-1.3172-.2728-2.6574-.427-4.0034-.461c-2.0064 0-3.005.6206-3.005 1.667c0 1.3034 1.507 1.5252 3.7676 2.2788c2.7234.8866 4.4754 1.8532 4.4754 4.4956c0 2.9614-2.1696 4.655-6.5362 4.655c-1.6286-.011-3.251-.1954-4.8388-.5496l.4268-2.669zm12.3736-4.762c0-4.7526 1.8974-7.7852 7.2626-7.7852c1.37.0142 2.7342.1778 4.067.4876l-.3178 2.5094c-1.197-.229-2.4118-.3596-3.6312-.3902c-3.1048 0-4.2668 1.4986-4.2668 5.2492c0 3.1568.8352 5.2138 3.9308 5.2138c1.4338-.0596 2.8464-.3594 4.176-.8866l.8262 2.4472c-1.6252.6814-3.37 1.0488-5.1384 1.0818c-4.775 0-6.9084-2.8728-6.9084-7.927zm19.5178-1.463c.9476.0022 1.894.0674 2.8326.195v-1.0374c0-2.1546-1.0714-2.873-3.1684-2.873c-1.501.0484-2.9908.2686-4.4392.6562l-.5356-2.5094c1.6862-.4596 3.4244-.7128 5.1746-.7538c3.6312 0 6.0006 1.472 6.0006 5.1518v10.2326h-2.2332l-.3358-1.2768c-1.2772 1.0312-2.8822 1.5956-4.5392 1.596c-2.8688 0-5.2744-1.596-5.2744-4.6906c0-3.0946 2.442-4.6906 6.518-4.6906zm-.699 6.943c1.2762-.0134 2.5142-.4268 3.5316-1.1794v-3.4138c-.908-.0974-2.1334-.1684-2.8052-.1684c-2.0972 0-3.4316.7182-3.4316 2.4118c0 1.6936 1.0984 2.3498 2.7052 2.3498zm10.2038-12.937h2.2696l.236 1.3034c1.4438-1.0304 3.178-1.6004 4.9658-1.6316c3.2682 0 5.0022 1.9242 5.0022 5.0542v10.33h-3.0322v-9.9754c0-1.8886-.9078-2.802-2.6326-2.802c-1.3446.0542-2.6492.4616-3.7766 1.1794v11.598h-3.0322v-15.0562z\r\n`;\r\n\r\nconst autoCaptureOnHint = (\r\n\twidth: number,\r\n\theight: number,\r\n\tlogoWidth: number = 261.61,\r\n\tlogoHeight: number = 18\r\n) => `\r\n\tM${width / 2 - logoWidth / 2},${height - logoHeight\r\n\t} m 3.4828 0 l 1.4865 -4.4417 l 6.7726 0 l 1.4952 4.4417 h 3.483 l -6.3503 -18.0131 l -4.0283 0 l -6.3414 18.0131 h 3.483 z m 2.366 -7.0628 l 2.4363 -7.2562 h 0.1408 l 2.4363 7.2562 l -5.0135 0 z m 25.0941 -10.9503 l 0 11.4957 c 0 2.2605 -1.5744 3.8789 -4.0459 3.8789 c -2.4803 0 -4.0459 -1.6184 -4.0459 -3.8789 l 0 -11.4957 h -3.2632 l 0 11.7683 c 0 3.87 2.9024 6.5175 7.309 6.5175 c 4.3889 0 7.309 -2.6475 7.309 -6.5175 v -11.7683 h -3.2632 z m 6.5136 2.7354 l 5.5676 0 l 0 15.2777 h 3.2368 l 0 -15.2777 l 5.5674 0 v -2.7354 l -14.3718 0 v 2.7354 z m 32.9594 6.2713 c 0 -5.8225 -3.5534 -9.2529 -8.2764 -9.2529 c -4.7319 0 -8.2764 3.4302 -8.2764 9.2529 c 0 5.8139 3.5445 9.2529 8.2764 9.2529 c 4.7231 0 8.2764 -3.4302 8.2764 -9.2529 z m -3.2805 0 c 0 4.0987 -2.0582 6.3239 -4.9959 6.3239 c -2.9288 0 -4.9959 -2.2252 -4.9959 -6.3239 c 0 -4.0987 2.0671 -6.3239 4.9959 -6.3239 c 2.9377 0 4.9959 2.2252 4.9959 6.3239 z m 28.9183 -2.9288 c -0.554 -4.0019 -3.6324 -6.3239 -7.6257 -6.3239 c -4.7055 0 -8.25 3.4302 -8.25 9.2529 c 0 5.8139 3.5005 9.2529 8.25 9.2529 c 4.2834 0 7.1243 -2.7705 7.6257 -6.2095 l -3.2894 -0.0175 c -0.4134 2.1109 -2.1373 3.2983 -4.2921 3.2983 c -2.9201 0 -5.0135 -2.1901 -5.0135 -6.3239 c 0 -4.0636 2.0758 -6.3239 5.0221 -6.3239 c 2.1901 0 3.9053 1.2403 4.2834 3.3951 h 3.2894 z m 5.5792 11.9355 l 1.4865 -4.4417 h 6.7724 l 1.4954 4.4417 h 3.483 l -6.3503 -18.0131 l -4.0283 0 l -6.3416 18.0131 h 3.483 z m 2.366 -7.0628 l 2.4363 -7.2562 h 0.1408 l 2.4363 7.2562 h -5.0135 z m 13.7392 7.0628 h 3.263 v -6.0865 h 3.4479 c 4.1602 0 6.3943 -2.4979 6.3943 -5.9633 c 0 -3.439 -2.2077 -5.9633 -6.3503 -5.9633 l -6.7549 0 v 18.0131 z m 3.263 -8.7691 v -6.5175 h 2.9905 c 2.4452 0 3.527 1.3193 3.527 3.2368 c 0 1.9175 -1.0817 3.2807 -3.5094 3.2807 h -3.0081 z m 12.3803 -6.5086 h 5.5674 v 15.2777 h 3.2368 v -15.2777 h 5.5676 v -2.7354 l -14.3718 0 v 2.7354 z m 28.9926 -2.7354 v 11.4957 c 0 2.2605 -1.5744 3.8789 -4.0459 3.8789 c -2.4803 0 -4.0459 -1.6184 -4.0459 -3.8789 v -11.4957 h -3.2632 v 11.7683 c 0 3.87 2.9026 6.5175 7.309 6.5175 c 4.3889 0 7.309 -2.6475 7.309 -6.5175 v -11.7683 h -3.2632 z m 7.3053 18.0131 l 3.263 0 v -6.5965 h 3.3247 l 3.5358 6.5965 h 3.6413 l -3.8964 -7.1419 c 2.1197 -0.8531 3.2368 -2.665 3.2368 -5.1103 c 0 -3.439 -2.2163 -5.761 -6.3503 -5.761 l -6.7549 0 v 18.0131 z m 3.263 -9.3055 v -5.9809 h 2.9905 c 2.4363 0 3.527 1.117 3.527 3.0345 c 0 1.9175 -1.0906 2.9466 -3.5094 2.9466 h -3.0081 z m 13.3413 9.3055 l 11.7859 0 v -2.7354 l -8.5229 0 v -4.9167 l 7.8457 0 v -2.7354 h -7.8457 v -4.8902 h 8.4525 v -2.7354 l -11.7155 0 v 18.0131 z m 30.2262 -10.3171 l -8.1095 0 v 2.6211 l 8.1095 0 v -2.6211 z m 26.7205 1.3104 c 0 -5.8225 -3.5542 -9.2529 -8.2766 -9.2529 c -4.7328 0 -8.2766 3.4302 -8.2766 9.2529 c 0 5.8139 3.5439 9.2529 8.2766 9.2529 c 4.7224 0 8.2766 -3.4302 8.2766 -9.2529 z m -3.2818 0 c 0 4.0987 -2.0578 6.3239 -4.9949 6.3239 c -2.9288 0 -4.9969 -2.2252 -4.9969 -6.3239 c 0 -4.0987 2.0681 -6.3239 4.9969 -6.3239 c 2.9371 0 4.9949 2.2252 4.9949 6.3239 z m 21.6637 -9.0065 l -3.2446 0 v 12.2785 h -0.1589 l -8.4789 -12.2785 l -2.9206 0 v 18.0131 h 3.2632 v -12.2697 h 0.1507 l 8.4872 12.2697 l 2.902 0 v -18.0131 z\r\n`;\r\n\r\nconst autoCaptureOffHint = (\r\n\twidth: number,\r\n\theight: number,\r\n\tlogoWidth: number = 273.16,\r\n\tlogoHeight: number = 18\r\n) => `\r\n\tM${width / 2 - logoWidth / 2},${height - logoHeight\r\n\t} m 3.4805 0 l 1.4854 -4.4385 l 6.7676 0 l 1.4941 4.4385 h 3.4805 l -6.3457 -17.9999 l -4.0254 0 l -6.3369 17.9999 h 3.4805 z m 2.3643 -7.0576 l 2.4346 -7.2509 h 0.1406 l 2.4346 7.251 l -5.0098 -0 z m 25.0757 -10.9423 l 0 11.4873 c 0 2.2588 -1.5733 3.876 -4.0429 3.876 c -2.4785 0 -4.0429 -1.6172 -4.0429 -3.876 l 0 -11.4873 h -3.2608 l 0 11.7597 c 0 3.8672 2.9005 6.5127 7.3037 6.5127 c 4.3857 0 7.3037 -2.6455 7.3037 -6.5127 v -11.7597 h -3.2608 z m 6.509 2.7334 l 5.5634 0 l 0 15.2666 h 3.2344 l 0 -15.2666 l 5.5634 0 v -2.7334 l -14.3611 0 v 2.7334 z m 32.9353 6.2666 c 0 -5.8183 -3.5508 -9.2461 -8.2706 -9.2461 c -4.7285 0 -8.2704 3.4277 -8.2704 9.2461 c 0 5.8096 3.5419 9.2461 8.2704 9.2461 c 4.7198 0 8.2706 -3.4277 8.2706 -9.2461 z m -3.2783 0 c 0 4.0957 -2.0567 6.3193 -4.9923 6.3193 c -2.9267 0 -4.9921 -2.2236 -4.9921 -6.3193 c 0 -4.0957 2.0654 -6.3193 4.9921 -6.3193 c 2.9355 0 4.9923 2.2236 4.9923 6.3193 z m 28.8974 -2.9267 c -0.5538 -3.999 -3.63 -6.3193 -7.6201 -6.3193 c -4.7023 0 -8.2442 3.4277 -8.2442 9.2461 c 0 5.8096 3.498 9.2461 8.2442 9.2461 c 4.2801 0 7.1191 -2.7685 7.6201 -6.2051 l -3.2872 -0.0176 c -0.4131 2.1094 -2.1357 3.2959 -4.289 3.2959 c -2.918 0 -5.0098 -2.1885 -5.0098 -6.3193 c 0 -4.0605 2.0742 -6.3193 5.0185 -6.3193 c 2.1885 0 3.9024 1.2393 4.2803 3.3926 l 3.2872 0 z m 5.5749 11.9267 l 1.4854 -4.4385 h 6.7675 l 1.4943 4.4385 h 3.4805 l -6.3457 -17.9999 h -4.0254 l -6.337 17.9999 l 3.4805 0 z m 2.3642 -7.0576 l 2.4346 -7.251 h 0.1407 l 2.4346 7.251 h -5.0098 z m 13.7292 7.0576 h 3.2606 v -6.082 l 3.4454 0 c 4.1572 0 6.3896 -2.4961 6.3896 -5.959 c 0 -3.4365 -2.206 -5.959 -6.3457 -5.959 l -6.7499 0 v 17.9999 z m 3.2606 -8.7627 v -6.5127 h 2.9883 c 2.4434 0 3.5244 1.3183 3.5244 3.2344 c 0 1.916 -1.081 3.2783 -3.5069 3.2783 h -3.0059 z m 12.3712 -6.5039 h 5.5636 v 15.2666 h 3.2342 v -15.2666 h 5.5636 v -2.7334 l -14.3613 0 v 2.7334 z m 28.9714 -2.7334 v 11.4873 c 0 2.2588 -1.5731 3.876 -4.0429 3.876 c -2.4785 0 -4.0429 -1.6172 -4.0429 -3.876 v -11.4873 h -3.2608 v 11.7597 c 0 3.8672 2.9005 6.5127 7.3037 6.5127 c 4.3857 0 7.3037 -2.6455 7.3037 -6.5127 v -11.7597 h -3.2608 z m 7.3 17.9999 l 3.2608 0 v -6.5918 h 3.3223 l 3.5331 6.5918 h 3.6387 l -3.8936 -7.1367 c 2.1182 -0.8525 3.2344 -2.6631 3.2344 -5.1064 c 0 -3.4365 -2.2147 -5.7568 -6.3457 -5.7568 l -6.7499 0 v 17.9999 z m 3.2608 -9.2988 v -5.9765 l 2.9881 0 c 2.4346 0 3.5244 1.1162 3.5244 3.0322 c 0 1.916 -1.0898 2.9443 -3.5069 2.9443 l -3.0057 0 z m 13.3313 9.2988 l 11.7773 0 v -2.7334 l -8.5167 0 v -4.9131 l 7.84 0 v -2.7334 h -7.84 v -4.8867 h 8.4463 v -2.7334 l -11.7069 0 v 17.9999 z m 30.2042 -10.3095 l -8.1035 0 v 2.6191 l 8.1035 0 v -2.6191 z m 26.701 1.3096 c 0 -5.8183 -3.5516 -9.2461 -8.2706 -9.2461 c -4.7293 0 -8.2706 3.4277 -8.2706 9.2461 c 0 5.8096 3.5413 9.2461 8.2706 9.2461 c 4.719 0 8.2706 -3.4277 8.2706 -9.2461 z m -3.2794 0 c 0 4.0957 -2.0563 6.3193 -4.9912 6.3193 c -2.9267 0 -4.9933 -2.2236 -4.9933 -6.3193 c 0 -4.0957 2.0666 -6.3193 4.9933 -6.3193 c 2.9349 0 4.9912 2.2236 4.9912 6.3193 z m 6.8557 9 h 3.2608 v -7.6465 h 7.4807 v -2.7334 l -7.4807 0 v -4.8867 l 8.2706 0 v -2.7334 l -11.5314 0 v 17.9999 z m 14.9985 0 h 3.2608 v -7.6465 h 7.4786 v -2.7334 l -7.4786 0 v -4.8867 l 8.2706 0 v -2.7334 l -11.5314 0 v 17.9999 z\r\n`;\r\n\r\nconst defaultConfiguration: {\r\n\toverlay: IOverlayConfiguration;\r\n\tcameraOptions: ICameraOptions;\r\n} = {\r\n\toverlay: {\r\n\t\tdocumentReticle: {\r\n\t\t\tpath: defaultDocumentReticlePath,\r\n\t\t},\r\n\t\tportraitReticle: {\r\n\t\t\tpath: defaultPortraitReticlePath,\r\n\t\t},\r\n\t},\r\n\tcameraOptions: {\r\n\t\tresolutions: {\r\n\t\t\tideal: {\r\n\t\t\t\thorizontal: 1440,\r\n\t\t\t\tvertical: 900,\r\n\t\t\t},\r\n\t\t\tminimum: {\r\n\t\t\t\thorizontal: 1280,\r\n\t\t\t\tvertical: 720,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class CameraService {\r\n\tprivate _stream?: MediaStream;\r\n\tprivate _configuration?: {\r\n\t\toverlay: IOverlayConfiguration;\r\n\t\tcameraOptions: ICameraOptions;\r\n\t};\r\n\r\n\tprivate _currentDeviceId?: string;\r\n\tprivate _lastActiveDeviceId?: string;\r\n\r\n\tprivate _animationHandle?: number;\r\n\tprivate _videoContext?: HTMLVideoElement;\r\n\r\n\tprivate _reticlePath?: Path2D;\r\n\tprivate _reticleType?: boolean;\r\n\r\n\tprivate _availableCameras: MediaDeviceInfo[] = [] as MediaDeviceInfo[];\r\n\r\n\tprivate _lastCameraPermissionState?: CameraPermissionState;\r\n\r\n\tprivate _observedDeviceCapabilities: IDeviceCapabilities = {\r\n\t\tcameras: {},\r\n\t};\r\n\r\n\t/**\r\n\t * Get the capabilities of the device as has been observed by the camera\r\n\t * service.\r\n\t */\r\n\tpublic get observedDeviceCapabilities(): IDeviceCapabilities {\r\n\t\treturn deepmerge({}, this._observedDeviceCapabilities);\r\n\t}\r\n\r\n\t/**\r\n\t * Set the observed capabilities of the device as observed by the camera\r\n\t * service\r\n\t */\r\n\tpublic set observedDeviceCapabilities(value: IDeviceCapabilities) {\r\n\t\tthis._observedDeviceCapabilities = deepmerge(\r\n\t\t\tthis._observedDeviceCapabilities,\r\n\t\t\tvalue\r\n\t\t);\r\n\r\n\t\tEventService.publish(JourneyEvent.CAMERA_CAPABILITIES_UPDATED, {\r\n\t\t\tcapabilities: this._observedDeviceCapabilities,\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Get the current media stream\r\n\t */\r\n\tpublic get stream() {\r\n\t\treturn this._stream;\r\n\t}\r\n\r\n\t/**\r\n\t * Get the ID of the device associated with the current media stream\r\n\t */\r\n\tpublic get currentDeviceId(): string | undefined {\r\n\t\treturn this._currentDeviceId;\r\n\t}\r\n\r\n\t/**\r\n\t * Probe each camera present on the device for information about its\r\n\t * capabilities, then cache the findings for later use.\r\n\t */\r\n\tpublic doDeviceProbe = () => {\r\n\t\treturn this.getAllDeviceCapabilities().then(\r\n\t\t\t(devices) =>\r\n\t\t\t(this.observedDeviceCapabilities = {\r\n\t\t\t\tcameras: devices.reduce((out, curr) => ({ ...out, ...curr }), {}),\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\t/**\r\n\t * Check if the device has a camera which is capable of capturing video at\r\n\t * the specified resolution.\r\n\t */\r\n\tpublic hasDeviceCapableOfResolution(\r\n\t\t{ horizontal, vertical }: IResolution = this._configuration!.cameraOptions\r\n\t\t\t.resolutions.minimum\r\n\t): boolean {\r\n\t\tif (isFirefox) {\r\n\t\t\t//firefox support workaround;\r\n\t\t\t//firefox can not get resolution from device capabilities\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn Object.keys(this.observedDeviceCapabilities.cameras).some(\r\n\t\t\t(deviceId) => {\r\n\t\t\t\tconst maximumResolution =\r\n\t\t\t\t\tthis.observedDeviceCapabilities.cameras[deviceId].resolutions.maximum;\r\n\t\t\t\treturn (\r\n\t\t\t\t\tmaximumResolution.horizontal >= horizontal &&\r\n\t\t\t\t\tmaximumResolution.vertical >= vertical\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the camera label indicates a back camera.\r\n\t */\r\n\tpublic isBackCameraLabel(cameraLabel: string): boolean {\r\n\t\tconst backCameraKeywords = [\r\n\t\t\t'rear',\r\n\t\t\t'back',\r\n\t\t\t'rck',\r\n\t\t\t'arrire',\r\n\t\t\t'trasera',\r\n\t\t\t'trs',\r\n\t\t\t'traseira',\r\n\t\t\t'posteriore',\r\n\t\t\t'',\r\n\t\t\t'',\r\n\t\t\t'',\r\n\t\t\t'',\r\n\t\t\t'',\r\n\t\t\t'',\r\n\t\t\t'arka',\r\n\t\t\t'achterzijde',\r\n\t\t\t'',\r\n\t\t\t'baksidan',\r\n\t\t\t'bagside',\r\n\t\t\t'sau',\r\n\t\t\t'bak',\r\n\t\t\t'tylny',\r\n\t\t\t'takakamera',\r\n\t\t\t'belakang',\r\n\t\t\t'',\r\n\t\t\t'',\r\n\t\t\t'spate',\r\n\t\t\t'hts',\r\n\t\t\t'zadn',\r\n\t\t\t'darrere',\r\n\t\t\t'zadn',\r\n\t\t\t'',\r\n\t\t\t'stranja',\r\n\t\t\t'belakang',\r\n\t\t\t'',\r\n\t\t];\r\n\t\t// Check the script of the cameraLabel to determine if .toLowerCase() is needed\r\n\t\tconst isLatinScript = /[a-z]/i.test(cameraLabel); // Checks if the label contains Latin characters\r\n\r\n\t\t// If it's Latin-based, apply .toLowerCase(), otherwise, skip it\r\n\t\treturn backCameraKeywords.some((keyword) =>\r\n\t\t\tisLatinScript\r\n\t\t\t\t? cameraLabel.toLowerCase().includes(keyword.toLowerCase())\r\n\t\t\t\t: cameraLabel.includes(keyword)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the camera label indicates a back dual wide camera.\r\n\t */\r\n\tpublic isBackDualWideCameraLabel(cameraLabel: string): boolean {\r\n\t\tconst backDualWideCameraKeywords = [\r\n\t\t\t'Fotocamera doppia con grandangolo (posteriore)',\r\n\t\t\t'Cmara trasera dual con gran angular',\r\n\t\t\t'Rckseitige Dual-Weitwinkelkamera',\r\n\t\t\t'Double appareil photo grand angle arrire',\r\n\t\t\t'Back Dual Wide Camera',\r\n\t\t\t'Tylny dwuobiektywowy aparat szerokoktny',\r\n\t\t\t'Camer dubl cu obiectiv superangular spate',\r\n\t\t\t'Zadn dulna irokouhl kamera',\r\n\t\t\t'Zadn duln irokohl fotoapart',\r\n\t\t\t'Dubbel vidvinkelkamera p baksidan',\r\n\t\t\t'ift Geni Kamera Arka Yz',\r\n\t\t\t'Dubbele groothoekcamera aan de achterkant',\r\n\t\t\t'   '\r\n\t\t];\r\n\r\n\t\t// Check the script of the cameraLabel to determine if .toLowerCase() is needed\r\n\t\tconst isLatinScript = /[a-z]/i.test(cameraLabel); // Checks if the label contains Latin characters\r\n\r\n\t\t// If it's Latin-based, apply .toLowerCase(), otherwise, skip it\r\n\t\treturn backDualWideCameraKeywords.some((keyword) =>\r\n\t\t\tisLatinScript\r\n\t\t\t\t? cameraLabel.toLowerCase().includes(keyword.toLowerCase())\r\n\t\t\t\t: cameraLabel.includes(keyword)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a promise of stream and returns it.\r\n\t */\r\n\tpublic getStream = (\r\n\t\tdeviceId: string | undefined = this._lastActiveDeviceId,\r\n\t\tfacingMode: CameraFacingMode | undefined = undefined,\r\n\t\tminimumResolution: IResolution = this._configuration!.cameraOptions\r\n\t\t\t.resolutions.minimum,\r\n\t\tidealResolution: IResolution = this._configuration!.cameraOptions\r\n\t\t\t.resolutions.ideal\r\n\t): Promise<MediaStream> => {\r\n\t\treturn this.stopStreaming()\r\n\t\t\t.then(() => {\r\n\t\t\t\treturn this.getVideoCameras().then((cameras) => {\r\n\t\t\t\t\tif (facingMode !== undefined) {\r\n\t\t\t\t\t\tlet facingCameras: MediaDeviceInfo[];\r\n\t\t\t\t\t\tif (facingMode === CameraFacingMode.BACK) {\r\n\t\t\t\t\t\t\tfacingCameras = cameras.filter((camera) =>\r\n\t\t\t\t\t\t\t\tthis.isBackCameraLabel(camera.label)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else if (facingMode === CameraFacingMode.ENVIRONMENT) {\r\n\t\t\t\t\t\t\tfacingCameras = cameras.filter((camera) => this.isBackDualWideCameraLabel(camera.label));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfacingCameras = cameras.filter(\r\n\t\t\t\t\t\t\t\t(camera) => !this.isBackCameraLabel(camera.label)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfacingCameras.sort((camera1, camera2) =>\r\n\t\t\t\t\t\t\tcamera1.label.localeCompare(camera2.label)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tdeviceId =\r\n\t\t\t\t\t\t\tfacingCameras.length > 0 ? facingCameras[0].deviceId : deviceId;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.getUserMedia({\r\n\t\t\t\t\t\tvideo: {\r\n\t\t\t\t\t\t\twidth: {\r\n\t\t\t\t\t\t\t\tmin: minimumResolution.horizontal,\r\n\t\t\t\t\t\t\t\tideal: idealResolution.horizontal,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\theight: {\r\n\t\t\t\t\t\t\t\tmin: minimumResolution.vertical,\r\n\t\t\t\t\t\t\t\tideal: idealResolution.vertical,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t...(deviceId ? { deviceId: { exact: deviceId } } : {}),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.then((stream) => (this._stream = stream))\r\n\t\t\t.then(this.reconcileDevice)\r\n\t\t\t.then((device) => {\r\n\t\t\t\tthis._lastActiveDeviceId = device ? device.deviceId : undefined;\r\n\t\t\t\tthis._currentDeviceId = device ? device.deviceId : undefined;\r\n\r\n\t\t\t\treturn device;\r\n\t\t\t})\r\n\t\t\t.then((device) => this.getDeviceCapabilities(this._stream!, device))\r\n\t\t\t.then((capabilities) => {\r\n\t\t\t\tthis.observedDeviceCapabilities = {\r\n\t\t\t\t\tcameras: { ...capabilities },\r\n\t\t\t\t};\r\n\t\t\t})\r\n\t\t\t.then(() =>\r\n\t\t\t\tEventService.publish(JourneyEvent.CAMERA_READY, {\r\n\t\t\t\t\tcamera: this._currentDeviceId,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.then(() => this._stream!);\r\n\t};\r\n\r\n\t/**\r\n\t * Stops stream to broadcast if there is a stream\r\n\t */\r\n\tpublic stopStreaming = (): Promise<void> =>\r\n\t\tnew Promise((resolve) => {\r\n\t\t\tcancelAnimationFrame(this._animationHandle!);\r\n\r\n\t\t\tif (this._stream) {\r\n\t\t\t\tthis._stream\r\n\t\t\t\t\t.getVideoTracks()\r\n\t\t\t\t\t.forEach((track: MediaStreamTrack) => track.stop());\r\n\t\t\t\tthis._stream = undefined;\r\n\r\n\t\t\t\treturn EventService.publish(JourneyEvent.CAMERA_STOP, {\r\n\t\t\t\t\tcamera: this._lastActiveDeviceId,\r\n\t\t\t\t}).then(() => resolve());\r\n\t\t\t} else {\r\n\t\t\t\treturn resolve();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t/**\r\n\t * Get all available video cameras in this device\r\n\t */\r\n\tpublic getVideoCameras = () => {\r\n\t\tif (navigator.mediaDevices && this._availableCameras.length === 0) {\r\n\t\t\treturn navigator.mediaDevices\r\n\t\t\t\t.enumerateDevices()\r\n\t\t\t\t.then((devices) => devices.filter(({ kind }) => kind === 'videoinput'))\r\n\t\t\t\t.then((devices) => {\r\n\t\t\t\t\tif (devices.some((dev) => dev.label !== '')) {\r\n\t\t\t\t\t\tthis._availableCameras = devices;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (isFirefox) this.getVideoCameras();\r\n\t\t\t\t\treturn devices;\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn Promise.resolve(this._availableCameras);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Check what the current permissions state is for the\r\n\t */\r\n\tpublic getCameraPermission = (): Promise<CameraPermissionState> =>\r\n\t\tnew Promise((resolve) => {\r\n\t\t\tif (isFirefox) {\r\n\t\t\t\treturn resolve(this.decideCameraPermission());\r\n\t\t\t} else if ((navigator as any).permissions) {\r\n\t\t\t\tvar rr = (navigator as any).permissions.query({ name: 'camera' });\r\n\t\t\t\trr.then(({ state }: { state: CameraPermissionState }) => {\r\n\t\t\t\t\tif (state === CameraPermissionState.PROMPT) {\r\n\t\t\t\t\t\treturn resolve(this.decideCameraPermission());\r\n\t\t\t\t\t} else return resolve(state);\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tresolve(CameraPermissionState.UNKNOWN);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn resolve(this.decideCameraPermission());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t/**\r\n\t * Decide camera permission based on the camera accessibility if permission is unknown\r\n\t */\r\n\tprivate decideCameraPermission = (): Promise<CameraPermissionState> =>\r\n\t\tnew Promise((resolve) => {\r\n\t\t\tif (\r\n\t\t\t\tthis._lastCameraPermissionState !== null &&\r\n\t\t\t\tthis._lastCameraPermissionState !== undefined\r\n\t\t\t) {\r\n\t\t\t\treturn resolve(this._lastCameraPermissionState);\r\n\t\t\t} else {\r\n\t\t\t\tvar cameraPermissionState = CameraPermissionState.UNKNOWN;\r\n\t\t\t\treturn this.getVideoCameras()\r\n\t\t\t\t\t.then((cameras) => {\r\n\t\t\t\t\t\t//triggering camera to use highest resolution\r\n\t\t\t\t\t\t//even if it does not support 1920x1080, it will use\r\n\t\t\t\t\t\t//the highest resolution close to following constraint\r\n\t\t\t\t\t\tconst constraints = {\r\n\t\t\t\t\t\t\tvideo: {\r\n\t\t\t\t\t\t\t\twidth: 1920,\r\n\t\t\t\t\t\t\t\theight: 1080,\r\n\t\t\t\t\t\t\t\tfacingMode: { ideal: 'environment' },\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\taudio: false,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn this.getUserMedia(constraints)\r\n\t\t\t\t\t\t\t.then((value) => {\r\n\t\t\t\t\t\t\t\tcameraPermissionState = CameraPermissionState.GRANTED;\r\n\r\n\t\t\t\t\t\t\t\t//stop all cameras after we get the camera permission state by accessing it in behind\r\n\t\t\t\t\t\t\t\tvalue.getVideoTracks().forEach((track) => track.stop());\r\n\r\n\t\t\t\t\t\t\t\treturn cameraPermissionState;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((exception) => {\r\n\t\t\t\t\t\t\t\tconsole.log(exception);\r\n\t\t\t\t\t\t\t\tcameraPermissionState = CameraPermissionState.DENIED;\r\n\t\t\t\t\t\t\t\treturn cameraPermissionState;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((permissionState) => {\r\n\t\t\t\t\t\tthis._lastCameraPermissionState = permissionState;\r\n\t\t\t\t\t\treturn resolve(permissionState);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t/**\r\n\t * Check if this service has an active stream\r\n\t */\r\n\tpublic hasActiveStream = () =>\r\n\t\tthis._stream ? this._stream.getTracks().length > 0 : false;\r\n\r\n\t/**\r\n\t * Get an image from the current video stream\r\n\t */\r\n\tpublic getImageFromCurrentStream = (\r\n\t\toptions: IStreamRenderOptions = {}\r\n\t): Promise<string> =>\r\n\t\tthis.resizeCanvas(this._videoContext!, document.createElement('canvas'))\r\n\t\t\t.then((canvas) => canvas.getContext('2d')!)\r\n\t\t\t.then((context) =>\r\n\t\t\t\tthis.renderFrameToContext(context, options).canvas.toDataURL(\r\n\t\t\t\t\t'image/jpeg'\r\n\t\t\t\t)\r\n\t\t\t);\r\n\r\n\t/**\r\n\t * Get a blob from the current video stream\r\n\t */\r\n\tpublic getBlobFromCurrentStream = (\r\n\t\toptions: IStreamRenderOptions = {}\r\n\t): Promise<Blob> =>\r\n\t\tnew Promise((resolve) => {\r\n\t\t\treturn this.resizeCanvas(\r\n\t\t\t\tthis._videoContext!,\r\n\t\t\t\tdocument.createElement('canvas')\r\n\t\t\t)\r\n\t\t\t\t.then((canvas) => canvas.getContext('2d')!)\r\n\t\t\t\t.then((context) =>\r\n\t\t\t\t\tthis.renderFrameToContext(context, options).canvas.toBlob(\r\n\t\t\t\t\t\t(blob) => resolve(blob as Blob),\r\n\t\t\t\t\t\t'image/jpeg'\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t});\r\n\r\n\tpublic getLivenessBlobFromCurrentStream = (\r\n\t\toptions: IStreamRenderOptions = {}\r\n\t): Promise<Blob> =>\r\n\t\tnew Promise((resolve) => {\r\n\t\t\treturn this.resizeLivenessCanvas(\r\n\t\t\t\tthis._videoContext!,\r\n\t\t\t\tdocument.createElement('canvas')\r\n\t\t\t)\r\n\t\t\t\t.then((canvas) => {\r\n\t\t\t\t\treturn canvas.getContext('2d')!;\r\n\t\t\t\t})\r\n\t\t\t\t.then((context) =>\r\n\t\t\t\t\tthis.renderLivenessFrameToContext(context, options).canvas.toBlob(\r\n\t\t\t\t\t\t(blob) => resolve(blob as Blob),\r\n\t\t\t\t\t\t'image/jpeg'\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t});\r\n\r\n\t/**\r\n\t * Render the contents of a stream to the specified element until stopped\r\n\t */\r\n\tpublic renderStreamToElement = (\r\n\t\tstream: MediaStream | undefined = this._stream,\r\n\t\tcanvas?: HTMLCanvasElement,\r\n\t\toptions: IStreamRenderOptions = {}\r\n\t): Promise<void> => {\r\n\t\tif (!stream || !canvas) {\r\n\t\t\treturn Promise.resolve();\r\n\t\t} else {\r\n\t\t\tconst { reticleType = ReticleType.NONE, hintType = HintType.NONE } =\r\n\t\t\t\toptions;\r\n\r\n\t\t\tthis._videoContext = document.createElement('video');\r\n\r\n\t\t\t// NOTE: These need to be set or else iOS refuses to work properly.\r\n\t\t\tthis._videoContext.setAttribute('autoplay', 'true');\r\n\t\t\tthis._videoContext.setAttribute('loop', 'true');\r\n\t\t\tthis._videoContext.setAttribute('muted', 'true');\r\n\t\t\tthis._videoContext.setAttribute('playsinline', 'true');\r\n\r\n\t\t\tthis._videoContext.srcObject = stream;\r\n\r\n\t\t\treturn this._videoContext!.play()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tconst resizeCanvasPromise = this.resizeCanvas(\r\n\t\t\t\t\t\tthis._videoContext!,\r\n\t\t\t\t\t\tcanvas\r\n\t\t\t\t\t);\r\n\t\t\t\t\tEventService.publish(JourneyEvent.CAMERA_CANVAS_RESIZE, {\r\n\t\t\t\t\t\tisPortrait:\r\n\t\t\t\t\t\t\tthis._videoContext!.videoHeight > this._videoContext!.videoWidth,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn resizeCanvasPromise;\r\n\t\t\t\t})\r\n\t\t\t\t.then((c) => this.setReticlePath(reticleType, c.width, c.height))\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis._videoContext!.addEventListener('resize', () =>\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.resizeCanvas(this._videoContext!, canvas).then((c) =>\r\n\t\t\t\t\t\t\t\tthis.setReticlePath(reticleType, c.width, c.height)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}, 250)\r\n\t\t\t\t\t);\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tcancelAnimationFrame(this._animationHandle!);\r\n\t\t\t\t\tthis._animationHandle = this.doFrameCycle(\r\n\t\t\t\t\t\tcanvas.getContext('2d')!,\r\n\t\t\t\t\t\toptions\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Set the configuration\r\n\t */\r\n\tpublic setConfiguration = ({\r\n\t\toverlay = {} as any,\r\n\t\tcameraOptions = {} as any,\r\n\t}: Partial<{\r\n\t\toverlay: IOverlayConfiguration;\r\n\t\tcameraOptions: ICameraOptions;\r\n\t}>) => {\r\n\t\tthis._configuration = deepmerge(defaultConfiguration, {\r\n\t\t\toverlay,\r\n\t\t\tcameraOptions,\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Clear the canvas completely\r\n\t */\r\n\tpublic clearCanvas = (canvas?: HTMLCanvasElement) => {\r\n\t\tif (canvas instanceof HTMLCanvasElement) {\r\n\t\t\tconst context = canvas.getContext('2d')!;\r\n\r\n\t\t\tcontext.globalCompositeOperation = 'source-over';\r\n\t\t\tcontext.fillStyle = 'black';\r\n\t\t\tcontext.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Complete a single render cycle for the camera viewfinder using the\r\n\t * specified options\r\n\t */\r\n\tprivate doFrameCycle = (\r\n\t\tcontext: CanvasRenderingContext2D,\r\n\t\toptions: IStreamRenderOptions\r\n\t) =>\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tconst {\r\n\t\t\t\treticleType,\r\n\t\t\t\twatermark = true,\r\n\t\t\t\thintType = HintType.NONE,\r\n\t\t\t} = options;\r\n\t\t\tthis.renderFrameToContext(context, options);\r\n\r\n\t\t\tif (reticleType) {\r\n\t\t\t\tthis.renderReticles(context);\r\n\t\t\t}\r\n\t\t\tthis.renderHintType(context, hintType);\r\n\t\t\tif (watermark) {\r\n\t\t\t\tthis.renderWatermark(context);\r\n\t\t\t}\r\n\r\n\t\t\tthis._animationHandle = this.doFrameCycle(context, options);\r\n\t\t});\r\n\r\n\t/**\r\n\t * Render the reticles onto the specified camera viewport\r\n\t */\r\n\tprivate renderReticles = (context: CanvasRenderingContext2D): void => {\r\n\t\tif (this._reticlePath) {\r\n\t\t\tif (!this._reticleType) {\r\n\t\t\t\tcontext.fillStyle = 'rgba(255, 255, 255, 0.75)';\r\n\t\t\t\tcontext.globalCompositeOperation = 'difference';\r\n\t\t\t\tcontext.fill(this._reticlePath);\r\n\t\t\t} else {\r\n\t\t\t\t// Draw the semi-transparent overlay with oval cutout\r\n\t\t\t\tcontext.fillStyle = 'rgba(0, 0, 0, 0.5)';\r\n\t\t\t\tcontext.fill(this._reticlePath);\r\n\r\n\t\t\t\t// Draw the oval outline separately\r\n\t\t\t\tconst widthRatio = (context.canvas.width > context.canvas.height ? 576 : 360) / context.canvas.width;\r\n\t\t\t\tconst heightRatio = (context.canvas.width > context.canvas.height ? 360 : 576) / context.canvas.height;\r\n\t\t\t\tconst ovalHeight = 295 / heightRatio;\r\n\r\n\t\t\t\tconst centerX = context.canvas.width / 2;\r\n\t\t\t\tconst topY = (context.canvas.height - ovalHeight) / 2;\r\n\t\t\t\tconst centerY = topY + ovalHeight / 2;\r\n\r\n\t\t\t\tconst horizontalRadius = 110 / widthRatio;\r\n\t\t\t\tconst verticalRadius = ovalHeight / 2;\r\n\r\n\t\t\t\t// Draw the oval outline\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.ellipse(centerX, centerY, horizontalRadius, verticalRadius, 0, 0, 2 * Math.PI);\r\n\t\t\t\tcontext.strokeStyle = 'white';\r\n\t\t\t\tcontext.lineWidth = 10;\r\n\t\t\t\tcontext.stroke();\r\n\t\t\t}\r\n\r\n\t\t\tcontext.globalCompositeOperation = 'source-over';\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * Render the hintType onto the specified camera viewport\r\n\t */\r\n\tprivate renderHintType = (\r\n\t\tcontext: CanvasRenderingContext2D,\r\n\t\thintType: HintType\r\n\t): void => {\r\n\t\tcontext.fillStyle = 'rgba(255, 255, 255, 0.75)';\r\n\t\tswitch (hintType) {\r\n\t\t\tcase HintType.AUTOCAPTUREOFF:\r\n\t\t\t\tcontext.fill(\r\n\t\t\t\t\tnew Path2D(\r\n\t\t\t\t\t\tautoCaptureOffHint(context.canvas.width, context.canvas.height)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase HintType.AUTOCAPTUREON:\r\n\t\t\t\tcontext.fill(\r\n\t\t\t\t\tnew Path2D(\r\n\t\t\t\t\t\tautoCaptureOnHint(context.canvas.width, context.canvas.height)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Render the watermark onto the specified camera viewport\r\n\t */\r\n\tprivate renderWatermark = (context: CanvasRenderingContext2D): void => {\r\n\t\tcontext.fillStyle = 'rgba(255, 255, 255, 0.75)';\r\n\t\tcontext.fill(\r\n\t\t\tnew Path2D(\r\n\t\t\t\tdefaultWatermarkPath(context.canvas.width, context.canvas.height)\r\n\t\t\t)\r\n\t\t);\r\n\t\tcontext.globalCompositeOperation = 'source-over';\r\n\t};\r\n\r\n\t/**\r\n\t * Resize the specified canvas to match the size of the specified video\r\n\t * element\r\n\t */\r\n\tprivate resizeCanvas = (\r\n\t\tvideo: HTMLVideoElement,\r\n\t\tcanvas: HTMLCanvasElement\r\n\t): Promise<HTMLCanvasElement> =>\r\n\t\tnew Promise((resolve) => {\r\n\t\t\tcanvas.width = video.videoWidth;\r\n\t\t\tcanvas.height = video.videoHeight;\r\n\r\n\t\t\tresolve(canvas);\r\n\t\t});\r\n\r\n\tprivate resizeLivenessCanvas = (\r\n\t\tvideo: HTMLVideoElement,\r\n\t\tcanvas: HTMLCanvasElement\r\n\t): Promise<HTMLCanvasElement> =>\r\n\t\tnew Promise((resolve) => {\r\n\t\t\tcanvas.width = video.videoWidth / 3;\r\n\t\t\tcanvas.height = video.videoHeight / 3;\r\n\r\n\t\t\tresolve(canvas);\r\n\t\t});\r\n\r\n\t/**\r\n\t * Process a single frame and render it to the specified element\r\n\t */\r\n\tprivate renderFrameToContext = (\r\n\t\tcontext: CanvasRenderingContext2D,\r\n\t\toptions: IStreamRenderOptions = {}\r\n\t): CanvasRenderingContext2D => {\r\n\t\tif (this._videoContext) {\r\n\t\t\t// context.fillStyle = 'rgba(255, 255, 255, 1)';\r\n\t\t\t// context.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\r\n\t\t\tif (options.grayscale) {\r\n\t\t\t\tcontext.globalCompositeOperation = 'luminosity';\r\n\t\t\t}\r\n\t\t\tcontext.globalCompositeOperation = 'source-over';\r\n\t\t\tif (options.mirror) {\r\n\t\t\t\tcontext.setTransform(-1, 0, 0, 1, context.canvas.width, 0);\r\n\t\t\t\tcontext.drawImage(\r\n\t\t\t\t\tthis._videoContext,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tthis._videoContext.videoWidth,\r\n\t\t\t\t\tthis._videoContext.videoHeight,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tthis._videoContext.videoWidth,\r\n\t\t\t\t\tthis._videoContext.videoHeight\r\n\t\t\t\t);\r\n\t\t\t\tcontext.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\t\t} else {\r\n\t\t\t\tcontext.drawImage(\r\n\t\t\t\t\tthis._videoContext,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tthis._videoContext.videoWidth,\r\n\t\t\t\t\tthis._videoContext.videoHeight,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tthis._videoContext.videoWidth,\r\n\t\t\t\t\tthis._videoContext.videoHeight\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tcontext.globalCompositeOperation = 'source-over';\r\n\t\t}\r\n\r\n\t\treturn context;\r\n\t};\r\n\r\n\tprivate renderLivenessFrameToContext = (\r\n\t\tcontext: CanvasRenderingContext2D,\r\n\t\toptions: IStreamRenderOptions = {}\r\n\t): CanvasRenderingContext2D => {\r\n\t\tif (this._videoContext) {\r\n\t\t\tcontext.fillStyle = 'rgba(255, 255, 255, 1)';\r\n\t\t\tcontext.fillRect(0, 0, context.canvas.width, context.canvas.height);\r\n\r\n\t\t\tcontext.drawImage(\r\n\t\t\t\tthis._videoContext,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tthis._videoContext.videoWidth,\r\n\t\t\t\tthis._videoContext.videoHeight,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tthis._videoContext.videoWidth / 3,\r\n\t\t\t\tthis._videoContext.videoHeight / 3\r\n\t\t\t);\r\n\r\n\t\t\tcontext.globalCompositeOperation = 'source-over';\r\n\t\t}\r\n\r\n\t\treturn context;\r\n\t};\r\n\r\n\t/**\r\n\t * Get the capabilities of all known cameras on this device\r\n\t */\r\n\r\n\tprivate getAllDeviceCapabilities = (): Promise<\r\n\t\tArray<Record<string, ICamera>>\r\n\t> => {\r\n\t\treturn this.getVideoCameras()\r\n\t\t\t.then((devices) => {\r\n\t\t\t\treturn this.getCameraCapabilitiesSequentially(devices);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\treturn [];\r\n\t\t\t});\r\n\t};\r\n\r\n\t//ENT-451\r\n\tprivate async getCameraCapabilitiesSequentially(devices: MediaDeviceInfo[]) {\r\n\t\tlet camerasFuncs: (() => Promise<Record<string, ICamera>>)[];\r\n\t\tlet result: Record<string, ICamera>[] = [];\r\n\t\tcamerasFuncs = devices.map(\r\n\t\t\t(device) => () =>\r\n\t\t\t\tnew Promise<Record<string, ICamera>>((resolve) =>\r\n\t\t\t\t\tresolve(this.getCameraCapabilities(device))\r\n\t\t\t\t)\r\n\t\t);\r\n\t\tfor (let cameraFunc of camerasFuncs) {\r\n\t\t\ttry {\r\n\t\t\t\tvar res = await cameraFunc();\r\n\t\t\t\tresult.push(res);\r\n\t\t\t} catch (error) {\r\n\t\t\t\t//console.log('Error occured while getting camera capability (this is mostly because that camera is being used by another application): ' + error);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate getCameraCapabilities(\r\n\t\tdevice: MediaDeviceInfo\r\n\t): Promise<Record<string, ICamera>> {\r\n\t\treturn this.getUserMedia({\r\n\t\t\tvideo: {\r\n\t\t\t\t...(device.deviceId ? { deviceId: { exact: device.deviceId } } : {}),\r\n\t\t\t},\r\n\t\t}).then((stream) => {\r\n\t\t\tstream.getVideoTracks().forEach((track) => track.stop());\r\n\t\t\tconst capabilities = this.getDeviceCapabilities(stream, device);\r\n\t\t\treturn capabilities;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Get the user media given the specified constraints\r\n\t */\r\n\tprivate getUserMedia = (\r\n\t\tconstraints: MediaStreamConstraints\r\n\t): Promise<MediaStream> =>\r\n\t\tnew Promise((resolve, reject) => {\r\n\t\t\treturn retryOperation(\r\n\t\t\t\t() =>\r\n\t\t\t\t\twait(200).then(\r\n\t\t\t\t\t\tasync () => await navigator.mediaDevices.getUserMedia(constraints)\r\n\t\t\t\t\t),\r\n\t\t\t\t1000,\r\n\t\t\t\t3\r\n\t\t\t)\r\n\t\t\t\t.then(resolve)\r\n\t\t\t\t.catch((e: DOMException) => {\r\n\t\t\t\t\tswitch (e.name) {\r\n\t\t\t\t\t\tcase 'NotAllowedError':\r\n\t\t\t\t\t\tcase 'PermissionDismissedError':\r\n\t\t\t\t\t\t\treturn reject(\r\n\t\t\t\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\t\t\t\tnew ExceptionManager.PlatformException(\r\n\t\t\t\t\t\t\t\t\t\tTranslationKey.EXCEPTION_PLATFORM_CAMERA_PERMISSION_DENIED,\r\n\t\t\t\t\t\t\t\t\t\te\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\tcase 'NotReadableError':\r\n\t\t\t\t\t\t\treturn reject(\r\n\t\t\t\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\t\t\t\tnew ExceptionManager.PlatformException(\r\n\t\t\t\t\t\t\t\t\t\tTranslationKey.EXCEPTION_PLATFORM_CAMERA_NOT_READABLE,\r\n\t\t\t\t\t\t\t\t\t\te\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\tcase 'OverconstrainedError':\r\n\t\t\t\t\t\t\treturn reject(\r\n\t\t\t\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\t\t\t\tnew ExceptionManager.PlatformException(\r\n\t\t\t\t\t\t\t\t\t\tTranslationKey.EXCEPTION_PLATFORM_CAMERA_NONE_SUITABLE,\r\n\t\t\t\t\t\t\t\t\t\te\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t\treturn reject(\r\n\t\t\t\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\t\t\t\tnew ExceptionManager.Exception(\r\n\t\t\t\t\t\t\t\t\t\tTranslationKey.EXCEPTION,\r\n\t\t\t\t\t\t\t\t\t\tundefined,\r\n\t\t\t\t\t\t\t\t\t\te\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t});\r\n\r\n\t/**\r\n\t * Take the specified stream and use the device list to work out which\r\n\t * device we're working with. This has to use the device labels because on\r\n\t * older versions of iOS, the device IDs don't match up\r\n\t */\r\n\tprivate reconcileDevice = (\r\n\t\tstream: MediaStream\r\n\t): Promise<MediaDeviceInfo | undefined> => {\r\n\t\treturn this.getVideoCameras().then((cameras) => {\r\n\t\t\treturn Array.from(\r\n\t\t\t\tnew Set(\r\n\t\t\t\t\tstream.getVideoTracks().map((track) => {\r\n\t\t\t\t\t\treturn cameras.find(\r\n\t\t\t\t\t\t\t(camera) =>\r\n\t\t\t\t\t\t\t\tcamera.deviceId === track.getSettings().deviceId ||\r\n\t\t\t\t\t\t\t\tcamera.label === track.label\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t)[0];\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Set the reticle path to use during the render cycles\r\n\t */\r\n\tprivate setReticlePath = (\r\n\t\treticleType: ReticleType,\r\n\t\twidth: number,\r\n\t\theight: number\r\n\t) => {\r\n\t\tconst { documentReticle, portraitReticle } = this._configuration!.overlay;\r\n\r\n\t\tswitch (reticleType) {\r\n\t\t\tcase ReticleType.DOCUMENT:\r\n\t\t\t\tthis._reticlePath = new Path2D(documentReticle.path(width, height));\r\n\t\t\t\tthis._reticleType = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase ReticleType.PORTRAIT:\r\n\t\t\t\tthis._reticlePath = new Path2D(portraitReticle.path(width, height));\r\n\t\t\t\tthis._reticleType = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase ReticleType.NONE:\r\n\t\t\t\tthis._reticlePath = undefined;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tprivate GetCurrentTrackSettings(\r\n\t\ttrack: MediaStreamTrack\r\n\t): MediaTrackCapabilities {\r\n\t\treturn {\r\n\t\t\taspectRatio: {\r\n\t\t\t\tmin: track.getSettings().aspectRatio,\r\n\t\t\t\tmax: track.getSettings().aspectRatio,\r\n\t\t\t},\r\n\t\t\tframeRate: {\r\n\t\t\t\tmin: track.getSettings().frameRate,\r\n\t\t\t\tmax: track.getSettings().frameRate,\r\n\t\t\t},\r\n\t\t\twidth: { min: track.getSettings().width, max: track.getSettings().width },\r\n\t\t\theight: {\r\n\t\t\t\tmin: track.getSettings().height,\r\n\t\t\t\tmax: track.getSettings().height,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Get the capabilities of the specified device from the specified stream\r\n\t */\r\n\tprivate getDeviceCapabilities = (\r\n\t\tstream: MediaStream,\r\n\t\t{ deviceId, label, groupId }: MediaDeviceInfo = {\r\n\t\t\tlabel: '',\r\n\t\t\tdeviceId: '',\r\n\t\t\tgroupId: '',\r\n\t\t} as any\r\n\t): Promise<Record<string, ICamera>> =>\r\n\t\tstream\r\n\t\t\t.getVideoTracks()\r\n\t\t\t.map((track): ICamera => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\taspectRatio = { min: 0, max: 0 },\r\n\t\t\t\t\tframeRate = { min: 0, max: 0 },\r\n\t\t\t\t\twidth = { min: 0, max: 0 },\r\n\t\t\t\t\theight = { min: 0, max: 0 },\r\n\t\t\t\t} = typeof track.getCapabilities != 'function'\r\n\t\t\t\t\t\t? this.GetCurrentTrackSettings(track)\r\n\t\t\t\t\t\t: track.getCapabilities();\r\n\r\n\t\t\t\tconst { facingMode = '' } = track.getSettings();\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\taspectRatio: {\r\n\t\t\t\t\t\tminimum: (aspectRatio as any).min,\r\n\t\t\t\t\t\tmaximum: (aspectRatio as any).max,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdeviceId,\r\n\t\t\t\t\tdeviceName: label,\r\n\t\t\t\t\tfacingMode: facingMode as any as VideoFacingModeEnum,\r\n\t\t\t\t\tframeRate: {\r\n\t\t\t\t\t\tminimum: (frameRate as any).min!,\r\n\t\t\t\t\t\tmaximum: (frameRate as any).max!,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgroupId,\r\n\t\t\t\t\tresolutions: {\r\n\t\t\t\t\t\tminimum: {\r\n\t\t\t\t\t\t\thorizontal: (width as any).min!,\r\n\t\t\t\t\t\t\tvertical: (height as any).min!,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmaximum: {\r\n\t\t\t\t\t\t\thorizontal: (width as any).max!,\r\n\t\t\t\t\t\t\tvertical: (height as any).max!,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t})\r\n\t\t\t.reduce(\r\n\t\t\t\t(out, curr) => deepmerge(out, { [curr.deviceId]: curr }),\r\n\t\t\t\t{} as any\r\n\t\t\t);\r\n}\r\n\r\nexport default new CameraService();\r\n","import { ChangeMode } from './../../enums/InputProvider';\r\nimport CameraService, {\r\n\tCameraPermissionState,\r\n\tCameraFacingMode,\r\n} from '../../../helpers/classes/CameraService';\r\nimport EventService from '../../../helpers/classes/EventService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport DataService, { DataStoreType } from '../../classes/DataService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { UploadResponse } from '../../interfaces/UploadResponse';\r\nimport { IIdScanData } from '../../interfaces/DataFormats';\r\nimport { IExtendedDocument } from '../../interfaces/Document';\r\nimport { removeNullOrUndefined } from '../../../helpers/functions/object';\r\nimport { DocumentSource } from '../../enums/DocumentSource';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { HintType, ReticleType } from '../../enums/Camera';\r\nimport HttpService from '../../../helpers/classes/HttpService';\r\nimport * as lottie from 'lottie-web/build/player/lottie';\r\nimport { AnimationService } from '../../../helpers/classes/AnimationService';\r\nimport { InputProvider } from '../../enums/InputProvider';\r\nimport { LiveFaceCamera } from '@gbgplc/smartcapture-web';\r\n\r\nexport class PassiveLivenessStep {\r\n\tprivate static faceCamera: HTMLElement | null;\r\n\tprivate static cameras: { name: string; value: string; }[];\r\n\tprivate static loadingAnimation: lottie.AnimationItem | undefined;\r\n\tprivate static faceCameraCheckInterval: number | null = null;\r\n\tprivate static maxRetryAttempts: number = 60;\r\n\tprivate static retryAttempts: number = 0;\r\n\r\n\tpublic static render(this: JourneyContainer) {\r\n\t\treturn CameraService.getVideoCameras()\r\n\t\t\t.then((cameras) =>\r\n\t\t\t\tcameras.map((camera) => ({\r\n\t\t\t\t\tname: camera.label,\r\n\t\t\t\t\tvalue: camera.deviceId,\r\n\t\t\t\t}))\r\n\t\t\t)\r\n\t\t\t.then((cameras) => {\r\n\t\t\t\tPassiveLivenessStep.cameras = cameras;\r\n\t\t\t\tCameraService.getVideoCameras()\r\n\t\t\t\tPromise.all([\r\n\t\t\t\t\tCameraService.getCameraPermission(),\r\n\t\t\t\t\tCameraService.hasDeviceCapableOfResolution()\r\n\t\t\t\t]).then(([permission]) => {\r\n\r\n\t\t\t\t\tswitch (permission) {\r\n\t\t\t\t\t\tcase CameraPermissionState.DENIED:\r\n\t\t\t\t\t\t\treturn TemplateService.renderToContainer(this._container, Templates.HasNoCamera)\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tthis.hookGlobalButtons(false);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn TemplateService.renderToContainer(\r\n\t\t\t\t\tthis._container,\r\n\t\t\t\t\tTemplates.PassiveLiveness,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcameras,\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t\t.then((container) => {\r\n\t\t\t\treturn this.changeCameraStream(\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\tReticleType.PORTRAIT,\r\n\t\t\t\t\t!this._config.hideLogo,\r\n\t\t\t\t\tHintType.NONE,\r\n\t\t\t\t\ttrue,\r\n\t\t\t\t\tCameraFacingMode.FRONT\r\n\t\t\t\t).catch((e) => console.log(e)).then(() => container);\r\n\t\t\t})\r\n\t\t\t.then((container) => {\r\n\t\t\t\tTemplateService.getElements(container, {\r\n\t\t\t\t\tcameraClick: '[data-jcs-element=\"camera__capture\"]',\r\n\t\t\t\t\tstatus: '[data-jcs-element=\"view__status\"]',\r\n\t\t\t\t\tstatusMessage: '[data-jcs-element=\"view__status__message\"]',\r\n\t\t\t\t\tcameraSelect: '[data-jcs-element=\"camera__select\"]',\r\n\t\t\t\t\tmessages: '[data-jcs-element=\"passive__liveness__message\"]',\r\n\t\t\t\t\tmessagesTitle: '[data-jcs-element=\"passive__liveness__message__title\"]',\r\n\t\t\t\t\tmessagesContainer: '[data-jcs-element=\"passive__liveness__message__container\"]',\r\n\t\t\t\t\tmobileHelp: '[data-jcs-element=\"mobile__help__container\"]',\r\n\t\t\t\t\tdesktopHelp: '[data-jcs-element=\"desktop__help__container\"]',\r\n\t\t\t\t\tmobileCloseHelp: '[data-jcs-element=\"mobile__close__help\"]',\r\n\t\t\t\t\tmobileOpenHelp: '[data-jcs-element=\"mobile__open__help\"]',\r\n\t\t\t\t\tdesktopCloseHelp: '[data-jcs-element=\"desktop__close__help\"]',\r\n\t\t\t\t\tdesktopOpenHelp: '[data-jcs-element=\"desktop__open__help\"]',\r\n\t\t\t\t\tpassiveLivenessContainer: '[data-jcs-element=\"passive__liveness__step__container\"]',\r\n\t\t\t\t\tpassiveLivenessProviderContainer: '[data-jcs-element=\"provider__container\"]',\r\n\t\t\t\t\tloadingAnimationContainer: '[data-jcs-element=\"loading-animation\"]',\r\n\t\t\t\t}).then(({ cameraClick, cameraSelect, messages, status, statusMessage, messagesTitle, messagesContainer, mobileHelp, desktopHelp, mobileCloseHelp, mobileOpenHelp, desktopCloseHelp, desktopOpenHelp, passiveLivenessContainer, passiveLivenessProviderContainer, loadingAnimationContainer }) => {\r\n\t\t\t\t\tvar faceCamera: any;\r\n\t\t\t\t\tvar captureInProgress = false;\r\n\t\t\t\t\tfaceCamera = document.getElementById('live-face-camera');\r\n\t\t\t\t\tPassiveLivenessStep.faceCamera = faceCamera as HTMLElement;\r\n\t\t\t\t\tPassiveLivenessStep.loadingAnimation = AnimationService.CreateAnimation(loadingAnimationContainer as HTMLDivElement, this.assetsFolder + '/animations/loading.json', true, true, {});\r\n\r\n\t\t\t\t\tRenderingService.hideObject(passiveLivenessProviderContainer);\r\n\t\t\t\t\tRenderingService.setEnabled(cameraClick as HTMLInputElement, true);\r\n\r\n\t\t\t\t\t// Reset retry attempts counter\r\n\t\t\t\t\tPassiveLivenessStep.retryAttempts = 0;\r\n\r\n\t\t\t\t\t// Clear any existing interval\r\n\t\t\t\t\tif (PassiveLivenessStep.faceCameraCheckInterval) {\r\n\t\t\t\t\t\tclearInterval(PassiveLivenessStep.faceCameraCheckInterval);\r\n\t\t\t\t\t\tPassiveLivenessStep.faceCameraCheckInterval = null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Set up periodic check to ensure camera is open\r\n\t\t\t\t\tPassiveLivenessStep.faceCameraCheckInterval = window.setInterval(() => {\r\n\t\t\t\t\t\tif (messagesContainer && messagesTitle && messages) {\r\n\t\t\t\t\t\t\tRenderingService.showObject(messagesContainer as HTMLElement);\r\n\r\n\t\t\t\t\t\t\tRenderingService.setText(\r\n\t\t\t\t\t\t\t\tmessagesTitle,\r\n\t\t\t\t\t\t\t\tLanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t\t`PASSIVE_LIVENESS_ERROR_NOT_INITIALIZED_TITLE` as TranslationKey\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tRenderingService.setText(\r\n\t\t\t\t\t\t\t\tmessages,\r\n\t\t\t\t\t\t\t\tLanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t\t`PASSIVE_LIVENESS_ERROR_NOT_INITIALIZED` as TranslationKey\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (faceCamera && !captureInProgress) {\r\n\t\t\t\t\t\t\tif (faceCamera.isOpen === false) {\r\n\t\t\t\t\t\t\t\tif (PassiveLivenessStep.retryAttempts < PassiveLivenessStep.maxRetryAttempts) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(`Face camera was closed, reopening... (Attempt ${PassiveLivenessStep.retryAttempts + 1}/${PassiveLivenessStep.maxRetryAttempts})`);\r\n\t\t\t\t\t\t\t\t\tfaceCamera.isOpen = true;\r\n\t\t\t\t\t\t\t\t\tPassiveLivenessStep.retryAttempts++;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconsole.log('Maximum retry attempts reached, stopping auto-reopen');\r\n\t\t\t\t\t\t\t\t\t// Stop the interval once we've reached max attempts\r\n\t\t\t\t\t\t\t\t\tif (PassiveLivenessStep.faceCameraCheckInterval) {\r\n\t\t\t\t\t\t\t\t\t\tclearInterval(PassiveLivenessStep.faceCameraCheckInterval);\r\n\t\t\t\t\t\t\t\t\t\tPassiveLivenessStep.faceCameraCheckInterval = null;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// Camera is open, stop the interval\r\n\t\t\t\t\t\t\t\tif (PassiveLivenessStep.faceCameraCheckInterval) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('Face camera is open, stopping check interval');\r\n\t\t\t\t\t\t\t\t\tclearInterval(PassiveLivenessStep.faceCameraCheckInterval);\r\n\t\t\t\t\t\t\t\t\tPassiveLivenessStep.faceCameraCheckInterval = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 1000); // Check every second\r\n\r\n\t\t\t\t\tCameraService.getCameraPermission()\r\n\t\t\t\t\t\t.then((permission) => {\r\n\t\t\t\t\t\t\tswitch (permission) {\r\n\t\t\t\t\t\t\t\tcase CameraPermissionState.DENIED:\r\n\t\t\t\t\t\t\t\t\tTemplateService.renderToContainer(this._container, Templates.HasNoCamera);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch((e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\tRenderingService.showObject(status as HTMLElement);\r\n\t\t\t\t\t\t\tRenderingService.setText(statusMessage as HTMLElement, e.message);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\tif (cameraSelect instanceof HTMLSelectElement) {\r\n\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect, true);\r\n\t\t\t\t\t\tthis.renderAvailableCameras(cameraSelect as HTMLSelectElement);\r\n\r\n\t\t\t\t\t\tcameraSelect.addEventListener('change', () => {\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect, false);\r\n\t\t\t\t\t\t\tfaceCamera.isOpen = false;\r\n\t\t\t\t\t\t\tthis.changeCameraStream(cameraSelect.value, ReticleType.PORTRAIT, undefined, undefined, true);\r\n\t\t\t\t\t\t\tRenderingService.markSelected(cameraSelect, cameraSelect.value);\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect, true);\r\n\t\t\t\t\t\t\tfaceCamera.deviceId = cameraSelect.value;\r\n\t\t\t\t\t\t\tfaceCamera.isOpen = true;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (cameraSelect instanceof HTMLSelectElement) {\r\n\t\t\t\t\t\t\tRenderingService.updateSelect(cameraSelect, PassiveLivenessStep.cameras);\r\n\t\t\t\t\t\t\tif (PassiveLivenessStep.cameras && PassiveLivenessStep.cameras.length > 1) {\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(cameraSelect);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tRenderingService.hideObject(cameraSelect);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (mobileOpenHelp instanceof HTMLElement) {\r\n\t\t\t\t\t\tmobileOpenHelp.addEventListener('click', () => {\r\n\t\t\t\t\t\t\tRenderingService.showObject(mobileHelp);\r\n\t\t\t\t\t\t\tRenderingService.hideObject(mobileOpenHelp);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (mobileCloseHelp instanceof HTMLElement) {\r\n\t\t\t\t\t\tmobileCloseHelp.addEventListener('click', () => {\r\n\t\t\t\t\t\t\tRenderingService.hideObject(mobileHelp);\r\n\t\t\t\t\t\t\tRenderingService.showObject(mobileOpenHelp);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (desktopOpenHelp instanceof HTMLElement) {\r\n\t\t\t\t\t\tdesktopOpenHelp.addEventListener('click', () => {\r\n\t\t\t\t\t\t\tRenderingService.showObject(desktopHelp);\r\n\t\t\t\t\t\t\tRenderingService.showObject(desktopCloseHelp);\r\n\t\t\t\t\t\t\tRenderingService.hideObject(desktopOpenHelp);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (desktopCloseHelp instanceof HTMLElement) {\r\n\t\t\t\t\t\tdesktopCloseHelp.addEventListener('click', () => {\r\n\t\t\t\t\t\t\tRenderingService.hideObject(desktopHelp);\r\n\t\t\t\t\t\t\tRenderingService.hideObject(desktopCloseHelp);\r\n\t\t\t\t\t\t\tRenderingService.showObject(desktopOpenHelp);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tEventService.unsubscribeTopic(JourneyEvent.PASSIVE_LIVENESS_FINISHED);\r\n\t\t\t\t\tEventService.subscribe(JourneyEvent.PASSIVE_LIVENESS_FINISHED, (response: any) => {\r\n\t\t\t\t\t\t// Clear the interval when done with this step\r\n\t\t\t\t\t\tif (PassiveLivenessStep.faceCameraCheckInterval) {\r\n\t\t\t\t\t\t\tclearInterval(PassiveLivenessStep.faceCameraCheckInterval);\r\n\t\t\t\t\t\t\tPassiveLivenessStep.faceCameraCheckInterval = null;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tRenderingService.hideObject(passiveLivenessProviderContainer);\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t!response.hasError ||\r\n\t\t\t\t\t\t\tresponse.NextAction !== 'PASSIVE_LIVENESS'\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconst data = PassiveLivenessStep.parseResponse(\r\n\t\t\t\t\t\t\t\tresponse.Workflow\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tDataService.getDataStore<IIdScanData>(\r\n\t\t\t\t\t\t\t\tDataStoreType.ID_SCAN\r\n\t\t\t\t\t\t\t).update(\r\n\t\t\t\t\t\t\t\tPassiveLivenessStep.parseResponseData(response.Workflow)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tCameraService.stopStreaming();\r\n\t\t\t\t\t\t\tthis._journey!.bindUpdate(data).then(() => this.evaluate());\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tRenderingService.showObject(passiveLivenessContainer);\r\n\t\t\t\t\t\t\tRenderingService.showObject(messagesContainer);\r\n\t\t\t\t\t\t\tRenderingService.hideObject(loadingAnimationContainer);\r\n\t\t\t\t\t\t\tRenderingService.setText(\r\n\t\t\t\t\t\t\t\tmessagesTitle,\r\n\t\t\t\t\t\t\t\tLanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t\t`PASSIVE_LIVENESS_ERROR_${response.ErrorCode}_TITLE` as TranslationKey\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tRenderingService.setText(\r\n\t\t\t\t\t\t\t\tmessages,\r\n\t\t\t\t\t\t\t\tLanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t\t`PASSIVE_LIVENESS_ERROR_${response.ErrorCode}` as TranslationKey\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthis.changeCameraStream(\r\n\t\t\t\t\t\t\t\tundefined,\r\n\t\t\t\t\t\t\t\tReticleType.PORTRAIT,\r\n\t\t\t\t\t\t\t\t!this._config.hideLogo,\r\n\t\t\t\t\t\t\t\tHintType.NONE,\r\n\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\tCameraFacingMode.FRONT);\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(cameraClick as HTMLInputElement, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (faceCamera) {\r\n\t\t\t\t\t\tfaceCamera.isOpen = false;\r\n\t\t\t\t\t\tfaceCamera.deviceId = CameraService.currentDeviceId;\r\n\r\n\t\t\t\t\t\t// Set initial open state with slight delay to ensure SDK is ready\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (faceCamera && !captureInProgress) {\r\n\t\t\t\t\t\t\t\tconsole.log('Setting initial face camera open state');\r\n\t\t\t\t\t\t\t\tfaceCamera.isOpen = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 500);\r\n\r\n\t\t\t\t\t\tfaceCamera.addEventListener(LiveFaceCamera.OpenEventName, () => {\r\n\t\t\t\t\t\t\t// Camera opened successfully - stop the check interval\r\n\t\t\t\t\t\t\tif (PassiveLivenessStep.faceCameraCheckInterval) {\r\n\t\t\t\t\t\t\t\tconsole.log('Face camera opened successfully, stopping check interval');\r\n\t\t\t\t\t\t\t\tclearInterval(PassiveLivenessStep.faceCameraCheckInterval);\r\n\t\t\t\t\t\t\t\tPassiveLivenessStep.faceCameraCheckInterval = null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tfaceCamera.addEventListener(LiveFaceCamera.CloseEventName, () => {\r\n\t\t\t\t\t\t\tif (!captureInProgress) {\r\n\t\t\t\t\t\t\t\tfaceCamera.isOpen = false;\r\n\t\t\t\t\t\t\t\tfaceCamera.isOpen = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tfaceCamera.addEventListener(LiveFaceCamera.CaptureEventName, (event: any) => {\r\n\t\t\t\t\t\t\tcaptureInProgress = true;\r\n\t\t\t\t\t\t\tfaceCamera.isOpen = false;\r\n\r\n\t\t\t\t\t\t\tconst { imageBase64, encryptedFile } = event.detail;\r\n\r\n\t\t\t\t\t\t\tconst loadingAnimationContainer = document.querySelector('[data-jcs-element=\"loading-animation\"]');\r\n\t\t\t\t\t\t\tif (loadingAnimationContainer) {\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(loadingAnimationContainer as HTMLElement);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tRenderingService.hideObject(messagesContainer);\r\n\r\n\t\t\t\t\t\t\tthis.freezeCameraStream();\r\n\t\t\t\t\t\t\tfaceCamera.isOpen = false;\r\n\r\n\t\t\t\t\t\t\tif (encryptedFile && encryptedFile instanceof Blob) {\r\n\t\t\t\t\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\t\t\t\t\treader.onload = () => {\r\n\t\t\t\t\t\t\t\t\tconst base64String = (reader.result as string).split(',')[1];\r\n\r\n\t\t\t\t\t\t\t\t\treturn PassiveLivenessStep.continueJourneySkipPreview.call(\r\n\t\t\t\t\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\t\t\t\t\tfaceCamera,\r\n\t\t\t\t\t\t\t\t\t\timageBase64,\r\n\t\t\t\t\t\t\t\t\t\tbase64String\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treader.onerror = () => {\r\n\t\t\t\t\t\t\t\t\tconsole.error('Error reading encrypted file');\r\n\t\t\t\t\t\t\t\t\treturn PassiveLivenessStep.continueJourneySkipPreview.call(this, faceCamera, imageBase64);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treader.readAsDataURL(encryptedFile);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn PassiveLivenessStep.continueJourneySkipPreview.call(this, faceCamera, imageBase64);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tfaceCamera.addEventListener(LiveFaceCamera.FailureEventName, (event: any) => {\r\n\t\t\t\t\t\t\tconst { code, message } = event.detail;\r\n\r\n\t\t\t\t\t\t\t(faceCamera as any).isOpen = false;\r\n\r\n\t\t\t\t\t\t\tRenderingService.hideObject(faceCamera);\r\n\r\n\t\t\t\t\t\t\tif (passiveLivenessContainer) {\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(passiveLivenessContainer as HTMLElement);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (messagesContainer && messagesTitle && messages) {\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(messagesContainer as HTMLElement);\r\n\r\n\t\t\t\t\t\t\t\tif (code === 1) {\r\n\t\t\t\t\t\t\t\t\tRenderingService.setText(messagesTitle as HTMLElement, \"Camera Permission Denied\");\r\n\t\t\t\t\t\t\t\t\tRenderingService.setText(messages as HTMLElement,\r\n\t\t\t\t\t\t\t\t\t\t\"Please allow camera access to continue with face verification.\");\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tRenderingService.setText(messagesTitle as HTMLElement, \"Camera Error\");\r\n\t\t\t\t\t\t\t\t\tRenderingService.setText(messages as HTMLElement, `Error ${code}: ${message}`);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.changeCameraStream(\r\n\t\t\t\t\t\t\t\tundefined,\r\n\t\t\t\t\t\t\t\tReticleType.PORTRAIT,\r\n\t\t\t\t\t\t\t\t!this._config.hideLogo,\r\n\t\t\t\t\t\t\t\tHintType.NONE,\r\n\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\tCameraFacingMode.FRONT\r\n\t\t\t\t\t\t\t).catch(e => console.log(e));\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tfaceCamera.addEventListener(LiveFaceCamera.DetectEventName, (event: any) => {\r\n\t\t\t\t\t\t\tconst { errors } = event.detail;\r\n\r\n\t\t\t\t\t\t\tif (errors && errors.length > 0) {\r\n\t\t\t\t\t\t\t\tif (messagesContainer && messagesTitle && messages) {\r\n\t\t\t\t\t\t\t\t\tRenderingService.showObject(messagesContainer as HTMLElement);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setText(\r\n\t\t\t\t\t\t\t\t\t\tmessagesTitle,\r\n\t\t\t\t\t\t\t\t\t\tLanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t\t\t\t`PASSIVE_LIVENESS_ERROR_${errors[0]}_TITLE` as TranslationKey\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setText(\r\n\t\t\t\t\t\t\t\t\t\tmessages,\r\n\t\t\t\t\t\t\t\t\t\tLanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t\t\t\t`PASSIVE_LIVENESS_ERROR_${errors[0]}` as TranslationKey\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn container;\r\n\t\t\t})\r\n\t\t\t.then(() =>\r\n\t\t\t\tEventService.publish(JourneyEvent.DISPLAY_STEP, {\r\n\t\t\t\t\tstep: Templates.PassiveLiveness,\r\n\t\t\t\t\tprovider: InputProvider.LIVENESS\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t}\r\n\r\n\t// Clean up interval when component is destroyed\r\n\tpublic static cleanup() {\r\n\t\tif (PassiveLivenessStep.faceCameraCheckInterval) {\r\n\t\t\tclearInterval(PassiveLivenessStep.faceCameraCheckInterval);\r\n\t\t\tPassiveLivenessStep.faceCameraCheckInterval = null;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static async continueJourneySkipPreview(this: JourneyContainer, faceCamera: any, image: string, encryptedFile: string = '') {\r\n\t\tconst response = await HttpService.post(\r\n\t\t\tHttpService.endpoints.passiveLiveness,\r\n\t\t\tJSON.stringify({\r\n\t\t\t\tBase64Input: image,\r\n\t\t\t\tJourneyId: this._journey!.id,\r\n\t\t\t\tEncryptedInput: encryptedFile,\r\n\t\t\t}),\r\n\t\t\tundefined,\r\n\t\t\t'passiveLiveness'\r\n\t\t);\r\n\r\n\t\tif (response.NextAction === 'PASSIVE_LIVENESS') {\r\n\t\t\tthis.evaluate();\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn EventService.publish(JourneyEvent.PASSIVE_LIVENESS_FINISHED, response);\r\n\t}\r\n\r\n\tprivate static parseResponse = (data: any): UploadResponse => ({\r\n\t\tcurrentResult: data.CurrentResult,\r\n\t\tdocumentSource: DocumentSource.IDENTITY,\r\n\t\tentryData: {\r\n\t\t\tscanReference: data.ScanReference,\r\n\t\t\tdocuments: [],\r\n\t\t\tholder: { address: {} },\r\n\t\t},\r\n\t\tentryDateTime: data.EntryDateTime,\r\n\t\tentryImages: data.EntryImages,\r\n\t\thasError: data.HasError,\r\n\t\thighLevelResult: data.HighLevelResult,\r\n\t\tisFinished: data.IsFinished,\r\n\t\tjourneyId: '',\r\n\t\tpersonEntryId: data.PersonEntryId,\r\n\t\trequiredAction: data.RequiredAction,\r\n\t\tresultDetails: data.ResultDetails,\r\n\t})\r\n\r\n\tprivate static parseResponseData = ({\r\n\t\tEntryData,\r\n\t\tEntryDateTime,\r\n\t\tJourneyId,\r\n\t\tRequiredAction,\r\n\t\tHighLevelResult,\r\n\t\tCurrentResult,\r\n\t\tHasError,\r\n\t\tIsFinished,\r\n\t\tPersonEntryId\r\n\t}: any): Partial<IIdScanData> => ({\r\n\t\tjourneyId: PersonEntryId,\r\n\t\tjourneyReference: EntryData.ScanReference,\r\n\t\tdocuments: (EntryData.Documents || []).map(\r\n\t\t\t(doc: {\r\n\t\t\t\texpirationDate: any;\r\n\t\t\t\tissueDate: any;\r\n\t\t\t\tissueNumber: any;\r\n\t\t\t\tnumber: any;\r\n\t\t\t\ttype: any;\r\n\t\t\t}): IExtendedDocument =>\r\n\t\t\t\tremoveNullOrUndefined({\r\n\t\t\t\t\texpirationDate: doc.expirationDate,\r\n\t\t\t\t\tissueDate: doc.issueDate,\r\n\t\t\t\t\tissueNumber: doc.issueNumber,\r\n\t\t\t\t\tnumber: doc.number,\r\n\t\t\t\t\ttype: doc.type,\r\n\t\t\t\t\tblurCheck: EntryData.BlurCheck === 'Good',\r\n\t\t\t\t\tglareCheck: EntryData.BlurCheck === 'Good',\r\n\t\t\t\t\tlowResolutionCheck: EntryData.LowResolutionCheck === 'Good',\r\n\t\t\t\t\tscanReference: EntryData.ScanReference,\r\n\t\t\t\t\tscannerIp: EntryData.ScannerIp,\r\n\t\t\t\t\tdateTime: EntryData ? new Date(EntryDateTime) : undefined,\r\n\t\t\t\t})\r\n\t\t),\r\n\t\trequiredAction: RequiredAction,\r\n\t\thighLevelResult: HighLevelResult,\r\n\t\tcurrentResult: CurrentResult,\r\n\t\thasError: HasError,\r\n\t\tisFinished: IsFinished,\r\n\t})\r\n}","import { IAuthSettings } from '../interfaces/AuthSettings';\r\nimport { STORAGE_KEYS } from './StorageKeys';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const AUTH_DEFAULTS: IAuthSettings = {\r\n\tpersistence: {\r\n\t\texpire: 24,\r\n\t\ttokenName: STORAGE_KEYS.defaultToken\r\n\t}\r\n};\r\n","// tslint:disable: array-type\r\n\r\n/**\r\n * Remove items from an array. Only items which are not in the `remove` array\r\n * will be returned.\r\n *\r\n * @param array - The array to filter through\r\n * @param remove - The items to remove\r\n */\r\nexport function removeItems<T extends Array<any> = Array<any>>(array: T, remove: any | Array<any>): T {\r\n\tconst toRemove: Array<T> = Array.isArray(remove) ? remove : [remove];\r\n\r\n\treturn array.filter((a) => toRemove.indexOf(a) < 0) as T;\r\n}\r\n\r\n/**\r\n * Filter items from an array. Only items which are in the `allow` array will be\r\n * returned.\r\n *\r\n * @param array - The array to filter through\r\n * @param allow - The items to allow\r\n */\r\nexport function allowItems<T extends Array<any> = Array<any>>(array: T, allow: any | Array<any>): T {\r\n\tconst toAllow: Array<T> = Array.isArray(allow) ? allow : [allow];\r\n\r\n\treturn array.filter((a) => toAllow.indexOf(a) >= 0) as T;\r\n}\r\n\r\n/**\r\n * Check if the array contains any of the specified items.\r\n *\r\n * @param array - The array to filter through\r\n * @param contains - The items to check for\r\n */\r\nexport function containsItems(array: Array<any>, contains: any | Array<any>): boolean {\r\n\tconst toContain: Array<any> = Array.isArray(contains) ? contains : [contains];\r\n\r\n\treturn array.some((a) => toContain.indexOf(a) >= 0);\r\n}\r\n","module.exports = \"<div class=\\\"light-inner-provider-container\\\">\\r\\n\\t<div>\\r\\n\\t\\t<div id=\\\"identity-document-triple-scan-guidance\\\" data-jcs-element=\\\"identity__document__triple__scan__guidance\\\">\\r\\n\\t\\t\\t<div style=\\\"display: flex; padding-top: 10px;\\\">\\r\\n\\t\\t\\t\\t<svg width=\\\"32\\\" height=\\\"32\\\" viewBox=\\\"0 0 32 32\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t<circle cx=\\\"16\\\" cy=\\\"16\\\" r=\\\"14.5\\\" stroke=\\\"#D87212\\\" stroke-width=\\\"3\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t<path d=\\\"M16 9V17.4M16 23V22.9281\\\" stroke=\\\"#D87212\\\" stroke-width=\\\"3\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t<h2 style=\\\"margin-left: 15px;\\\">{{VALIDATION_FAILED}} <span data-jcs-element=\\\"validation-failed-reason\\\"></span></h2>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<p class=\\\"guidance-info-text\\\" data-jcs-element=\\\"failure__reason__message\\\"></p>\\r\\n\\t\\t\\t<p class=\\\"guidance-info-text\\\" data-jcs-element=\\\"try__again__message\\\"></p>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"notification notification-orange\\\" data-jcs-element=\\\"quality-checks-container\\\">\\r\\n\\t\\t\\t\\t<div style=\\\"display: flex;\\\">\\r\\n\\t\\t\\t\\t\\t<svg width=\\\"16\\\" height=\\\"18\\\" viewBox=\\\"0 0 16 18\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M13.9212 15.5664L7.99878 3.70494L1.99909 15.5664H13.9212ZM15.3721 15.1144L9.18082 2.71445C8.95064 2.27521 8.49571 2 7.99982 2C7.50392 2 7.04899 2.27521 6.81882 2.71445L0.546752 15.1144C0.33024 15.5277 0.345567 16.0242 0.587162 16.4234C0.828758 16.8226 1.26147 17.0665 1.72808 17.0664H14.1908C14.6574 17.0665 15.0901 16.8226 15.3317 16.4234C15.5733 16.0242 15.5886 15.5277 15.3721 15.1144ZM7.99976 6.75C8.41397 6.75 8.74976 7.08579 8.74976 7.5V11.5C8.74976 11.9142 8.41397 12.25 7.99976 12.25C7.58554 12.25 7.24976 11.9142 7.24976 11.5V7.5C7.24976 7.08579 7.58554 6.75 7.99976 6.75ZM7.99976 15C8.55204 15 8.99976 14.5523 8.99976 14C8.99976 13.4477 8.55204 13 7.99976 13C7.44747 13 6.99976 13.4477 6.99976 14C6.99976 14.5523 7.44747 15 7.99976 15Z\\\" fill=\\\"#9F3F01\\\" />\\r\\n\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"quality-issues-guidance\\\">\\r\\n\\t\\t\\t\\t\\t\\t<p>\\r\\n\\t\\t\\t\\t\\t\\t\\tQuality Issues Detected!\\r\\n\\t\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t\\t\\t<br />\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"quality-ul\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li data-jcs-element=\\\"blur-check-reason\\\" class=\\\"quality-list\\\">{{BLUR_CHECK_REASON}}</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li data-jcs-element=\\\"glare-check-reason\\\" class=\\\"quality-list\\\">{{GLARE_CHECK_REASON}}</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li data-jcs-element=\\\"resolution-check-reason\\\" class=\\\"quality-list\\\">{{RESOLUTION_CHECK_REASON}}</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li data-jcs-element=\\\"edges-check-reason\\\" class=\\\"quality-list\\\">{{EDGES_CHECK_REASON}}</li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"notification notification-blue\\\" data-jcs-element=\\\"attempt__count__container\\\">\\r\\n\\t\\t\\t\\t<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\">\\r\\n\\t\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M0.25 8C0.25 3.71979 3.71979 0.25 8 0.25H8.00081C12.2787 0.254627 15.7454 3.72135 15.75 7.99919L15.75 8C15.75 12.2802 12.2802 15.75 8 15.75C3.71979 15.75 0.25 12.2802 0.25 8ZM7.99958 1.75C4.54799 1.75023 1.75 4.54836 1.75 8C1.75 11.4518 4.54822 14.25 8 14.25C11.4515 14.25 14.2496 11.4522 14.25 8.00081C14.2463 4.55026 11.4501 1.75394 7.99958 1.75ZM8 5C7.44772 5 7 4.55228 7 4C7 3.44772 7.44772 3 8 3C8.55229 3 9 3.44772 9 4C9 4.55228 8.55229 5 8 5ZM7 6.25C6.58579 6.25 6.25 6.58579 6.25 7C6.25 7.41421 6.58579 7.75 7 7.75H7.25V11.25H6.5C6.08579 11.25 5.75 11.5858 5.75 12C5.75 12.4142 6.08579 12.75 6.5 12.75H8H9.5C9.91421 12.75 10.25 12.4142 10.25 12C10.25 11.5858 9.91421 11.25 9.5 11.25H8.75V7C8.75 6.58579 8.41421 6.25 8 6.25H7Z\\\" fill=\\\"#4A88C6\\\" />\\r\\n\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t<p>{{ATTEMPTS_REMAINING}}<span data-jcs-element=\\\"attempt__counter\\\"></span></p>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"button-container button-actions-container\\\">\\r\\n\\t\\t\\t\\t<button data-jcs-element=\\\"triple__scan__retry__button\\\" class=\\\"button button--primary button-full-xs\\\" aria-label=\\\"{{TRIPLESCAN_GUIDANCE_TRYAGAIN}}\\\">\\r\\n\\t\\t\\t\\t\\t{{TRIPLESCAN_GUIDANCE_TRYAGAIN}}\\r\\n\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div data-jcs-element=\\\"view__status\\\">\\r\\n\\t\\t\\t\\t<p data-jcs-element=\\\"view__status__message\\\"></p>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";","import { EventEmitter } from 'events';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport enum MediaChannelType {\r\n\tNone = -1,\r\n\tCamera = 0,\r\n\tFileUpload = 1\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport enum WebCamRequiredAction {\r\n\tStopCapturing = 1,\r\n\tPauseCapturing = 2,\r\n\tKeepCapturing = 3\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IRetinaSettings {\r\n\treadonly cortexApiPath: string;\r\n\treadonly cortexApiController: 'LivenessStreamingSocket' | 'WebSmartCaptureSocket';\r\n\treadonly autoRun?: boolean;\r\n\treadonly imageQuality?: number;\r\n\treadonly grayscale?: boolean;\r\n\treadonly frameSubmissionDelay?: number;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IImageCaptureService {\r\n\treadonly emitter: EventEmitter;\r\n\treadonly journeyId: string;\r\n\tstart: () => void;\r\n\tfinish: () => void;\r\n\trunTestResponse: (response: ICortixResponse) => void;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IRetinaService {\r\n\treadonly emitter: EventEmitter;\r\n\tstart: () => void;\r\n\treset: (journeyId: string) => Promise<IRetinaService>;\r\n\tterminate: () => Promise<void>;\r\n\trunTestResponse: (response: ICortixResponse) => void;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IMediaChannelInformation {\r\n\treadonly channelType: MediaChannelType;\r\n\treadonly options: IMediaChannelOptions;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface ICortixResponse {\r\n\treadonly requiredAction: CortixResponseAction;\r\n\treadonly message: string;\r\n\treadonly pauseDuration: number;\r\n\treadonly workflowState: any;\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport enum CortixResponseAction {\r\n\tKeepCapturing = 'KeepCapturing',\r\n\tStopCapturing = 'StopCapturing',\r\n\tPauseCapturing = 'PauseCapturing',\r\n\tFinishLivenessCapturing = 'FinishLivenessCapturing',\r\n\tClose = 'Close',\r\n\tError = 'Error',\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport enum LivenessActionType {\r\n\tSmile = 'Smile',\r\n\tFrown = 'Frown',\r\n\tTiltLeft = 'Tilt Left',\r\n\tTiltRight = 'Tilt Right',\r\n\tTiltUp = 'Tilt Up',\r\n\tTiltDown = 'Tilt Down',\r\n\tTiltStraight = 'Look Straight',\r\n\tNoAction = 'No Action',\r\n\tProcessingLiveness = 'Processing Liveness'\r\n}\r\n\r\n// NOTE: This may look odd, but it's like this due to how messages are\r\n// concatenated when being sent back from the API.\r\n/**\r\n * @public\r\n */\r\nexport enum LivenessFinalResult {\r\n\tFailed = 'Thank you!.Failed',\r\n\tPassed = 'Thank you!.Passed',\r\n\tActionTimedOut = 'Thank you!.ActionTimedOut',\r\n\tInterrupted = 'Thank you!.Interrupted',\r\n\tUndefined = 'Thank you!.Undefined',\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IMediaChannelOptions {\r\n\treadonly journeyId: string;\r\n\treadonly container: HTMLElement;\r\n\treadonly cortexApiPath: string;\r\n\treadonly cortexApiController: string;\r\n\treadonly imageQuality?: number;\r\n\treadonly frameSubmissionDelay?: number;\r\n\treadonly grayscale?: boolean;\r\n\treadonly autoRun?: boolean;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface ICameraMediaChannelOptions extends IMediaChannelOptions {\r\n\treadonly captureStillImageOnly: boolean;\r\n\treadonly commonInformation?: any;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IFileUploadMediaChannelOptions extends IMediaChannelOptions {\r\n\treadonly manualCroppingEnabled: boolean;\r\n\treadonly fileUploadMaxFileSizeThreshold: number;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IApiCaptureChannelConfiguration {\r\n\treadonly channel: MediaChannelType;\r\n\treadonly options: IApiConfigurationOptions;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IApiConfigurationOptions {\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IApiCameraConfigurationOptions extends IApiConfigurationOptions {\r\n\treadonly jpegCompression: number;\r\n\treadonly captureStillImageOnly: boolean;\r\n\treadonly frameSubmissionDelay: number;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface ICaptureSessionService {\r\n\treadonly addFrame: Function;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IStillImageCaptureResponse {\r\n\treadonly message: string;\r\n\treadonly action: StillImageRequiredAction;\r\n\treadonly imageToBeCropped: string;\r\n\treadonly initialCroppingQuad: any;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport enum StillImageRequiredAction {\r\n\tKeepCapturing = 1,\r\n\tStopCapturing = 2,\r\n\tManualCroppingRequired = 3\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport enum MediaType {\r\n\tWhiteImage = 1,\r\n\tUltravioletAImage = 2,\r\n\tUltravioletBImage = 2,\r\n\tInfraredImage = 3,\r\n\tRFIDPhoto = 4,\r\n\tRFIDMrz = 5,\r\n\tRFIDRawData = 6,\r\n\tFacePhoto = 7,\r\n\tVideoStream = 9,\r\n\tHologramFootage = 11,\r\n\tFingerPrint = 15\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport enum MediaSource {\r\n\tUndetermined = 0,\r\n\tPassportScanner = 1,\r\n\tA4Scanner = 2,\r\n\tWebcam = 3,\r\n\tMobileCam = 4,\r\n\tIDScanImageCaptureService = 5\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface ICapturedMedia {\r\n\treadonly data: string;\r\n\treadonly mediaType: MediaType;\r\n\treadonly metaData?: any;\r\n}\r\n","module.exports = \"<h2 class=\\\"section-title\\\">{{PROVIDER_TITLE_USER_INPUT}}</h2>\\r\\n<form class=\\\"login__form\\\" data-jcs-element=\\\"user__input__form\\\">\\r\\n\\t<div class=\\\"input--container\\\">\\r\\n\\t\\t<span class=\\\"input--label\\\"style=\\\"font-weight:bold\\\">{{USER_INPUT_HOUSE_NAME_NUMBER}}</span>\\r\\n\\t\\t<p class=\\\"color-gray\\\" >{{USER_INPUT_HOUSE_NAME_NUMBER_EXAMPLE}}</p>\\r\\n\\t\\t<input data-jcs-element=\\\"user__input__house__name__number\\\" class=\\\"input\\\" id=\\\"input_house_name_number\\\" type=\\\"text\\\"/>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"input--container\\\">\\r\\n\\t\\t<span class=\\\"input--label\\\"style=\\\"font-weight:bold\\\">{{USER_INPUT_STREET_NAME}}</span>\\r\\n\\t\\t<p class=\\\"color-gray\\\" >{{USER_INPUT_STREET_NAME_EXAMPLE}}</p>\\r\\n\\t\\t<input data-jcs-element=\\\"user__input__street__name\\\" class=\\\"input\\\" id=\\\"input_street_name\\\" type=\\\"text\\\"/>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"input--container\\\">\\r\\n\\t\\t<span class=\\\"input--label\\\"style=\\\"font-weight:bold\\\">{{USER_INPUT_TOWN}}</span>\\r\\n\\t\\t<p class=\\\"color-gray\\\" >{{USER_INPUT_TOWN_EXAMPLE}}</p>\\r\\n\\t\\t<input data-jcs-element=\\\"user__input__town\\\" class=\\\"input\\\" id=\\\"input_town\\\" type=\\\"text\\\"/>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"input--container\\\">\\r\\n\\t\\t\\r\\n\\t\\t<span class=\\\"input--label\\\" style=\\\"font-weight:bold\\\">{{USER_INPUT_POSTAL_CODE}}</span>\\r\\n\\t\\t<p class=\\\"color-gray\\\" >{{USER_INPUT_POSTAL_CODE_EXAMPLE}}</p>\\r\\n\\t\\t<input data-jcs-element=\\\"user__input__postal__code\\\" class=\\\"input\\\" id=\\\"input_postal_code\\\" type=\\\"text\\\" pattern=\\\"[A-Za-z0-9]+\\\"/>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"login-error--container\\\">\\r\\n\\t\\t<p data-jcs-element=\\\"user__input__errors\\\" class=\\\"user-input-error\\\"></p>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"button-container\\\">\\r\\n\\t\\t<input data-jcs-element=\\\"user__input__submit\\\" class=\\\"button button--primary\\\" type=\\\"submit\\\" value=\\\"{{JOURNEY_SELECT_CONTINUE}}\\\" />\\r\\n\\t</div>\\r\\n\\t<div class=\\\"loading-container\\\">\\r\\n\\t\\t<div class=\\\"loading-animation-container\\\" data-jcs-element=\\\"loading-animation\\\">\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</form>\";","import { IRetinaSettings } from './types';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class Helper {\r\n\tpublic static defaultRetinaSettings: IRetinaSettings = {\r\n\t\tcortexApiPath: 'http://localhost/VisionCortex/',\r\n\t\tcortexApiController: 'LivenessStreamingSocket',\r\n\t\tautoRun: false\r\n\t};\r\n\r\n\tpublic static extend = (target: any, settings: any) => {\r\n\t\ttarget = target || {};\r\n\t\tfor (const prop in settings) {\r\n\t\t\tif (typeof settings[prop] === 'object') {\r\n\t\t\t\ttarget[prop] = Helper.extend(target[prop], settings[prop]);\r\n\t\t\t} else {\r\n\t\t\t\ttarget[prop] = settings[prop];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t}\r\n}\r\n","import { IdScanDataDefaults } from '../configuration/DataStoreDefaults';\r\nimport { DataStore } from '../../helpers/classes/DataStore';\r\nimport { IDataStoreFormat } from '../../helpers/interfaces/DataFormats';\r\nimport { IIdScanData } from '../interfaces/DataFormats';\r\n\r\nexport enum DataStoreType {\r\n\tID_SCAN = 'ID_SCAN',\r\n}\r\n\r\nexport class DataService {\r\n\r\n\tprivate _dataStores: Partial<Record<DataStoreType, DataStore>> = {};\r\n\r\n\tpublic getDataStore = <T extends IDataStoreFormat>(type: DataStoreType): DataStore<T> => {\r\n\t\tif (this._dataStores[type] instanceof DataStore) {\r\n\t\t\treturn this._dataStores[type] as DataStore<T>;\r\n\t\t} else {\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase DataStoreType.ID_SCAN:\r\n\t\t\t\t\treturn (this._dataStores[type] = new DataStore<IIdScanData>(IdScanDataDefaults)) as any as DataStore<T>;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error('Unsupported DataStore type');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic deleteDataStore = (type: DataStoreType): void => {\r\n\t\tif (this._dataStores[type] instanceof DataStore) {\r\n\t\t\tthis._dataStores[type]!.removeAllListeners();\r\n\t\t\tdelete this._dataStores[type];\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default new DataService();\r\n","import { IIdScanData } from '../interfaces/DataFormats';\r\n\r\nexport const IdScanDataDefaults: IIdScanData = {\r\n\r\n} as any;\r\n","module.exports = \"<h2 class=\\\"section-title\\\">{{INITIALIZING_TITLE}}</h2>\\r\\n<p>{{INITIALIZING_DESCRIPTION}}</p>\\r\\n\";","module.exports = \"\\r\\n<div class=\\\"light-inner-provider-container\\\">\\r\\n\\t<div>\\r\\n\\t\\t<h2 class=\\\"section-title\\\">{{PROVIDER_TITLE_RESULTS}}</h2>\\r\\n\\t\\t<div class=\\\"info-container\\\">\\r\\n\\t\\t\\t{{#result}}\\r\\n\\t\\t\\t<p class=\\\"info-item journey-result\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{INFO_JOURNEY_RESULT}}</span>\\r\\n\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{result}}</span>\\r\\n\\t\\t\\t</p>\\r\\n\\t\\t\\t{{/result}} {{#resultMessage}}\\r\\n\\t\\t\\t<p class=\\\"info-item journey-result-message\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"info-item__name\\\"\\r\\n\\t\\t\\t\\t\\t>{{RESULTS_HIGH_LEVEL_EXPIRED_MESSAGE}}</span\\r\\n\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{resultMessage}}</span>\\r\\n\\t\\t\\t</p>\\r\\n\\t\\t\\t{{/resultMessage}} {{#referenceId}}\\r\\n\\t\\t\\t<p class=\\\"info-item journey-reference\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{INFO_JOURNEY_REFERENCE}}</span>\\r\\n\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{referenceId}}</span>\\r\\n\\t\\t\\t</p>\\r\\n\\t\\t\\t{{/referenceId}}\\r\\n\\t\\t\\t<p class=\\\"info-item journey-id\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{INFO_JOURNEY_ID}}</span>\\r\\n\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{journeyId}}</span>\\r\\n\\t\\t\\t</p>\\r\\n\\t\\t\\t<h3>{{RESULTS_DOCUMENTS}}</h3>\\r\\n\\t\\t\\t<ol class=\\\"documents\\\">\\r\\n\\t\\t\\t\\t{{#documents}}\\r\\n\\t\\t\\t\\t<li\\r\\n\\t\\t\\t\\t\\tclass=\\\"document\\\"\\r\\n\\t\\t\\t\\t\\tdata-document=\\\"{{_type}}\\\"\\r\\n\\t\\t\\t\\t\\tdata-result=\\\"{{_result}}\\\"\\r\\n\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t\\t<ul class=\\\"document__details\\\">\\r\\n\\t\\t\\t\\t\\t\\t<li class=\\\"info-item document-details__type\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{RESULTS_DOCUMENT_TYPE}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{type}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t<li class=\\\"info-item document-details__result\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{RESULTS_DOCUMENT_RESULT}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{result}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t<ul class=\\\"document__extracted-fields\\\">\\r\\n\\t\\t\\t\\t\\t\\t{{#extractedFields}}\\r\\n\\t\\t\\t\\t\\t\\t<li class=\\\"info-item extracted-field\\\" data-field=\\\"{{_name}}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{name}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{value}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t{{/extractedFields}} {{^extractedFields}}\\r\\n\\t\\t\\t\\t\\t\\t<li class=\\\"info-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t>{{RESULTS_EXTRACTED_FIELDS_NONE}}</span\\r\\n\\t\\t\\t\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t{{/extractedFields}}\\r\\n\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t{{/documents}} {{^documents}}\\r\\n\\t\\t\\t\\t<li class=\\\"info-item\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{RESULTS_DOCUMENTS_NONE}}</span>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t{{/documents}}\\r\\n\\t\\t\\t</ol>\\r\\n\\t\\t\\t<h3>{{RESULTS_DETAILS}}</h3>\\r\\n\\t\\t\\t<ul>\\r\\n\\t\\t\\t\\t{{#resultDetails}}\\r\\n\\t\\t\\t\\t<li class=\\\"info-item\\\" data-result-detail=\\\"{{_name}}\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{name}}</span>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{value}}</span>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t{{/resultDetails}} {{^resultDetails}}\\r\\n\\t\\t\\t\\t<li class=\\\"info-item\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{RESULTS_DETAILS_NONE}}</span>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t{{/resultDetails}}\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t\\t{{#IADResultDetails}}\\r\\n\\t\\t\\t<ul>\\r\\n\\t\\t\\t\\t<li class=\\\"info-item\\\" data-result-detail=\\\"{{_name}}\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{IADResultDetails.name}}</span>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{IADResultDetails.value}}</span>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t\\t{{/IADResultDetails}}\\r\\n\\t\\t\\t<h3>{{ADDITIONAL_CHECKS_DETAILS}}</h3>\\r\\n\\t\\t\\t<ul>\\r\\n\\t\\t\\t\\t<li class=\\\"info-item\\\" data-result-detail=\\\"{{_name}}\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{dataLookBackCheckDetails.name}}</span>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\"\\r\\n\\t\\t\\t\\t\\t\\t>{{dataLookBackCheckDetails.value}}</span\\r\\n\\t\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t{{#dataChecksDetails}}\\r\\n\\t\\t\\t\\t<li class=\\\"info-item\\\" data-result-detail=\\\"{{_name}}\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{dataChecksDetails.name}}</span>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{dataChecksDetails.value}}</span>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t{{/dataChecksDetails}}\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t\\t<h3>{{GBG_SCORES}}</h3>\\r\\n\\t\\t\\t{{#trustScoreDetails}}\\r\\n\\t\\t\\t<ul>\\r\\n\\t\\t\\t\\t<li class=\\\"info-item\\\" data-result-detail=\\\"{{_name}}\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{trustScoreDetails.name}}</span>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{trustScoreDetails.value}}</span>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t\\t{{/trustScoreDetails}} {{#GBGScoreDetails}}\\r\\n\\t\\t\\t<ul>\\r\\n\\t\\t\\t\\t<li class=\\\"info-item\\\" data-result-detail=\\\"{{_name}}\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__name\\\">{{GBGScoreDetails.name}}</span>\\r\\n\\t\\t\\t\\t\\t<span class=\\\"info-item__value\\\">{{GBGScoreDetails.value}}</span>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t\\t{{/GBGScoreDetails}}\\r\\n\\t\\t</div>\\r\\n\\t\\t<form class=\\\"button-container\\\">\\r\\n\\t\\t\\t<input\\r\\n\\t\\t\\t\\tdata-jcs-element=\\\"result__logout\\\"\\r\\n\\t\\t\\t\\tclass=\\\"button button--secondary\\\"\\r\\n\\t\\t\\t\\ttype=\\\"button\\\"\\r\\n\\t\\t\\t\\tvalue=\\\"{{RESULTS_LOGOUT}}\\\"\\r\\n\\t\\t\\t/>\\r\\n\\t\\t\\t<input\\r\\n\\t\\t\\t\\tdata-jcs-element=\\\"result__journey__restart\\\"\\r\\n\\t\\t\\t\\tclass=\\\"button button--primary\\\"\\r\\n\\t\\t\\t\\ttype=\\\"button\\\"\\r\\n\\t\\t\\t\\tvalue=\\\"{{RESULTS_NEW_JOURNEY}}\\\"\\r\\n\\t\\t\\t/>\\r\\n\\t\\t</form>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";","import CameraService, { CameraPermissionState, CameraFacingMode } from '../../../helpers/classes/CameraService';\r\nimport EventService from '../../../helpers/classes/EventService';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport { HintType, ReticleType } from '../../enums/Camera';\r\nimport { ChangeMode, InputProvider } from '../../enums/InputProvider';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { ImageProvider } from './image';\r\nimport { IMetaData } from '../../interfaces/MetaData';\r\nimport * as lottie from 'lottie-web/build/player/lottie';\r\nimport { FlowState } from '../../enums/FlowState';\r\nimport { ImageService } from '../../../helpers/classes/ImageService';\r\nimport { RequiredInputImage } from '../../enums/RequiredInputImage';\r\nimport DataService, { DataStoreType } from '../../classes/DataService';\r\nimport { IIdScanData } from '../../interfaces/DataFormats';\r\nimport { AnimationService } from '../../../helpers/classes/AnimationService';\r\nimport { TripleScanGuidanceProvider } from './triple-scan-guidance';\r\nimport HttpService from '../../../helpers/classes/HttpService';\r\n\r\nexport class CameraProvider {\r\n\tpublic static render(this: JourneyContainer, isFromTripleScanGuidancePage: boolean = false, isPredefinedJourney: boolean = false) {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tproviderContainer: '[data-jcs-element=\"provider__container\"]',\r\n\t\t})\r\n\t\t\t.then(({ providerContainer }) => TemplateService.renderToContainer(providerContainer, Templates.Camera))\r\n\t\t\t//.then((providerContainer) => this.changeCameraStream(undefined, ReticleType.DOCUMENT, false, HintType.NONE, false, CameraFacingMode.BACK).then(() => providerContainer))\r\n\t\t\t.then((providerContainer) => TemplateService.getElements(providerContainer, {\r\n\t\t\t\tcameraStatus: '[data-jcs-element=\"camera__status\"]',\r\n\t\t\t\tcameraCapture: '[data-jcs-element=\"camera__capture\"]',\r\n\t\t\t\tcameraViewfinder: '[data-jcs-element=\"camera__viewfinder\"]',\r\n\t\t\t\tcameraSelect: '[data-jcs-element=\"camera__select\"]',\r\n\t\t\t\tsmartCaptureToggle: '[data-jcs-element=\"camera__manual__capture\"]',\r\n\t\t\t\tsmartCaptureToggleInner: '[data-jcs-element=\"camera__manual__capture__inner\"]',\r\n\t\t\t\tmodalSmartCaptureButton: '[data-jcs-element=\"capture__modal__camera__manual__capture\"]',\r\n\t\t\t\tmodalManualCaptureText: '[data-jcs-element=\"capture__modal__manual__capture__text\"]',\r\n\t\t\t\tmanualCaptureCheck: '[data-jcs-element=\"camera__manual__capture__check\"]',\r\n\t\t\t\tmodalManualCaptureCheck: '[data-jcs-element=\"capture__modal__camera__manual__capture__check\"]',\r\n\t\t\t\tcloseHelp: '[data-jcs-element=\"capture__close__help\"]',\r\n\t\t\t\topenHelp: '[data-jcs-element=\"capture__open__help\"]',\r\n\t\t\t\thelpDocumentContainer: '[data-jcs-element=\"capture__help__container\"]',\r\n\t\t\t\thelpSelfieContainer: '[data-jcs-element=\"capture__selfie__help__container\"]',\r\n\t\t\t\thelpAddressContainer: '[data-jcs-element=\"capture__address__help__container\"]',\r\n\t\t\t\thelpCovidContainer: '[data-jcs-element=\"capture__covid__help__container\"]',\r\n\t\t\t\tmodalDocumentClose: '[data-jcs-element=\"capture__modal__close__help\"]',\r\n\t\t\t\tmodalSelfieClose: '[data-jcs-element=\"capture__selfie__modal__close__help\"]',\r\n\t\t\t\tmodalAddressClose: '[data-jcs-element=\"capture__address__modal__close__help\"]',\r\n\t\t\t\tmodalCovidClose: '[data-jcs-element=\"capture__covid__modal__close__help\"]',\r\n\t\t\t\tmodalDocumentGlareContainer: '[data-jcs-element=\"capture__modal__glare__animation__container\"]',\r\n\t\t\t\tmodalDocumentLowResContainer: '[data-jcs-element=\"capture__modal__low__res__animation__container\"]',\r\n\t\t\t\tmodalDocumentBlurContainer: '[data-jcs-element=\"capture__modal__blur__animation__container\"]',\r\n\t\t\t\tmodalAddressGlareContainer: '[data-jcs-element=\"capture__address__modal__glare__animation__container\"]',\r\n\t\t\t\tmodalAddressLowResContainer: '[data-jcs-element=\"capture__address__modal__low__res__animation__container\"]',\r\n\t\t\t\tmodalAddressBlurContainer: '[data-jcs-element=\"capture__address__modal__blur__animation__container\"]',\r\n\t\t\t\tmodalCovidGlareContainer: '[data-jcs-element=\"capture__covid__modal__glare__animation__container\"]',\r\n\t\t\t\tmodalCovidLowResContainer: '[data-jcs-element=\"capture__covid__modal__low__res__animation__container\"]',\r\n\t\t\t\tmodalCovidBlurContainer: '[data-jcs-element=\"capture__covid__modal__blur__animation__container\"]',\r\n\t\t\t\tactionDocumentContainer: '[data-jcs-element=\"info__journey__action__container\"]',\r\n\t\t\t\tactionText: '[data-jcs-element=\"info__journey__action__text\"]',\r\n\t\t\t\tactionSelfieContainer: '[data-jcs-element=\"info__journey__action__selfie__container\"]',\r\n\t\t\t\tactionAddressContainer: '[data-jcs-element=\"info__journey__action__address__container\"]',\r\n\t\t\t\tactionCovidContainer: '[data-jcs-element=\"info__journey__action__covid__container\"]',\r\n\t\t\t\tattemptCountContainer: '[data-jcs-element=\"attempt__count__container\"]',\r\n\t\t\t\tattemptCounter: '[data-jcs-element=\"attempt__counter\"]',\r\n\t\t\t\tloadingAnimationContainer: '[data-jcs-element=\"loading-animation\"]'\r\n\t\t\t}))\r\n\t\t\t.then(({ cameraStatus, cameraCapture, cameraViewfinder, cameraSelect, smartCaptureToggle, smartCaptureToggleInner, modalSmartCaptureButton, modalManualCaptureText, manualCaptureCheck, modalManualCaptureCheck, closeHelp, openHelp, helpDocumentContainer, helpSelfieContainer, helpAddressContainer, modalDocumentClose, modalSelfieClose, modalAddressClose, modalDocumentGlareContainer, modalDocumentLowResContainer, modalDocumentBlurContainer, modalAddressGlareContainer, modalAddressLowResContainer, modalAddressBlurContainer, actionDocumentContainer, actionText, actionSelfieContainer, actionAddressContainer, attemptCountContainer, attemptCounter, loadingAnimationContainer, actionCovidContainer, helpCovidContainer, modalCovidBlurContainer, modalCovidClose, modalCovidGlareContainer, modalCovidLowResContainer }) => {\r\n\t\t\t\tRenderingService.hideObject(cameraSelect);\r\n\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLInputElement, false);\r\n\t\t\t\tRenderingService.setEnabled(cameraSelect as HTMLSelectElement, false);\r\n\t\t\t\tRenderingService.hideObject(closeHelp);\r\n\r\n\t\t\t\tCameraProvider.loadingAnimation = AnimationService.CreateAnimation(loadingAnimationContainer as HTMLDivElement, this.assetsFolder + '/animations/loading.json', true, true, {});\r\n\t\t\t\tif (this._journey) {\r\n\t\t\t\t\t// Check if triple scan guidance page mode is enabled & journey is on triple scan state\r\n\t\t\t\t\tif (this._journey.actionAttempt > 1 &&\r\n\t\t\t\t\t\tthis._config.tripleScanGuidancePage && ((this._journey.action === FlowState.IDENTITY_BACK) || (this._journey.action === FlowState.IDENTITY_FRONT)) && !isFromTripleScanGuidancePage) {\r\n\t\t\t\t\t\tTripleScanGuidanceProvider.render.call(this, InputProvider.CAMERA);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tisFromTripleScanGuidancePage = false;\r\n\t\t\t\t\t\tswitch (this._journey.action) {\r\n\t\t\t\t\t\t\tcase FlowState.SELFIE:\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(actionSelfieContainer);\r\n\t\t\t\t\t\t\t\tRenderingService.hideObject(smartCaptureToggleInner);\r\n\t\t\t\t\t\t\t\tCameraProvider.reticle = ReticleType.PORTRAIT;\r\n\t\t\t\t\t\t\t\tCameraProvider.hint = HintType.NONE;\r\n\t\t\t\t\t\t\t\tCameraProvider.helpModal = helpSelfieContainer;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalClose = modalSelfieClose;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase FlowState.IDENTITY_BACK:\r\n\t\t\t\t\t\t\tcase FlowState.IDENTITY_FRONT:\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(actionDocumentContainer);\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(smartCaptureToggleInner);\r\n\t\t\t\t\t\t\t\tCameraProvider.reticle = ReticleType.DOCUMENT;\r\n\t\t\t\t\t\t\t\tCameraProvider.hint = HintType.AUTOCAPTUREOFF;\r\n\t\t\t\t\t\t\t\tCameraProvider.helpModal = helpDocumentContainer;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalClose = modalDocumentClose;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalBlurContainer = modalDocumentBlurContainer;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalGlareContainer = modalDocumentGlareContainer;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalLowResContainer = modalDocumentLowResContainer;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase FlowState.ADDRESS:\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(actionAddressContainer);\r\n\t\t\t\t\t\t\t\tRenderingService.hideObject(smartCaptureToggleInner);\r\n\t\t\t\t\t\t\t\tCameraProvider.reticle = ReticleType.NONE;\r\n\t\t\t\t\t\t\t\tCameraProvider.hint = HintType.NONE;\r\n\t\t\t\t\t\t\t\tCameraProvider.helpModal = helpAddressContainer;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalClose = modalAddressClose;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalBlurContainer = modalAddressBlurContainer;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalGlareContainer = modalAddressGlareContainer;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalLowResContainer = modalAddressLowResContainer;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase FlowState.COVIDPASS:\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(actionCovidContainer);\r\n\t\t\t\t\t\t\t\tRenderingService.hideObject(smartCaptureToggleInner);\r\n\t\t\t\t\t\t\t\tCameraProvider.reticle = ReticleType.NONE;\r\n\t\t\t\t\t\t\t\tCameraProvider.hint = HintType.NONE;\r\n\t\t\t\t\t\t\t\tCameraProvider.helpModal = helpCovidContainer;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalClose = modalCovidClose;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalBlurContainer = modalCovidBlurContainer;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalGlareContainer = modalCovidGlareContainer;\r\n\t\t\t\t\t\t\t\tCameraProvider.modalLowResContainer = modalCovidLowResContainer;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._config.hideAutoCaptureHints) {\r\n\t\t\t\t\t\tCameraProvider.hint = HintType.NONE;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (this._journey.actionAttempt) {\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '2');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '1');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tRenderingService.hideObject(attemptCountContainer);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this._journey.action === FlowState.IDENTITY_FRONT) {\r\n\t\t\t\t\t\tRenderingService.setText(actionText, LanguageService.getTranslation(TranslationKey.CAMERA_MANUAL_CAPTURE_FRONT));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._journey.action === FlowState.IDENTITY_BACK) {\r\n\t\t\t\t\t\tRenderingService.setText(actionText, LanguageService.getTranslation(TranslationKey.CAMERA_CAPTURE_BACK));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn CameraService.getCameraPermission()\r\n\t\t\t\t\t.then((permission) => {\r\n\t\t\t\t\t\tswitch (permission) {\r\n\t\t\t\t\t\t\tcase CameraPermissionState.UNKNOWN: // safari 15.5 workaround\r\n\t\t\t\t\t\t\tcase CameraPermissionState.GRANTED:\r\n\t\t\t\t\t\t\t\tRenderingService.setText(cameraStatus, LanguageService.getTranslation(TranslationKey.CAMERA_LOADING));\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tlet mirror: boolean | undefined;\r\n\t\t\t\t\t\tif (this._journey) {\r\n\t\t\t\t\t\t\tmirror = this._journey.action === FlowState.PASSIVE_LIVENESS || this._journey.action === FlowState.SELFIE;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (smartCaptureToggle instanceof HTMLElement) {\r\n\t\t\t\t\t\t\tsmartCaptureToggle.addEventListener('change', () => {\r\n\r\n\t\t\t\t\t\t\t\tthis.changeInputProvider(InputProvider.SMART_CAPTURE, ChangeMode.DEFAULT);\r\n\t\t\t\t\t\t\t\tthis.evaluate(true, isPredefinedJourney, InputProvider.SMART_CAPTURE);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (modalSmartCaptureButton instanceof HTMLElement) {\r\n\t\t\t\t\t\t\tmodalSmartCaptureButton.addEventListener('change', () => {\r\n\t\t\t\t\t\t\t\tthis.changeInputProvider(InputProvider.SMART_CAPTURE, ChangeMode.DEFAULT);\r\n\t\t\t\t\t\t\t\tthis.evaluate(true, isPredefinedJourney, InputProvider.SMART_CAPTURE);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (openHelp instanceof HTMLElement) {\r\n\t\t\t\t\t\t\topenHelp.addEventListener('click', () => {\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(CameraProvider.helpModal);\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(closeHelp);\r\n\t\t\t\t\t\t\t\tRenderingService.hideObject(openHelp);\r\n\t\t\t\t\t\t\t\tif (CameraProvider.modalGlareContainer && CameraProvider.modalBlurContainer && CameraProvider.modalBlurContainer) {\r\n\r\n\t\t\t\t\t\t\t\t\tCameraProvider.glareAnimation = AnimationService.CreateAnimation(CameraProvider.modalGlareContainer as HTMLElement, this.assetsFolder + '/animations/glare.json', true, true, {});\r\n\t\t\t\t\t\t\t\t\tCameraProvider.blurAnimation = AnimationService.CreateAnimation(CameraProvider.modalBlurContainer as HTMLElement, this.assetsFolder + '/animations/blur.json', true, true, {});\r\n\t\t\t\t\t\t\t\t\tCameraProvider.lowResAnimation = AnimationService.CreateAnimation(CameraProvider.modalLowResContainer as HTMLElement, this.assetsFolder + '/animations/low-res.json', true, true, {});\r\n\t\t\t\t\t\t\t\t\tCameraProvider.glareAnimation.show();\r\n\t\t\t\t\t\t\t\t\tCameraProvider.glareAnimation.play();\r\n\t\t\t\t\t\t\t\t\tCameraProvider.blurAnimation.show();\r\n\t\t\t\t\t\t\t\t\tCameraProvider.blurAnimation.play();\r\n\t\t\t\t\t\t\t\t\tCameraProvider.lowResAnimation.show();\r\n\t\t\t\t\t\t\t\t\tCameraProvider.lowResAnimation.play();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (closeHelp instanceof HTMLElement) {\r\n\t\t\t\t\t\t\tcloseHelp.addEventListener('click', () => {\r\n\t\t\t\t\t\t\t\tCameraProvider.closeModal(CameraProvider.helpModal, closeHelp, openHelp);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (CameraProvider.modalClose instanceof HTMLElement) {\r\n\t\t\t\t\t\t\tCameraProvider.modalClose.addEventListener('click', () => {\r\n\t\t\t\t\t\t\t\tCameraProvider.closeModal(CameraProvider.helpModal, closeHelp, openHelp);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (cameraSelect instanceof HTMLSelectElement) {\r\n\t\t\t\t\t\t\tcameraSelect.addEventListener('change', () => {\r\n\t\t\t\t\t\t\t\tRenderingService.setText(cameraStatus, LanguageService.getTranslation(TranslationKey.CAMERA_LOADING));\r\n\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect, false);\r\n\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLInputElement, false);\r\n\r\n\t\t\t\t\t\t\t\tthis.changeCameraStream(cameraSelect.value, CameraProvider.reticle, !this._config.hideLogo, CameraProvider.hint, mirror)\r\n\t\t\t\t\t\t\t\t\t.then(() => this.renderAvailableCameras(cameraSelect as HTMLSelectElement))\r\n\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.hideObject(cameraStatus);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect, true);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect, true);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.showObject(cameraStatus);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setText(cameraStatus, LanguageService.getTranslation(error.message as TranslationKey));\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect as HTMLSelectElement, false);\r\n\r\n\t\t\t\t\t\t\tif (cameraCapture && cameraViewfinder instanceof HTMLCanvasElement) {\r\n\t\t\t\t\t\t\t\tcameraCapture.addEventListener('click', () => {\r\n\t\t\t\t\t\t\t\t\tconst metaData: IMetaData[] = [{\r\n\t\t\t\t\t\t\t\t\t\tname: 'Capture Type',\r\n\t\t\t\t\t\t\t\t\t\tvalue: 'Manual Capture',\r\n\t\t\t\t\t\t\t\t\t\tstep: '',\r\n\t\t\t\t\t\t\t\t\t\ttype: 'Simple'\r\n\t\t\t\t\t\t\t\t\t}];\r\n\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLInputElement, false);\r\n\t\t\t\t\t\t\t\t\tRenderingService.showObject(loadingAnimationContainer);\r\n\t\t\t\t\t\t\t\t\tCameraService.getImageFromCurrentStream()\r\n\t\t\t\t\t\t\t\t\t\t.then((image) => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.freezeCameraStream();\r\n\t\t\t\t\t\t\t\t\t\t\treturn image;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.then((image) => CameraProvider.continueJourney.call(this, image, metaData))\r\n\t\t\t\t\t\t\t\t\t\t.then(() => this.updateJourneyFields());\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tlet cameraFacingMode = CameraFacingMode.BACK;\r\n\r\n\t\t\t\t\t\t\t\t// select \"Back Ultra Wide Camera\" as default if exist\r\n\t\t\t\t\t\t\t\tCameraService.getVideoCameras().then((cameras) => {\r\n\t\t\t\t\t\t\t\t\t// Ensure this._journey is defined before accessing action\r\n\t\t\t\t\t\t\t\t\tif (this._journey?.action === FlowState.SELFIE) {\r\n\t\t\t\t\t\t\t\t\t\t// Set to front-facing camera and skip sending deviceId\r\n\t\t\t\t\t\t\t\t\t\tcameraFacingMode = CameraFacingMode.FRONT;\r\n\t\t\t\t\t\t\t\t\t\treturn Promise.resolve(undefined); // No deviceId to send, return undefined\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// If not SELFIE step, select back dual wide camera if available\r\n\t\t\t\t\t\t\t\t\tvar backDualWideCamera = cameras.find(camera => CameraService.isBackDualWideCameraLabel(camera.label));\r\n\t\t\t\t\t\t\t\t\tlet backDualWideCameraId = backDualWideCamera ? backDualWideCamera.deviceId : \"\";\r\n\r\n\t\t\t\t\t\t\t\t\tif (backDualWideCameraId !== \"\") {\r\n\t\t\t\t\t\t\t\t\t\tcameraFacingMode = CameraFacingMode.ENVIRONMENT;\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.markSelected(cameraSelect, backDualWideCameraId);\r\n\t\t\t\t\t\t\t\t\t\treturn backDualWideCameraId;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\treturn Promise.resolve(undefined); // If no suitable camera is found, return undefined\r\n\t\t\t\t\t\t\t\t}).then((backDualWideCameraId) => {\r\n\t\t\t\t\t\t\t\t\t// If this._journey.action is SELFIE, backDualWideCameraId will be undefined\r\n\t\t\t\t\t\t\t\t\treturn this.changeCameraStream(\r\n\t\t\t\t\t\t\t\t\t\tbackDualWideCameraId,\r\n\t\t\t\t\t\t\t\t\t\tCameraProvider.reticle,\r\n\t\t\t\t\t\t\t\t\t\t!this._config.hideLogo,\r\n\t\t\t\t\t\t\t\t\t\tCameraProvider.hint,\r\n\t\t\t\t\t\t\t\t\t\tmirror,\r\n\t\t\t\t\t\t\t\t\t\tcameraFacingMode\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t.then(() => this.renderAvailableCameras(cameraSelect as HTMLSelectElement))\r\n\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tRenderingService.hideObject(cameraStatus);\r\n\t\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect as HTMLSelectElement, true);\r\n\t\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t\t\t\tRenderingService.markSelected(cameraSelect, cameraSelect.value);\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn this.changeInputProvider(InputProvider.FILESYSTEM, ChangeMode.FORCE)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => CameraService.stopStreaming())\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => this.evaluate());\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tconsole.log(\"Error\");\r\n\t\t\t\t\t});\r\n\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_PROVIDER, { provider: Templates.Camera }));\r\n\t}\r\n\r\n\tprivate static glareAnimation: lottie.AnimationItem;\r\n\tprivate static lowResAnimation: lottie.AnimationItem;\r\n\tprivate static blurAnimation: lottie.AnimationItem;\r\n\tprivate static loadingAnimation: lottie.AnimationItem;\r\n\tprivate static reticle: ReticleType;\r\n\tprivate static hint: HintType;\r\n\tprivate static helpModal: HTMLElement | undefined;\r\n\tprivate static modalClose: HTMLElement | undefined;\r\n\tprivate static modalGlareContainer: HTMLElement | undefined;\r\n\tprivate static modalBlurContainer: HTMLElement | undefined;\r\n\tprivate static modalLowResContainer: HTMLElement | undefined;\r\n\r\n\tprivate static continueJourney(this: JourneyContainer, image: string, metaData: IMetaData[]) {\r\n\t\tif (this._journey !== undefined) {\r\n\t\t\tswitch (this._journey.action) {\r\n\t\t\t\tcase FlowState.IDENTITY_BACK:\r\n\t\t\t\tcase FlowState.IDENTITY_FRONT:\r\n\t\t\t\t\tif (this._previewPages.documentStep.manualCapture) {\r\n\t\t\t\t\t\treturn ImageProvider.render.call(this, image, metaData);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn CameraProvider.continueJourneySkipPreview.call(this, image, metaData);\r\n\t\t\t\t\t}\r\n\t\t\t\tcase FlowState.ADDRESS:\r\n\t\t\t\t\tif (this._previewPages.poaStep.manualCapture) {\r\n\t\t\t\t\t\treturn ImageProvider.render.call(this, image, metaData);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn CameraProvider.continueJourneySkipPreview.call(this, image, metaData);\r\n\t\t\t\t\t}\r\n\t\t\t\tcase FlowState.SELFIE:\r\n\t\t\t\t\tif (this._previewPages.facematchStep.manualCapture) {\r\n\t\t\t\t\t\treturn ImageProvider.render.call(this, image, metaData);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn CameraProvider.continueJourneySkipPreview.call(this, image, metaData);\r\n\t\t\t\t\t}\r\n\t\t\t\tcase FlowState.COVIDPASS:\r\n\t\t\t\t\tif (this._previewPages.covidStep.manualCapture) {\r\n\r\n\t\t\t\t\t\treturn ImageProvider.render.call(this, image, metaData);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn CameraProvider.continueJourneySkipPreviewCovid.call(this, image, metaData);\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tprivate static continueJourneySkipPreviewCovid(this: JourneyContainer, image: string, metaData: IMetaData[]) {\r\n\r\n\t\treturn this.assertImageExists(image)\r\n\t\t\t.then(() => this.getJourney())\r\n\t\t\t.then((journey) => journey.continueCovid(\r\n\t\t\t\timage,\r\n\t\t\t\tthis._journey!.id\r\n\r\n\t\t\t)\r\n\t\t\t).then((res) => DataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN).update(ImageProvider.parseResponseCovidData(res)))\r\n\t\t\t.then(() => this.evaluate())\r\n\t\t\t.then(this.updateJourneyFields).then(() => EventService.publish(JourneyEvent.DISPLAY_STEP, { step: Templates.Result }));\r\n\r\n\t}\r\n\r\n\tprivate static continueJourneySkipPreview(this: JourneyContainer, image: string, metaData: IMetaData[]) {\r\n\r\n\t\tconst { type } = ImageService.getBase64Components(image);\r\n\t\treturn this.assertImageExists(image)\r\n\t\t\t.then(() => this.getJourney())\r\n\t\t\t.then((journey) => journey.continue({\r\n\t\t\t\timgList: [{\r\n\t\t\t\t\t...ImageService.remapNames(ImageService.getBase64Components(image)),\r\n\t\t\t\t\tname: journey.action === 'SELFIE' ? RequiredInputImage.SelfiePhoto : RequiredInputImage.WhiteImage,\r\n\t\t\t\t\tinputFormat: type === 'pdf' ? 1 : 0\r\n\t\t\t\t}],\r\n\t\t\t\tjourneyDefinitionId: this._journeyDefinitionId\r\n\t\t\t}, metaData)\r\n\t\t\t\t.then((res) => DataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN).update(ImageProvider.parseResponseData(res)))\r\n\t\t\t\t.then(() => this.evaluate())\r\n\t\t\t\t.then(this.updateJourneyFields));\r\n\t}\r\n\r\n\tprivate static closeModal(helpContainer: HTMLElement | undefined, closeHelp: HTMLElement | undefined, openHelp: HTMLElement | undefined) {\r\n\t\tRenderingService.hideObject(helpContainer);\r\n\t\tRenderingService.hideObject(closeHelp);\r\n\t\tRenderingService.showObject(openHelp);\r\n\t\tCameraProvider.glareAnimation.stop();\r\n\t\tCameraProvider.glareAnimation.destroy();\r\n\t\tCameraProvider.blurAnimation.stop();\r\n\t\tCameraProvider.blurAnimation.destroy();\r\n\t\tCameraProvider.lowResAnimation.stop();\r\n\t\tCameraProvider.lowResAnimation.destroy();\r\n\t}\r\n}\r\n","/**\r\n * Possible templates which can be specified. For suggested template\r\n * modifications, default values and template flow, please consult the\r\n * integration documentation.\r\n *\r\n * @public\r\n */\r\nexport enum Templates {\r\n\t/**\r\n\t * This will be displayed when there is nothing currently being shown by the\r\n\t * instance of the SDK. An example of this would be when the SDK is loading\r\n\t * data from the server prior to the authentication checks.\r\n\t */\r\n\tNone = 'none',\r\n\t/**\r\n\t * This will be displayed whilst the SDK is initialising and will be\r\n\t * overwritten by the first provider when initialised.\r\n\t */\r\n\tInitializing = 'initializing',\r\n\t/**\r\n\t * This will be displayed when the customer has elected to use the camera\r\n\t * for document capture rather than a file upload.\r\n\t */\r\n\tCamera = 'camera',\r\n\t/**\r\n\t * This will be displayed when the customer has elected to use the cropping\r\n\t * functionality offered by the SDK. The customer will be able to select\r\n\t * \"Crop\" to submit the cropped file, or \"Cancel\" to return to the capture\r\n\t * screen.\r\n\t */\r\n\tCropper = 'cropper',\r\n\t/**\r\n\t * This will be displayed when the customer has elected to use the browser's\r\n\t * default media picker to select a document. The customer will be able to\r\n\t * either use the media picker, or drop a file onto the specified area to\r\n\t * continue.\r\n\t */\r\n\tFilesystem = 'filesystem',\r\n\t/**\r\n\t * This will be displayed when the customer has started the journey and is\r\n\t * at the front or rear document capture stage, and not using the\r\n\t * SmartCapture document capture provider.\r\n\t */\r\n\tGateway = 'gateway',\r\n\t/**\r\n\t * This will be displayed to the customer when they are at the liveness\r\n\t * stage of the journey. Pose instructions will be automatically displayed\r\n\t * to the customer providing the required elements are present.\r\n\t */\r\n\tLiveness = 'liveness',\r\n\tPassiveLiveness = 'passiveLiveness',\r\n\t/**\r\n\t * This will be displayed at the start of the process if authentication is\r\n\t * enabled or there is no token present in the configuration.\r\n\t */\r\n\tLogin = 'login',\r\n\t/**\r\n\t * This will be displayed to the customer at the end of the journey and will\r\n\t * display the outcome of the journey with any supporting information. To\r\n\t * omit pieces of information from the view, remove the element in the\r\n\t * template and it will be skipped. For information about which details will\r\n\t * be made available, please consult the integration documentation.\r\n\t */\r\n\tResult = 'result',\r\n\t/**\r\n\t * This will be displayed when the customer is at any document capture stage\r\n\t * in the journey and the scanner capture method has been specified by the\r\n\t * server. Details and status updates will be automatically displayed as and\r\n\t * when required.\r\n\t */\r\n\tScanner = 'scanner',\r\n\t/**\r\n\t * This will be displayed to the customer when they have captured an image\r\n\t * using the camera provider or the filesystem providers. The customer can\r\n\t * choose to upload the image as is, or use the cropping functionality to\r\n\t * trim the image before uploading. To disable the cropping functionality,\r\n\t * omit the button from the template.\r\n\t */\r\n\tView = 'view',\r\n\t/**\r\n\t * This will be displayed to the customer when the smart capture provider\r\n\t * has been specified by the server. The customer can click start to begin\r\n\t * the document capture.\r\n\t */\r\n\tSmartCapture = 'smartCapture',\r\n\t/**\r\n\t * This will be displayed when presenting the user with a list of the\r\n\t * available journeys. The user will be able to see a list of the journeys\r\n\t * which are configured in the back office, and pick from one. If there is\r\n\t * only one journey available, this screen will be bypassed. If there are\r\n\t * none configured, an error message will be shown.\r\n\t */\r\n\tJourneySelect = 'journeySelect',\r\n\tTripleScanGuidance = 'tripleScanGuidance',\r\n\tHasNoCamera = 'hasNoCamera',\r\n\tCovid = 'covid',\r\n\tDataChecks = 'dataChecks',\r\n\tTermsAndConditions = 'termsAndConditions'\r\n}\r\n","module.exports = \"<div class=\\\"dark-inner-provider-container\\\">\\r\\n\\t<div>\\r\\n\\t\\t<form class=\\\"camera-options--container\\\">\\r\\n\\t\\t\\t<select data-jcs-element=\\\"camera__select\\\" class=\\\"camera-choices camera-choices-half-s camera-choices-full-xs control control--select\\\"></select>\\r\\n\\t\\t</form>\\r\\n\\t\\t<div class=\\\"help-container\\\">\\r\\n\\t\\t\\t<div class=\\\"camera-viewfinder--container\\\">\\r\\n\\t\\t\\t\\t<div data-jcs-element=\\\"camera__viewfinder__inner__container\\\" class=\\\"camera-viewfinder--inner-container\\\" style=\\\"position: relative;\\\">\\r\\n\\t\\t\\t\\t\\t<canvas data-jcs-element=\\\"camera__viewfinder\\\" class=\\\"camera-viewfinder\\\" style=\\\"position: relative; left: 0; top: 0; z-index: 0;\\\"></canvas>\\r\\n\\t\\t\\t\\t\\t<div data-jcs-element=\\\"animation__viewfinder\\\" class=\\\"camera-viewfinder\\\" style=\\\"position: absolute; left: 0; top: 0; z-index: 1;\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"camera-viewfinder--overlay--transparent\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"loading-animation-container\\\" data-jcs-element=\\\"loading-animation\\\" style=\\\"display:none\\\">\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"verifying-title-container\\\" data-jcs-element=\\\"verifying__title\\\" style=\\\"display:none\\\">{{VERIFYING_TITLE}}</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div data-jcs-element=\\\"overlay_viewfinder\\\" class=\\\"camera-viewfinder--overlay\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"camera-viewfinder--overlay--transparent\\\">\\r\\n\\t\\t\\t\\t\\t\\t<p class=\\\"camera-viewfinder--overlay-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<button data-jcs-element=\\\"camera__capture\\\" class=\\\"button button--primary camera-button\\\">{{CAMERA_CAPTURE_START_BUTTON}}</button>\\r\\n\\t\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<svg class=\\\"canvas-overlay\\\" data-jcs-element=\\\"canvas__condition__error\\\" width=\\\"48\\\" height=\\\"48\\\" viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t<circle cx=\\\"24\\\" cy=\\\"24\\\" r=\\\"22\\\" fill=\\\"white\\\" stroke=\\\"#D87212\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<path d=\\\"M24 14V26M24 34V33.8972\\\" stroke=\\\"#D87212\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"uploading--container\\\">\\r\\n\\t\\t\\t\\t<span data-jcs-element=\\\"camera__condition__uploading\\\" class=\\\"camera-condition camera-condition--uploading\\\">{{CAMERA_CONDITION_UPLOADING}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div data-jcs-element=\\\"camera__conditions\\\" class=\\\"camera-conditions--container\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"camera-conditions--container-list show-desktop\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t<div data-jcs-element=\\\"camera__condition__alignment\\\" class=\\\"camera-conditions--container-list-item camera-condition--alignment\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"14\\\" height=\\\"14\\\" viewBox=\\\"0 0 14 14\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M6.65385 0C6.84323 0 7.01636 0.107001 7.10106 0.276393L13.2549 12.5841C13.3324 12.7391 13.3241 12.9231 13.233 13.0706C13.1419 13.218 12.981 13.3077 12.8077 13.3077H0.500001C0.326712 13.3077 0.165778 13.218 0.0746751 13.0706C-0.0164282 12.9231 -0.0247102 12.7391 0.0527869 12.5841L6.20663 0.276393C6.29133 0.107001 6.46446 0 6.65385 0ZM11.9987 12.3077L6.65385 1.61803L1.30902 12.3077H11.9987ZM6.65403 4.92308C6.93018 4.92308 7.15403 5.14693 7.15403 5.42308V7.88461C7.15403 8.16076 6.93018 8.38461 6.65403 8.38461C6.37789 8.38461 6.15403 8.16076 6.15403 7.88461V5.42308C6.15403 5.14693 6.37789 4.92308 6.65403 4.92308ZM6.65381 10.9615C6.99368 10.9615 7.26919 10.686 7.26919 10.3462C7.26919 10.0063 6.99368 9.73077 6.65381 9.73077C6.31394 9.73077 6.03842 10.0063 6.03842 10.3462C6.03842 10.686 6.31394 10.9615 6.65381 10.9615Z\\\" fill=\\\"#F88618\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<span>\\r\\n\\t\\t\\t\\t\\t\\t\\t{{CAMERA_CONDITION_ALIGNMENT}}\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div data-jcs-element=\\\"camera__condition__low__resolution\\\" class=\\\"camera-conditions--container-list-item camera-condition--low-resolution\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"14\\\" height=\\\"14\\\" viewBox=\\\"0 0 14 14\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M6.65385 0C6.84323 0 7.01636 0.107001 7.10106 0.276393L13.2549 12.5841C13.3324 12.7391 13.3241 12.9231 13.233 13.0706C13.1419 13.218 12.981 13.3077 12.8077 13.3077H0.500001C0.326712 13.3077 0.165778 13.218 0.0746751 13.0706C-0.0164282 12.9231 -0.0247102 12.7391 0.0527869 12.5841L6.20663 0.276393C6.29133 0.107001 6.46446 0 6.65385 0ZM11.9987 12.3077L6.65385 1.61803L1.30902 12.3077H11.9987ZM6.65403 4.92308C6.93018 4.92308 7.15403 5.14693 7.15403 5.42308V7.88461C7.15403 8.16076 6.93018 8.38461 6.65403 8.38461C6.37789 8.38461 6.15403 8.16076 6.15403 7.88461V5.42308C6.15403 5.14693 6.37789 4.92308 6.65403 4.92308ZM6.65381 10.9615C6.99368 10.9615 7.26919 10.686 7.26919 10.3462C7.26919 10.0063 6.99368 9.73077 6.65381 9.73077C6.31394 9.73077 6.03842 10.0063 6.03842 10.3462C6.03842 10.686 6.31394 10.9615 6.65381 10.9615Z\\\" fill=\\\"#F88618\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<span>\\r\\n\\t\\t\\t\\t\\t\\t\\t{{CAMERA_CONDITION_LOW_RESOLUTION}}\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div data-jcs-element=\\\"camera__condition__blur\\\" class=\\\"camera-conditions--container-list-item camera-condition--blur\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"14\\\" height=\\\"14\\\" viewBox=\\\"0 0 14 14\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M6.65385 0C6.84323 0 7.01636 0.107001 7.10106 0.276393L13.2549 12.5841C13.3324 12.7391 13.3241 12.9231 13.233 13.0706C13.1419 13.218 12.981 13.3077 12.8077 13.3077H0.500001C0.326712 13.3077 0.165778 13.218 0.0746751 13.0706C-0.0164282 12.9231 -0.0247102 12.7391 0.0527869 12.5841L6.20663 0.276393C6.29133 0.107001 6.46446 0 6.65385 0ZM11.9987 12.3077L6.65385 1.61803L1.30902 12.3077H11.9987ZM6.65403 4.92308C6.93018 4.92308 7.15403 5.14693 7.15403 5.42308V7.88461C7.15403 8.16076 6.93018 8.38461 6.65403 8.38461C6.37789 8.38461 6.15403 8.16076 6.15403 7.88461V5.42308C6.15403 5.14693 6.37789 4.92308 6.65403 4.92308ZM6.65381 10.9615C6.99368 10.9615 7.26919 10.686 7.26919 10.3462C7.26919 10.0063 6.99368 9.73077 6.65381 9.73077C6.31394 9.73077 6.03842 10.0063 6.03842 10.3462C6.03842 10.686 6.31394 10.9615 6.65381 10.9615Z\\\" fill=\\\"#F88618\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<span>\\r\\n\\t\\t\\t\\t\\t\\t\\t{{CAMERA_CONDITION_BLUR}}\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div data-jcs-element=\\\"camera__condition__glare\\\" class=\\\"camera-conditions--container-list-item camera-condition--glare\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"14\\\" height=\\\"14\\\" viewBox=\\\"0 0 14 14\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M6.65385 0C6.84323 0 7.01636 0.107001 7.10106 0.276393L13.2549 12.5841C13.3324 12.7391 13.3241 12.9231 13.233 13.0706C13.1419 13.218 12.981 13.3077 12.8077 13.3077H0.500001C0.326712 13.3077 0.165778 13.218 0.0746751 13.0706C-0.0164282 12.9231 -0.0247102 12.7391 0.0527869 12.5841L6.20663 0.276393C6.29133 0.107001 6.46446 0 6.65385 0ZM11.9987 12.3077L6.65385 1.61803L1.30902 12.3077H11.9987ZM6.65403 4.92308C6.93018 4.92308 7.15403 5.14693 7.15403 5.42308V7.88461C7.15403 8.16076 6.93018 8.38461 6.65403 8.38461C6.37789 8.38461 6.15403 8.16076 6.15403 7.88461V5.42308C6.15403 5.14693 6.37789 4.92308 6.65403 4.92308ZM6.65381 10.9615C6.99368 10.9615 7.26919 10.686 7.26919 10.3462C7.26919 10.0063 6.99368 9.73077 6.65381 9.73077C6.31394 9.73077 6.03842 10.0063 6.03842 10.3462C6.03842 10.686 6.31394 10.9615 6.65381 10.9615Z\\\" fill=\\\"#F88618\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<span>\\r\\n\\t\\t\\t\\t\\t\\t\\t{{CAMERA_CONDITION_GLARE}}\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"camera-conditions--container-detail\\\" data-jcs-element=\\\"camera__condition__detail\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"camera-conditions--container-detail-animation\\\" data-jcs-element=\\\"camera__condition__detail__animation\\\">\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"camera-conditions--container-detail-description\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"camera-conditions--container-detail-description-title\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<svg width=\\\"22\\\" height=\\\"22\\\" viewBox=\\\"0 0 22 22\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M11 0C11.3788 0 11.725 0.214002 11.8944 0.552786L21.8944 20.5528C22.0494 20.8628 22.0329 21.2309 21.8507 21.5257C21.6684 21.8205 21.3466 22 21 22H1C0.653423 22 0.331557 21.8205 0.14935 21.5257C-0.0328564 21.2309 -0.0494204 20.8628 0.105574 20.5528L10.1056 0.552786C10.275 0.214002 10.6212 0 11 0ZM19.382 20L11 3.23607L2.61804 20H19.382ZM11 8C11.5523 8 12 8.44771 12 9V13C12 13.5523 11.5523 14 11 14C10.4477 14 10 13.5523 10 13V9C10 8.44771 10.4477 8 11 8ZM11 18C11.5523 18 12 17.5523 12 17C12 16.4477 11.5523 16 11 16C10.4477 16 10 16.4477 10 17C10 17.5523 10.4477 18 11 18Z\\\" fill=\\\"#F88618\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"camera-conditions--container-detail-description-title-text\\\" data-jcs-element=\\\"camera__condition__detail__description__title\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"camera-conditions--container-detail-description-hint\\\" data-jcs-element=\\\"camera__condition__detail__description__hint\\\">\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div data-jcs-element=\\\"info__journey__action__container\\\" class=\\\"camera-capture--caption\\\">\\r\\n\\t\\t\\t\\t<p data-jcs-element=\\\"info__journey__action__text\\\"></p>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div>\\r\\n\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<form class=\\\"button-camera-container button-container\\\" data-jcs-element=\\\"camera__capture__hint\\\">\\r\\n\\t\\t\\t\\t<p class=\\\"camera-capture--caption\\\">\\r\\n\\t\\t\\t\\t\\t{{CAMERA_CAPTURE_CAPTION}}\\r\\n\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t</form>\\r\\n\\t\\t\\t<div class=\\\"help-inner-container\\\" data-jcs-element=\\\"capture__help__container\\\">\\r\\n\\t\\t\\t\\t<h2>{{HELP_MODAL_AUTOCAPTURE_TITLE}}</h2>\\r\\n\\t\\t\\t\\t<p class=\\\"help-inner-container-subtitle\\\">{{HELP_MODAL_AUTOCAPTURE_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t<b>{{HELP_MODAL_AUTOCAPTURE_TIPS}}</b>\\r\\n\\t\\t\\t\\t<div class=\\\"help-images-container\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\" data-jcs-element=\\\"modal__glare__animation__container\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_AUTOCAPTURE_GLARE_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_AUTOCAPTURE_GLARE_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\" data-jcs-element=\\\"modal__low__res__animation__container\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_AUTOCAPTURE_FAR_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_AUTOCAPTURE_FAR_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"help-image-inner-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-image\\\" data-jcs-element=\\\"modal__blur__animation__container\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<b>{{HELP_MODAL_AUTOCAPTURE_BLUR_TITLE}}</b>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p>{{HELP_MODAL_AUTOCAPTURE_BLUR_SUBTITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"modal-footer modal-bottom modal-actions-container\\\">\\r\\n\\t\\t\\t\\t\\t<p data-jcs-element=\\\"capture__modal__manual__capture__text\\\">{{HELP_MODAL_AUTOCAPTURE_MANUAL_CAPTURE}}</p>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"actions-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-button-container\\\" data-jcs-element=\\\"capture__modal__camera__manual__capture\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control control--switch manual--mode--switch\\\" aria-label=\\\"switch\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" data-jcs-element=\\\"capture__modal__camera__manual__capture__check\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control__switch control__switch__blue\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"icon ico-checkmark-16 control__switchIcon text-black\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<svg width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"icon ico-checkmark-16 control__switchIcon text-black\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M13 4L6 12L3 9\\\" stroke=\\\"white\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"></path>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{HELP_MODAL_AUTOCAPTURE_TURN_MANUAL_CAPTURE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"spacer\\\">\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"help-button-container\\\" data-jcs-element=\\\"smart__capture__modal__close__help\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"actions-container\\\">\\r\\n\\t\\t\\t<div data-jcs-element=\\\"camera__manual__capture\\\">\\r\\n\\t\\t\\t\\t<label class=\\\"control control--switch manual--mode--switch\\\" aria-label=\\\"switch\\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" data-jcs-element=\\\"camera__manual__capture__check\\\" />\\r\\n\\t\\t\\t\\t\\t<div class=\\\"control__switch\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"icon ico-checkmark-16 control__switchIcon text-black\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<svg width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"icon ico-checkmark-16 control__switchIcon text-black\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M13 4L6 12L3 9\\\" stroke=\\\"rgb(0, 13, 26)\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"></path>\\r\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{HELP_MODAL_AUTOCAPTURE_TURN_MANUAL_CAPTURE}}</p>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"spacer\\\">\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t<div class=\\\"help-button-container\\\" data-jcs-element=\\\"smart__capture__close__help\\\">\\r\\n\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke=\\\"white\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke=\\\"white\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"help-button-container\\\" data-jcs-element=\\\"smart__capture__open__help\\\">\\r\\n\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12ZM12 7C11.0445 7 10 7.68564 10 9C10 9.55228 9.55229 10 9 10C8.44771 10 8 9.55228 8 9C8 6.31436 10.227 5 12 5C14.2091 5 16 6.79086 16 9C16 10.8638 14.7252 12.4299 13 12.874V12.8746V12.8787V12.8827V12.8868V12.8909V12.895V12.8991V12.9031V12.9072V12.9113V12.9153V12.9194V12.9234V12.9275V12.9315V12.9355V12.9396V12.9436V12.9476V12.9517V12.9557V12.9597V12.9637V12.9677V12.9717V12.9757V12.9796V12.9836V12.9876V12.9915V12.9955V12.9995V13.0034V13.0073V13.0113V13.0152V13.0191V13.023V13.0269V13.0308V13.0347V13.0386V13.0425V13.0463V13.0502V13.0541V13.0579V13.0617V13.0656V13.0694V13.0732V13.077V13.0808V13.0846V13.0884V13.0922V13.0959V13.0997V13.1034V13.1071V13.1109V13.1146V13.1183V13.122V13.1257V13.1294V13.133V13.1367V13.1403V13.144V13.1476V13.1512V13.1548V13.1584V13.162V13.1656V13.1691V13.1727V13.1762V13.1797V13.1832V13.1868V13.1902V13.1937V13.1972V13.2007V13.2041V13.2075V13.211V13.2144V13.2178V13.2211V13.2245V13.2279V13.2312V13.2345V13.2379V13.2412V13.2445V13.2477V13.251V13.2542V13.2575V13.2607V13.2639V13.2671V13.2703V13.2735V13.2766V13.2797V13.2829V13.286V13.2891V13.2921V13.2952V13.2983V13.3013V13.3043V13.3073V13.3103V13.3133V13.3162V13.3191V13.3221V13.325V13.3279V13.3307V13.3336V13.3364V13.3392V13.342V13.3448V13.3476V13.3504V13.3531V13.3558V13.3585V13.3612V13.3639V13.3665V13.3691V13.3718V13.3744V13.3769V13.3795V13.382V13.3845V13.387V13.3895V13.392V13.3944V13.3969V13.3993V13.4017V13.404V13.4064V13.4087V13.411V13.4133V13.4156V13.4178V13.42V13.4223V13.4244V13.4266V13.4288V13.4309V13.433V13.4351V13.4371V13.4392V13.4412V13.4432V13.4452V13.4471V13.4491V13.451V13.4529V13.4547V13.4566V13.4584V13.4602V13.462V13.4637V13.4655V13.4672V13.4689V13.4705V13.4722V13.4738V13.4754V13.477V13.4785V13.48V13.4815V13.483V13.4845V13.4859V13.4873V13.4887V13.49V13.4914V13.4927V13.494V13.4952V13.4965V13.4977V13.4988V13.5C13 14.0523 12.5523 14.5 12 14.5C11.4477 14.5 11 14.0523 11 13.5V13.4988V13.4977V13.4965V13.4952V13.494V13.4927V13.4914V13.49V13.4887V13.4873V13.4859V13.4845V13.483V13.4815V13.48V13.4785V13.477V13.4754V13.4738V13.4722V13.4705V13.4689V13.4672V13.4655V13.4637V13.462V13.4602V13.4584V13.4566V13.4547V13.4529V13.451V13.4491V13.4471V13.4452V13.4432V13.4412V13.4392V13.4371V13.4351V13.433V13.4309V13.4288V13.4266V13.4244V13.4223V13.42V13.4178V13.4156V13.4133V13.411V13.4087V13.4064V13.404V13.4017V13.3993V13.3969V13.3944V13.392V13.3895V13.387V13.3845V13.382V13.3795V13.3769V13.3744V13.3718V13.3691V13.3665V13.3639V13.3612V13.3585V13.3558V13.3531V13.3504V13.3476V13.3448V13.342V13.3392V13.3364V13.3336V13.3307V13.3279V13.325V13.3221V13.3191V13.3162V13.3133V13.3103V13.3073V13.3043V13.3013V13.2983V13.2952V13.2921V13.2891V13.286V13.2829V13.2797V13.2766V13.2735V13.2703V13.2671V13.2639V13.2607V13.2575V13.2542V13.251V13.2477V13.2445V13.2412V13.2379V13.2345V13.2312V13.2279V13.2245V13.2211V13.2178V13.2144V13.211V13.2075V13.2041V13.2007V13.1972V13.1937V13.1902V13.1868V13.1832V13.1797V13.1762V13.1727V13.1691V13.1656V13.162V13.1584V13.1548V13.1512V13.1476V13.144V13.1403V13.1367V13.133V13.1294V13.1257V13.122V13.1183V13.1146V13.1109V13.1071V13.1034V13.0997V13.0959V13.0922V13.0884V13.0846V13.0808V13.077V13.0732V13.0694V13.0656V13.0617V13.0579V13.0541V13.0502V13.0463V13.0425V13.0386V13.0347V13.0308V13.0269V13.023V13.0191V13.0152V13.0113V13.0073V13.0034V12.9995V12.9955V12.9915V12.9876V12.9836V12.9796V12.9757V12.9717V12.9677V12.9637V12.9597V12.9557V12.9517V12.9476V12.9436V12.9396V12.9355V12.9315V12.9275V12.9234V12.9194V12.9153V12.9113V12.9072V12.9031V12.8991V12.895V12.8909V12.8868V12.8827V12.8787V12.8746V12.8705V12.8664V12.8623V12.8582V12.8541V12.85V12.8459V12.8418V12.8376V12.8335V12.8294V12.8253V12.8212V12.8171V12.8129V12.8088V12.8047V12.8006V12.7964V12.7923V12.7882V12.784V12.7799V12.7758V12.7716V12.7675V12.7634V12.7592V12.7551V12.751V12.7469V12.7427V12.7386V12.7345V12.7303V12.7262V12.7221V12.718V12.7138V12.7097V12.7056V12.7015V12.6973V12.6932V12.6891V12.685V12.6809V12.6768V12.6727V12.6686V12.6645V12.6604V12.6563V12.6522V12.6481V12.644V12.6399V12.6358V12.6317V12.6277V12.6236V12.6195V12.6155V12.6114V12.6073V12.6033V12.5992V12.5952V12.5912V12.5871V12.5831V12.5791V12.575V12.571V12.567V12.563V12.559V12.555V12.551V12.547V12.5431V12.5391V12.5351V12.5312V12.5272V12.5233V12.5193V12.5154V12.5114V12.5075V12.5036V12.4997V12.4958V12.4919V12.488V12.4841V12.4803V12.4764V12.4725V12.4687V12.4648V12.461V12.4572V12.4534V12.4496V12.4458V12.442V12.4382V12.4344V12.4306V12.4269V12.4231V12.4194V12.4157V12.4119V12.4082V12.4045V12.4008V12.3971V12.3935V12.3898V12.3862V12.3825V12.3789V12.3753V12.3716V12.368V12.3645V12.3609V12.3573V12.3538V12.3502V12.3467V12.3432V12.3396V12.3361V12.3327V12.3292V12.3257V12.3223V12.3188V12.3154V12.312V12.3086V12.3052V12.3018V12.2984V12.2951V12.2917V12.2884V12.2851V12.2818V12.2785V12.2753V12.272V12.2687V12.2655V12.2623V12.2591V12.2559V12.2527V12.2496V12.2464V12.2433V12.2402V12.2371V12.234V12.2309V12.2279V12.2248V12.2218V12.2188V12.2158V12.2128V12.2099V12.2069V12.204V12.2011V12.1982V12.1953V12.1924V12.1896V12.1867V12.1839V12.1811V12.1784V12.1756V12.1728V12.1701V12.1674V12.1647V12.162V12.1594V12.1567V12.1541V12.1515V12.1489V12.1463V12.1438V12.1413V12.1388V12.1363V12.1338V12.1313V12.1289V12.1265V12.1241V12.1217V12.1193V12.117V12.1147V12.1124V12.1101V12.1078V12.1056V12.1034V12.1012V12.099V12.0968V12.0947V12.0926V12.0905V12.0884V12.0864V12.0843V12.0823V12.0803V12.0783V12.0764V12.0745V12.0726V12.0707V12.0688V12.067V12.0652V12.0634V12.0616V12.0599V12.0581V12.0564V12.0548V12.0531V12.0515V12.0499V12.0483V12.0467V12.0452V12.0437V12.0422V12.0407V12.0393V12.0378V12.0365V12.0351V12.0337V12.0324V12.0311V12.0298V12.0286V12.0274V12.0262V12.025V12.0239V12.0227V12.0216V12.0206V12.0195V12.0185V12.0175V12.0166V12.0156V12.0147V12.0138V12.013V12.0121V12.0113V12.0105V12.0098V12.0091V12.0084V12.0077V12.007V12.0064V12.0058V12.0053V12.0047V12.0042V12.0037V12.0033V12.0029V12.0025V12.0021V12.0018V12.0015V12.0012V12.0009V12.0007V12.0005V12.0004V12.0002V12.0001V12.0001V12L12 12H11C11 11.4477 11.4477 11 12 11C13.1046 11 14 10.1046 14 9C14 7.89543 13.1046 7 12 7ZM12 18C12.5523 18 13 17.5523 13 17C13 16.4477 12.5523 16 12 16C11.4477 16 11 16.4477 11 17C11 17.5523 11.4477 18 12 18Z\\\" fill=\\\"white\\\" />\\r\\n\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{HELP_MODAL_NEED_HELP}}</p>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div class=\\\"notification notification-blue\\\" data-jcs-element=\\\"attempt__count__container\\\">\\r\\n\\t<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\">\\r\\n\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M0.25 8C0.25 3.71979 3.71979 0.25 8 0.25H8.00081C12.2787 0.254627 15.7454 3.72135 15.75 7.99919L15.75 8C15.75 12.2802 12.2802 15.75 8 15.75C3.71979 15.75 0.25 12.2802 0.25 8ZM7.99958 1.75C4.54799 1.75023 1.75 4.54836 1.75 8C1.75 11.4518 4.54822 14.25 8 14.25C11.4515 14.25 14.2496 11.4522 14.25 8.00081C14.2463 4.55026 11.4501 1.75394 7.99958 1.75ZM8 5C7.44772 5 7 4.55228 7 4C7 3.44772 7.44772 3 8 3C8.55229 3 9 3.44772 9 4C9 4.55228 8.55229 5 8 5ZM7 6.25C6.58579 6.25 6.25 6.58579 6.25 7C6.25 7.41421 6.58579 7.75 7 7.75H7.25V11.25H6.5C6.08579 11.25 5.75 11.5858 5.75 12C5.75 12.4142 6.08579 12.75 6.5 12.75H8H9.5C9.91421 12.75 10.25 12.4142 10.25 12C10.25 11.5858 9.91421 11.25 9.5 11.25H8.75V7C8.75 6.58579 8.41421 6.25 8 6.25H7Z\\\" fill=\\\"#4A88C6\\\" />\\r\\n\\t</svg>\\r\\n\\t<p>{{ATTEMPTS_REMAINING}}<span data-jcs-element=\\\"attempt__counter\\\"></span></p>\\r\\n</div>\\r\\n<div data-jcs-element=\\\"view__status\\\">\\r\\n\\t<p data-jcs-element=\\\"view__status__message\\\"></p>\\r\\n</div>\\r\\n\";","/**\r\n * The type of the image captured\r\n *\r\n * @internal\r\n */\r\nexport enum RequiredInputImage {\r\n\t/**\r\n\t * A document captured with an IR camera.\r\n\t */\r\n\tNearInfraredImage = 'NearInfraredImage',\r\n\t/**\r\n\t * A self-portrait of the customer captured with a normal RGB camera.\r\n\t */\r\n\tSelfiePhoto = 'SelfiePhoto',\r\n\t/**\r\n\t * A document captured with a UV camera.\r\n\t */\r\n\tUltravioletImage = 'UltravioletImage',\r\n\t/**\r\n\t * A document captured with a normal RGB camera.\r\n\t */\r\n\tWhiteImage = 'WhiteImage'\r\n}\r\n","/**\r\n * The type of the response form the server\r\n *\r\n * @public\r\n */\r\nexport enum ResponseType {\r\n\t/**\r\n\t * Raw text which needs formatting before parsing\r\n\t */\r\n\tRAW = 'RAW',\r\n\t/**\r\n\t * Refined content which can be parsed without reformatting\r\n\t */\r\n\tREFINED = 'REFINED'\r\n}\r\n","import { IJourneyInformation } from '../../idscan/interfaces/Journey';\r\nimport { IPoint } from '../../idscan/interfaces/Point';\r\n\r\n/**\r\n * @class TransformationService\r\n *\r\n * @internal\r\n */\r\nexport class TransformationService {\r\n\t/**\r\n\t * Base method that will map the conversions between various smaller but different functions\r\n\t * @param type\r\n\t * @param beautify\r\n\t * @param element\r\n\t */\r\n\tpublic static convert = (type: string, element: any): any => {\r\n\t\tlet result;\r\n\t\tswitch (type) {\r\n\t\t\tcase 'coordinates':\r\n\t\t\t\tresult = TransformationService.coordinates(element);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'journey-retrieval':\r\n\t\t\t\tresult = TransformationService.journeyRetrievalObject(element);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'journey-upload':\r\n\t\t\t\tresult = TransformationService.journeyUploadObject(element);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate static coordinates(element: number[][]): IPoint[];\r\n\tprivate static coordinates(element: IPoint[]): number[][];\r\n\tprivate static coordinates(element: any): any {\r\n\t\tlet result: IPoint[] | number[][] = [];\r\n\t\tif (element instanceof Array && element.length === 4) {\r\n\t\t\tif ('x' in element[0]) {\r\n\t\t\t\tconst coords: number[][] = [];\r\n\r\n\t\t\t\telement.map((point) => {\r\n\t\t\t\t\tif ('x' in point && 'y' in point) {\r\n\t\t\t\t\t\tcoords.push([point.x, point.y]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tresult = coords;\r\n\t\t\t} else {\r\n\t\t\t\tconst coords: IPoint[] = [];\r\n\t\t\t\telement.map((point: number[]) => {\r\n\t\t\t\t\tif (point.length === 2) {\r\n\t\t\t\t\t\tcoords.push({\r\n\t\t\t\t\t\t\tx: point[0],\r\n\t\t\t\t\t\t\ty: point[1],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tresult = coords;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate static journeyRetrievalObject = <T = any>(element: T): T => {\r\n\t\treturn 'sample' as any as T;\r\n\t}\r\n\r\n\tprivate static journeyUploadObject = <T extends { data: any } = { data: any }>(element: T): T => {\r\n\t\tif (element.data) {\r\n\t\t\tif (element.data.entryData) {\r\n\t\t\t\tconst ed = element.data.entryData;\r\n\t\t\t\tconst info: IJourneyInformation = {\r\n\t\t\t\t\tdocuments: [],\r\n\t\t\t\t\tholder: {\r\n\t\t\t\t\t\taddress: {\r\n\t\t\t\t\t\t\tcity: ed['ExtractedFields.AddressCity'] ? ed['ExtractedFields.AddressCity'] : undefined,\r\n\t\t\t\t\t\t\tfull: ed['ExtractedFields.AddressFull'] ? ed['ExtractedFields.AddressFull'] : undefined,\r\n\t\t\t\t\t\t\tpostCode: ed['ExtractedFields.AddressPostCode'] ? ed['ExtractedFields.AddressPostCode'] : undefined,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbirthDate: ed['ExtractedFields.BirthDate'] ? ed['ExtractedFields.BirthDate'] : undefined,\r\n\t\t\t\t\t\tbirthPlace: ed['ExtractedFields.BirthPlace'] ? ed['ExtractedFields.BirthPlace'] : undefined,\r\n\t\t\t\t\t\tfirstName: ed['ExtractedFields.FirstName'] ? ed['ExtractedFields.FirstName'] : undefined,\r\n\t\t\t\t\t\tfullName: ed['ExtractedFields.FullName'] ? ed['ExtractedFields.FullName'] : undefined,\r\n\t\t\t\t\t\tgender: ed['ExtractedFields.Sex'] ? ed['ExtractedFields.Sex'] : undefined,\r\n\t\t\t\t\t\tlastName: ed['ExtractedFields.LastName'] ? ed['ExtractedFields.LastName'] : undefined,\r\n\t\t\t\t\t\tmiddleName: ed['ExtractedFields.MiddleName'] ? ed['ExtractedFields.MiddleName'] : undefined\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscanReference: ed['ScanReference'] ? ed['ScanReference'] : undefined,\r\n\t\t\t\t\tscannerIp: ed['ScannerIp'] ? ed['ScannerIp'] : undefined,\r\n\t\t\t\t\tglareCheck: ed['QualityChecks.GlareCheck'] ? ed['QualityChecks.GlareCheck'] : undefined,\r\n\t\t\t\t\tblurCheck: ed['QualityChecks.BlurCheck'] ? ed['QualityChecks.BlurCheck'] : undefined,\r\n\t\t\t\t\tlowResolutionCheck: ed['QualityChecks.LowResolutionCheck'] ? ed['QualityChecks.LowResolutionCheck'] : undefined,\r\n\t\t\t\t\tfullDocumentInViewCheck: ed['QualityChecks.FullDocumentInViewCheck'] ? ed['QualityChecks.FullDocumentInViewCheck'] : undefined,\r\n\t\t\t\t\ttripleScanReason: ed['TripleScanReason'] ? ed['TripleScanReason'] : undefined\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst currentDocument = {\r\n\t\t\t\t\texpirationDate: ed['ExtractedFields.ExpiryDate'] ? ed['ExtractedFields.ExpiryDate'] : undefined,\r\n\t\t\t\t\tissueDate: ed['ExtractedFields.IssueDate'] ? ed['ExtractedFields.IssueDate'] : undefined,\r\n\t\t\t\t\tissueNumber: ed['ExtractedFields.IssueNumber'] ? ed['ExtractedFields.IssueNumber'] : undefined,\r\n\t\t\t\t\tnumber: ed['ExtractedFields.DocumentNumber'] ? ed['ExtractedFields.DocumentNumber'] : undefined,\r\n\t\t\t\t\tcovid: ed['ExtractedFields.COVIDPASSCROSSCHECKRESULT'] ? ed['ExtractedFields.COVIDPASSCROSSCHECKRESULT'] : undefined,\r\n\t\t\t\t\ttype: ed['documentType'] ? ed['documentType'] : undefined\r\n\t\t\t\t};\r\n\r\n\t\t\t\tinfo.documents.push(currentDocument);\r\n\r\n\t\t\t\telement.data.entryData = info;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n}\r\n","if (!HTMLCanvasElement.prototype.toBlob) {\r\n\tObject.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\r\n\t\tvalue(callback: (blob: Blob) => void, type: string, quality: number) {\r\n\t\t\tconst dataURL = this.toDataURL(type, quality).split(',')[1];\r\n\r\n\t\t\tsetTimeout(() => {\r\n\r\n\t\t\t\tconst binStr = atob(dataURL);\r\n\t\t\t\tconst len = binStr.length;\r\n\t\t\t\tconst arr = new Uint8Array(len);\r\n\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tarr[i] = binStr.charCodeAt(i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcallback(new Blob([arr], { type: type || 'image/png' }));\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n","import { ICaseDictionary } from '../../idscan/configuration/CaseDictionary';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class CaseDictionaryService {\r\n\r\n\t// The service will generate arrays from given dictionary as ins and outs for controlling purposes\r\n\tpublic pascals: string[] = [];\r\n\tpublic camels: string[] = [];\r\n\tpublic types: string[] = [];\r\n\r\n\tprivate _dictionary: Record<string, ICaseDictionary>;\r\n\r\n\tconstructor(dictionary: Record<string, ICaseDictionary>) {\r\n\t\tthis._dictionary = dictionary;\r\n\r\n\t\tObject.keys(dictionary).map((key: string) => {\r\n\t\t\tthis.types.push(dictionary[key].type);\r\n\t\t\tthis.pascals.push(dictionary[key].server);\r\n\t\t\tthis.camels.push(dictionary[key].client);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Given the element and type of conversion, this function renames the keys of objects that are found in the arrays.\r\n\t * @param element\r\n\t * @param type\r\n\t */\r\n\tpublic convert(element: Record<string, any> = {}, type: 'beautify' | 'uglify'): Record<string, any> {\r\n\t\tconst destination: 'server' | 'client' = type === 'beautify' ? 'client' : 'server';\r\n\r\n\t\tif (typeof element !== 'object') {\r\n\t\t\treturn element;\r\n\t\t}\r\n\r\n\t\treturn Object.keys(element).reduce((out, key) => {\r\n\t\t\tconst dict: ICaseDictionary = this._dictionary[Object.keys(this._dictionary).find((e) => {\r\n\t\t\t\treturn this._dictionary[e][destination === 'client' ? 'server' : 'client'] === key;\r\n\t\t\t})!];\r\n\r\n\t\t\tconst newKey = (dict && (dict.type === type || dict.type === 'both')) ? dict[destination] : key;\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...out,\r\n\t\t\t\t[newKey]: element[key] instanceof Array ? (element[key] as any[]).map((e) => this.convert(e, type)) : element[key]\r\n\t\t\t};\r\n\t\t}, {});\r\n\t}\r\n}\r\n","import { AUTH_DEFAULTS } from './AuthDefaults';\r\nimport { ENDPOINTS } from './Endpoints';\r\nimport { STORAGE_KEYS } from './StorageKeys';\r\n\r\n/**\r\n * declare VERSION and ENV as global variables.\r\n */\r\ndeclare var VERSION: string;\r\ndeclare var ENV: string;\r\n\r\nexport const constants = {\r\n\tAUTH_DEFAULTS,\r\n\tENDPOINTS,\r\n\tENV,\r\n\tVERSION,\r\n\tSTORAGE_KEYS\r\n};\r\n","module.exports = \"<div class=\\\"light-inner-provider-container\\\">\\r\\n\\t<div>\\r\\n\\t\\t<div data-jcs-element=\\\"identity__document__preview\\\">\\r\\n\\t\\t\\t<div class=\\\"preview-title-container\\\">\\r\\n\\t\\t\\t\\t<h2 class=\\\"preview-title\\\">{{PROVIDER_TITLE_VIEW_ID}}</h2>\\r\\n\\t\\t\\t\\t<span class=\\\"preview-description\\\">{{PROVIDER_SUBTITLE_VIEW_ID}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-mobile\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-mobile-button\\\" data-jcs-element=\\\"preview__page__open__info__id\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_ID}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-inner-container\\\" data-jcs-element=\\\"preview__info__container__id\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-title\\\">{{PREVIEW_INFO_TITLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/licence-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/licence-bad-angle.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/licence-bad-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_ID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/licence-bad-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_ID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"modal-close-button close-preview-info-button\\\" data-jcs-element=\\\"preview__page__close__info__id\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"show-desktop preview-info-container\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-title\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_ID}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<ul class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/licence-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/licence-bad-angle.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/licence-bad-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_ID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/licence-bad-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_ID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div data-jcs-element=\\\"facematch__preview\\\">\\r\\n\\t\\t\\t<div class=\\\"preview-title-container\\\">\\r\\n\\t\\t\\t\\t<h2>{{PROVIDER_TITLE_VIEW_FACEMATCH}}</h2>\\r\\n\\t\\t\\t\\t<span class=\\\"preview-description\\\">{{PROVIDER_SUBTITLE_VIEW_FACEMATCH}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-mobile\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-mobile-button\\\" data-jcs-element=\\\"preview__page__open__info__fm\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-inner-container\\\" data-jcs-element=\\\"preview__info__container__fm\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-title\\\">{{PREVIEW_INFO_TITLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/selfie-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/selfie-partial.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/selfie-glasses.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/selfie-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"modal-close-button close-preview-info-button\\\" data-jcs-element=\\\"preview__page__close__info__fm\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-desktop preview-info-container\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-title\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<ul class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/selfie-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/selfie-partial.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/selfie-glasses.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/selfie-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div data-jcs-element=\\\"address__preview\\\">\\r\\n\\t\\t\\t<div class=\\\"preview-title-container\\\">\\r\\n\\t\\t\\t\\t<h2>{{PROVIDER_TITLE_VIEW_ADDRESS}}</h2>\\r\\n\\t\\t\\t\\t<span class=\\\"preview-description\\\">{{PROVIDER_SUBTITLE_VIEW_ADDRESS}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-mobile\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-mobile-button\\\" data-jcs-element=\\\"preview__page__open__info__poa\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-inner-container\\\" data-jcs-element=\\\"preview__info__container__poa\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-title\\\">{{PREVIEW_INFO_TITLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/address-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-angled.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"modal-close-button close-preview-info-button\\\" data-jcs-element=\\\"preview__page__close__info__poa\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-desktop preview-info-container\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-title\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<ul class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/address-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-angled.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\t\\t<div data-jcs-element=\\\"covid__preview\\\">\\r\\n\\t\\t\\t<div class=\\\"preview-title-container\\\">\\r\\n\\t\\t\\t\\t<h2>{{PROVIDER_TITLE_VIEW_COVID}}</h2>\\r\\n\\t\\t\\t\\t<span class=\\\"preview-description\\\">{{PROVIDER_SUBTITLE_VIEW_COVID}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-mobile\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-mobile-button\\\" data-jcs-element=\\\"preview__page__open__info__covid\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_COVID}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-inner-container\\\" data-jcs-element=\\\"preview__info__container__covid\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-title\\\">{{PREVIEW_INFO_TITLE_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/address-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-angled.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"modal-close-button close-preview-info-button\\\" data-jcs-element=\\\"preview__page__close__info__covid\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-desktop preview-info-container\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-title\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_COVID}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<ul class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/address-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-angled.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\r\\n\\t\\t<div class=\\\"image-preview--container image-preview-container\\\">\\r\\n\\t\\t\\t<img data-jcs-element=\\\"view__preview\\\" class=\\\"image-preview\\\">\\r\\n\\t\\t\\t<div data-jcs-element=\\\"overlay_viewfinder\\\" class=\\\"camera-viewfinder--overlay--transparent\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"loading-animation-container\\\" data-jcs-element=\\\"loading-animation\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"notification notification-blue\\\" data-jcs-element=\\\"attempt__count__container\\\">\\r\\n\\t\\t\\t<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\">\\r\\n\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M0.25 8C0.25 3.71979 3.71979 0.25 8 0.25H8.00081C12.2787 0.254627 15.7454 3.72135 15.75 7.99919L15.75 8C15.75 12.2802 12.2802 15.75 8 15.75C3.71979 15.75 0.25 12.2802 0.25 8ZM7.99958 1.75C4.54799 1.75023 1.75 4.54836 1.75 8C1.75 11.4518 4.54822 14.25 8 14.25C11.4515 14.25 14.2496 11.4522 14.25 8.00081C14.2463 4.55026 11.4501 1.75394 7.99958 1.75ZM8 5C7.44772 5 7 4.55228 7 4C7 3.44772 7.44772 3 8 3C8.55229 3 9 3.44772 9 4C9 4.55228 8.55229 5 8 5ZM7 6.25C6.58579 6.25 6.25 6.58579 6.25 7C6.25 7.41421 6.58579 7.75 7 7.75H7.25V11.25H6.5C6.08579 11.25 5.75 11.5858 5.75 12C5.75 12.4142 6.08579 12.75 6.5 12.75H8H9.5C9.91421 12.75 10.25 12.4142 10.25 12C10.25 11.5858 9.91421 11.25 9.5 11.25H8.75V7C8.75 6.58579 8.41421 6.25 8 6.25H7Z\\\" fill=\\\"#4A88C6\\\" />\\r\\n\\t\\t\\t</svg>\\r\\n\\t\\t\\t<p>{{ATTEMPTS_REMAINING}}<span data-jcs-element=\\\"attempt__counter\\\"></span></p>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div data-jcs-element=\\\"view__status\\\">\\r\\n\\t\\t\\t<p data-jcs-element=\\\"view__status__message\\\"></p>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"button-container button-actions-container\\\">\\r\\n\\t\\t\\t<button data-jcs-element=\\\"view__retry\\\" class=\\\"button button--secondary button-full-xs\\\" aria-label=\\\"{{VIEW_RETRY}}\\\">\\r\\n\\t\\t\\t\\t{{VIEW_RETRY}}\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t\\t<button data-jcs-element=\\\"view__upload\\\" class=\\\"button button--primary button-full-xs\\\" aria-label=\\\"{{VIEW_UPLOAD}}\\\">\\r\\n\\t\\t\\t\\t{{VIEW_UPLOAD}}\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div data-jcs-element=\\\"view__status\\\">\\r\\n\\t\\t\\t<p data-jcs-element=\\\"view__status__message\\\"></p>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\";","module.exports = \"<div class=\\\"light-inner-provider-container\\\">\\r\\n\\t<div>\\r\\n\\t\\t<div data-jcs-element=\\\"identity__document__file__upload\\\">\\r\\n\\t\\t\\t<div class=\\\"preview-title-container\\\">\\r\\n\\t\\t\\t\\t<h2 class=\\\"preview-title\\\">{{PROVIDER_TITLE_FILESYSTEM_ID}}</h2>\\r\\n\\t\\t\\t\\t<span class=\\\"preview-description\\\">{{PROVIDER_SUBTITLE_FILESYSTEM_ID}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-mobile\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-mobile-button\\\" data-jcs-element=\\\"preview__page__open__info__id\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_ID}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-inner-container\\\" data-jcs-element=\\\"preview__info__container__id\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-title\\\">{{PREVIEW_INFO_TITLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/licence-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/licence-bad-angle.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/licence-bad-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_ID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/licence-bad-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_ID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"modal-close-button close-preview-info-button\\\"\\r\\n\\t\\t\\t\\t\\t\\tdata-jcs-element=\\\"preview__page__close__info__id\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-desktop preview-info-container\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-title\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_ID}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<ul class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/licence-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/licence-bad-angle.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/licence-bad-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_ID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/licence-bad-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_ID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t<h3>{{FILESYSTEM_IDENTITY_DOCUMENT}} - <span data-jcs-element=\\\"info__journey__action\\\" class=\\\"info-item__value\\\"></span></h3>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div data-jcs-element=\\\"facematch__file__upload\\\">\\r\\n\\t\\t\\t<div class=\\\"preview-title-container\\\">\\r\\n\\t\\t\\t\\t<h2>{{PROVIDER_TITLE_FILESYSTEM_FACEMATCH}}</h2>\\r\\n\\t\\t\\t\\t<span class=\\\"preview-description\\\">{{PROVIDER_SUBTITLE_FILESYSTEM_FACEMATCH}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-mobile\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-mobile-button\\\" data-jcs-element=\\\"preview__page__open__info__fm\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-inner-container\\\" data-jcs-element=\\\"preview__info__container__fm\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-title\\\">{{PREVIEW_INFO_TITLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-partial.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-glasses.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/selfie-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"modal-close-button close-preview-info-button\\\"\\r\\n\\t\\t\\t\\t\\t\\tdata-jcs-element=\\\"preview__page__close__info__fm\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-desktop preview-info-container\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-title\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<ul class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/selfie-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/selfie-partial.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/selfie-glasses.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/selfie-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_FACEMATCH}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t<h3><span>{{FILESYSTEM_FACEMATCH}}</span></h3>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div data-jcs-element=\\\"address__file__upload\\\">\\r\\n\\t\\t\\t<div class=\\\"preview-title-container\\\">\\r\\n\\t\\t\\t\\t<h2>{{PROVIDER_TITLE_FILESYSTEM_ADDRESS}}</h2>\\r\\n\\t\\t\\t\\t<span class=\\\"preview-description\\\">{{PROVIDER_SUBTITLE_FILESYSTEM_ADDRESS}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-mobile\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-mobile-button\\\" data-jcs-element=\\\"preview__page__open__info__poa\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-inner-container\\\" data-jcs-element=\\\"preview__info__container__poa\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-title\\\">{{PREVIEW_INFO_TITLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/address-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/address-angled.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/address-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/address-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"modal-close-button close-preview-info-button\\\"\\r\\n\\t\\t\\t\\t\\t\\tdata-jcs-element=\\\"preview__page__close__info__poa\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-desktop preview-info-container\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-title\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<ul class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/address-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-angled.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_ADDRESS}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t<h3><span>{{FILESYSTEM_ADDRESS}}</span></h3>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\r\\n\\t\\t<div data-jcs-element=\\\"covid__file__upload\\\">\\r\\n\\t\\t\\t<div class=\\\"preview-title-container\\\">\\r\\n\\t\\t\\t\\t<h2>{{PROVIDER_TITLE_FILESYSTEM_COVID}}</h2>\\r\\n\\t\\t\\t\\t<span class=\\\"preview-description\\\">{{PROVIDER_SUBTITLE_FILESYSTEM_COVID}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-mobile\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-mobile-button\\\" data-jcs-element=\\\"preview__page__open__info__covid\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_COVID}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-inner-container\\\" data-jcs-element=\\\"preview__info__container__covid\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-title\\\">{{PREVIEW_INFO_TITLE_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/address-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/address-angled.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"id-example-container-row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/address-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsrc=\\\"\" + require(\"../../../assets/images/address-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"modal-close-button close-preview-info-button\\\"\\r\\n\\t\\t\\t\\t\\t\\tdata-jcs-element=\\\"preview__page__close__info__covid\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\\"24\\\" height=\\\"24\\\" class=\\\"help-button-modal-close\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"11\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M16 16L8 8M8 16L16 8\\\" stroke-width=\\\"2\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<p class=\\\"action-caption\\\">{{REQUIRED_ACTION_Close}}</p>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"show-desktop preview-info-container\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"preview-info-title\\\">\\r\\n\\t\\t\\t\\t\\t<img class=\\\"preview-info-icon\\\" src=\\\"\" + require(\"../../../assets/images/info-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t<span class=\\\"preview-info-main-text\\\">{{PREVIEW_INFO_TITLE_COVID}}</span>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<ul class=\\\"id-example-container\\\">\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-good\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-success\\\" src=\\\"\" + require(\"../../../assets/images/address-good.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-success\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-success\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/green-check-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_GOOD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_GOOD_EXAMPLE_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-angle-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-angled.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_ANGLE_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-cover-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-covered.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_COVER_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"id-example id-example-blur-check\\\">\\r\\n\\t\\t\\t\\t\\t\\t<img class=\\\"sample-image sample-image-error\\\" src=\\\"\" + require(\"../../../assets/images/address-blurred.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"separating-rectangle separating-rectangle-error\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"preview-label preview-label-error\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"preview-label-icon\\\" src=\\\"\" + require(\"../../../assets/images/red-x-icon.svg\") + \"\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>{{PREVIEW_INFO_BAD}}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"preview-info-example-text \\\">{{PREVIEW_INFO_BAD_EXAMPLE_BLUR_COVID}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t<h3><span>{{FILESYSTEM_COVID}}</span></h3>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n\\r\\n\\t\\t<div data-jcs-element=\\\"supported__types\\\">\\r\\n\\t\\t\\t<p class=\\\"color-gray\\\">{{FILESYSTEM_SUPPORTED_TYPES_START}}<i>{{FILESYSTEM_SUPPORTED_TYPES_END}}</i></p>\\r\\n\\t\\t\\t<p class=\\\"color-gray\\\">{{FILESYSTEM_MAX_FILE_SIZE}}</p>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div data-jcs-element=\\\"supported__types__selfie\\\">\\r\\n\\t\\t\\t<p class=\\\"color-gray\\\">{{FILESYSTEM_SUPPORTED_TYPES_START_SELFIE}}</p>\\r\\n\\t\\t\\t<p class=\\\"color-gray\\\">{{FILESYSTEM_MAX_FILE_SIZE}}</p>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"file-upload-container\\\" data-jcs-element=\\\"file__drop__box\\\">\\r\\n\\t\\t\\t<form class=\\\"file-input--container\\\">\\r\\n\\t\\t\\t\\t<input data-jcs-element=\\\"file__input\\\" class=\\\"file-input\\\" id=\\\"jcs__file__input\\\" type=\\\"file\\\" />\\r\\n\\t\\t\\t</form>\\r\\n\\t\\t\\t<div class=\\\"drag-and-drop-container\\\">\\r\\n\\t\\t\\t\\t<svg width=\\\"40\\\" height=\\\"40\\\" viewBox=\\\"0 0 40 40\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t\\t\\t\\t\\t<path\\r\\n\\t\\t\\t\\t\\t\\td=\\\"M28.75 18.75C34.2733 18.75 38.75 23.2267 38.75 28.75C38.75 34.2733 34.2733 38.75 28.75 38.75C23.2267 38.75 18.75 34.2733 18.75 28.75C18.75 23.2267 23.2267 18.75 28.75 18.75Z\\\"\\r\\n\\t\\t\\t\\t\\t\\tstroke=\\\"#7E878F\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t<path d=\\\"M28.75 33.75V23.75\\\" stroke=\\\"#7E878F\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t<path d=\\\"M28.75 23.75L25 27.5\\\" stroke=\\\"#7E878F\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t<path d=\\\"M28.75 23.75L32.5 27.5\\\" stroke=\\\"#7E878F\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t<path d=\\\"M6.25 11.25H23.75\\\" stroke=\\\"#7E878F\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t<path d=\\\"M6.25 18.75H16.25\\\" stroke=\\\"#7E878F\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t<path d=\\\"M6.25 26.25H12.5\\\" stroke=\\\"#7E878F\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\"\\r\\n\\t\\t\\t\\t\\t\\tstroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t\\t<path\\r\\n\\t\\t\\t\\t\\t\\td=\\\"M12.5 33.75H3.75C2.37 33.75 1.25 32.63 1.25 31.25V3.75C1.25 2.37 2.37 1.25 3.75 1.25H21.465C22.1283 1.25 22.7633 1.51333 23.2317 1.98167L28.0183 6.76833C28.4867 7.23667 28.75 7.87167 28.75 8.535V12.5\\\"\\r\\n\\t\\t\\t\\t\\t\\tstroke=\\\"#7E878F\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t<span class=\\\"color-gray\\\">{{FILESYSTEM_DRAG_DROP}}</span>\\r\\n\\t\\t\\t\\t<span class=\\\"color-gray\\\">{{FILESYSTEM_OR}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<button id=\\\"fileuploadBtn\\\" data-jcs-element=\\\"file__input__Button\\\"\\r\\n\\t\\t\\t\\tclass=\\\"button button--secondary\\\">{{FILESYSTEM_CHOOSE}}</button>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div>\\r\\n\\t\\t\\t<p class=\\\"check-error-color\\\" data-jcs-element=\\\"file__too__large__error\\\">{{FILESYSTEM_CHECK_FILE_TOO_BIG}}\\r\\n\\t\\t\\t</p>\\r\\n\\t\\t\\t<p class=\\\"check-error-color\\\" data-jcs-element=\\\"invalid__format__error\\\">\\r\\n\\t\\t\\t\\t{{FILESYSTEM_CHECK_FILE_INCORRECT_FORMAT}}</p>\\r\\n\\t\\t\\t<p data-jcs-element=\\\"uploading__file__without__preview\\\">{{FILESYSTEM_UPLOADING}}</p>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"notification notification-blue\\\" data-jcs-element=\\\"attempt__count__container\\\">\\r\\n\\t\\t\\t<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\">\\r\\n\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\"\\r\\n\\t\\t\\t\\t\\td=\\\"M0.25 8C0.25 3.71979 3.71979 0.25 8 0.25H8.00081C12.2787 0.254627 15.7454 3.72135 15.75 7.99919L15.75 8C15.75 12.2802 12.2802 15.75 8 15.75C3.71979 15.75 0.25 12.2802 0.25 8ZM7.99958 1.75C4.54799 1.75023 1.75 4.54836 1.75 8C1.75 11.4518 4.54822 14.25 8 14.25C11.4515 14.25 14.2496 11.4522 14.25 8.00081C14.2463 4.55026 11.4501 1.75394 7.99958 1.75ZM8 5C7.44772 5 7 4.55228 7 4C7 3.44772 7.44772 3 8 3C8.55229 3 9 3.44772 9 4C9 4.55228 8.55229 5 8 5ZM7 6.25C6.58579 6.25 6.25 6.58579 6.25 7C6.25 7.41421 6.58579 7.75 7 7.75H7.25V11.25H6.5C6.08579 11.25 5.75 11.5858 5.75 12C5.75 12.4142 6.08579 12.75 6.5 12.75H8H9.5C9.91421 12.75 10.25 12.4142 10.25 12C10.25 11.5858 9.91421 11.25 9.5 11.25H8.75V7C8.75 6.58579 8.41421 6.25 8 6.25H7Z\\\"\\r\\n\\t\\t\\t\\t\\tfill=\\\"#4A88C6\\\" />\\r\\n\\t\\t\\t</svg>\\r\\n\\t\\t\\t<p>{{ATTEMPTS_REMAINING}}<span\\r\\n\\t\\t\\t\\t\\tdata-jcs-element=\\\"attempt__counter\\\"></span></p>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\";","import CameraService, { CameraFacingMode } from '../../../helpers/classes/CameraService';\r\nimport EventService from '../../../helpers/classes/EventService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport RetinaFactory from '../../../retina/factory';\r\nimport { CortixResponseAction, ICortixResponse } from '../../../retina/types';\r\nimport DataService, { DataStoreType } from '../../classes/DataService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport JourneyManager from '../../classes/JourneyManager';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { UploadResponse } from '../../interfaces/UploadResponse';\r\nimport { IIdScanData } from '../../interfaces/DataFormats';\r\nimport { IExtendedDocument } from '../../interfaces/Document';\r\nimport { removeNullOrUndefined } from '../../../helpers/functions/object';\r\nimport { HintType } from '../../enums/Camera';\r\nimport * as lottie from 'lottie-web/build/player/lottie';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { IUnsubscribable } from '../../interfaces/Unsubscribable';\r\nimport { AnimationService } from '../../../helpers/classes/AnimationService';\r\n\r\nexport class LivenessStep {\r\n\tpublic static render(this: JourneyContainer) {\r\n\t\treturn CameraService.getVideoCameras()\r\n\t\t\t.then((cameras) => cameras.map((camera) => ({\r\n\t\t\t\tname: camera.label,\r\n\t\t\t\tvalue: camera.deviceId,\r\n\t\t\t})))\r\n\t\t\t.then((cameras) => {\r\n\t\t\t\tLivenessStep.cameras = cameras;\r\n\t\t\t\treturn TemplateService.renderToContainer(this._container, Templates.Liveness, { cameras })\r\n\t\t\t})\r\n\t\t\t.then((container) => this.changeCameraStream(undefined, undefined, !this._config.hideLogo, HintType.NONE, undefined, CameraFacingMode.FRONT).then(() => container))\r\n\t\t\t.then((container) => {\r\n\t\t\t\treturn RetinaFactory\r\n\t\t\t\t\t.getNewService(\r\n\t\t\t\t\t\tthis._journey!.id,\r\n\t\t\t\t\t\tcontainer,\r\n\t\t\t\t\t\tJourneyManager.getToken()!,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tautoRun: false,\r\n\t\t\t\t\t\t\tcortexApiController: 'LivenessStreamingSocket',\r\n\t\t\t\t\t\t\tcortexApiPath: this._config.backendUrl.split('//')[1] + '/idscanEnterpriseSVC/',\r\n\t\t\t\t\t\t\tframeSubmissionDelay: 0.001,\r\n\t\t\t\t\t\t\tgrayscale: true,\r\n\t\t\t\t\t\t\timageQuality: 75,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.then((mediaInstance) => {\r\n\t\t\t\t\t\tTemplateService.getElements(this._container, {\r\n\t\t\t\t\t\t\tcameraSelect: '[data-jcs-element=\"camera__select\"]'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(({ cameraSelect }) => {\r\n\t\t\t\t\t\t\t\tif (cameraSelect instanceof HTMLSelectElement) {\r\n\t\t\t\t\t\t\t\t\tRenderingService.updateSelect(cameraSelect, LivenessStep.cameras);\r\n\t\t\t\t\t\t\t\t\tif (LivenessStep.cameras && LivenessStep.cameras.length > 1) {\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.showObject(cameraSelect);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.hideObject(cameraSelect);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tmediaInstance.emitter.on(CortixResponseAction.StopCapturing, (msg: ICortixResponse) => {\r\n\r\n\t\t\t\t\t\t\tconst data = JourneyManager.caseDic(msg.workflowState);\r\n\r\n\t\t\t\t\t\t\tDataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN)\r\n\t\t\t\t\t\t\t\t.update(LivenessStep.parseResponseData(data));\r\n\r\n\t\t\t\t\t\t\tthis._journey!.update(data)\r\n\t\t\t\t\t\t\t\t.then(() => mediaInstance.terminate())\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tif (LivenessStep.livenessAnimation !== undefined && LivenessStep.livenessAnimation !== null) {\r\n\t\t\t\t\t\t\t\t\t\tLivenessStep.livenessAnimation.stop();\r\n\t\t\t\t\t\t\t\t\t\tLivenessStep.livenessAnimation.destroy();\r\n\t\t\t\t\t\t\t\t\t\tLivenessStep.livenessAnimation = undefined;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (LivenessStep.cameraPoseSubscription !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\tLivenessStep.cameraPoseSubscription.unsubscribe();\r\n\t\t\t\t\t\t\t\t\t\tLivenessStep.cameraPoseSubscription = undefined;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then(() => this.evaluate());\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tmediaInstance.emitter.on(CortixResponseAction.FinishLivenessCapturing, (msg: ICortixResponse) => {\r\n\t\t\t\t\t\t\tEventService.publish(JourneyEvent.LIVENESS_PROCESSING, { step: Templates.Liveness });\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tmediaInstance.emitter.on(CortixResponseAction.Error, () => {\r\n\t\t\t\t\t\t\tmediaInstance.terminate()\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tif (LivenessStep.livenessAnimation !== undefined && LivenessStep.livenessAnimation !== null) {\r\n\t\t\t\t\t\t\t\t\t\tLivenessStep.livenessAnimation.stop();\r\n\t\t\t\t\t\t\t\t\t\tLivenessStep.livenessAnimation.destroy();\r\n\t\t\t\t\t\t\t\t\t\tLivenessStep.livenessAnimation = undefined;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (LivenessStep.cameraPoseSubscription !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\tLivenessStep.cameraPoseSubscription.unsubscribe();\r\n\t\t\t\t\t\t\t\t\t\tLivenessStep.cameraPoseSubscription = undefined;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then(() => this.evaluate());\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tmediaInstance.emitter.on(CortixResponseAction.Close, ({ code }: CloseEvent) => {\r\n\t\t\t\t\t\t\tEventService.publish(JourneyEvent.LIVENESS_FINISHED, { step: Templates.Liveness });\r\n\t\t\t\t\t\t\tif (code !== 1000) {\r\n\t\t\t\t\t\t\t\treturn mediaInstance.terminate()\r\n\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\tif (LivenessStep.livenessAnimation !== undefined && LivenessStep.livenessAnimation !== null) {\r\n\t\t\t\t\t\t\t\t\t\t\tLivenessStep.livenessAnimation.stop();\r\n\t\t\t\t\t\t\t\t\t\t\tLivenessStep.livenessAnimation.destroy();\r\n\t\t\t\t\t\t\t\t\t\t\tLivenessStep.livenessAnimation = undefined;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (LivenessStep.cameraPoseSubscription !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tLivenessStep.cameraPoseSubscription.unsubscribe();\r\n\t\t\t\t\t\t\t\t\t\t\tLivenessStep.cameraPoseSubscription = undefined;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.then(() => this.evaluate());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.then(() => TemplateService.getElements(this._container, {\r\n\t\t\t\tcameraViewfinder: '[data-jcs-element=\"camera__viewfinder\"]',\r\n\t\t\t\thintAnimationContainer: '[data-jcs-element=\"animation__viewfinder\"]',\r\n\t\t\t\tanimationContainer: '[data-jcs-element=\"animation__container\"]',\r\n\t\t\t\tanimationTitle: '[data-jcs-element=\"animation__title\"]',\r\n\t\t\t\tanimationText: '[data-jcs-element=\"animation__text\"]',\r\n\t\t\t\tlivenessStart: '[data-jcs-element=\"retina__start\"]',\r\n\t\t\t\tstartContainerOverlay: '[data-jcs-element=\"liveness__start__button__container__overlay\"]',\r\n\t\t\t\tstartContainerButton: '[data-jcs-element=\"liveness__start__button__container__button\"]',\r\n\t\t\t}))\r\n\t\t\t.then(({ cameraViewfinder, hintAnimationContainer, animationContainer, animationTitle, animationText, livenessStart, startContainerOverlay, startContainerButton }) => {\r\n\t\t\t\tif (animationContainer instanceof HTMLDivElement && animationTitle instanceof HTMLParagraphElement && animationText instanceof HTMLParagraphElement) {\r\n\t\t\t\t\tLivenessStep.cameraPoseSubscription = EventService.subscribe(JourneyEvent.CAMERA_POSE, (actionData: any) => {\r\n\t\t\t\t\t\tLivenessStep.updateAnimation.call(this, animationContainer, animationTitle, animationText, actionData);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (startContainerOverlay instanceof HTMLDivElement && startContainerButton instanceof HTMLDivElement && hintAnimationContainer instanceof HTMLDivElement && cameraViewfinder instanceof HTMLCanvasElement) {\r\n\t\t\t\t\tEventService.subscribe(\r\n\t\t\t\t\t\tJourneyEvent.CAMERA_CANVAS_RESIZE,\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tLivenessStep.handleCameraSelectedChange.call(this, hintAnimationContainer, startContainerOverlay, startContainerButton, cameraViewfinder);\r\n\t\t\t\t\t\t\tRenderingService.showObject(startContainerOverlay);\r\n\t\t\t\t\t\t\tRenderingService.showObject(startContainerButton);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif (livenessStart instanceof HTMLElement) {\r\n\t\t\t\t\tlivenessStart.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.hideObject(startContainerOverlay);\r\n\t\t\t\t\t\tRenderingService.hideObject(startContainerButton);\r\n\t\t\t\t\t\tRenderingService.showObject(hintAnimationContainer, 'flex');\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_STEP, { step: Templates.Liveness }));\r\n\t}\r\n\r\n\tprivate static livenessAnimation: lottie.AnimationItem | undefined;\r\n\tprivate static cameraPoseSubscription: IUnsubscribable | undefined;\r\n\tprivate static cameras: { name: string; value: string; }[];\r\n\r\n\tprivate static handleCameraSelectedChange(this: JourneyContainer, animationContainer: HTMLDivElement, startContainerOverlay: HTMLDivElement, startContainerButton: HTMLDivElement, canvasContainer: HTMLCanvasElement) {\r\n\t\ttry {\r\n\t\t\tanimationContainer.style.height = `${canvasContainer.clientHeight}px`;\r\n\t\t\tanimationContainer.style.width = `${canvasContainer.clientWidth}px`;\r\n\t\t\tstartContainerOverlay.style.height = `${canvasContainer.clientHeight}px`;\r\n\t\t\tstartContainerOverlay.style.width = `${canvasContainer.clientWidth}px`;\r\n\t\t\tstartContainerButton.style.height = `${canvasContainer.clientHeight}px`;\r\n\t\t\tstartContainerButton.style.width = `${canvasContainer.clientWidth}px`;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static updateAnimation(this: JourneyContainer, animationContainer: HTMLDivElement, animationTitle: HTMLParagraphElement, animationText: HTMLParagraphElement, poseAction: any) {\r\n\t\ttry {\r\n\t\t\tconsole.log(poseAction);\r\n\t\t\tif (LivenessStep.livenessAnimation !== undefined && LivenessStep.livenessAnimation !== null) {\r\n\t\t\t\tLivenessStep.livenessAnimation.stop();\r\n\t\t\t\tLivenessStep.livenessAnimation.destroy();\r\n\t\t\t\tLivenessStep.livenessAnimation = undefined;\r\n\t\t\t}\r\n\t\t\tswitch (poseAction.pose) {\r\n\t\t\t\tcase 'Look Straight':\r\n\t\t\t\t\tRenderingService.setText(animationTitle, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_LOOK_STRAIGHT_TITLE));\r\n\t\t\t\t\tRenderingService.setText(animationText, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_LOOK_STRAIGHT_TEXT));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Smile':\r\n\t\t\t\t\tRenderingService.setText(animationContainer, '');\r\n\t\t\t\t\tLivenessStep.livenessAnimation = AnimationService.CreateAnimation(animationContainer, this.assetsFolder + '/animations/smile.json', true, true, {});\r\n\t\t\t\t\tRenderingService.setText(animationTitle, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_SMILE_TITLE));\r\n\t\t\t\t\tRenderingService.setText(animationText, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_SMILE_TEXT));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Frown':\r\n\t\t\t\t\tRenderingService.setText(animationContainer, '');\r\n\t\t\t\t\tLivenessStep.livenessAnimation = AnimationService.CreateAnimation(animationContainer, this.assetsFolder + '/animations/frown.json', true, true, {});\r\n\t\t\t\t\tRenderingService.setText(animationTitle, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_FROWN_TITLE));\r\n\t\t\t\t\tRenderingService.setText(animationText, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_FROWN_TEXT));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Tilt Left':\r\n\t\t\t\t\tRenderingService.setText(animationContainer, '');\r\n\t\t\t\t\tLivenessStep.livenessAnimation = AnimationService.CreateAnimation(animationContainer, this.assetsFolder + '/animations/look-left.json', true, true, {});\r\n\t\t\t\t\tRenderingService.setText(animationTitle, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_LOOK_LEFT_TITLE));\r\n\t\t\t\t\tRenderingService.setText(animationText, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_LOOK_LEFT_TEXT));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Tilt Right':\r\n\t\t\t\t\tRenderingService.setText(animationContainer, '');\r\n\t\t\t\t\tRenderingService.setText(animationTitle, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_LOOK_RIGHT_TITLE));\r\n\t\t\t\t\tRenderingService.setText(animationText, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_LOOK_RIGHT_TEXT));\r\n\t\t\t\t\tLivenessStep.livenessAnimation = AnimationService.CreateAnimation(animationContainer, this.assetsFolder + '/animations/look-right.json', true, true, {});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Tilt Up':\r\n\t\t\t\t\tRenderingService.setText(animationContainer, '');\r\n\t\t\t\t\tRenderingService.setText(animationTitle, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_LOOK_UP_TITLE));\r\n\t\t\t\t\tRenderingService.setText(animationText, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_LOOK_UP_TEXT));\r\n\t\t\t\t\tLivenessStep.livenessAnimation = AnimationService.CreateAnimation(animationContainer, this.assetsFolder + '/animations/look-up.json', true, true, {});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'Tilt Down':\r\n\t\t\t\t\tRenderingService.setText(animationContainer, '');\r\n\t\t\t\t\tRenderingService.setText(animationTitle, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_LOOK_DOWN_TITLE));\r\n\t\t\t\t\tRenderingService.setText(animationText, LanguageService.getTranslation(TranslationKey.LIVENESS_ACTION_LOOK_DOWN_TEXT));\r\n\t\t\t\t\tLivenessStep.livenessAnimation = AnimationService.CreateAnimation(animationContainer, this.assetsFolder + '/animations/look-down.json', true, true, {});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.log(\"Unknown action requested for liveness: \" + poseAction);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static parseResponseData = ({\r\n\t\tentryData,\r\n\t\tentryDateTime,\r\n\t\tjourneyId,\r\n\t\trequiredAction,\r\n\t\thighLevelResult,\r\n\t\tcurrentResult,\r\n\t\thasError,\r\n\t\tisFinished\r\n\t}: UploadResponse): Partial<IIdScanData> => ({\r\n\t\tjourneyId,\r\n\t\tjourneyReference: entryData.scanReference,\r\n\t\tdocuments: (entryData.documents || []).map((doc): IExtendedDocument => removeNullOrUndefined({\r\n\t\t\texpirationDate: doc.expirationDate,\r\n\t\t\tissueDate: doc.issueDate,\r\n\t\t\tissueNumber: doc.issueNumber,\r\n\t\t\tnumber: doc.number,\r\n\t\t\ttype: doc.type,\r\n\t\t\tblurCheck: entryData.blurCheck === 'Good',\r\n\t\t\tglareCheck: entryData.blurCheck === 'Good',\r\n\t\t\tlowResolutionCheck: entryData.lowResolutionCheck === 'Good',\r\n\t\t\tscanReference: entryData.scanReference,\r\n\t\t\tscannerIp: entryData.scannerIp,\r\n\t\t\tdateTime: entryDateTime ? new Date(entryDateTime) : undefined\r\n\t\t})),\r\n\t\trequiredAction,\r\n\t\thighLevelResult,\r\n\t\tcurrentResult,\r\n\t\thasError,\r\n\t\tisFinished\r\n\t})\r\n\r\n}\r\n","import { resolve } from 'url';\r\nimport EventService from '../../../helpers/classes/EventService';\r\nimport { ExceptionManager } from '../../../helpers/classes/ExceptionManager';\r\nimport HttpService from '../../../helpers/classes/HttpService';\r\nimport RenderingService, { ISelectItem } from '../../../helpers/classes/RenderingService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport { HighLevelResult } from '../../enums/HighLevelResult';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { ENDPOINTS } from '../../configuration/Endpoints';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\n\r\nexport class TermsAndConditionsStep {\r\n\r\n\tpublic static render(this: JourneyContainer) {\r\n\t\treturn TemplateService.renderToContainer(this._container, Templates.TermsAndConditions)\r\n\t\t\t.then((element) => TemplateService.getElements(element, {\r\n\t\t\t\ttermsAndConditionsModal: '[data-jcs-element=\"terms__and__conditions__container\"]',\r\n\t\t\t\ttermsAndConditionsTickBox1: '[data-jcs-element=\"terms__and__conditions__tickbox1\"]',\r\n\t\t\t\ttermsAndConditionsTickBox1Text: '[data-jcs-element=\"terms__and__conditions__tickbox1text\"]',\r\n\t\t\t\ttermsAndConditionsTickBox2: '[data-jcs-element=\"terms__and__conditions__tickbox2\"]',\r\n\t\t\t\ttermsAndConditionsTickBox2Text: '[data-jcs-element=\"terms__and__conditions__tickbox2text\"]',\r\n\t\t\t\ttermsAndConditionsModalAgree: '[data-jcs-element=\"terms__and__conditions__modal__agree\"',\r\n\t\t\t\ttermsAndConditionsModalDisagree: '[data-jcs-element=\"terms__and__conditions__modal__disagree\"',\r\n\t\t\t\ttermsAndConditionsModalText: '[data-jcs-element=\"terms__and__conditions__text\"]'\r\n\t\t\t}))\r\n\t\t\t.then(({ termsAndConditionsModal, termsAndConditionsTickBox1, termsAndConditionsTickBox1Text, termsAndConditionsTickBox2, termsAndConditionsTickBox2Text, termsAndConditionsModalAgree, termsAndConditionsModalDisagree, termsAndConditionsModalText }) => {\r\n\t\t\t\tif (\r\n\t\t\t\t\ttermsAndConditionsModal instanceof HTMLElement &&\r\n\t\t\t\t\ttermsAndConditionsTickBox1 instanceof HTMLInputElement &&\r\n\t\t\t\t\ttermsAndConditionsTickBox1Text instanceof HTMLLabelElement &&\r\n\t\t\t\t\ttermsAndConditionsTickBox2 instanceof HTMLInputElement &&\r\n\t\t\t\t\ttermsAndConditionsTickBox2Text instanceof HTMLLabelElement &&\r\n\t\t\t\t\ttermsAndConditionsModalAgree instanceof HTMLElement &&\r\n\t\t\t\t\ttermsAndConditionsModalDisagree instanceof HTMLElement &&\r\n\t\t\t\t\ttermsAndConditionsModalText instanceof HTMLElement\r\n\t\t\t\t) {\r\n\t\t\t\t\tRenderingService.hideObject(termsAndConditionsModal);\r\n\r\n\t\t\t\t\tTermsAndConditionsStep.getTermsAndConditionsConfigsFromBackend(this, termsAndConditionsModal, termsAndConditionsModalText, termsAndConditionsTickBox1, termsAndConditionsTickBox1Text, termsAndConditionsTickBox2, termsAndConditionsTickBox2Text);\r\n\r\n\t\t\t\t\ttermsAndConditionsModalAgree.addEventListener('click', () => {\r\n\t\t\t\t\t\tif (this._isPredefinedJourney || (termsAndConditionsTickBox1.checked && termsAndConditionsTickBox2.checked)) {\r\n\t\t\t\t\t\t\tRenderingService.hideObject(termsAndConditionsModal);\r\n\t\t\t\t\t\t\tthis._isTCCAccepted = true;\r\n\t\t\t\t\t\t\tthis.evaluate(false, this._isPredefinedJourney);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\ttermsAndConditionsModalDisagree.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.hideObject(termsAndConditionsModal);\r\n\t\t\t\t\t\tthis._journey!.cancel(HighLevelResult.TCCDisagree);\r\n\t\t\t\t\t\tthis.evaluate();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.TemplateException(TranslationKey.EXCEPTION_TEMPLATE_ELEMENTS_MISSING));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_STEP, { step: Templates.TermsAndConditions }));\r\n\t}\r\n\r\n\tprivate static getTermsAndConditionsConfigsFromBackend(journeyContainer: any, termsAndConditionsModal: HTMLElement, termsAndConditionsModalText: HTMLElement, termsAndConditionsTickBox1: HTMLInputElement, termsAndConditionsTickBox1Text: HTMLElement, termsAndConditionsTickBox2: HTMLInputElement, termsAndConditionsTickBox2Text: HTMLElement): any {\r\n\t\tHttpService.get(ENDPOINTS.getTCCConfigs).then((result) => {\r\n\t\t\tif (result.ConsentCaptureEnabled === false) {\r\n\t\t\t\tRenderingService.hideObject(termsAndConditionsModal);\r\n\t\t\t\tjourneyContainer._isTCCAccepted = true;\r\n\t\t\t\tjourneyContainer.evaluate(undefined, false, true);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tRenderingService.showObject(termsAndConditionsModal);\r\n\r\n\t\t\ttermsAndConditionsModalText.innerHTML = result.TCCText;\r\n\t\t\ttermsAndConditionsTickBox1Text.innerHTML = LanguageService.getTranslation(TranslationKey.ACCEPT_TERMS_AND_CONDITIONS);\r\n\t\t\ttermsAndConditionsTickBox2Text.innerHTML = LanguageService.getTranslation(TranslationKey.CONSENT_USE_BIOMETRIC_DATA);\r\n\t\t})\r\n\t}\r\n}\r\n","import { HttpRequestService } from './httpRequestService';\r\nimport { RetinaService } from './retinaService';\r\nimport { IRetinaService, IRetinaSettings } from './types';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class RetinaFactory {\r\n\r\n\tprivate _service?: IRetinaService;\r\n\r\n\tpublic getService = (\r\n\t\tjourneyId: string,\r\n\t\tcontainer: HTMLElement,\r\n\t\tauthenticationToken: string,\r\n\t\tretinaSettings?: IRetinaSettings\r\n\t): Promise<IRetinaService> => {\r\n\t\tif (this._service) {\r\n\t\t\treturn Promise.resolve(this._service);\r\n\t\t} else {\r\n\t\t\treturn this.getNewService(journeyId, container, authenticationToken, retinaSettings);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getNewService = (\r\n\t\tjourneyId: string,\r\n\t\tcontainer: HTMLElement,\r\n\t\tauthenticationToken: string,\r\n\t\tretinaSettings?: IRetinaSettings\r\n\t): Promise<IRetinaService> => {\r\n\t\tHttpRequestService.authenticationToken = authenticationToken;\r\n\r\n\t\treturn this.terminateService()\r\n\t\t\t.then(() => this._service = new RetinaService(journeyId, container, retinaSettings))\r\n\t\t\t.then((service) => service.reset(journeyId));\r\n\t}\r\n\r\n\tpublic terminateService = () => {\r\n\t\tif (this._service) {\r\n\t\t\treturn this._service.terminate();\r\n\t\t} else {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default new RetinaFactory();\r\n","/**\r\n * Enum for user Document Source which is used in upload\r\n *\r\n * @public\r\n */\r\nexport enum DocumentSource {\r\n\tIDENTITY = 2,\r\n\tADDRESS\r\n}\r\n","import * as deepMerge from 'deepmerge';\r\nimport { EventEmitter } from 'events';\r\nimport * as fastDeepEqual from 'fast-deep-equal';\r\nimport { IDataStoreFormat } from '../interfaces/DataFormats';\r\n\r\nexport enum DataStoreEvents {\r\n\tCHANGE = 'CHANGE',\r\n\tRESET = 'RESET',\r\n}\r\n\r\nexport class DataStore<T extends IDataStoreFormat = any> extends EventEmitter {\r\n\r\n\tprivate _default: T;\r\n\tprivate _state: T;\r\n\r\n\tconstructor(defaults: T) {\r\n\t\tsuper();\r\n\r\n\t\tthis._default = deepMerge<T>({}, defaults);\r\n\t\tthis._state = deepMerge<T>({}, this._default);\r\n\t}\r\n\r\n\tpublic on = (event: DataStoreEvents, listener: (state: T) => void): this => super.on(event, listener);\r\n\r\n\tpublic getState = (): T => deepMerge<T>({}, this._state);\r\n\r\n\tpublic update = (updates: Partial<T>): this => {\r\n\t\tconst previousState = this._state;\r\n\t\tconst nextState = deepMerge<T>(this._state, updates);\r\n\r\n\t\tthis._state = nextState;\r\n\r\n\t\tif (!fastDeepEqual(previousState, nextState)) {\r\n\t\t\tthis.emit(DataStoreEvents.CHANGE, this.getState());\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic reset = (): this => {\r\n\t\tthis._state = deepMerge<T>({}, this._default);\r\n\r\n\t\tthis.emit(DataStoreEvents.RESET, this.getState());\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n}\r\n","/**\r\n * @internal\r\n */\r\nimport { AxiosRequestConfig, AxiosResponse } from 'axios';\r\n\r\n/**\r\n * Generic HttpResponse wrapper for AxiosResponse\r\n *\r\n * @internal\r\n */\r\nexport class HttpResponse<T> implements AxiosResponse {\r\n\tpublic data: T;\r\n\tpublic status: number;\r\n\tpublic statusText: string;\r\n\tpublic headers: any;\r\n\tpublic config: AxiosRequestConfig;\r\n\r\n\tconstructor(ax: AxiosResponse) {\r\n\t\tthis.data = ax.data;\r\n\t\tthis.status = ax.status;\r\n\t\tthis.statusText = ax.statusText;\r\n\t\tthis.headers = ax.headers;\r\n\t\tthis.config = ax.config;\r\n\t}\r\n}\r\n","/**\r\n * @internal\r\n */\r\nexport interface ICaseDictionary {\r\n\tclient: string;\r\n\tserver: string;\r\n\ttype: 'both' | 'beautify' | 'uglify';\r\n}\r\n\r\n/**\r\n * This file will hold old the differences between the library properties and the server properties\r\n * server will hold server property names\r\n * client will hold library property names\r\n * type will decide whether the translation is going both ways or single way\r\n * object name must be the same as the library property.\r\n *\r\n * @internal\r\n */\r\nexport const dictionary: Record<string, ICaseDictionary> = {\r\n\tadditionalData: {\r\n\t\tclient: 'additionalData',\r\n\t\tserver: 'AdditionalData',\r\n\t\ttype: 'both'\r\n\t},\r\n\tage: {\r\n\t\tclient: 'age',\r\n\t\tserver: 'Age',\r\n\t\ttype: 'both'\r\n\t},\r\n\tapiVersion: {\r\n\t\tclient: 'apiVersion',\r\n\t\tserver: 'ApiVersion',\r\n\t\ttype: 'both'\r\n\t},\r\n\tboundsOfIntrest: {\r\n\t\tclient: 'boundsOfIntrest',\r\n\t\tserver: 'BoundsOfIntrest',\r\n\t\ttype: 'both'\r\n\t},\r\n\tbuildVersion: {\r\n\t\tclient: 'buildVersion',\r\n\t\tserver: 'BuildVersion',\r\n\t\ttype: 'both'\r\n\t},\r\n\tcoordinate: {\r\n\t\tclient: 'coordinates',\r\n\t\tserver: 'Coordinates',\r\n\t\ttype: 'both'\r\n\t},\r\n\tcountryCode: {\r\n\t\tclient: 'countryCode',\r\n\t\tserver: 'CountryCode',\r\n\t\ttype: 'both'\r\n\t},\r\n\tcountryName: {\r\n\t\tclient: 'countryName',\r\n\t\tserver: 'CountryName',\r\n\t\ttype: 'both'\r\n\t},\r\n\tcreateDatetime: {\r\n\t\tclient: 'createdDatetime',\r\n\t\tserver: 'CreatedDatetime',\r\n\t\ttype: 'both'\r\n\t},\r\n\tcurrentResult: {\r\n\t\tclient: 'currentResult',\r\n\t\tserver: 'CurrentResult',\r\n\t\ttype: 'both'\r\n\t},\r\n\tdata: {\r\n\t\tclient: 'data',\r\n\t\tserver: 'Data',\r\n\t\ttype: 'both'\r\n\t},\r\n\tdocumentCategory: {\r\n\t\tclient: 'documentCategory',\r\n\t\tserver: 'DocumentCategory',\r\n\t\ttype: 'both'\r\n\t},\r\n\tdocumentImages: {\r\n\t\tclient: 'documentImages',\r\n\t\tserver: 'DocumentImages',\r\n\t\ttype: 'both'\r\n\t},\r\n\tdocumentName: {\r\n\t\tclient: 'documentName',\r\n\t\tserver: 'DocumentName',\r\n\t\ttype: 'both'\r\n\t},\r\n\tdocumentNumber: {\r\n\t\tclient: 'documentNumber',\r\n\t\tserver: 'DocumentNumber',\r\n\t\ttype: 'both'\r\n\t},\r\n\tdocumentRole: {\r\n\t\tclient: 'documentRole',\r\n\t\tserver: 'DoumentRole',\r\n\t\ttype: 'both'\r\n\t},\r\n\tdocumentSide: {\r\n\t\tclient: 'documentSide',\r\n\t\tserver: 'DocumentSide',\r\n\t\ttype: 'both'\r\n\t},\r\n\tdocumentSource: {\r\n\t\tclient: 'documentSource',\r\n\t\tserver: 'DocumentSource',\r\n\t\ttype: 'both'\r\n\t},\r\n\tdocumentType: {\r\n\t\tclient: 'documentType',\r\n\t\tserver: 'DocumentType',\r\n\t\ttype: 'both'\r\n\t},\r\n\tedition: {\r\n\t\tclient: 'edition',\r\n\t\tserver: 'Edition',\r\n\t\ttype: 'both'\r\n\t},\r\n\tentryData: {\r\n\t\tclient: 'entryData',\r\n\t\tserver: 'EntryData',\r\n\t\ttype: 'both'\r\n\t},\r\n\tentryDateTime: {\r\n\t\tclient: 'entryDateTime',\r\n\t\tserver: 'EntryDateTime',\r\n\t\ttype: 'both'\r\n\t},\r\n\tentryImages: {\r\n\t\tclient: 'entryImages',\r\n\t\tserver: 'EntryImages',\r\n\t\ttype: 'both'\r\n\t},\r\n\tevaluatedPersonEntryId: {\r\n\t\tclient: 'evaluatedPersonEntryId',\r\n\t\tserver: 'EvaluatedPersonEntryId',\r\n\t\ttype: 'both'\r\n\t},\r\n\texcludeOutputImagesFromResponse: {\r\n\t\tclient: 'excludeOutputImagesFromResponse',\r\n\t\tserver: 'ExcludeOutputImagesFromResponse',\r\n\t\ttype: 'both'\r\n\t},\r\n\textractedFields: {\r\n\t\tclient: 'extractedFields',\r\n\t\tserver: 'ExtractedFields',\r\n\t\ttype: 'both'\r\n\t},\r\n\tfirstName: {\r\n\t\tclient: 'firstName',\r\n\t\tserver: 'FirstName',\r\n\t\ttype: 'both'\r\n\t},\r\n\tfullName: {\r\n\t\tclient: 'fullName',\r\n\t\tserver: 'FullName',\r\n\t\ttype: 'both'\r\n\t},\r\n\tgender: {\r\n\t\tclient: 'gender',\r\n\t\tserver: 'Gender',\r\n\t\ttype: 'both'\r\n\t},\r\n\thasError: {\r\n\t\tclient: 'hasError',\r\n\t\tserver: 'HasError',\r\n\t\ttype: 'both'\r\n\t},\r\n\tglareCheck: {\r\n\t\tclient: 'glareCheck',\r\n\t\tserver: 'GlareCheck',\r\n\t\ttype: 'both'\r\n\t},\r\n\tblurCheck: {\r\n\t\tclient: 'blurCheck',\r\n\t\tserver: 'BlurCheck',\r\n\t\ttype: 'both'\r\n\t},\r\n\tlowResolutionCheck: {\r\n\t\tclient: 'lowResolutionCheck',\r\n\t\tserver: 'LowResolutionCheck',\r\n\t\ttype: 'both'\r\n\t},\r\n\tfullDocumentInViewCheck: {\r\n\t\tclient: 'fullDocumentInViewCheck',\r\n\t\tserver: 'FullDocumentInViewCheck',\r\n\t\ttype: 'both'\r\n\t},\r\n\ttripleScanReason: {\r\n\t\tclient: 'tripleScanReason',\r\n\t\tserver: 'TripleScanReason',\r\n\t\ttype: 'both'\r\n\t},\r\n\thighLevelResult: {\r\n\t\tclient: 'highLevelResult',\r\n\t\tserver: 'HighLevelResult',\r\n\t\ttype: 'both'\r\n\t},\r\n\tidentityMeansId: {\r\n\t\tclient: 'identitiyMeansId',\r\n\t\tserver: 'IdentitiyMeansId',\r\n\t\ttype: 'both'\r\n\t},\r\n\timageFormat: {\r\n\t\tclient: 'imageFormat',\r\n\t\tserver: 'ImageFormat',\r\n\t\ttype: 'both'\r\n\t},\r\n\tinputImageId: {\r\n\t\tclient: 'inputImageId',\r\n\t\tserver: 'InputImageId',\r\n\t\ttype: 'both'\r\n\t},\r\n\tinputImages: {\r\n\t\tclient: 'inputImages',\r\n\t\tserver: 'InputImages',\r\n\t\ttype: 'both'\r\n\t},\r\n\tisDocumentExtracted: {\r\n\t\tclient: 'isDocumentExtracted',\r\n\t\tserver: 'IsDocumentExtracted',\r\n\t\ttype: 'both'\r\n\t},\r\n\tisFinished: {\r\n\t\tclient: 'isFinished',\r\n\t\tserver: 'IsFinished',\r\n\t\ttype: 'both'\r\n\t},\r\n\tisReconigned: {\r\n\t\tclient: 'isReconigned',\r\n\t\tserver: 'IsReconigned',\r\n\t\ttype: 'both'\r\n\t},\r\n\tissueDate: {\r\n\t\tclient: 'issueDate',\r\n\t\tserver: 'IssueDate',\r\n\t\ttype: 'both'\r\n\t},\r\n\tlastName: {\r\n\t\tclient: 'lastName',\r\n\t\tserver: 'LastName',\r\n\t\ttype: 'both'\r\n\t},\r\n\tmiddleName: {\r\n\t\tclient: 'middleName',\r\n\t\tserver: 'MiddleName',\r\n\t\ttype: 'both'\r\n\t},\r\n\tname: {\r\n\t\tclient: 'name',\r\n\t\tserver: 'Name',\r\n\t\ttype: 'both'\r\n\t},\r\n\tpage: {\r\n\t\tclient: 'page',\r\n\t\tserver: 'page',\r\n\t\ttype: 'both'\r\n\t},\r\n\tpersonEntryId: {\r\n\t\tclient: 'journeyId',\r\n\t\tserver: 'PersonEntryId',\r\n\t\ttype: 'both'\r\n\t},\r\n\tprocessFinishDate: {\r\n\t\tclient: 'processFinishDate',\r\n\t\tserver: 'processFinishedDateTime',\r\n\t\ttype: 'both'\r\n\t},\r\n\tprocessStartDate: {\r\n\t\tclient: 'processStartedDateTime',\r\n\t\tserver: 'ProcessStartedDateTime',\r\n\t\ttype: 'both'\r\n\t},\r\n\tprocessedDocuments: {\r\n\t\tclient: 'processedDocuments',\r\n\t\tserver: 'ProcessedDocuments',\r\n\t\ttype: 'both'\r\n\t},\r\n\tqualityChecks: {\r\n\t\tclient: 'qualityChecks',\r\n\t\tserver: 'GualityChecks',\r\n\t\ttype: 'both'\r\n\t},\r\n\treferenceNumber: {\r\n\t\tclient: 'referenceNumber',\r\n\t\tserver: 'ReferenceNumber',\r\n\t\ttype: 'both'\r\n\t},\r\n\trequestId: {\r\n\t\tclient: 'requestId',\r\n\t\tserver: 'RequestId',\r\n\t\ttype: 'both'\r\n\t},\r\n\trequiredAction: {\r\n\t\tclient: 'requiredAction',\r\n\t\tserver: 'RequiredAction',\r\n\t\ttype: 'both'\r\n\t},\r\n\tresultDetails: {\r\n\t\tclient: 'resultDetails',\r\n\t\tserver: 'ResultDetails',\r\n\t\ttype: 'both'\r\n\t},\r\n\trole: {\r\n\t\tclient: 'role',\r\n\t\tserver: 'Role',\r\n\t\ttype: 'both'\r\n\t},\r\n\t// scanReason: {\r\n\t// \tclient: 'scanReason',\r\n\t// \tserver: 'ScanReason',\r\n\t// \ttype: 'both'\r\n\t// },\r\n\tscanReference: {\r\n\t\tclient: 'scanReference',\r\n\t\tserver: 'ScanReference',\r\n\t\ttype: 'both'\r\n\t},\r\n\tscannerIp: {\r\n\t\tclient: 'scannerIp',\r\n\t\tserver: 'ScannerIp',\r\n\t\ttype: 'both'\r\n\t},\r\n\tside: {\r\n\t\tclient: 'side',\r\n\t\tserver: 'Side',\r\n\t\ttype: 'both'\r\n\t},\r\n\tsource: {\r\n\t\tclient: 'source',\r\n\t\tserver: 'Source',\r\n\t\ttype: 'both'\r\n\t},\r\n\turl: {\r\n\t\tclient: 'url',\r\n\t\tserver: 'Url',\r\n\t\ttype: 'both'\r\n\t},\r\n\tusername: {\r\n\t\tclient: 'username',\r\n\t\tserver: 'UserName',\r\n\t\ttype: 'beautify'\r\n\t},\r\n\tvalue: {\r\n\t\tclient: 'value',\r\n\t\tserver: 'Value',\r\n\t\ttype: 'both'\r\n\t},\r\n\tworkflowAttempt: {\r\n\t\tclient: 'workflowAttempt',\r\n\t\tserver: 'WorkflowAttempt',\r\n\t\ttype: 'both'\r\n\t},\r\n\tCOVIDPASSCROSSCHECKRESULT: {\r\n\t\tclient: 'COVIDPASSCROSSCHECKRESULT',\r\n\t\tserver: 'COVIDPASSCROSSCHECKRESULT',\r\n\t\ttype: 'both'\r\n\t},\r\n};\r\n","import { IEndpoints } from '../interfaces/Endpoints';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const ENDPOINTS: IEndpoints = {\r\n\tcrop: '/idscanEnterpriseSVC/DEE/crop',\r\n\tgetVersion: '/idscanEnterpriseSVC/versionInfo/get',\r\n\tgetJourney: '/idscanEnterpriseSVC/journey/get',\r\n\tlogin: '/idscanEnterpriseSVC/token',\r\n\tlogout: '/idscanEnterpriseSVC/account/logout',\r\n\tsocket: '/idscanEnterpriseSVC/signalr',\r\n\tupload: '/idscanEnterpriseSVC/journey/upload',\r\n\tjourneyDefinitions: '/idscanEnterpriseSVC/JourneyDefinition/GetAll',\r\n\tgetCapturingMedia: '/idscanEnterpriseSVC/Journey/CapturingMedia',\r\n\tpostToken: '/idscanEnterpriseSVC/Account/validatetoken',\r\n\tpassiveLiveness: '/idscanEnterpriseSVC/Liveness/performliveness',\r\n\tcovidpass: '/idscanEnterpriseSVC/Covidpass/upload',\r\n\tdataChecks: '/idscanEnterpriseSVC/datachecks/upload',\r\n\tgetTCCConfigs: '/idscanEnterpriseSVC/termsAndConditions/getConfigs',\r\n};\r\n","module.exports = \"<div data-jcs-element=\\\"provider__container\\\" class=\\\"provider-container\\\"></div>\\r\\n<form class=\\\"button-container button-cancel-container button-gateway-container\\\">\\r\\n\\t<button data-jcs-element=\\\"cancel__journey\\\" type=\\\"button\\\" class=\\\"button button--secondary-destructive button-full-xs\\\" aria-label=\\\"Button Title\\\">\\r\\n\\t{{CANCEL_JOURNEY}}\\r\\n\\t</button>\\r\\n\\t<button data-jcs-element=\\\"gateway__upload__toggle\\\" class=\\\"button button--tertiary button--worker\\\" aria-label=\\\"Button Title\\\">\\r\\n\\t\\t<div data-jcs-element=\\\"gateway__upload__toggle__upload__label\\\">\\r\\n\\t\\t\\t{{MANUAL_PHOTO_UPLOAD_TOGGLE_FALSE}}\\r\\n\\t\\t</div>\\r\\n\\t\\t<div data-jcs-element=\\\"gateway__upload__toggle__camera__label\\\">\\r\\n\\t\\t\\t{{MANUAL_PHOTO_UPLOAD_TOGGLE_TRUE}}\\r\\n\\t\\t</div>\\r\\n\\t</button>\\r\\n</form>\\r\\n\";","import { HttpResponse } from './HttpResponse';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class ReductionService {\r\n\t/**\r\n\t * Reduce element properties and return the object.\r\n\t * @param element\r\n\t * @param reducer\r\n\t */\r\n\tpublic static reduce(element: any, reducer: any): any {\r\n\t\tconst isRaw = element instanceof HttpResponse;\r\n\t\tconst data = isRaw ? element.data : element;\r\n\r\n\t\tObject.keys(reducer).map((key: string) => {\r\n\t\t\tif (reducer[key] === false && data[key]) {\r\n\t\t\t\tdelete data[key];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (isRaw) {\r\n\t\t\telement.data = data;\r\n\t\t} else {\r\n\t\t\telement = data;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n}\r\n","/**\r\n * GBG ID Scan\r\n *\r\n * @packageDocumentation\r\n */\r\nimport 'path2d-polyfill';\r\nimport './helpers/polyfills/toBlob';\r\nimport './styles.scss';\r\nimport { AnimationService } from './helpers/classes/AnimationService';\r\n/**\r\n * Classes\r\n */\r\nexport * from './helpers/classes/LanguageService';\r\nexport * from './idscan/classes/JourneyContainer';\r\n\r\n/**\r\n * Defaults\r\n */\r\nexport * from './idscan/configuration/TranslationDictionary';\r\n\r\n/**\r\n * Enumerables\r\n */\r\nexport * from './helpers/enums/Templates';\r\nexport * from './ides/enums/messages';\r\nexport * from './idscan/enums/Camera';\r\nexport * from './idscan/enums/CurrentResult';\r\nexport * from './idscan/enums/DocumentRole';\r\nexport * from './idscan/enums/DocumentSide';\r\nexport * from './idscan/enums/DocumentSource';\r\nexport * from './idscan/enums/FlowState';\r\nexport * from './idscan/enums/HighLevelResult';\r\nexport * from './idscan/enums/ImageFormat';\r\nexport * from './idscan/enums/InputProvider';\r\nexport * from './idscan/enums/JourneyAction';\r\nexport * from './idscan/enums/JourneyDefinition';\r\nexport * from './idscan/enums/JourneyEvent';\r\nexport * from './idscan/enums/JourneyState';\r\nexport * from './idscan/enums/RequiredAction';\r\nexport * from './idscan/enums/RequiredInputImage';\r\nexport * from './idscan/enums/Scanner';\r\nexport * from './idscan/enums/Templates';\r\nexport * from './idscan/enums/Translation';\r\nexport * from './idscan/enums/Mode';\r\n\r\n/**\r\n * Types\r\n */\r\nexport * from './helpers/types/Callback';\r\nexport * from './helpers/types/Camera';\r\nexport * from './helpers/types/Templates';\r\n\r\n/**\r\n * Interfaces\r\n */\r\nexport * from './helpers/interfaces/Camera';\r\nexport * from './helpers/interfaces/DataFormats';\r\nexport * from './helpers/interfaces/HttpServiceConfiguration';\r\nexport * from './helpers/interfaces/Images';\r\nexport * from './helpers/interfaces/Storage';\r\nexport * from './helpers/interfaces/Templates';\r\nexport * from './ides/interfaces/image';\r\nexport * from './ides/interfaces/message';\r\nexport * from './idscan/interfaces/AuthSettings';\r\nexport * from './idscan/interfaces/BackendVersion';\r\nexport * from './idscan/interfaces/CameraConfiguration';\r\nexport * from './idscan/interfaces/Configuration';\r\nexport * from './idscan/interfaces/ContainerConfiguration';\r\nexport * from './idscan/interfaces/CropResponse';\r\nexport * from './idscan/interfaces/DataFormats';\r\nexport * from './idscan/interfaces/Document';\r\nexport * from './idscan/interfaces/DocumentImage';\r\nexport * from './idscan/interfaces/Endpoints';\r\nexport * from './idscan/interfaces/EntryData';\r\nexport * from './idscan/interfaces/EntryImage';\r\nexport * from './idscan/interfaces/EventSubscriber';\r\nexport * from './idscan/interfaces/ExtractedField';\r\nexport * from './idscan/interfaces/FinalResult';\r\nexport * from './idscan/interfaces/InputImage';\r\nexport * from './idscan/interfaces/Journey';\r\nexport * from './idscan/interfaces/JourneyDefinition';\r\nexport * from './idscan/interfaces/LoginOptions';\r\nexport * from './idscan/interfaces/MetaData';\r\nexport * from './idscan/interfaces/PersistenceSettings';\r\nexport * from './idscan/interfaces/Person';\r\nexport * from './idscan/interfaces/PersonAddress';\r\nexport * from './idscan/interfaces/Point';\r\nexport * from './idscan/interfaces/ProcessedDocument';\r\nexport * from './idscan/interfaces/ScannerState';\r\nexport * from './idscan/interfaces/Unsubscribable';\r\nexport * from './idscan/interfaces/UploadRequest';\r\nexport * from './idscan/interfaces/UploadResponse';\r\nexport * from './idscan/interfaces/UserCredentials';\r\nexport * from './idscan/interfaces/UserInfo';\r\nexport * from './idscan/interfaces/VersionInfo';\r\n\r\nAnimationService.initialize();\r\n","module.exports = \"<div class=\\\"dark-inner-provider-container\\\">\\r\\n\\t<div>\\r\\n\\t\\t<form class=\\\"camera-options--container\\\">\\r\\n\\t\\t\\t<select data-jcs-element=\\\"camera__select\\\"\\r\\n\\t\\t\\t\\tclass=\\\"camera-choices camera-choices-half-s camera-choices-full-xs control control--select\\\"></select>\\r\\n\\t\\t</form>\\r\\n\\t\\t<div class=\\\"camera-viewfinder--container\\\" data-fullscreen=\\\"false\\\">\\r\\n\\t\\t\\t<canvas data-jcs-element=\\\"camera__viewfinder\\\" class=\\\"camera-viewfinder\\\"\\r\\n\\t\\t\\t\\tstyle=\\\"position: relative; left: 0; top: 0; z-index: 0;\\\"></canvas>\\r\\n\\t\\t\\t<div data-jcs-element=\\\"animation__viewfinder\\\" class=\\\"camera-viewfinder\\\"\\r\\n\\t\\t\\t\\tstyle=\\\"position: absolute; left: 0; top: 0; z-index: 1; display: none; align-items: flex-end; justify-content: center;\\\">\\r\\n\\t\\t\\t\\t<div style=\\\"display: flex; align-items: center;\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"animation-container\\\" data-jcs-element=\\\"animation__container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"76\\\" height=\\\"76\\\" viewBox=\\\"0 0 56 56\\\" fill=\\\"none\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<rect x=\\\"2\\\" y=\\\"2\\\" width=\\\"52\\\" height=\\\"52\\\" rx=\\\"13\\\" fill=\\\"#111111\\\" fill-opacity=\\\"0.8\\\" stroke=\\\"white\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tstroke-width=\\\"4\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<ellipse cx=\\\"16.3333\\\" cy=\\\"19.9452\\\" rx=\\\"2.33333\\\" ry=\\\"2.30137\\\" fill=\\\"white\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<ellipse cx=\\\"40.4447\\\" cy=\\\"19.9452\\\" rx=\\\"2.33333\\\" ry=\\\"2.30137\\\" fill=\\\"white\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M20.2222 37.5891C24.8888 40.274 33.4444 40.274 37.7222 37.5891\\\" stroke=\\\"white\\\" stroke-width=\\\"4\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"liveness-actions-container\\\">\\r\\n\\t\\t\\t\\t\\t\\t<p data-jcs-element=\\\"animation__title\\\">{{LIVENESS_ACTION_LOOK_STRAIGHT_TITLE}}</p>\\r\\n\\t\\t\\t\\t\\t\\t<p data-jcs-element=\\\"animation__text\\\">{{LIVENESS_ACTION_LOOK_STRAIGHT_TEXT}}</p>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div data-jcs-element=\\\"liveness__start__button__container__overlay\\\" class=\\\"camera-viewfinder--overlay\\\"></div>\\r\\n\\t\\t\\t<div data-jcs-element=\\\"liveness__start__button__container__button\\\" class=\\\"camera-viewfinder--overlay--transparent\\\">\\r\\n\\t\\t\\t\\t<p class=\\\"camera-viewfinder--overlay-text\\\">\\r\\n\\t\\t\\t\\t\\t\\t<button data-jcs-element=\\\"retina__start\\\" class=\\\"button button--primary camera-button\\\">{{LIVENESS_START}}</button>\\r\\n\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n<form class=\\\"button-container button-cancel-container\\\">\\r\\n\\t<button data-jcs-element=\\\"cancel__journey\\\" type=\\\"button\\\" class=\\\"button button--secondary-destructive button-full-xs\\\"\\r\\n\\t\\taria-label=\\\"Button Title\\\">\\r\\n\\t\\t{{CANCEL_JOURNEY}}\\r\\n\\t</button>\\r\\n</form>\\r\\n\";","import { EventEmitter } from 'events';\r\nimport { HttpRequestService } from '../../httpRequestService';\r\nimport { CortixResponseAction, ICortixResponse } from '../../types';\r\n\r\n// tslint:disable: no-console\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class SendingFramesManager extends EventEmitter {\r\n\tprivate _host: string;\r\n\tprivate _journeyId: string;\r\n\tprivate _socket?: WebSocket;\r\n\tprivate _stepNumber: number = 1;\r\n\r\n\tconstructor(journeyId: string, cortexApiPath: string, cortexApiController: string) {\r\n\t\tsuper();\r\n\t\tthis._journeyId = journeyId;\r\n\r\n\t\tconst port = cortexApiPath.split(':')[1].split('/')[0];\r\n\t\tconst prefix = (port === '80') ? 'ws://' : 'wss://';\r\n\t\tthis._host = prefix + cortexApiPath + cortexApiController;\r\n\r\n\t}\r\n\r\n\tpublic get stepNumber(): number {\r\n\t\treturn this._stepNumber++;\r\n\t}\r\n\r\n\tpublic connect = (): Promise<this> => {\r\n\t\tconst params = `?journeyId=${this._journeyId}&stepNumber=${this.stepNumber}&authenticationToken=${HttpRequestService.authenticationToken}`;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tthis._socket = new WebSocket(this._host + params);\r\n\r\n\t\t\t\tthis._socket.addEventListener('open', (event: Event) => {\r\n\t\t\t\t\tconsole.debug('WebSocket Status: Socket Open');\r\n\r\n\t\t\t\t\treturn resolve(this);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._socket.addEventListener('message', (event: MessageEvent) => {\r\n\t\t\t\t\tconsole.debug('WebSocket Status: Socket message received', event);\r\n\r\n\t\t\t\t\tif (event.data) {\r\n\t\t\t\t\t\tthis.onCaptureResponse(JSON.parse(event.data));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._socket.addEventListener('error', this.onCaptureError);\r\n\t\t\t\tthis._socket.addEventListener('close', this.onCaptureTerminate);\r\n\r\n\t\t\t} catch (exception) {\r\n\t\t\t\tconsole.debug('Camera Media Channel: Can not establish connection to the server: ', this._host);\r\n\r\n\t\t\t\treturn reject('Camera Media Channel: Can not establish connection to the server');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic send = (data: string | ArrayBuffer | Blob | ArrayBufferView) => {\r\n\t\tif (this._socket !== undefined && this._socket.readyState === WebSocket.OPEN) {\r\n\t\t\tconsole.log('bufferedAmount', this._socket.bufferedAmount);\r\n\t\t\treturn this._socket.send(data);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic close = () => {\r\n\t\tif (this._socket && this._socket.readyState !== WebSocket.CLOSED) {\r\n\t\t\treturn this._socket.close();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic runTestResponse = (response: ICortixResponse) => this.onCaptureResponse(response);\r\n\r\n\tprivate onCaptureError = (event: Event) => {\r\n\t\tconsole.debug('WebSocket Status: Error was reported', event);\r\n\r\n\t\treturn this.emit(CortixResponseAction.Error, event);\r\n\t}\r\n\r\n\tprivate onCaptureTerminate = (event: CloseEvent) => {\r\n\t\tconsole.debug('WebSocket Status: Socket Closed', event);\r\n\r\n\t\treturn this.emit(CortixResponseAction.Close, event);\r\n\t}\r\n\r\n\tprivate onCaptureResponse = (response: ICortixResponse) => {\r\n\t\tconsole.debug('WebSocket Status: Response Received', response);\r\n\r\n\t\treturn this.emit(response.requiredAction, response);\r\n\t}\r\n}\r\n","/**\r\n * The current result state of the journey.\r\n *\r\n * @public\r\n */\r\nexport enum CurrentResult {\r\n\t/**\r\n\t * TODO: This needs some proper documentation\r\n\t */\r\n\tCaseUpdateFailed = 'CaseUpdateFailed',\r\n\t/**\r\n\t * TODO: This needs some proper documentation\r\n\t */\r\n\tCommunicationError = 'CommunicationError',\r\n\t/**\r\n\t * TODO: This needs some proper documentation\r\n\t */\r\n\tErrorSavingData = 'ErrorSavingData',\r\n\t/**\r\n\t * The current journey has failed verification.\r\n\t */\r\n\tFailed = 'Failed',\r\n\t/**\r\n\t * The current journey has passed verification to a satisfactory level.\r\n\t */\r\n\tPass = 'Pass',\r\n\t/**\r\n\t * TODO: This needs some proper documentation\r\n\t */\r\n\tProcessingError = 'ProcessingError',\r\n\t/**\r\n\t * TODO: This needs some proper documentation\r\n\t */\r\n\tScannerError = 'ScannerError',\r\n\t/**\r\n\t * TODO: This needs some proper documentation\r\n\t */\r\n\tSpecifiedEntryNotFound = 'SpecifiedEntryNotFound'\r\n}\r\n","/**\r\n * These are the available translatable objects which will be referenced by the\r\n * SDK internally when templating the UI.\r\n *\r\n * NOTE: Some of these are none-standard as they're used to control translations\r\n * for values coming back from the API. Please be mindful of this when altering\r\n * this object.\r\n *\r\n * @public\r\n */\r\n/**\r\n * These are the available translatable objects which will be referenced by the\r\n * SDK internally when templating the UI.\r\n *\r\n * NOTE: Some of these are none-standard as they're used to control translations\r\n * for values coming back from the API. Please be mindful of this when altering\r\n * this object.\r\n *\r\n * @public\r\n */\r\nexport enum TranslationKey {\r\n\tREQUIRED_ACTION_KEEP_CAPTURING = 'REQUIRED_ACTION_KeepCapturing',\r\n\tREQUIRED_ACTION_STOP_CAPTURING = 'REQUIRED_ACTION_StopCapturing',\r\n\tREQUIRED_ACTION_PAUSE_CAPTURING = 'REQUIRED_ACTION_PauseCapturing',\r\n\tREQUIRED_ACTION_CLOSE = 'REQUIRED_ACTION_Close',\r\n\tREQUIRED_ACTION_ERROR = 'REQUIRED_ACTION_Error',\r\n\tREQUIRED_ACTION_AGREE = 'REQUIRED_ACTION_AGREE',\r\n\tREQUIRED_ACTION_DISAGREE = 'REQUIRED_ACTION_DISAGREE',\r\n\tLIVENESS_ACTION_SMILE = 'LIVENESS_ACTION_Smile',\r\n\tLIVENESS_ACTION_FROWN = 'LIVENESS_ACTION_Frown',\r\n\tLIVENESS_ACTION_TILT_LEFT = 'LIVENESS_ACTION_Tilt Left',\r\n\tLIVENESS_ACTION_TILT_RIGHT = 'LIVENESS_ACTION_Tilt Right',\r\n\tLIVENESS_ACTION_TILT_UP = 'LIVENESS_ACTION_Tilt Up',\r\n\tLIVENESS_ACTION_TILT_DOWN = 'LIVENESS_ACTION_Tilt Down',\r\n\tLIVENESS_ACTION_TILT_STRAIGHT = 'LIVENESS_ACTION_Look Straight',\r\n\tLIVENESS_ACTION_NO_ACTION = 'LIVENESS_ACTION_No Action',\r\n\tLIVENESS_ACTION_PROCESSING_LIVENESS = 'LIVENESS_ACTION_Processing Liveness',\r\n\tLIVENESS_RESULT_FAILED = 'LIVENESS_RESULT_Thank you!.Failed',\r\n\tLIVENESS_RESULT_PASSED = 'LIVENESS_RESULT_Thank you!.Passed',\r\n\tLIVENESS_RESULT_ACTION_TIMED_OUT = 'LIVENESS_RESULT_Thank you!.ActionTimedOut',\r\n\tLIVENESS_RESULT_INTERRUPTED = 'LIVENESS_RESULT_Thank you!.Interrupted',\r\n\tLIVENESS_RESULT_UNDEFINED = 'LIVENESS_RESULT_Thank you!.Undefined',\r\n\tLIVENESS_ACTION_LOOK_STRAIGHT_TITLE = 'LIVENESS_ACTION_LOOK_STRAIGHT_TITLE',\r\n\tLIVENESS_ACTION_LOOK_STRAIGHT_TEXT = 'LIVENESS_ACTION_LOOK_STRAIGHT_TEXT',\r\n\tLIVENESS_ACTION_LOOK_LEFT_TITLE = 'LIVENESS_ACTION_LOOK_LEFT_TITLE',\r\n\tLIVENESS_ACTION_LOOK_LEFT_TEXT = 'LIVENESS_ACTION_LOOK_LEFT_TEXT',\r\n\tLIVENESS_ACTION_LOOK_RIGHT_TITLE = 'LIVENESS_ACTION_LOOK_RIGHT_TITLE',\r\n\tLIVENESS_ACTION_LOOK_RIGHT_TEXT = 'LIVENESS_ACTION_LOOK_RIGHT_TEXT',\r\n\tLIVENESS_ACTION_LOOK_UP_TITLE = 'LIVENESS_ACTION_LOOK_UP_TITLE',\r\n\tLIVENESS_ACTION_LOOK_UP_TEXT = 'LIVENESS_ACTION_LOOK_UP_TEXT',\r\n\tLIVENESS_ACTION_LOOK_DOWN_TITLE = 'LIVENESS_ACTION_LOOK_DOWN_TITLE',\r\n\tLIVENESS_ACTION_LOOK_DOWN_TEXT = 'LIVENESS_ACTION_LOOK_DOWN_TEXT',\r\n\tLIVENESS_ACTION_SMILE_TITLE = 'LIVENESS_ACTION_SMILE_TITLE',\r\n\tLIVENESS_ACTION_SMILE_TEXT = 'LIVENESS_ACTION_SMILE_TEXT',\r\n\tLIVENESS_ACTION_FROWN_TITLE = 'LIVENESS_ACTION_FROWN_TITLE',\r\n\tLIVENESS_ACTION_FROWN_TEXT = 'LIVENESS_ACTION_FROWN_TEXT',\r\n\tPASSIVE_LIVENESS_ERROR_NOT_INITIALIZED_TITLE = 'PASSIVE_LIVENESS_ERROR_NOT_INITIALIZED_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_INITIALIZING_TITLE = 'PASSIVE_LIVENESS_ERROR_INITIALIZING_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_PROBABILITY_TOO_SMALL_TITLE = 'PASSIVE_LIVENESS_ERROR_PROBABILITY_TOO_SMALL_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_TOO_FAR_TITLE = 'PASSIVE_LIVENESS_ERROR_FACE_TOO_FAR_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_TOO_CLOSE_TITLE = 'PASSIVE_LIVENESS_ERROR_FACE_TOO_CLOSE_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_CLOSE_TO_BORDER_TITLE = 'PASSIVE_LIVENESS_ERROR_FACE_CLOSE_TO_BORDER_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_CROPPED_TITLE = 'PASSIVE_LIVENESS_ERROR_FACE_CROPPED_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_NOT_FOUND_TITLE = 'PASSIVE_LIVENESS_ERROR_FACE_NOT_FOUND_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_TOO_SMALL_TITLE = 'PASSIVE_LIVENESS_ERROR_FACE_TOO_SMALL_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_ANGLE_TOO_LARGE_TITLE = 'PASSIVE_LIVENESS_ERROR_FACE_ANGLE_TOO_LARGE_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_TOO_MANY_FACES_TITLE = 'PASSIVE_LIVENESS_ERROR_TOO_MANY_FACES_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_IS_OCCLUDED_TITLE = 'PASSIVE_LIVENESS_ERROR_FACE_IS_OCCLUDED_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_UNKNOWN_TITLE = 'PASSIVE_LIVENESS_ERROR_UNKNOWN_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_INTERNAL_TITLE = 'PASSIVE_LIVENESS_ERROR_INTERNAL_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_LOW_THRESHOLD_TITLE = 'PASSIVE_LIVENESS_ERROR_LOW_THRESHOLD_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_None_TITLE = 'PASSIVE_LIVENESS_ERROR_NONE_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FailedExpressions_TITLE = 'PASSIVE_LIVENESS_ERROR_FailedExpressions_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_READ_IMAGE_TITLE = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_IMAGE_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_IMAGE_ERROR_TITLE = 'PASSIVE_LIVENESS_ERROR_IMAGE_ERROR_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_INTERNAL_ERROR_TITLE = 'PASSIVE_LIVENESS_ERROR_INTERNAL_ERROR_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_WRITE_IMAGE_TITLE = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_WRITE_IMAGE_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_READ_MODEL_TITLE = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_MODEL_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_ALLOCATE_TITLE = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_ALLOCATE_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_INVALID_CONFIG_TITLE = 'PASSIVE_LIVENESS_ERROR_INVALID_CONFIG_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_NO_SUCH_OBJECT_IN_BUILD_TITLE = 'PASSIVE_LIVENESS_ERROR_NO_SUCH_OBJECT_IN_BUILD_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_PREDICT_TITLE = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_PREDICT_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_DETECT_TITLE = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_DETECT_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_PREDICT_LANDMARKS_TITLE = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_PREDICT_LANDMARKS_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_INVALID_FUSE_MODE_TITLE = 'PASSIVE_LIVENESS_ERROR_INVALID_FUSE_MODE_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_NULLPTR_TITLE = 'PASSIVE_LIVENESS_ERROR_NULLPTR_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_LICENSE_ERROR_TITLE = 'PASSIVE_LIVENESS_ERROR_LICENSE_ERROR_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_INVALID_META_TITLE = 'PASSIVE_LIVENESS_ERROR_INVALID_META_TITLE',\r\n\tPASSIVE_LIVENESS_ERROR_NOT_INITIALIZED = 'PASSIVE_LIVENESS_ERROR_NOT_INITIALIZED',\r\n\tPASSIVE_LIVENESS_ERROR_INITIALIZING = 'PASSIVE_LIVENESS_ERROR_INITIALIZING',\r\n\tPASSIVE_LIVENESS_ERROR_PROBABILITY_TOO_SMALL = 'PASSIVE_LIVENESS_ERROR_PROBABILITY_TOO_SMALL',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_TOO_FAR = 'PASSIVE_LIVENESS_ERROR_FACE_TOO_FAR',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_TOO_CLOSE = 'PASSIVE_LIVENESS_ERROR_FACE_TOO_CLOSE',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_CLOSE_TO_BORDER = 'PASSIVE_LIVENESS_ERROR_FACE_CLOSE_TO_BORDER',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_CROPPED = 'PASSIVE_LIVENESS_ERROR_FACE_CROPPED',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_NOT_FOUND = 'PASSIVE_LIVENESS_ERROR_FACE_NOT_FOUND',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_TOO_SMALL = 'PASSIVE_LIVENESS_ERROR_FACE_TOO_SMALL',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_ANGLE_TOO_LARGE = 'PASSIVE_LIVENESS_ERROR_FACE_ANGLE_TOO_LARGE',\r\n\tPASSIVE_LIVENESS_ERROR_TOO_MANY_FACES = 'PASSIVE_LIVENESS_ERROR_TOO_MANY_FACES',\r\n\tPASSIVE_LIVENESS_ERROR_FACE_IS_OCCLUDED = 'PASSIVE_LIVENESS_ERROR_FACE_IS_OCCLUDED',\r\n\tPASSIVE_LIVENESS_ERROR_UNKNOWN = 'PASSIVE_LIVENESS_ERROR_UNKNOWN',\r\n\tPASSIVE_LIVENESS_ERROR_INTERNAL = 'PASSIVE_LIVENESS_ERROR_INTERNAL',\r\n\tPASSIVE_LIVENESS_ERROR_LOW_THRESHOLD = 'PASSIVE_LIVENESS_ERROR_LOW_THRESHOLD',\r\n\tPASSIVE_LIVENESS_ERROR_None = 'PASSIVE_LIVENESS_ERROR_NONE',\r\n\tPASSIVE_LIVENESS_ERROR_FailedExpressions = 'PASSIVE_LIVENESS_ERROR_FailedExpressions',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_READ_IMAGE = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_IMAGE',\r\n\tPASSIVE_LIVENESS_ERROR_IMAGE_ERROR = 'PASSIVE_LIVENESS_ERROR_IMAGE_ERROR',\r\n\tPASSIVE_LIVENESS_ERROR_INTERNAL_ERROR = 'PASSIVE_LIVENESS_ERROR_INTERNAL_ERROR',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_WRITE_IMAGE = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_WRITE_IMAGE',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_READ_MODEL = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_MODEL',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_ALLOCATE = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_ALLOCATE',\r\n\tPASSIVE_LIVENESS_ERROR_INVALID_CONFIG = 'PASSIVE_LIVENESS_ERROR_INVALID_CONFIG',\r\n\tPASSIVE_LIVENESS_ERROR_NO_SUCH_OBJECT_IN_BUILD = 'PASSIVE_LIVENESS_ERROR_NO_SUCH_OBJECT_IN_BUILD',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_PREDICT = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_PREDICT',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_DETECT = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_DETECT',\r\n\tPASSIVE_LIVENESS_ERROR_FAILED_TO_PREDICT_LANDMARKS = 'PASSIVE_LIVENESS_ERROR_FAILED_TO_PREDICT_LANDMARKS',\r\n\tPASSIVE_LIVENESS_ERROR_INVALID_FUSE_MODE = 'PASSIVE_LIVENESS_ERROR_INVALID_FUSE_MODE',\r\n\tPASSIVE_LIVENESS_ERROR_NULLPTR = 'PASSIVE_LIVENESS_ERROR_NULLPTR',\r\n\tPASSIVE_LIVENESS_ERROR_LICENSE_ERROR = 'PASSIVE_LIVENESS_ERROR_LICENSE_ERROR',\r\n\tPASSIVE_LIVENESS_ERROR_INVALID_META = 'PASSIVE_LIVENESS_ERROR_INVALID_META',\r\n\tINITIALIZING_TITLE = 'INITIALIZING_TITLE',\r\n\tINITIALIZING_DESCRIPTION = 'INITIALIZING_DESCRIPTION',\r\n\tJOURNEY_STATE_STARTED = 'JOURNEY_STATE_STARTED',\r\n\tJOURNEY_STATE_IN_PROGRESS = 'JOURNEY_STATE_INPROGRESS',\r\n\tJOURNEY_STATE_ENDED = 'JOURNEY_STATE_ENDED',\r\n\tINFO_JOURNEY_STATE = 'INFO_JOURNEY_STATE',\r\n\tINFO_JOURNEY_ACTION = 'INFO_JOURNEY_ACTION',\r\n\tINFO_JOURNEY_ACTION_ATTEMPT = 'INFO_JOURNEY_ACTION_ATTEMPT',\r\n\tINFO_JOURNEY_ID = 'INFO_JOURNEY_ID',\r\n\tINFO_JOURNEY_RESULT = 'INFO_JOURNEY_RESULT',\r\n\tINFO_JOURNEY_REFERENCE = 'INFO_JOURNEY_REFERENCE',\r\n\tFLOW_STATE_NONE = 'FLOW_STATE_NONE',\r\n\tFLOW_STATE_IDENTITY_FRONT = 'FLOW_STATE_IDENTITY:FRONT',\r\n\tFLOW_STATE_IDENTITY_BACK = 'FLOW_STATE_IDENTITY:BACK',\r\n\tFLOW_STATE_ADDRESS = 'FLOW_STATE_ADDRESS',\r\n\tFLOW_STATE_SELFIE = 'FLOW_STATE_SELFIE',\r\n\tFLOW_STATE_LIVENESS = 'FLOW_STATE_LIVENESS',\r\n\tFLOW_STATE_COVID = 'FLOW_STATE_COVID',\r\n\tPROVIDER_TITLE_CAMERA = 'PROVIDER_TITLE_CAMERA',\r\n\tPROVIDER_TITLE_CROPPER = 'PROVIDER_TITLE_CROPPER',\r\n\tPROVIDER_TITLE_FILESYSTEM_ID = 'PROVIDER_TITLE_FILESYSTEM_ID',\r\n\tPROVIDER_TITLE_FILESYSTEM_FACEMATCH = 'PROVIDER_TITLE_FILESYSTEM_FACEMATCH',\r\n\tPROVIDER_TITLE_FILESYSTEM_ADDRESS = 'PROVIDER_TITLE_FILESYSTEM_ADDRESS',\r\n\tPROVIDER_TITLE_FILESYSTEM_COVID = 'PROVIDER_TITLE_FILESYSTEM_COVID',\r\n\tPROVIDER_TITLE_GATEWAY = 'PROVIDER_TITLE_GATEWAY',\r\n\tPROVIDER_TITLE_LIVENESS = 'PROVIDER_TITLE_LIVENESS',\r\n\tPROVIDER_TITLE_PASSIVE_LIVENESS = 'PROVIDER_TITLE_PASSIVE_LIVENESS',\r\n\tPROVIDER_TITLE_LOGIN = 'PROVIDER_TITLE_LOGIN',\r\n\tPROVIDER_TITLE_RESULTS = 'PROVIDER_TITLE_RESULTS',\r\n\tPROVIDER_TITLE_SCANNER = 'PROVIDER_TITLE_SCANNER',\r\n\tPROVIDER_TITLE_VIEW_ID = 'PROVIDER_TITLE_VIEW_ID',\r\n\tPROVIDER_TITLE_VIEW_FACEMATCH = 'PROVIDER_TITLE_VIEW_FACEMATCH',\r\n\tPROVIDER_TITLE_VIEW_ADDRESS = 'PROVIDER_TITLE_VIEW_ADDRESS',\r\n\tPROVIDER_TITLE_VIEW_COVID = 'PROVIDER_TITLE_VIEW_COVID',\r\n\tPROVIDER_SUBTITLE_FILESYSTEM_ID = 'PROVIDER_SUBTITLE_FILESYSTEM_ID',\r\n\tPROVIDER_SUBTITLE_FILESYSTEM_FACEMATCH = 'PROVIDER_SUBTITLE_FILESYSTEM_FACEMATCH',\r\n\tPROVIDER_SUBTITLE_FILESYSTEM_ADDRESS = 'PROVIDER_SUBTITLE_FILESYSTEM_ADDRESS',\r\n\tPROVIDER_SUBTITLE_FILESYSTEM_COVID = 'PROVIDER_SUBTITLE_FILESYSTEM_COVID',\r\n\tPROVIDER_SUBTITLE_SCANNER_ID = 'PROVIDER_SUBTITLE_SCANNER_ID',\r\n\tPROVIDER_SUBTITLE_VIEW_ID = 'PROVIDER_SUBTITLE_VIEW_ID',\r\n\tPROVIDER_SUBTITLE_VIEW_FACEMATCH = 'PROVIDER_SUBTITLE_VIEW_FACEMATCH',\r\n\tPROVIDER_SUBTITLE_VIEW_ADDRESS = 'PROVIDER_SUBTITLE_VIEW_ADDRESS',\r\n\tPROVIDER_SUBTITLE_VIEW_COVID = 'PROVIDER_SUBTITLE_VIEW_COVID',\r\n\tPROVIDER_TITLE_SMART_CAPTURE = 'PROVIDER_TITLE_SMART_CAPTURE',\r\n\tPROVIDER_TITLE_JOURNEY_SELECT = 'PROVIDER_TITLE_JOURNEY_SELECT',\r\n\tPROVIDER_TITLE_TERMS_AND_CONDITIONS = 'PROVIDER_TITLE_TERMS_AND_CONDITIONS',\r\n\tPROVIDER_TITLE_USER_INPUT = 'PROVIDER_TITLE_USER_INPUT',\r\n\tFILESYSTEM_SUPPORTED_TYPES_START = 'FILESYSTEM_SUPPORTED_TYPES_START',\r\n\tFILESYSTEM_SUPPORTED_TYPES_END = 'FILESYSTEM_SUPPORTED_TYPES_END',\r\n\tFILESYSTEM_SUPPORTED_TYPES_START_SELFIE = 'FILESYSTEM_SUPPORTED_TYPES_START_SELFIE',\r\n\tFILESYSTEM_MAX_FILE_SIZE = 'FILESYSTEM_MAX_FILE_SIZE',\r\n\tFILESYSTEM_CHECK_FILE_TOO_BIG = 'FILESYSTEM_CHECK_FILE_TOO_BIG',\r\n\tFILESYSTEM_CHECK_FILE_INCORRECT_FORMAT = 'FILESYSTEM_CHECK_FILE_INCORRECT_FORMAT',\r\n\tFILESYSTEM_IDENTITY_DOCUMENT = 'FILESYSTEM_IDENTITY_DOCUMENT',\r\n\tFILESYSTEM_FACEMATCH = 'FILESYSTEM_FACEMATCH',\r\n\tFILESYSTEM_ADDRESS = 'FILESYSTEM_ADDRESS',\r\n\tFILESYSTEM_COVID = 'FILESYSTEM_COVID',\r\n\tFILESYSTEM_DRAG_DROP = 'FILESYSTEM_DRAG_DROP',\r\n\tFILESYSTEM_OR = 'FILESYSTEM_OR',\r\n\tFILESYSTEM_CHOOSE = 'FILESYSTEM_CHOOSE',\r\n\tFILESYSTEM_UPLOADING = 'FILESYSTEM_UPLOADING',\r\n\tTRIPLESCAN_GUIDANCE_TRYAGAIN = 'TRIPLESCAN_GUIDANCE_TRYAGAIN',\r\n\tFAILURE_REASON_NOT_SUPPORTED = 'FAILURE_REASON_NOT_SUPPORTED',\r\n\tFAILURE_REASON_REFER = 'FAILURE_REASON_REFER',\r\n\tFAILURE_REASON_EXPIRED = 'FAILURE_REASON_EXPIRED',\r\n\tFAILURE_REASON_NOT_ACCEPTED = 'FAILURE_REASON_NOT_ACCEPTED',\r\n\tPLEASE_TRY_AGAIN_REFER = 'PLEASE_TRY_AGAIN_REFER',\r\n\tPLEASE_TRY_AGAIN_EXPIRED = 'PLEASE_TRY_AGAIN_EXPIRED',\r\n\tPLEASE_TRY_AGAIN_NOT_ACCEPTED = 'PLEASE_TRY_AGAIN_NOT_ACCEPTED',\r\n\tPLEASE_TRY_AGAIN_NOT_SUPPORTED = 'PLEASE_TRY_AGAIN_NOT_SUPPORTED',\r\n\tBLUR_CHECK_REASON = 'BLUR_CHECK_REASON',\r\n\tGLARE_CHECK_REASON = 'GLARE_CHECK_REASON',\r\n\tRESOLUTION_CHECK_REASON = 'RESOLUTION_CHECK_REASON',\r\n\tEDGES_CHECK_REASON = 'EDGES_CHECK_REASON',\r\n\tVALIDATION_FAILED = 'VALIDATION_FAILED',\r\n\tVALIDATION_FAILED_REASON_DOC_UNKNOWN = 'VALIDATION_FAILED_REASON_DOC_UNKNOWN',\r\n\tVALIDATION_FAILED_REASON_DOC_NOT_ACCEPTED = 'VALIDATION_FAILED_REASON_DOC_NOT_ACCEPTED',\r\n\tVALIDATION_FAILED_REASON_DOC_EXPIRED = 'VALIDATION_FAILED_REASON_DOC_EXPIRED',\r\n\tPREVIEW_INFO_TITLE_ID = 'PREVIEW_INFO_TITLE_ID',\r\n\tPREVIEW_INFO_GOOD = 'PREVIEW_INFO_GOOD',\r\n\tPREVIEW_INFO_BAD = 'PREVIEW_INFO_BAD',\r\n\tPREVIEW_INFO_GOOD_EXAMPLE_ID = 'PREVIEW_INFO_GOOD_EXAMPLE_ID',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_ANGLE_ID = 'PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ID',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_COVER_ID = 'PREVIEW_INFO_BAD_EXAMPLE_COVER_ID',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_BLUR_ID = 'PREVIEW_INFO_BAD_EXAMPLE_BLUR_ID',\r\n\tPREVIEW_INFO_TITLE_FACEMATCH = 'PREVIEW_INFO_TITLE_FACEMATCH',\r\n\tPREVIEW_INFO_GOOD_EXAMPLE_FACEMATCH = 'PREVIEW_INFO_GOOD_EXAMPLE_FACEMATCH',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_ANGLE_FACEMATCH = 'PREVIEW_INFO_BAD_EXAMPLE_ANGLE_FACEMATCH',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_COVER_FACEMATCH = 'PREVIEW_INFO_BAD_EXAMPLE_COVER_FACEMATCH',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_BLUR_FACEMATCH = 'PREVIEW_INFO_BAD_EXAMPLE_BLUR_FACEMATCH',\r\n\tPREVIEW_INFO_TITLE_ADDRESS = 'PREVIEW_INFO_TITLE_ADDRESS',\r\n\tPREVIEW_INFO_GOOD_EXAMPLE_ADDRESS = 'PREVIEW_INFO_GOOD_EXAMPLE_ADDRESS',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_ANGLE_ADDRESS = 'PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ADDRESS',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_COVER_ADDRESS = 'PREVIEW_INFO_BAD_EXAMPLE_COVER_ADDRESS',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_BLUR_ADDRESS = 'PREVIEW_INFO_BAD_EXAMPLE_BLUR_ADDRESS',\r\n\tPREVIEW_INFO_TITLE_COVID = 'PREVIEW_INFO_TITLE_COVID',\r\n\tPREVIEW_INFO_GOOD_EXAMPLE_COVID = 'PREVIEW_INFO_GOOD_EXAMPLE_COVID',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_ANGLE_COVID = 'PREVIEW_INFO_BAD_EXAMPLE_ANGLE_COVID',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_COVER_COVID = 'PREVIEW_INFO_BAD_EXAMPLE_COVER_COVID',\r\n\tPREVIEW_INFO_BAD_EXAMPLE_BLUR_COVID = 'PREVIEW_INFO_BAD_EXAMPLE_BLUR_COVID',\r\n\tATTEMPTS_REMAINING = 'ATTEMPTS_REMAINING',\r\n\tCAMERA_CAPTURE = 'CAMERA_CAPTURE',\r\n\tCAMERA_CAPTURE_START_BUTTON = 'CAMERA_CAPTURE_START_BUTTON',\r\n\tCAMERA_CAPTURE_CAPTION = 'CAMERA_CAPTURE_CAPTION',\r\n\tCAMERA_PREVIEW_START = 'CAMERA_PREVIEW_START',\r\n\tCAMERA_CONDITION_BLUR = 'CAMERA_CONDITION_BLUR',\r\n\tCAMERA_CONDITION_CAPTURING = 'CAMERA_CONDITION_CAPTURING',\r\n\tCAMERA_CONDITION_UPLOADING = 'CAMERA_CONDITION_UPLOADING',\r\n\tCAMERA_CONDITION_ALIGNMENT = 'CAMERA_CONDITION_ALIGNMENT',\r\n\tCAMERA_CONDITION_GLARE = 'CAMERA_CONDITION_GLARE',\r\n\tVERIFYING_TITLE = 'VERIFYING_TITLE',\r\n\tPREPARING_PREVIEW_TITLE = 'PREPARING_PREVIEW_TITLE',\r\n\tCAMERA_CONDITION_LOW_RESOLUTION = 'CAMERA_CONDITION_LOW_RESOLUTION',\r\n\tCAMERA_PREVENT_GLARE_HINT = 'CAMERA_PREVENT_GLARE_HINT',\r\n\tCAMERA_PREVENT_BLUR_HINT = 'CAMERA_PREVENT_BLUR_HINT',\r\n\tCAMERA_PREVENT_LOW_RES_HINT = 'CAMERA_PREVENT_LOW_RES_HINT',\r\n\tCAMERA_SMARTCAPTURE_ON = 'CAMERA_SMARTCAPTURE_ON',\r\n\tCAMERA_SMARTCAPTURE_OFF = 'CAMERA_SMARTCAPTURE_OFF',\r\n\tCAMERA_CAPTURE_FRONT = 'CAMERA_CAPTURE_FRONT',\r\n\tCAMERA_MANUAL_CAPTURE_FRONT = 'CAMERA_MANUAL_CAPTURE_FRONT',\r\n\tCAMERA_CAPTURE_BACK = 'CAMERA_CAPTURE_BACK',\r\n\tCAMERA_CAPTURE_SELFIE_CAPTION = 'CAMERA_CAPTURE_SELFIE_CAPTION',\r\n\tCAMERA_CAPTURE_ADDRESS_CAPTION = 'CAMERA_CAPTURE_ADDRESS_CAPTION',\r\n\tCAMERA_CAPTURE_COVID_CAPTION = 'CAMERA_CAPTURE_COVID_CAPTION',\r\n\tCAMERA_LOADING = 'CAMERA_LOADING',\r\n\tCROPPER_RETRY = 'CROPPER_RETRY',\r\n\tCROPPER_UPLOAD = 'CROPPER_UPLOAD',\r\n\tCROPPER_UPLOADING = 'CROPPER_UPLOADING',\r\n\tFILESYSTEM_SELECT = 'FILESYSTEM_SELECT',\r\n\tFILESYSTEM_DROP_IMAGE = 'FILESYSTEM_DROP_IMAGE',\r\n\tGATEWAY_CAMERA = 'GATEWAY_CAMERA',\r\n\tGATEWAY_CANCEL = 'GATEWAY_CANCEL',\r\n\tLIVENESS_START = 'LIVENESS_START',\r\n\tPASSIVE_LIVENESS_START = 'PASSIVE_LIVENESS_START',\r\n\tLOGIN_USERNAME = 'LOGIN_USERNAME',\r\n\tLOGIN_PASSWORD = 'LOGIN_PASSWORD',\r\n\tLOGIN_SUBMIT = 'LOGIN_SUBMIT',\r\n\tRESULTS_DOCUMENTS = 'RESULTS_DOCUMENTS',\r\n\tRESULTS_DOCUMENTS_NONE = 'RESULTS_DOCUMENTS_NONE',\r\n\tRESULTS_DOCUMENT_TYPE = 'RESULTS_DOCUMENT_TYPE',\r\n\tRESULTS_DOCUMENT_RESULT = 'RESULTS_DOCUMENT_RESULT',\r\n\tRESULTS_EXTRACTED_FIELDS_NONE = 'RESULTS_EXTRACTED_FIELDS_NONE',\r\n\tRESULTS_DETAILS = 'RESULTS_DETAILS',\r\n\tRESULTS_DETAILS_NONE = 'RESULTS_DETAILS_NONE',\r\n\tRESULTS_NEW_JOURNEY = 'RESULTS_NEW_JOURNEY',\r\n\tRESULTS_NO_INFORMATION = 'RESULTS_NO_INFORMATION',\r\n\tRESULTS_LOGOUT = 'RESULTS_LOGOUT',\r\n\tRESULTS_HIGH_LEVEL_ABORTED = 'RESULTS_HIGH_LEVEL_Aborted',\r\n\tRESULTS_HIGH_LEVEL_TCCDISAGREE = 'RESULTS_HIGH_LEVEL_TCCDisagree',\r\n\tRESULTS_HIGH_LEVEL_EXPIRED = 'RESULTS_HIGH_LEVEL_Expired',\r\n\tRESULTS_HIGH_LEVEL_EXPIRED_MESSAGE = 'RESULTS_HIGH_LEVEL_EXPIRED_MESSAGE',\r\n\tRESULTS_HIGH_LEVEL_EXPIRED_MESSAGE_VALUE = 'RESULTS_HIGH_LEVEL_EXPIRED_MESSAGE_VALUE',\r\n\tRESULTS_HIGH_LEVEL_NOT_ACCEPTED = 'RESULTS_HIGH_LEVEL_NotAccepted',\r\n\tRESULTS_HIGH_LEVEL_NOT_SUPPORTED = 'RESULTS_HIGH_LEVEL_NotSupported',\r\n\tRESULTS_HIGH_LEVEL_NOTSUPPORTED = 'RESULTS_HIGH_LEVEL_Notsupported',\r\n\tRESULTS_HIGH_LEVEL_PASSED = 'RESULTS_HIGH_LEVEL_Passed',\r\n\tRESULTS_HIGH_LEVEL_REFER = 'RESULTS_HIGH_LEVEL_Refer',\r\n\tRESULTS_HIGH_LEVEL_UNDEFINED = 'RESULTS_HIGH_LEVEL_Undefined',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_ACCUMULATIVE_LIVENESS_RESULT = 'RESULTS_HIGH_LEVEL_DETAIL_ACCUMULATIVELIVENESSRESULT',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_FRONT_SIDE_TYPE_CHECK = 'RESULTS_HIGH_LEVEL_DETAIL_DOCUMENTFRONTSIDETYPECHECK',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_BACK_SIDE_TYPE_CHECK = 'RESULTS_HIGH_LEVEL_DETAIL_DOCUMENTBACKSIDETYPECHECK',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_BACK_SIDE_CHECK = 'RESULTS_HIGH_LEVEL_DETAIL_DOCUMENTBACKSIDECHECK',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_BLOCKING_POLICY = 'RESULTS_HIGH_LEVEL_DETAIL_DOCUMENTBLOCKINGPOLICY',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_OVERALL_VALIDATION = 'RESULTS_HIGH_LEVEL_DETAIL_DOCUMENTOVERALLVALIDATION',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_EXPIRY = 'RESULTS_HIGH_LEVEL_DETAIL_DOCUMENTEXPIRY',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_SUPPORT = 'RESULTS_HIGH_LEVEL_DETAIL_DOCUMENTSUPPORT',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_VALIDATION = 'RESULTS_HIGH_LEVEL_DETAIL_DOCUMENTVALIDATION',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_PROOF_POLICY = 'RESULTS_HIGH_LEVEL_DETAIL_DOCUMENTPROOFPOLICY',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_FACEMATCH_VALIDATION = 'RESULTS_HIGH_LEVEL_DETAIL_FACEMATCHVALIDATION',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_UNDERAGE_RULE = 'RESULTS_HIGH_LEVEL_DETAIL_UNDERAGERULE',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_VALUE_SUCCESS_NEEDED = 'RESULTS_HIGH_LEVEL_DETAIL_VALUE_SUCCESSNEEDED',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_VALUE_FAILED = 'RESULTS_HIGH_LEVEL_DETAIL_VALUE_FAILED',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_VALUE_FAIL = 'RESULTS_HIGH_LEVEL_DETAIL_VALUE_FAIL',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_VALUE_NOTNEEDED = 'RESULTS_HIGH_LEVEL_DETAIL_VALUE_NOTNEEDED',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_VALUE_PASSED = 'RESULTS_HIGH_LEVEL_DETAIL_VALUE_PASSED',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_VALUE_PASS = 'RESULTS_HIGH_LEVEL_DETAIL_VALUE_PASS',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_VALUE_NA = 'RESULTS_HIGH_LEVEL_DETAIL_VALUE_NA',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_VALUE_SKIPPED = 'RESULTS_HIGH_LEVEL_DETAIL_VALUE_SKIPPED',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_VALUE_UNDETERMINED = 'RESULTS_HIGH_LEVEL_DETAIL_VALUE_UNDETERMINED',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_COVID_PASS_CROSSCHECK = 'RESULTS_HIGH_LEVEL_DETAIL_COVIDPASSCROSSCHECKRESULT',\r\n\tRESULTS_HIGH_LEVEL_DETAIL_DATA_CHECK = 'RESULTS_HIGH_LEVEL_DETAIL_DATACHECKSRESULT',\r\n\tADDITIONAL_CHECKS_DETAILS = 'ADDITIONAL_CHECKS_DETAILS',\r\n\tADDITIONAL_CHECKS_DETAILS_NONE = 'ADDITIONAL_CHECKS_DETAILS_NONE',\r\n\tADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK = 'ADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK',\r\n\tADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK_NA = 'ADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK_NA',\r\n\tADDITIONAL_CHECKS_DETAIL_DATACHECKS = 'ADDITIONAL_CHECKS_DETAIL_DATACHECKS',\r\n\tGBG_SCORES = 'GBG_SCORES',\r\n\tGBG_TRUST_SCORE = 'GBG_TRUST_SCORE',\r\n\tGBG_SCORE = 'GBG_SCORE',\r\n\tIAD_RESULT = 'IAD_RESULT',\r\n\tVIEW_RETRY = 'VIEW_RETRY',\r\n\tVIEW_CROP = 'VIEW_CROP',\r\n\tVIEW_CROPPING = 'VIEW_CROPPING',\r\n\tVIEW_UPLOAD = 'VIEW_UPLOAD',\r\n\tVIEW_UPLOADING = 'VIEW_UPLOADING',\r\n\tSMART_CAPTURE_INITIALIZING = 'SMART_CAPTURE_INITIALIZING',\r\n\tSMART_CAPTURE_START = 'SMART_CAPTURE_START',\r\n\tSCANNER_DESC_AVAILABLE = 'SCANNER_DESC_AVAILABLE',\r\n\tSCANNER_DESC_PROCESSING = 'SCANNER_DESC_PROCESSING',\r\n\tSCANNER_DESC_SCANNING = 'SCANNER_DESC_SCANNING',\r\n\tSCANNER_DESC_DISCONNECTED = 'SCANNER_DESC_DISCONNECTED',\r\n\tSCANNER_DESC_NOT_CONNECTED = 'SCANNER_DESC_NOT_CONNECTED',\r\n\tSCANNER_DESC_OFFLINE = 'SCANNER_DESC_OFFLINE',\r\n\tSCANNER_DESC_BUSY = 'SCANNER_DESC_BUSY',\r\n\tSCANNER_DESC_WAITING = 'SCANNER_DESC_WAITING',\r\n\tSCANNER_DESC_LOADING = 'SCANNER_DESC_LOADING',\r\n\tSCANNER_TITLE_AVAILABLE = 'SCANNER_TITLE_AVAILABLE',\r\n\tSCANNER_TITLE_PROCESSING = 'SCANNER_TITLE_PROCESSING',\r\n\tSCANNER_TITLE_SCANNING = 'SCANNER_TITLE_SCANNING',\r\n\tSCANNER_TITLE_DISCONNECTED = 'SCANNER_TITLE_DISCONNECTED',\r\n\tSCANNER_TITLE_NOT_CONNECTED = 'SCANNER_TITLE_NOT_CONNECTED',\r\n\tSCANNER_TITLE_OFFLINE = 'SCANNER_TITLE_OFFLINE',\r\n\tSCANNER_TITLE_BUSY = 'SCANNER_TITLE_BUSY',\r\n\tSCANNER_TITLE_WAITING = 'SCANNER_TITLE_WAITING',\r\n\tSCANNER_ACTION_REGISTER = 'SCANNER_ACTION_REGISTER',\r\n\tSCANNER_ACTION_RELEASE = 'SCANNER_ACTION_RELEASE',\r\n\tCANCEL_JOURNEY = 'CANCEL_JOURNEY',\r\n\tMANUAL_PHOTO_UPLOAD_TOGGLE_FALSE = 'MANUAL_PHOTO_UPLOAD_TOGGLE_FALSE',\r\n\tMANUAL_PHOTO_UPLOAD_TOGGLE_TRUE = 'MANUAL_PHOTO_UPLOAD_TOGGLE_TRUE',\r\n\tJOURNEY_SELECT_CONTINUE = 'JOURNEY_SELECT_CONTINUE',\r\n\r\n\tHELP_MODAL_AUTOCAPTURE_TITLE = 'HELP_MODAL_AUTOCAPTURE_TITLE',\r\n\tHELP_MODAL_AUTOCAPTURE_SUBTITLE = 'HELP_MODAL_AUTOCAPTURE_SUBTITLE',\r\n\tHELP_MODAL_AUTOCAPTURE_TIPS = 'HELP_MODAL_AUTOCAPTURE_TIPS',\r\n\tHELP_MODAL_AUTOCAPTURE_GLARE_TITLE = 'HELP_MODAL_AUTOCAPTURE_GLARE_TITLE',\r\n\tHELP_MODAL_AUTOCAPTURE_GLARE_SUBTITLE = 'HELP_MODAL_AUTOCAPTURE_GLARE_SUBTITLE',\r\n\tHELP_MODAL_AUTOCAPTURE_FAR_TITLE = 'HELP_MODAL_AUTOCAPTURE_FAR_TITLE',\r\n\tHELP_MODAL_AUTOCAPTURE_FAR_SUBTITLE = 'HELP_MODAL_AUTOCAPTURE_FAR_SUBTITLE',\r\n\tHELP_MODAL_AUTOCAPTURE_BLUR_TITLE = 'HELP_MODAL_AUTOCAPTURE_BLUR_TITLE',\r\n\tHELP_MODAL_AUTOCAPTURE_BLUR_SUBTITLE = 'HELP_MODAL_AUTOCAPTURE_BLUR_SUBTITLE',\r\n\tHELP_MODAL_AUTOCAPTURE_MANUAL_CAPTURE = 'HELP_MODAL_AUTOCAPTURE_MANUAL_CAPTURE',\r\n\tHELP_MODAL_AUTOCAPTURE_TURN_MANUAL_CAPTURE = 'HELP_MODAL_AUTOCAPTURE_TURN_MANUAL_CAPTURE',\r\n\r\n\tHELP_MODAL_SELFIE_TITLE = 'HELP_MODAL_SELFIE_TITLE',\r\n\tHELP_MODAL_SELFIE_SUBTITLE = 'HELP_MODAL_SELFIE_SUBTITLE',\r\n\r\n\tHELP_MODAL_POA_TITLE = 'HELP_MODAL_POA_TITLE',\r\n\tHELP_MODAL_POA_SUBTITLE = 'HELP_MODAL_POA_SUBTITLE',\r\n\tHELP_MODAL_POA_TIPS = 'HELP_MODAL_POA_TIPS',\r\n\tHELP_MODAL_POA_GLARE_TITLE = 'HELP_MODAL_POA_GLARE_TITLE',\r\n\tHELP_MODAL_POA_GLARE_SUBTITLE = 'HELP_MODAL_POA_GLARE_SUBTITLE',\r\n\tHELP_MODAL_POA_FAR_TITLE = 'HELP_MODAL_POA_FAR_TITLE',\r\n\tHELP_MODAL_POA_FAR_SUBTITLE = 'HELP_MODAL_POA_FAR_SUBTITLE',\r\n\tHELP_MODAL_POA_BLUR_TITLE = 'HELP_MODAL_POA_BLUR_TITLE',\r\n\tHELP_MODAL_POA_BLUR_SUBTITLE = 'HELP_MODAL_POA_BLUR_SUBTITLE',\r\n\tHELP_MODAL_POA_MANUAL_CAPTURE = 'HELP_MODAL_POA_MANUAL_CAPTURE',\r\n\tHELP_MODAL_POA_TURN_MANUAL_CAPTURE = 'HELP_MODAL_POA_TURN_MANUAL_CAPTURE',\r\n\r\n\tHELP_MODAL_COVID_TITLE = 'HELP_MODAL_COVID_TITLE',\r\n\tHELP_MODAL_COVID_SUBTITLE = 'HELP_MODAL_COVID_SUBTITLE',\r\n\tHELP_MODAL_COVID_TIPS = 'HELP_MODAL_COVID_TIPS',\r\n\tHELP_MODAL_COVID_GLARE_TITLE = 'HELP_MODAL_COVID_GLARE_TITLE',\r\n\tHELP_MODAL_COVID_GLARE_SUBTITLE = 'HELP_MODAL_COVID_GLARE_SUBTITLE',\r\n\tHELP_MODAL_COVID_FAR_TITLE = 'HELP_MODAL_COVID_FAR_TITLE',\r\n\tHELP_MODAL_COVID_FAR_SUBTITLE = 'HELP_MODAL_COVID_FAR_SUBTITLE',\r\n\tHELP_MODAL_COVID_BLUR_TITLE = 'HELP_MODAL_COVID_BLUR_TITLE',\r\n\tHELP_MODAL_COVID_BLUR_SUBTITLE = 'HELP_MODAL_COVID_BLUR_SUBTITLE',\r\n\tHELP_MODAL_COVID_MANUAL_CAPTURE = 'HELP_MODAL_COVID_MANUAL_CAPTURE',\r\n\tHELP_MODAL_COVID_TURN_MANUAL_CAPTURE = 'HELP_MODAL_COVID_TURN_MANUAL_CAPTURE',\r\n\r\n\tHELP_MODAL_NEED_HELP = 'HELP_MODAL_NEED_HELP',\r\n\t// Exceptions below here...\r\n\tEXCEPTION = 'EXCEPTION',\r\n\tEXCEPTION_AUTHORIZATION = 'EXCEPTION_AUTHORIZATION',\r\n\tEXCEPTION_AUTHORIZATION_ACCOUNT_NOT_AUTHORIZED = 'EXCEPTION_AUTHORIZATION_ACCOUNT_NOT_AUTHORIZED',\r\n\tEXCEPTION_AUTHORIZATION_AUTH_DETAILS_INVALID = 'EXCEPTION_AUTHORIZATION_AUTH_DETAILS_INVALID',\r\n\tEXCEPTION_AUTHORIZATION_AUTH_NOT_ENABLED = 'EXCEPTION_AUTHORIZATION_AUTH_NOT_ENABLED',\r\n\tEXCEPTION_AUTHORIZATION_PROCESS_NOT_AUTHORIZED = 'EXCEPTION_AUTHORIZATION_PROCESS_NOT_AUTHORIZED',\r\n\tEXCEPTION_BAD_REQUEST = 'EXCEPTION_BAD_REQUEST',\r\n\tEXCEPTION_BAD_REQUEST_INVALID_IMAGE = 'EXCEPTION_BAD_REQUEST_INVALID_IMAGE',\r\n\tEXCEPTION_BAD_REQUEST_WAITING_FOR_RESPONSE = 'EXCEPTION_BAD_REQUEST_WAITING_FOR_RESPONSE',\r\n\tEXCEPTION_FLOW_STATE_JOURNEY_ENDED = 'EXCEPTION_FLOW_STATE_JOURNEY_ENDED',\r\n\tEXCEPTION_FLOW_STATE_MISSING = 'EXCEPTION_FLOW_STATE_MISSING',\r\n\tEXCEPTION_INVALID_PARAMETER_CALLBACK_MUST_BE_FUNCTION = 'EXCEPTION_INVALID_PARAMETER_CALLBACK_MUST_BE_FUNCTION',\r\n\tEXCEPTION_INVALID_PARAMETER_NAME_MUST_BE_STRING = 'EXCEPTION_INVALID_PARAMETER_NAME_MUST_BE_STRING',\r\n\tEXCEPTION_INVALID_PARAMETER_PRIORITY_MUST_BE_NUMBER = 'EXCEPTION_INVALID_PARAMETER_PRIORITY_MUST_BE_NUMBER',\r\n\tEXCEPTION_INVALID_PARAMETER_PRIORITY_MUST_BE_POSITIVE_NUMBER = 'EXCEPTION_INVALID_PARAMETER_PRIORITY_MUST_BE_POSITIVE_NUMBER',\r\n\tEXCEPTION_INVALID_PARAMETER_SHOULD_BE_ELEMENT_OR_SELECTOR = 'EXCEPTION_INVALID_PARAMETER_SHOULD_BE_ELEMENT_OR_SELECTOR',\r\n\tEXCEPTION_INVALID_PARAMETER_VALUE_NOT_VALID = 'EXCEPTION_INVALID_PARAMETER_VALUE_NOT_VALID',\r\n\tEXCEPTION_INVALID_PARAMETER_VALUE_DAMAGED = 'EXCEPTION_INVALID_PARAMETER_VALUE_DAMAGED',\r\n\tEXCEPTION_MISSING_PARAMETER_BACKEND_URL_MISSING = 'EXCEPTION_MISSING_PARAMETER_BACKEND_URL_MISSING',\r\n\tEXCEPTION_MISSING_PARAMETER_COORDINATES_MISSING = 'EXCEPTION_MISSING_PARAMETER_COORDINATES_MISSING',\r\n\tEXCEPTION_MISSING_PARAMETER_IMAGES_MISSING = 'EXCEPTION_MISSING_PARAMETER_IMAGES_MISSING',\r\n\tEXCEPTION_MISSING_PARAMETER_PASSWORD_MISSING = 'EXCEPTION_MISSING_PARAMETER_PASSWORD_MISSING',\r\n\tEXCEPTION_MISSING_PARAMETER_USERNAME_MISSING = 'EXCEPTION_MISSING_PARAMETER_USERNAME_MISSING',\r\n\tEXCEPTION_MISSING_REQUIRED_FIELD_MISSING = 'EXCEPTION_MISSING_REQUIRED_FIELD_MISSING',\r\n\tEXCEPTION_POSTCODE_FORMAT_ERROR = 'EXCEPTION_POSTCODE_FORMAT_ERROR',\r\n\tEXCEPTION_HOUSENUMBER_FORMAT_ERROR = 'EXCEPTION_HOUSENUMBER_FORMAT_ERROR',\r\n\tEXCEPTION_STREETNAME_FORMAT_ERROR = 'EXCEPTION_STREETNAME_FORMAT_ERROR',\r\n\tEXCEPTION_TOWN_FORMAT_ERROR = 'EXCEPTION_TOWN_FORMAT_ERROR',\r\n\tEXCEPTION_JOURNEY_DEFINITIONS_MISSING = 'EXCEPTION_JOURNEY_DEFINITIONS_MISSING',\r\n\tEXCEPTION_NETWORK = 'EXCEPTION_NETWORK',\r\n\tEXCEPTION_PLATFORM_BROWSER_ONLY = 'EXCEPTION_PLATFORM_BROWSER_ONLY',\r\n\tEXCEPTION_PLATFORM_UNSUPPORTED = 'EXCEPTION_PLATFORM_UNSUPPORTED',\r\n\tEXCEPTION_PLATFORM_CAMERA_PERMISSION_DENIED = 'EXCEPTION_PLATFORM_CAMERA_PERMISSION_DENIED',\r\n\tEXCEPTION_PLATFORM_CAMERA_PERMISSION_UNAVAILABLE = 'EXCEPTION_PLATFORM_CAMERA_PERMISSION_UNAVAILABLE',\r\n\tEXCEPTION_PLATFORM_CAMERA_NOT_READABLE = 'EXCEPTION_PLATFORM_CAMERA_NOT_READABLE',\r\n\tEXCEPTION_PLATFORM_CAMERA_NONE_SUITABLE = 'EXCEPTION_PLATFORM_CAMERA_NONE_SUITABLE',\r\n\tEXCEPTION_SERVER = 'EXCEPTION_SERVER',\r\n\tEXCEPTION_SERVER_UNREACHABLE = 'EXCEPTION_SERVER_UNREACHABLE',\r\n\tEXCEPTION_SERVER_DATA_NOT_PERSISTED = 'EXCEPTION_SERVER_DATA_NOT_PERSISTED',\r\n\tEXCEPTION_SERVER_RESULT_NOT_PASSING = 'EXCEPTION_SERVER_RESULT_NOT_PASSING',\r\n\tEXCEPTION_TEMPLATE_CANVAS_CONTEXT_UNAVAILABLE = 'EXCEPTION_TEMPLATE_CANVAS_CONTEXT_UNAVAILABLE',\r\n\tEXCEPTION_TEMPLATE_CONTAINER_MISSING = 'EXCEPTION_TEMPLATE_CONTAINER_MISSING',\r\n\tEXCEPTION_TEMPLATE_ELEMENTS_MISSING = 'EXCEPTION_TEMPLATE_ELEMENTS_MISSING',\r\n\tEXCEPTION_TEMPLATE_MISSING = 'EXCEPTION_TEMPLATE_MISSING',\r\n\tEXCEPTION_TEMPLATE_SOURCE_ELEMENT_MISSING = 'EXCEPTION_TEMPLATE_SOURCE_ELEMENT_MISSING',\r\n\tEXCEPTION_UNAVAILABLE_INPUT_PROVIDER_CANNOT_RETRIEVE = 'EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_CANNOT_RETRIEVE',\r\n\tEXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NONE_SPECIFIED = 'EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NONE_SPECIFIED',\r\n\tEXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NOT_AVAILABLE = 'EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NOT_AVAILABLE',\r\n\tSUPPORTED_DOCUMENT_ACCOUNT_STATEMENT = 'SUPPORTED_DOCUMENT_Account Statement',\r\n\tSUPPORTED_DOCUMENT_AGREEMENT_TENANCY = 'SUPPORTED_DOCUMENT_Agreement (Tenancy)',\r\n\tSUPPORTED_DOCUMENT_BANK_DOCUMENT = 'SUPPORTED_DOCUMENT_Bank Document',\r\n\tSUPPORTED_DOCUMENT_BANK_LETTER = 'SUPPORTED_DOCUMENT_Bank Letter',\r\n\tSUPPORTED_DOCUMENT_BANK_STATEMENT = 'SUPPORTED_DOCUMENT_Bank Statement',\r\n\tSUPPORTED_DOCUMENT_BENEFIT_LETTER = 'SUPPORTED_DOCUMENT_Benefit Letter',\r\n\tSUPPORTED_DOCUMENT_CERTIFICATE = 'SUPPORTED_DOCUMENT_Certificate (Birth, Marriage, Civil partnership)',\r\n\tSUPPORTED_DOCUMENT_COUNCIL_DOCUMENT = 'SUPPORTED_DOCUMENT_Council Document',\r\n\tSUPPORTED_DOCUMENT_COUNCIL_LETTER = 'SUPPORTED_DOCUMENT_Council Letter',\r\n\tSUPPORTED_DOCUMENT_COUNCIL_TAX = 'SUPPORTED_DOCUMENT_Council Tax',\r\n\tSUPPORTED_DOCUMENT_DRIVING_LICENSE = 'SUPPORTED_DOCUMENT_Driving License',\r\n\tSUPPORTED_DOCUMENT_DWP_DOCUMENT = 'SUPPORTED_DOCUMENT_DWP Document',\r\n\tSUPPORTED_DOCUMENT_HMRC_DOCUMENT = 'SUPPORTED_DOCUMENT_HMRC Document',\r\n\tSUPPORTED_DOCUMENT_INFORMATION_SHEET = 'SUPPORTED_DOCUMENT_Information Sheet',\r\n\tSUPPORTED_DOCUMENT_INSURANCE_DOCUMENT = 'SUPPORTED_DOCUMENT_Insurance Document',\r\n\tSUPPORTED_DOCUMENT_INSURANCE_LETTER = 'SUPPORTED_DOCUMENT_Insurance Letter',\r\n\tSUPPORTED_DOCUMENT_INVOICE = 'SUPPORTED_DOCUMENT_Invoice',\r\n\tSUPPORTED_DOCUMENT_NIC_LETTER = 'SUPPORTED_DOCUMENT_NIC Letter',\r\n\tSUPPORTED_DOCUMENT_NINO_LETTER = 'SUPPORTED_DOCUMENT_NINO Letter',\r\n\tSUPPORTED_DOCUMENT_OFFICIAL_DOCUMENT = 'SUPPORTED_DOCUMENT_Official Document',\r\n\tSUPPORTED_DOCUMENT_OFFICIAL_LETTER = 'SUPPORTED_DOCUMENT_Official Letter',\r\n\tSUPPORTED_DOCUMENT_REPAYMENT = 'SUPPORTED_DOCUMENT_Repayment Letter (related to Tax or Social support)',\r\n\tSUPPORTED_DOCUMENT_TAX_LETTER = 'SUPPORTED_DOCUMENT_Tax Letter',\r\n\tSUPPORTED_DOCUMENT_TAX_STATEMENT = 'SUPPORTED_DOCUMENT_Tax Statement',\r\n\tSUPPORTED_DOCUMENT_TEL_BILL = 'SUPPORTED_DOCUMENT_Tel Bill',\r\n\tSUPPORTED_DOCUMENT_TEL_LETTER = 'SUPPORTED_DOCUMENT_Tel Letter',\r\n\tSUPPORTED_DOCUMENT_TELECOMMUNICATION_DOCUMENT = 'SUPPORTED_DOCUMENT_Telecommunication Document',\r\n\tSUPPORTED_DOCUMENT_TV_LICENSE = 'SUPPORTED_DOCUMENT_TV Licence',\r\n\tSUPPORTED_DOCUMENT_UNIVERSITY_LETTER = 'SUPPORTED_DOCUMENT_University Letter',\r\n\tSUPPORTED_DOCUMENT_UTILITY_BILL = 'SUPPORTED_DOCUMENT_Utility Bill',\r\n\tSUPPORTED_DOCUMENT_UTILITY_DOCUMENT = 'SUPPORTED_DOCUMENT_Utility Document',\r\n\tSUPPORTED_DOCUMENT_UTILITY_LETTER = 'SUPPORTED_DOCUMENT_Utility Letter',\r\n\tSUPPORTED_DOCUMENT_WATER_BILL = 'SUPPORTED_DOCUMENT_Water Bil',\r\n\tSUPPORTED_DOCUMENT_WATER_DOCUMENT = 'SUPPORTED_DOCUMENT_Water Document',\r\n\tSUPPORTED_DOCUMENT_AGENTS_LICENCE = 'SUPPORTED_DOCUMENT_Agents License',\r\n\tSUPPORTED_DOCUMENT_ELECTORAL_CARD = 'SUPPORTED_DOCUMENT_Electoral Card',\r\n\tSUPPORTED_DOCUMENT_FOREIGNER_IDENTIFICATION_CARD = 'SUPPORTED_DOCUMENT_Foreigner Identification Card',\r\n\tSUPPORTED_DOCUMENT_HEALTH_CARD = 'SUPPORTED_DOCUMENT_Health Card',\r\n\tSUPPORTED_DOCUMENT_JOB_LICENCE = 'SUPPORTED_DOCUMENT_Job License ',\r\n\tSUPPORTED_DOCUMENT_MEMBERSHIP_IDENTIFICATION_CARD = 'SUPPORTED_DOCUMENT_Membership Identification Card',\r\n\tSUPPORTED_DOCUMENT_MILITARY_IDENTIFICATION_CARD = 'SUPPORTED_DOCUMENT_Military Identification Card',\r\n\tSUPPORTED_DOCUMENT_NATIONAL_IDENTIFICATION_CARD = 'SUPPORTED_DOCUMENT_National Identification Card',\r\n\tSUPPORTED_DOCUMENT_PASSPORT = 'SUPPORTED_DOCUMENT_Passport',\r\n\tSUPPORTED_DOCUMENT_TRAVEL_PERMIT = 'SUPPORTED_DOCUMENT_Travel Permit',\r\n\tSUPPORTED_DOCUMENT_VISA = 'SUPPORTED_DOCUMENT_Visa',\r\n\tSUPPORTED_DOCUMENT_WEAPONS_LICENCE = 'SUPPORTED_DOCUMENT_Weapons Licence',\r\n\tSUPPORTED_DOCUMENT_SELFIE_PHOTO = 'SUPPORTED_DOCUMENT_Selfie Photo',\r\n\tSUPPORTED_DOCUMENT_DATACHECKS = 'SUPPORTED_DOCUMENT_DataChecks',\r\n\tSUPPORTED_DOCUMENT_UNKNOWN = 'SUPPORTED_DOCUMENT_Unknown',\r\n\tSUPPORTED_DOCUMENT_COVIDPASS = 'SUPPORTED_DOCUMENT_CovidPass',\r\n\tSUPPORTED_DOCUMENT_PAPER_DOCUMENT = 'SUPPORTED_DOCUMENT_Paper Document',\r\n\tSUPPORTED_DOCUMENT_ADDRESS_DOCUMENT = 'SUPPORTED_DOCUMENT_Address Document',\r\n\tEXTRACTED_FIELDS_ADDRESS_FULL = 'EXTRACTED_FIELDS_AddressFull',\r\n\tEXTRACTED_FIELDS_ADDRESS_CITY = 'EXTRACTED_FIELDS_AddressCity',\r\n\tEXTRACTED_FIELDS_ADDRESS_POSTCODE = 'EXTRACTED_FIELDS_AddressPostCode',\r\n\tEXTRACTED_FIELDS_LASTNAME_FIRST_PART = 'EXTRACTED_FIELDS_LastNameFirstPart',\r\n\tEXTRACTED_FIELDS_SEX = 'EXTRACTED_FIELDS_Sex',\r\n\tEXTRACTED_FIELDS_BIRTH_PLACE = 'EXTRACTED_FIELDS_BirthPlace',\r\n\tEXTRACTED_FIELDS_ISSUE_NUMBER = 'EXTRACTED_FIELDS_IssueNumber',\r\n\tEXTRACTED_FIELDS_DOCUMENT_NUMBER_CHECK_DIGIT = 'EXTRACTED_FIELDS_DocumentNumberCheckDigit',\r\n\tEXTRACTED_FIELDS_BIRTH_DATE = 'EXTRACTED_FIELDS_BirthDate',\r\n\tEXTRACTED_FIELDS_DOCUMENT_NUMBER = 'EXTRACTED_FIELDS_DocumentNumber',\r\n\tEXTRACTED_FIELDS_COVIDPASSCROSSCHECKRESULT = 'EXTRACTED_FIELDS_COVIDPASSCROSSCHECKRESULT',\r\n\tEXTRACTED_FIELDS_FIRST_NAME = 'EXTRACTED_FIELDS_FirstName',\r\n\tEXTRACTED_FIELDS_ARBITRARY_DIGIT = 'EXTRACTED_FIELDS_ArbitraryDigit',\r\n\tEXTRACTED_FIELDS_FIRST_NAME_INITIAL = 'EXTRACTED_FIELDS_FirstNameInitial',\r\n\tEXTRACTED_FIELDS_EXPIRY_DATE = 'EXTRACTED_FIELDS_ExpiryDate',\r\n\tEXTRACTED_FIELDS_ISSUE_DATE = 'EXTRACTED_FIELDS_IssueDate',\r\n\tEXTRACTED_FIELDS_LAST_NAME = 'EXTRACTED_FIELDS_LastName',\r\n\tEXTRACTED_FIELDS_LICENSE_CATEGORY = 'EXTRACTED_FIELDS_LicenseCategory',\r\n\tEXTRACTED_FIELDS_DOCUMENT_CATEGORY = 'EXTRACTED_FIELDS_DocumentCategory',\r\n\tEXTRACTED_FIELDS_DOCUMENT_TYPE = 'EXTRACTED_FIELDS_DocumentType',\r\n\tEXTRACTED_FIELDS_DOCUMENT_SUB_TYPE = 'EXTRACTED_FIELDS_DocumentSubType',\r\n\tEXTRACTED_FIELDS_NATIONALITY_CODE = 'EXTRACTED_FIELDS_NationalityCode',\r\n\tEXTRACTED_FIELDS_MIDDLE_NAME = 'EXTRACTED_FIELDS_MiddleName',\r\n\tEXTRACTED_FIELDS_FIRST_ISSUANCE_DATE = 'EXTRACTED_FIELDS_FirstIssuanceDate',\r\n\tEXTRACTED_FIELDS_SECOND_LAST_NAME = 'EXTRACTED_FIELDS_SecondLastName',\r\n\tEXTRACTED_FIELDS_FULL_NAME = 'EXTRACTED_FIELDS_FullName',\r\n\tEXTRACTED_FIELDS_PERSONAL_NUMBER = 'EXTRACTED_FIELDS_PersonalNumber',\r\n\tEXTRACTED_FIELDS_NATIONALITY_NAME = 'EXTRACTED_FIELDS_NationalityName',\r\n\tEXTRACTED_FIELDS_BARCODE_ITEMS = 'EXTRACTED_FIELDS_BarcodeItems',\r\n\tEXTRACTED_FIELDS_BIRTH_PLACE_CITY = 'EXTRACTED_FIELDS_BirthPlaceCity',\r\n\tEXTRACTED_FIELDS_BIRTH_PLACE_STATE = 'EXTRACTED_FIELDS_BirthPlaceState',\r\n\tEXTRACTED_FIELDS_BIRTH_PLACE_COUNTRY = 'EXTRACTED_FIELDS_BirthPlaceCountry',\r\n\tEXTRACTED_FIELDS_MRZ_FULL = 'EXTRACTED_FIELDS_MRZFull',\r\n\tEXTRACTED_FIELDS_MRZ_LINE_1 = 'EXTRACTED_FIELDS_MRZLine1',\r\n\tEXTRACTED_FIELDS_MRZ_LINE_2 = 'EXTRACTED_FIELDS_MRZLine2',\r\n\tEXTRACTED_FIELDS_MRZ_LINE_3 = 'EXTRACTED_FIELDS_MRZLine3',\r\n\tEXTRACTED_FIELDS_OBSERVATION_PAGE = 'EXTRACTED_FIELDS_ObservationPage',\r\n\tEXTRACTED_FIELDS_ISSUING_AUTHORITY = 'EXTRACTED_FIELDS_IssuingAuthority',\r\n\tEXTRACTED_FIELDS_ISSUING_LOCATION = 'EXTRACTED_FIELDS_IssuingLocation',\r\n\tEXTRACTED_FIELDS_MARITAL_STATUS = 'EXTRACTED_FIELDS_MaritalStatus',\r\n\tEXTRACTED_FIELDS_OCCUPATION = 'EXTRACTED_FIELDS_Occupation',\r\n\tEXTRACTED_FIELDS_ALIEN_NUMBER = 'EXTRACTED_FIELDS_AlienNumber',\r\n\tEXTRACTED_FIELDS_EMPLOYER = 'EXTRACTED_FIELDS_Employer',\r\n\tEXTRACTED_FIELDS_ADDRESS_LINE_1 = 'EXTRACTED_FIELDS_AddressLine1',\r\n\tEXTRACTED_FIELDS_ADDRESS_LINE_2 = 'EXTRACTED_FIELDS_AddressLine2',\r\n\tEXTRACTED_FIELDS_ADDRESS_LINE_3 = 'EXTRACTED_FIELDS_AddressLine3',\r\n\tEXTRACTED_FIELDS_ADDRESS_LINE_4 = 'EXTRACTED_FIELDS_AddressLine4',\r\n\tEXTRACTED_FIELDS_ADDRESS_STATE = 'EXTRACTED_FIELDS_AddressState',\r\n\tEXTRACTED_FIELDS_ADDRESS_DISTRICT = 'EXTRACTED_FIELDS_AddressDistrict',\r\n\tEXTRACTED_FIELDS_ADDRESS_BUILDING_NUM = 'EXTRACTED_FIELDS_AddressBuildingNumber',\r\n\tEXTRACTED_FIELDS_ADDRESS_BUILDING_NAME = 'EXTRACTED_FIELDS_AddressBuildingName',\r\n\tEXTRACTED_FIELDS_ADDRESS_STREET = 'EXTRACTED_FIELDS_AddressStreet',\r\n\tEXTRACTED_FIELDS_ADDRESS_COUNTRY = 'EXTRACTED_FIELDS_AddressCountry',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_FULL = 'EXTRACTED_FIELDS_RefAddressFull',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_LINE_1 = 'EXTRACTED_FIELDS_RefAddressLine1',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_LINE_2 = 'EXTRACTED_FIELDS_RefAddressLine2',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_LINE_3 = 'EXTRACTED_FIELDS_RefAddressLine3',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_LINE_4 = 'EXTRACTED_FIELDS_RefAddressLine4',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_CITY = 'EXTRACTED_FIELDS_RefAddressCity',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_STATE = 'EXTRACTED_FIELDS_RefAddressState',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_DISTRICT = 'EXTRACTED_FIELDS_RefAddressDistrict',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_BUILTING_NUM = 'EXTRACTED_FIELDS_RefAddressBuildingNumber',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_BUILDING_NAME = 'EXTRACTED_FIELDS_RefAddressBuildingName',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_SUB_BUILDING_NAME = 'EXTRACTED_FIELDS_RefAddressSubBuildingName',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_STREET = 'EXTRACTED_FIELDS_RefAddressStreet',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_COUNTRY = 'EXTRACTED_FIELDS_RefAddressCountry',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_POST_CODE = 'EXTRACTED_FIELDS_RefAddressPostCode',\r\n\tEXTRACTED_FIELDS_HEALTH_NUMBER = 'EXTRACTED_FIELDS_HealthNumber',\r\n\tEXTRACTED_FIELDS_ENDORSMENTS = 'EXTRACTED_FIELDS_Endorsements',\r\n\tEXTRACTED_FIELDS_CONSTRAINTS = 'EXTRACTED_FIELDS_Constraints',\r\n\tEXTRACTED_FIELDS_LICENSE_MARINE = 'EXTRACTED_FIELDS_LicenseMarine',\r\n\tEXTRACTED_FIELDS_HEIGHT = 'EXTRACTED_FIELDS_Height',\r\n\tEXTRACTED_FIELDS_WEIGHT = 'EXTRACTED_FIELDS_Weight',\r\n\tEXTRACTED_FIELDS_HAIR_COLOR = 'EXTRACTED_FIELDS_HairColor',\r\n\tEXTRACTED_FIELDS_EYE_COLOR = 'EXTRACTED_FIELDS_EyeColor',\r\n\tEXTRACTED_FIELDS_LENS_DATA = 'EXTRACTED_FIELDS_LensData',\r\n\tEXTRACTED_FIELDS_SOCIAL_SECURITY_NUM = 'EXTRACTED_FIELDS_SocialSecurityNumber',\r\n\tEXTRACTED_FIELDS_NATIONAL_INSURANCE_NUM = 'EXTRACTED_FIELDS_NationalInsuranceNumber',\r\n\tEXTRACTED_FIELDS_RACE = 'EXTRACTED_FIELDS_Race',\r\n\tEXTRACTED_FIELDS_MOTHER_NAME = 'EXTRACTED_FIELDS_MotherName',\r\n\tEXTRACTED_FIELDS_FATHER_NAME = 'EXTRACTED_FIELDS_FatherName',\r\n\tEXTRACTED_FIELDS_PARENTS = 'EXTRACTED_FIELDS_Parents',\r\n\tEXTRACTED_FIELDS_REMARKS = 'EXTRACTED_FIELDS_Remarks',\r\n\tEXTRACTED_FIELDS_DISTINGUISHING_MARKS = 'EXTRACTED_FIELDS_DistinguishingMarks',\r\n\tEXTRACTED_FIELDS_PERIOD_OF_STAY = 'EXTRACTED_FIELDS_PeriodOfStay',\r\n\tEXTRACTED_FIELDS_TAX_NUMBER = 'EXTRACTED_FIELDS_TaxNumber',\r\n\tEXTRACTED_FIELDS_DONOR = 'EXTRACTED_FIELDS_Donor',\r\n\tEXTRACTED_FIELDS_RFIDG1 = 'EXTRACTED_FIELDS_RFIDG1',\r\n\tEXTRACTED_FIELDS_RFIDG2 = 'EXTRACTED_FIELDS_RFIDG2',\r\n\tEXTRACTED_FIELDS_RFIDG3 = 'EXTRACTED_FIELDS_RFIDG3',\r\n\tEXTRACTED_FIELDS_RFIDG15 = 'EXTRACTED_FIELDS_RFIDG15',\r\n\tEXTRACTED_FIELDS_RFIDSOD = 'EXTRACTED_FIELDS_RFIDSOD',\r\n\tEXTRACTED_FIELDS_PORTRAIT_PHOTO = 'EXTRACTED_FIELDS_PortraitPhoto',\r\n\tEXTRACTED_FIELDS_TITLE = 'EXTRACTED_FIELDS_Title',\r\n\tEXTRACTED_FIELDS_ISSUE_DATE_2 = 'EXTRACTED_FIELDS_IssueDate2',\r\n\tEXTRACTED_FIELDS_EXPIRY_DATE_2 = 'EXTRACTED_FIELDS_ExpiryDate2',\r\n\tEXTRACTED_FIELDS_LICENSE_CATEGORY_2 = 'EXTRACTED_FIELDS_LicenseCategory2',\r\n\tEXTRACTED_FIELDS_ISSUE_DATE_3 = 'EXTRACTED_FIELDS_IssueDate3',\r\n\tEXTRACTED_FIELDS_EXPIRY_DATE_3 = 'EXTRACTED_FIELDS_ExpiryDate3',\r\n\tEXTRACTED_FIELDS_LICENSE_CATEGORY_3 = 'EXTRACTED_FIELDS_LicenseCategory3',\r\n\tEXTRACTED_FIELDS_ISSUE_DATE_4 = 'EXTRACTED_FIELDS_IssueDate4',\r\n\tEXTRACTED_FIELDS_EXPIRY_DATE_4 = 'EXTRACTED_FIELDS_ExpiryDate4',\r\n\tEXTRACTED_FIELDS_LICENSE_CATEGORY_4 = 'EXTRACTED_FIELDS_LicenseCategory4',\r\n\tEXTRACTED_FIELDS_MRZ_CODE_1 = 'EXTRACTED_FIELDS_MRZCode1',\r\n\tEXTRACTED_FIELDS_MRZ_CODE_2 = 'EXTRACTED_FIELDS_MRZCode2',\r\n\tEXTRACTED_FIELDS_MRZ_STANDARD_TYPE = 'EXTRACTED_FIELDS_MRZStandardType',\r\n\tEXTRACTED_FIELDS_ADDRESS_STREET_SUFFIX = 'EXTRACTED_FIELDS_AddressStreetSuffix',\r\n\tEXTRACTED_FIELDS_ADDRESS_STREET_TYPE = 'EXTRACTED_FIELDS_AddressStreetType',\r\n\tEXTRACTED_FIELDS_ADDRESS_UNIT_NUMBER = 'EXTRACTED_FIELDS_AddressUnitNumber',\r\n\tEXTRACTED_FIELDS_LICENSE_NUMBER = 'EXTRACTED_FIELDS_LicenseNumber',\r\n\tEXTRACTED_FIELDS_ADDRESS_STATE_CODE = 'EXTRACTED_FIELDS_AddressStateCode',\r\n\tEXTRACTED_FIELDS_ADDRESS_STREET_TYPE_ABBREVIATION = 'EXTRACTED_FIELDS_AddressStreetTypeAbbreviation',\r\n\tEXTRACTED_FIELDS_ADDRESS_UNIT_TYPE = 'EXTRACTED_FIELDS_AddressUnitType',\r\n\tEXTRACTED_FIELDS_ADDRESS_DELIVERY_POINT_ID = 'EXTRACTED_FIELDS_AddressDeliveryPointIdentifier',\r\n\tEXTRACTED_FIELDS_AGE_CATEGORY = 'EXTRACTED_FIELDS_AgeCategory',\r\n\tEXTRACTED_FIELDS_CHILDREN_COUNT = 'EXTRACTED_FIELDS_ChildernCount',\r\n\tEXTRACTED_FIELDS_ENTRY_MODE = 'EXTRACTED_FIELDS_EntryMode',\r\n\tEXTRACTED_FIELDS_VAF_NUM = 'EXTRACTED_FIELDS_VAFNumber',\r\n\tEXTRACTED_FIELDS_ADDRESS_LINE_5 = 'EXTRACTED_FIELDS_AddressLine5',\r\n\tEXTRACTED_FIELDS_RFID_PORTRAIT_PHOTO = 'EXTRACTED_FIELDS_RFIDPortraitPhoto',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_LINE_5 = 'EXTRACTED_FIELDS_RefAddressLine5',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_STATE_CODE = 'EXTRACTED_FIELDS_RefAddressStateCode',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_STREET_TYPE = 'EXTRACTED_FIELDS_RefAddressStreetType',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_STREET_TYPE_ABBREVIATION = 'EXTRACTED_FIELDS_RefAddressStreetTypeAbbreviation',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_STREET_SUFFIX = 'EXTRACTED_FIELDS_RefAddressStreetSuffix',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_UNIT_NUM = 'EXTRACTED_FIELDS_RefAddressUnitNumber',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_UNIT_TYPE = 'EXTRACTED_FIELDS_RefAddressUnitType',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_POST_CODE_TYPE = 'EXTRACTED_FIELDS_RefAddressPostcodeType',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_DELIVERY_POINT_ID = 'EXTRACTED_FIELDS_RefAddressDeliveryPointIdentifier',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_PO_BOX_NUM = 'EXTRACTED_FIELDS_RefAddressPOBoxNumber',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_DEPENDENT_LOCALITY = 'EXTRACTED_FIELDS_RefAddressDependentLocality',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_DOUBLE_DEPENDENT_LOCALITY = 'EXTRACTED_FIELDS_RefAddressDoubleDependentLocality',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_THOROUGHFARE = 'EXTRACTED_FIELDS_RefAddressThoroughfare',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_THOROUGHFARE_DESC = 'EXTRACTED_FIELDS_RefAddressThoroughfareDesc',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_DEPENDENT_THOROUGHFARE = 'EXTRACTED_FIELDS_RefAddressDependentThoroughfare',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_DEPENDENT_THOROUGHFARE_DESC = 'EXTRACTED_FIELDS_RefAddressDependentThoroughfareDesc',\r\n\tEXTRACTED_FIELDS_REF_ADDRESS_SUB_BUILDING_NUM = 'EXTRACTED_FIELDS_RefAddressSubBuildingNumber',\r\n\tEXTRACTED_FIELDS_ADDRESS_SUB_BUILDING_NUM = 'EXTRACTED_FIELDS_AddressSubBuildingNumber',\r\n\tEXTRACTED_FIELDS_ADDRESS_SUB_BUILDING_NAME = 'EXTRACTED_FIELDS_AddressSubBuildingName',\r\n\tEXTRACTED_FIELDS_ADDRESS_POST_CODE_TYPE = 'EXTRACTED_FIELDS_AddressPostCodeType',\r\n\tEXTRACTED_FIELDS_ISSUING_AUTHORITY_TYPE = 'EXTRACTED_FIELDS_IssuingAuthorityType',\r\n\tEXTRACTED_FIELDS_SIGNATURE = 'EXTRACTED_FIELDS_Signature',\r\n\tEXTRACTED_FIELDS_HOLOGRAM = 'EXTRACTED_FIELDS_Hologram',\r\n\tEXTRACTED_FIELDS_CARD_NUMBER = 'EXTRACTED_FIELDS_CardNumber',\r\n\tEXTRACTED_FIELDS_MIDDLE_NAME_INITIAL = 'EXTRACTED_FIELDS_MiddleNameInitial',\r\n\tEXTRACTED_FIELDS_PERMIT_NUM = 'EXTRACTED_FIELDS_PermitNumber',\r\n\tEXTRACTED_FIELDS_REFERENCE_NUM = 'EXTRACTED_FIELDS_ReferenceNumber',\r\n\tEXTRACTED_FIELDS_CUSTOMER_NUM = 'EXTRACTED_FIELDS_CustomerNumber',\r\n\tEXTRACTED_FIELDS_BOS_NUM = 'EXTRACTED_FIELDS_BOSNumber',\r\n\tEXTRACTED_FIELDS_STUDENT_ID = 'EXTRACTED_FIELDS_StudentID',\r\n\tEXTRACTED_FIELDS_MEMBERSHIP_NUMBER = 'EXTRACTED_FIELDS_MembershipNumber',\r\n\tEXTRACTED_FIELDS_LICENSE_TYPE = 'EXTRACTED_FIELDS_LicenseType',\r\n\tEXTRACTED_FIELDS_LICENSE_TYPE_2 = 'EXTRACTED_FIELDS_LicenseType2',\r\n\tEXTRACTED_FIELDS_LICENSE_TYPE_3 = 'EXTRACTED_FIELDS_LicenseType3',\r\n\tEXTRACTED_FIELDS_LICENSE_TYPE_4 = 'EXTRACTED_FIELDS_LicenseType4',\r\n\tEXTRACTED_FIELDS_DOCUMENT_TYPE_CODE = 'EXTRACTED_FIELDS_DocumentTypeCode',\r\n\tEXTRACTED_FIELDS_MRZ_DOCUMENT_NUMBER_CHECK_DIGIT = 'EXTRACTED_FIELDS_MRZDocumentNumberCheckDigit',\r\n\tEXTRACTED_FIELDS_MRZ_BIRTH_DATE_CHECK_DIGIT = 'EXTRACTED_FIELDS_MRZBirthDateCheckDigit',\r\n\tEXTRACTED_FIELDS_MRZ_EXPORY_DATE_CHECK_DIGIT = 'EXTRACTED_FIELDS_MRZExpiryDateCheckDigit',\r\n\tEXTRACTED_FIELDS_MRZ_PERSONAL_NUMBER_CHECK_DIGIT = 'EXTRACTED_FIELDS_MRZPersonalNumberCheckDigit',\r\n\tEXTRACTED_FIELDS_MRZ_COMPOSITE_CHECK_DIGIT = 'EXTRACTED_FIELDS_MRZCompositeCheckDigit',\r\n\tEXTRACTED_FIELDS_SECONDARY_PORTRAIT_PHOTO = 'EXTRACTED_FIELDS_SecondaryPortraitPhoto',\r\n\tEXTRACTED_FIELDS_FINGERPRINT = 'EXTRACTED_FIELDS_Fingerprint',\r\n\tEXTRACTED_FIELDS_VERSION_NUMBER = 'EXTRACTED_FIELDS_VersionNumber',\r\n\tEXTRACTED_FIELDS_CONDITIONS = 'EXTRACTED_FIELDS_Conditions',\r\n\tEXTRACTED_FIELDS_NICKNAME = 'EXTRACTED_FIELDS_NickName',\r\n\tEXTRACTED_FIELDS_ADDRESS_APARTMENT_NUMBER = 'EXTRACTED_FIELDS_AddressApartmentNumber',\r\n\tEXTRACTED_FIELDS_ADDRESS_FLOOR_NUM = 'EXTRACTED_FIELDS_AddressFloorNumber',\r\n\tEXTRACTED_FIELDS_FIRST_NAME_LOCAL = 'EXTRACTED_FIELDS_FirstNameLocal',\r\n\tEXTRACTED_FIELDS_LAST_NAME_LOCAL = 'EXTRACTED_FIELDS_LastNameLocal',\r\n\tEXTRACTED_FIELDS_FULL_NAME_LOCAL = 'EXTRACTED_FIELDS_FullNameLocal',\r\n\tEXTRACTED_FIELDS_BIRTH_PLACE_LOCAL = 'EXTRACTED_FIELDS_BirthPlaceLocal',\r\n\tEXTRACTED_FIELDS_ISSUING_AUTHORITY_LOCAL = 'EXTRACTED_FIELDS_IssuingAuthorityLocal',\r\n\tEXTRACTED_FIELDS_MOTHER_NAME_LOCAL = 'EXTRACTED_FIELDS_MotherNameLocal',\r\n\tEXTRACTED_FIELDS_FATHER_NAME_LOCAL = 'EXTRACTED_FIELDS_FatherNameLocal',\r\n\tEXTRACTED_FIELDS_ADDRESS_FULL_LOCAL = 'EXTRACTED_FIELDS_AddressFullLocal',\r\n\tEXTRACTED_FIELDS_MIDDLE_NAME_LOCAL = 'EXTRACTED_FIELDS_MiddleNameLocal',\r\n\tEXTRACTED_FIELDS_ADDRESS_LINE_1_LOCAL = 'EXTRACTED_FIELDS_AddressLine1Local',\r\n\tEXTRACTED_FIELDS_ADDRESS_LINE_2_LOCAL = 'EXTRACTED_FIELDS_AddressLine2Local',\r\n\tEXTRACTED_FIELDS_ADDRESS_LINE_3_LOCAL = 'EXTRACTED_FIELDS_AddressLine3Local',\r\n\tEXTRACTED_FIELDS_IND_REF_NUMBER_1 = 'EXTRACTED_FIELDS_IndRefNumber1',\r\n\tEXTRACTED_FIELDS_IND_REF_NUMBER_2 = 'EXTRACTED_FIELDS_IndRefNumber2',\r\n\tEXTRACTED_FIELDS_IND_REF_NUMBER_3 = 'EXTRACTED_FIELDS_IndRefNumber3',\r\n\tEXTRACTED_FIELDS_IND_REF_NUMBER_4 = 'EXTRACTED_FIELDS_IndRefNumber4',\r\n\tEXTRACTED_FIELDS_IND_REF_NUMBER_5 = 'EXTRACTED_FIELDS_IndRefNumber5',\r\n\tEXTRACTED_FIELDS_NAME_1 = 'EXTRACTED_FIELDS_Name1',\r\n\tEXTRACTED_FIELDS_NAME_2 = 'EXTRACTED_FIELDS_Name2',\r\n\tEXTRACTED_FIELDS_NAME_3 = 'EXTRACTED_FIELDS_Name3',\r\n\tEXTRACTED_FIELDS_NAME_4 = 'EXTRACTED_FIELDS_Name4',\r\n\tEXTRACTED_FIELDS_NAME_5 = 'EXTRACTED_FIELDS_Name5',\r\n\tEXTRACTED_FIELDS_RECIPIENT_NAME = 'EXTRACTED_FIELDS_RecipientName',\r\n\tEXTRACTED_FIELDS_RECIPIENT_ADDRESS = 'EXTRACTED_FIELDS_RecipientAddress',\r\n\tEXTRACTED_FIELDS_RECIPIENT_NAME_1 = 'EXTRACTED_FIELDS_RecipientName1',\r\n\tEXTRACTED_FIELDS_RECIPIENT_NAME_2 = 'EXTRACTED_FIELDS_RecipientName2',\r\n\tEXTRACTED_FIELDS_RECIPIENT_NAME_3 = 'EXTRACTED_FIELDS_RecipientName3',\r\n\tEXTRACTED_FIELDS_RECIPIENT_NAME_4 = 'EXTRACTED_FIELDS_RecipientName4',\r\n\tEXTRACTED_FIELDS_RECIPIENT_ADDRESS_FULL = 'EXTRACTED_FIELDS_RecipientAddressFull',\r\n\tEXTRACTED_FIELDS_IBAN = 'EXTRACTED_FIELDS_Iban',\r\n\tEXTRACTED_FIELDS_ACCOUNT_NUM = 'EXTRACTED_FIELDS_AccountNumber',\r\n\tEXTRACTED_FIELDS_ISSUER = 'EXTRACTED_FIELDS_Issuer',\r\n\tEXTRACTED_FIELDS_RECIPIENT_ADDRESS_CITY = 'EXTRACTED_FIELDS_RecipientAddressCity',\r\n\tEXTRACTED_FIELDS_RECIPIENT_ADDRESS_POST_CODE = 'EXTRACTED_FIELDS_RecipientAddressPostCode',\r\n\tEXTRACTED_FIELDS_DAY = 'EXTRACTED_FIELDS_Day',\r\n\tEXTRACTED_FIELDS_MONTH = 'EXTRACTED_FIELDS_Month',\r\n\tEXTRACTED_FIELDS_YEAR = 'EXTRACTED_FIELDS_Year',\r\n\tEXTRACTED_FIELDS_OPTIONAL_VALUE_1 = 'EXTRACTED_FIELDS_OptionalValue1',\r\n\tEXTRACTED_FIELDS_OPTIONAL_VALUE_2 = 'EXTRACTED_FIELDS_OptionalValue2',\r\n\tEXTRACTED_FIELDS_OPTIONAL_VALUE_3 = 'EXTRACTED_FIELDS_OptionalValue3',\r\n\tEXTRACTED_FIELDS_OPTIONAL_VALUE_4 = 'EXTRACTED_FIELDS_OptionalValue4',\r\n\tEXTRACTED_FIELDS_ISSUING_STATE_NAME = 'EXTRACTED_FIELDS_IssuingStateName',\r\n\tEXTRACTED_FIELDS_FRONT_DOCUMENT_TYPE_ID = 'EXTRACTED_FIELDS_Front Document Type ID',\r\n\tEXTRACTED_FIELDS_BACK_DOCUMENT_TYPE_ID = 'EXTRACTED_FIELDS_Back Document Type ID',\r\n\tHASNOCAMERA_TITLE = 'HASNOCAMERA_TITLE',\r\n\tHASNOCAMERA_DESCRIPTION = 'HASNOCAMERA_DESCRIPTION',\r\n\tUSER_INPUT_FIRST_NAME = 'USER_INPUT_FIRST_NAME',\r\n\tUSER_INPUT_MIDDLE_NAME = 'USER_INPUT_MIDDLE_NAME',\r\n\tUSER_INPUT_LAST_NAME = 'USER_INPUT_LAST_NAME',\r\n\tUSER_INPUT_DOB = 'USER_INPUT_DOB',\r\n\tUSER_INPUT_HOUSE_NAME_NUMBER = 'USER_INPUT_HOUSE_NAME_NUMBER',\r\n\tUSER_INPUT_STREET_NAME = 'USER_INPUT_STREET_NAME',\r\n\tUSER_INPUT_TOWN = 'USER_INPUT_TOWN',\r\n\tUSER_INPUT_POSTAL_CODE = 'USER_INPUT_POSTAL_CODE',\r\n\tUSER_INPUT_HOUSE_NAME_NUMBER_EXAMPLE = 'USER_INPUT_HOUSE_NAME_NUMBER_EXAMPLE',\r\n\tUSER_INPUT_STREET_NAME_EXAMPLE = 'USER_INPUT_STREET_NAME_EXAMPLE',\r\n\tUSER_INPUT_TOWN_EXAMPLE = 'USER_INPUT_TOWN_EXAMPLE',\r\n\tUSER_INPUT_POSTAL_CODE_EXAMPLE = 'USER_INPUT_POSTAL_CODE_EXAMPLE',\r\n\tACCEPT_TERMS_AND_CONDITIONS = 'ACCEPT_TERMS_AND_CONDITIONS',\r\n\tCONSENT_USE_BIOMETRIC_DATA = 'CONSENT_USE_BIOMETRIC_DATA',\r\n}\r\n","import { PreProcessor, TemplateType } from '../../helpers/enums/Templates';\r\nimport { ITemplateConfiguration } from '../../helpers/interfaces/Templates';\r\nimport { Templates } from '../enums/Templates';\r\n\r\n/**\r\n * Default templates for demo_rendering\r\n *\r\n * @internal\r\n */\r\nexport const DefaultTemplates: Record<Templates, ITemplateConfiguration> = {\r\n\t[Templates.None]: {\r\n\t\ttype: TemplateType.Null,\r\n\t},\r\n\t[Templates.Initializing]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/initializing.html'),\r\n\t},\r\n\t[Templates.Camera]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/camera.html'),\r\n\t},\r\n\t[Templates.Cropper]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/cropper.html'),\r\n\t},\r\n\t[Templates.Filesystem]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/file-system.html'),\r\n\t},\r\n\t[Templates.Gateway]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/gateway.html'),\r\n\t},\r\n\t[Templates.Liveness]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/liveness.html'),\r\n\t},\r\n\t[Templates.PassiveLiveness]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/passive-liveness.html'),\r\n\t},\r\n\t[Templates.Login]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/login.html'),\r\n\t},\r\n\t[Templates.Result]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/result.html'),\r\n\t},\r\n\t[Templates.Scanner]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/scanner.html'),\r\n\t},\r\n\t[Templates.View]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/view.html'),\r\n\t},\r\n\t[Templates.SmartCapture]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/smart-capture.html'),\r\n\t},\r\n\t[Templates.JourneySelect]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/journey-select.html'),\r\n\t},\r\n\t[Templates.TripleScanGuidance]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/triple-scan-guidance.html'),\r\n\t},\r\n\t[Templates.HasNoCamera]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/has-no-camera.html'),\r\n\t},\r\n\t[Templates.Covid]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/gateway.html'),\r\n\t},\r\n\t[Templates.DataChecks]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/data-checks.html'),\r\n\t},\r\n\t[Templates.TermsAndConditions]: {\r\n\t\ttype: TemplateType.String,\r\n\t\tprocessor: PreProcessor.Mustache,\r\n\t\tprovider: require('./defaultTemplates/terms-and-conditions.html'),\r\n\t}\r\n};\r\n","import CameraService, { CameraPermissionState } from '../../../helpers/classes/CameraService';\r\nimport EventService from '../../../helpers/classes/EventService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport { FlowState } from '../../enums/FlowState';\r\nimport { ChangeMode, InputProvider } from '../../enums/InputProvider';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { CameraProvider } from '../provider/camera';\r\nimport { SmartCaptureProvider } from '../provider/smart-capture';\r\nimport { CropperProvider } from '../provider/cropper';\r\nimport { FileSystemProvider } from '../provider/fileSystem';\r\nimport { ScannerProvider } from '../provider/scanner';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { isFirefox, browserName, isSafari, isChrome, isIOS } from '../../../helpers/utils/browserDetection';\r\n\r\nexport class GatewayStep {\r\n\tpublic static render(this: JourneyContainer, isFromTripleScanGuidancePage: boolean = false, isPredefinedJourney: boolean = false, selectedInputProvider: InputProvider = InputProvider.NONE) {\r\n\t\treturn TemplateService.renderToContainer(this._container, Templates.Gateway)\r\n\t\t\t.then(() => GatewayStep.getInputProvider.call(this, isPredefinedJourney, selectedInputProvider))\r\n\t\t\t.then((provider) => this.changeInputProvider(provider))\r\n\t\t\t.then((inputProvider): Promise<void> => {\r\n\t\t\t\tif (this._cropResponse !== undefined) {\r\n\t\t\t\t\treturn CropperProvider.render.call(this);\r\n\t\t\t\t} else if (inputProvider === InputProvider.FILESYSTEM && this._cropResponse === undefined) {\r\n\r\n\t\t\t\t\treturn FileSystemProvider.render.call(this);\r\n\t\t\t\t} else if (inputProvider === InputProvider.SMART_CAPTURE && this._cropResponse === undefined) {\r\n\t\t\t\t\tif (isIOS && (isSafari || isChrome)) {\r\n\t\t\t\t\t\t// ENTERPRISE-393\r\n\t\t\t\t\t\treturn navigator.mediaDevices.getUserMedia({ video: true })\r\n\t\t\t\t\t\t\t.then((stream) => {\r\n\t\t\t\t\t\t\t\t// camera is available\r\n\t\t\t\t\t\t\t\treturn SmartCaptureProvider.render.call(this, isFromTripleScanGuidancePage, isPredefinedJourney);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t(e) => {\r\n\t\t\t\t\t\t\t\t\t// camera not available \"or blocked by user\"\r\n\r\n\t\t\t\t\t\t\t\t\tif (!isPredefinedJourney) {\r\n\t\t\t\t\t\t\t\t\t\treturn this.changeInputProvider(InputProvider.FILESYSTEM, ChangeMode.FORCE)\r\n\t\t\t\t\t\t\t\t\t\t\t.then(() => GatewayStep.getInputProvider.call(this, isPredefinedJourney)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => FileSystemProvider.render.call(this)));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn Promise.all([\r\n\t\t\t\t\t\t\tCameraService.getCameraPermission(),\r\n\t\t\t\t\t\t\tCameraService.hasDeviceCapableOfResolution()\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t\t\t.then(([permission, resolution]) => {\r\n\t\t\t\t\t\t\t\tif ((permission == CameraPermissionState.GRANTED || permission == CameraPermissionState.UNKNOWN) && resolution) {\r\n\r\n\t\t\t\t\t\t\t\t\tif (this._config.defaultInputProvider?.toLowerCase() === InputProvider.CAMERA.toLowerCase())\r\n\t\t\t\t\t\t\t\t\t\treturn CameraProvider.render.call(this, isFromTripleScanGuidancePage, isPredefinedJourney);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\treturn SmartCaptureProvider.render.call(this, isFromTripleScanGuidancePage, isPredefinedJourney);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// ENTERPRISE-459\r\n\t\t\t\t\t\t\t\t\tif (!isPredefinedJourney) {\r\n\t\t\t\t\t\t\t\t\t\treturn this.changeInputProvider(InputProvider.FILESYSTEM, ChangeMode.FORCE)\r\n\t\t\t\t\t\t\t\t\t\t\t.then(() => GatewayStep.getInputProvider.call(this, isPredefinedJourney)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => FileSystemProvider.render.call(this)));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\tTemplateService.renderToContainer(this._container, Templates.HasNoCamera);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t} else if (inputProvider === InputProvider.CAMERA && this._cropResponse === undefined) {\r\n\t\t\t\t\t//ENT-3248\r\n\t\t\t\t\tif (isIOS && (isSafari || isChrome)) {\r\n\t\t\t\t\t\treturn navigator.mediaDevices.getUserMedia({ video: true })\r\n\t\t\t\t\t\t\t.then((stream) => {\r\n\t\t\t\t\t\t\t\treturn CameraProvider.render.call(this, isFromTripleScanGuidancePage, isPredefinedJourney);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t(e) => {\r\n\t\t\t\t\t\t\t\t\tif (!isPredefinedJourney) {\r\n\t\t\t\t\t\t\t\t\t\treturn this.changeInputProvider(InputProvider.FILESYSTEM, ChangeMode.FORCE)\r\n\t\t\t\t\t\t\t\t\t\t\t.then(() => GatewayStep.getInputProvider.call(this, isPredefinedJourney)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => FileSystemProvider.render.call(this)));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\tTemplateService.renderToContainer(this._container, Templates.HasNoCamera);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn Promise.all([\r\n\t\t\t\t\t\t\tCameraService.getCameraPermission(),\r\n\t\t\t\t\t\t])\r\n\t\t\t\t\t\t\t.then(([permission]) => {\r\n\t\t\t\t\t\t\t\tif (permission == CameraPermissionState.GRANTED || permission == CameraPermissionState.UNKNOWN) {\r\n\t\t\t\t\t\t\t\t\treturn CameraProvider.render.call(this, isFromTripleScanGuidancePage, isPredefinedJourney);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (!isPredefinedJourney) {\r\n\t\t\t\t\t\t\t\t\t\treturn this.changeInputProvider(InputProvider.FILESYSTEM, ChangeMode.FORCE)\r\n\t\t\t\t\t\t\t\t\t\t\t.then(() => GatewayStep.getInputProvider.call(this, isPredefinedJourney)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => FileSystemProvider.render.call(this)));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\tTemplateService.renderToContainer(this._container, Templates.HasNoCamera);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t} else if (inputProvider === InputProvider.SCANNER && this._cropResponse === undefined) {\r\n\t\t\t\t\treturn ScannerProvider.render.call(this);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_STEP, { step: Templates.Gateway }));\r\n\r\n\t}\r\n\r\n\tprivate static toggleFileUpload = false;\r\n\r\n\tprivate static getInputProvider(this: JourneyContainer, isPredefinedJourney: boolean = false, selectedInputProvider: InputProvider = InputProvider.NONE): Promise<InputProvider> {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tuploadToggleButton: '[data-jcs-element=\"gateway__upload__toggle\"]',\r\n\t\t\tuploadLabel: '[data-jcs-element=\"gateway__upload__toggle__upload__label\"]',\r\n\t\t\tcameraLabel: '[data-jcs-element=\"gateway__upload__toggle__camera__label\"]',\r\n\t\t\tcameraStatus: '[data-jcs-element=\"gateway__camera__status\"]',\r\n\t\t}).then(({ uploadToggleButton, uploadLabel, cameraLabel, cameraStatus }): InputProvider => {\r\n\t\t\tRenderingService.hideObject(uploadToggleButton);\r\n\r\n\t\t\tif (this.requiresCamera()) {\r\n\r\n\t\t\t\tPromise.all([\r\n\t\t\t\t\tCameraService.getCameraPermission(),\r\n\t\t\t\t\tCameraService.hasDeviceCapableOfResolution()\r\n\t\t\t\t])\r\n\t\t\t\t\t.then(([permission, resolution]) => {\r\n\t\t\t\t\t\tif (!resolution) {\r\n\t\t\t\t\t\t\treturn RenderingService.setText(cameraStatus, LanguageService.getTranslation(TranslationKey.EXCEPTION_PLATFORM_CAMERA_NONE_SUITABLE));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tswitch (permission) {\r\n\t\t\t\t\t\t\t\tcase CameraPermissionState.GRANTED:\r\n\t\t\t\t\t\t\t\t\treturn RenderingService.hideObject(cameraStatus);\r\n\r\n\t\t\t\t\t\t\t\tcase CameraPermissionState.DENIED:\r\n\t\t\t\t\t\t\t\tcase CameraPermissionState.PROMPT:\r\n\t\t\t\t\t\t\t\t\treturn RenderingService.setText(cameraStatus, LanguageService.getTranslation(TranslationKey.EXCEPTION_PLATFORM_CAMERA_PERMISSION_DENIED));\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn RenderingService.setText(cameraStatus, LanguageService.getTranslation(TranslationKey.EXCEPTION_PLATFORM_CAMERA_PERMISSION_UNAVAILABLE));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (this._ready === true && this._journey) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t(this._journey.action === FlowState.SELFIE ||\r\n\t\t\t\t\t\tthis._journey.action === FlowState.ADDRESS ||\r\n\t\t\t\t\t\tthis._journey.action === FlowState.COVIDPASS) && !isPredefinedJourney\r\n\t\t\t\t) {\r\n\t\t\t\t\tRenderingService.showObject(uploadToggleButton);\r\n\r\n\t\t\t\t\tif (uploadToggleButton instanceof HTMLButtonElement &&\r\n\t\t\t\t\t\tuploadLabel instanceof HTMLElement &&\r\n\t\t\t\t\t\tcameraLabel instanceof HTMLElement) {\r\n\t\t\t\t\t\tif (this._inputProvider === undefined) {\r\n\t\t\t\t\t\t\tthis._inputProvider = InputProvider.FILESYSTEM;\r\n\t\t\t\t\t\t} else if (this._inputProvider === InputProvider.SMART_CAPTURE || this._inputProvider === InputProvider.SCANNER) {\r\n\t\t\t\t\t\t\tthis._inputProvider = InputProvider.CAMERA;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tGatewayStep.toggleFileUpload = this._inputProvider !== InputProvider.FILESYSTEM && !isPredefinedJourney;\r\n\r\n\t\t\t\t\t\tGatewayStep.toggleUploadLabel.call(this, GatewayStep.toggleFileUpload, uploadLabel, uploadToggleButton, cameraLabel);\r\n\r\n\t\t\t\t\t\tuploadToggleButton.addEventListener('click', () => {\r\n\t\t\t\t\t\t\tGatewayStep.toggleFileUpload = !GatewayStep.toggleFileUpload;\r\n\r\n\t\t\t\t\t\t\tGatewayStep.toggleUploadLabel.call(this, GatewayStep.toggleFileUpload, uploadLabel, uploadToggleButton, cameraLabel);\r\n\r\n\t\t\t\t\t\t\tthis._inputProvider = GatewayStep.toggleFileUpload ? this._providers[0] : InputProvider.FILESYSTEM;\r\n\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tthis._inputProvider !== InputProvider.CAMERA &&\r\n\t\t\t\t\t\t\t\tthis._inputProvider !== InputProvider.SMART_CAPTURE\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tCameraService.stopStreaming();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.evaluate();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn GatewayStep.toggleFileUpload ? this._inputProvider : InputProvider.FILESYSTEM;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (this._inputProvider === undefined || this._inputProvider === InputProvider.SCANNER) {\r\n\t\t\t\t\t\t\treturn InputProvider.FILESYSTEM;\r\n\t\t\t\t\t\t} else if (this._inputProvider === InputProvider.SMART_CAPTURE) {\r\n\t\t\t\t\t\t\treturn InputProvider.CAMERA;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn this._inputProvider;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\telse if (\r\n\t\t\t\t\tthis._providers.indexOf(InputProvider.SCANNER) >= 0 &&\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tthis._journey.action === FlowState.IDENTITY_FRONT ||\r\n\t\t\t\t\t\tthis._journey.action === FlowState.IDENTITY_BACK\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn InputProvider.SCANNER;\r\n\t\t\t\t} else if (\r\n\t\t\t\t\t!(this._providers.indexOf(InputProvider.CAMERA) >= 0 ||\r\n\t\t\t\t\t\tthis._providers.indexOf(InputProvider.SMART_CAPTURE) >= 0) && !isPredefinedJourney\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn InputProvider.FILESYSTEM;\r\n\t\t\t\t} else if ((this._journey.action !== FlowState.NONE) && !isPredefinedJourney) {\r\n\t\t\t\t\tRenderingService.showObject(uploadToggleButton);\r\n\r\n\t\t\t\t\tif (uploadToggleButton instanceof HTMLButtonElement &&\r\n\t\t\t\t\t\tuploadLabel instanceof HTMLElement &&\r\n\t\t\t\t\t\tcameraLabel instanceof HTMLElement) {\r\n\r\n\t\t\t\t\t\tif (this._inputProvider === undefined || this._inputProvider === InputProvider.SCANNER) {\r\n\t\t\t\t\t\t\tthis._inputProvider = InputProvider.FILESYSTEM;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tGatewayStep.toggleFileUpload = this._inputProvider !== InputProvider.FILESYSTEM;\r\n\r\n\t\t\t\t\t\tGatewayStep.toggleUploadLabel.call(this, GatewayStep.toggleFileUpload, uploadLabel, uploadToggleButton, cameraLabel);\r\n\r\n\t\t\t\t\t\tuploadToggleButton.addEventListener('click', () => {\r\n\t\t\t\t\t\t\tGatewayStep.toggleFileUpload = !GatewayStep.toggleFileUpload;\r\n\t\t\t\t\t\t\tGatewayStep.toggleUploadLabel.call(this, GatewayStep.toggleFileUpload, uploadLabel, uploadToggleButton, cameraLabel);\r\n\r\n\r\n\t\t\t\t\t\t\tthis._inputProvider = GatewayStep.toggleFileUpload ? this._providers[0] : InputProvider.FILESYSTEM;\r\n\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tthis._inputProvider !== InputProvider.CAMERA &&\r\n\t\t\t\t\t\t\t\tthis._inputProvider !== InputProvider.SMART_CAPTURE\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tCameraService.stopStreaming();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.evaluate();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn GatewayStep.toggleFileUpload ? this._inputProvider : InputProvider.FILESYSTEM;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn this._inputProvider ? this._inputProvider : InputProvider.FILESYSTEM;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ((this._inputProvider === InputProvider.SMART_CAPTURE || this._inputProvider === InputProvider.CAMERA) && isPredefinedJourney && selectedInputProvider !== InputProvider.NONE) {\r\n\t\t\t\t\treturn selectedInputProvider;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this._providers[0];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn InputProvider.NONE;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate static toggleUploadLabel(this: JourneyContainer, toggle: boolean, uploadLabel: HTMLElement, uploadToggleButton: HTMLElement, cameraLabel: HTMLElement) {\r\n\t\tif (toggle) {\r\n\t\t\tRenderingService.hideObject(cameraLabel);\r\n\t\t\tif (this._config.fileUploadOnCameraCaptureJourneys == true) {\r\n\t\t\t\tRenderingService.showObject(uploadLabel);\r\n\t\t\t\tRenderingService.showObject(uploadToggleButton);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tRenderingService.hideObject(uploadLabel);\r\n\t\t\t\tRenderingService.hideObject(uploadToggleButton);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tRenderingService.hideObject(uploadLabel);\r\n\t\t\tCameraService.getVideoCameras()\r\n\t\t\tPromise.all([\r\n\t\t\t\tCameraService.getCameraPermission(),\r\n\t\t\t\tCameraService.hasDeviceCapableOfResolution()\r\n\t\t\t])\r\n\t\t\t\t.then(([permission, resolution]) => {\r\n\t\t\t\t\tif (permission && resolution) { // Check has camera there is\r\n\t\t\t\t\t\tRenderingService.showObject(cameraLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse { //There is no camera\r\n\t\t\t\t\t\tRenderingService.hideObject(cameraLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport { ICortixResponse, IImageCaptureService, MediaChannelType } from './types';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport abstract class BaseImageCaptureService implements IImageCaptureService {\r\n\r\n\tpublic journeyId: string;\r\n\r\n\tprotected _mediaType: MediaChannelType;\r\n\r\n\tget channelType(): string {\r\n\t\treturn MediaChannelType[this._mediaType];\r\n\t}\r\n\r\n\tabstract get emitter(): EventEmitter;\r\n\r\n\tconstructor(journeyId: string, mediaType: MediaChannelType) {\r\n\t\tthis._mediaType = mediaType;\r\n\t\tthis.journeyId = journeyId;\r\n\t}\r\n\r\n\tpublic finish = (): void => { throw new Error('Not Implemented'); };\r\n\r\n\tpublic start = (): void => { throw new Error('Not Implemented'); };\r\n\r\n\tpublic runTestResponse = (response: ICortixResponse): void => { throw new Error('Not Implemented'); };\r\n\r\n}\r\n","/**\r\n * getPlatform function return the the plateform.\r\n */\r\nexport function getPlatform(): 'NODE' | 'BROWSER' | 'JEST' {\r\n\treturn typeof process === 'object'\r\n\t\t&& typeof process.versions === 'object'\r\n\t\t&& typeof process.versions.node !== 'undefined'\r\n\t\t? typeof window === 'object'\r\n\t\t\t? 'JEST' : 'NODE' : 'BROWSER';\r\n}\r\n","/**\r\n * @public\r\n */\r\nexport enum Mode {\r\n    /**\r\n     * Using Web mode - request will behave as it is coming from Web Channel\r\n     */\r\n    WEB = 'WEB',\r\n    /**\r\n     * Using Capture Studio mode - request will behave as it is coming from Capture Studio Channel\r\n     */\r\n    CAPTURESTUDIO = 'CAPTURESTUDIO',\r\n}\r\n","/**\r\n * The current state of the Journey\r\n *\r\n * @public\r\n */\r\nexport enum JourneyState {\r\n\t/**\r\n\t * The journey has ended.\r\n\t */\r\n\tENDED = 'ENDED',\r\n\t/**\r\n\t * The journey is currently in progress.\r\n\t */\r\n\tINPROGRESS = 'INPROGRESS',\r\n\t/**\r\n\t * The journey has started but there has been no data submitted.\r\n\t */\r\n\tSTARTED = 'STARTED'\r\n}\r\n","import { TranslationKey } from '../../idscan/enums/Translation';\r\nimport { getPlatform } from '../functions/getPlatform';\r\nimport { ExceptionManager } from './ExceptionManager';\r\n\r\nexport interface ISelectItem {\r\n\tname: string;\r\n\tvalue: string;\r\n\tselected?: boolean;\r\n\tdisabled?: boolean;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class RenderingService {\r\n\r\n\tconstructor() {\r\n\t\tif (getPlatform() === 'NODE') {\r\n\t\t\tthrow new Error('This feature cannot be used outside of a browser');\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Takes an id and returns tries to find a DOM element with that id\r\n\t * @param id\r\n\t */\r\n\tpublic getElement = <T = HTMLElement>(id: string): T | undefined => {\r\n\t\tid = id.startsWith('#') ? id.substr(1) : id;\r\n\t\tconst element = document.getElementById(id);\r\n\r\n\t\tif (element) {\r\n\t\t\treturn (element as any) as T;\r\n\t\t} else {\r\n\t\t\tconsole.debug(`Element #${id} is not found.`);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Takes an id and returns tries to find a DOM element with that id\r\n\t * @param id\r\n\t */\r\n\tpublic getElementBySelector = <T = HTMLElement>(selector: string): T | undefined => {\r\n\t\treturn (Array.from(document.querySelectorAll(selector))[0] as any) as T | undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Takes a url and returns the file at the url\r\n\t * @param url\r\n\t */\r\n\tpublic getFile = <T = any>(url: string): Promise<T> => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (typeof XMLHttpRequest !== 'undefined') {\r\n\t\t\t\tconst request = new XMLHttpRequest();\r\n\t\t\t\trequest.open('GET', url);\r\n\t\t\t\trequest.onreadystatechange = () => {\r\n\t\t\t\t\tif (request.status === 200 && request.readyState === 4) {\r\n\t\t\t\t\t\tresolve(request.response);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\trequest.onerror = (err) => reject(err);\r\n\t\t\t\trequest.send();\r\n\t\t\t} else {\r\n\t\t\t\treject(ExceptionManager.process(new ExceptionManager.PlatformException(TranslationKey.EXCEPTION_PLATFORM_BROWSER_ONLY)));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic hideObject = <T extends HTMLElement>(el?: T, type: string = 'none'): T | undefined => {\r\n\t\tif (el) {\r\n\t\t\tel.style.display = type;\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tpublic showObject = <T extends HTMLElement>(el?: T, type: string = ''): T | undefined => {\r\n\t\tif (el) {\r\n\t\t\tel.style.display = type;\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tpublic addClass = <T extends HTMLElement>(el?: T, name: string | string[] = []): T | undefined => {\r\n\t\tif (el) {\r\n\t\t\tel.classList.add(...(name instanceof Array ? name : [name]));\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tpublic removeClass = <T extends HTMLElement>(el?: T, name: string | string[] = []): T | undefined => {\r\n\t\tif (el) {\r\n\t\t\tel.classList.remove(...(name instanceof Array ? name : [name]));\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tpublic markSelected = <T extends HTMLSelectElement>(el?: T, value: string = ''): T | undefined => {\r\n\t\tif (el) {\r\n\t\t\tel.value = value;\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tpublic updateSelect = <T extends HTMLSelectElement>(el?: T, values: ISelectItem[] = []): T | undefined => {\r\n\t\tif (el) {\r\n\t\t\t// First clear the contents of the box\r\n\t\t\tel.options.length = 0;\r\n\r\n\t\t\t// Then for each specified option, add in a new element\r\n\t\t\tvalues.forEach(({ name, value, selected = false, disabled = false }, i) => {\r\n\t\t\t\tconst option = new Option(name, value, i === 0, selected);\r\n\t\t\t\toption.disabled = disabled;\r\n\t\t\t\tel.options.add(option);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this.markSelected(el, (values.find((value) => Boolean(value.selected)) || { value: undefined }).value);\r\n\t}\r\n\r\n\tpublic supportsDragDrop = (): boolean => {\r\n\t\treturn 'files' in DataTransfer.prototype;\r\n\t}\r\n\r\n\tpublic setText = <T extends HTMLElement>(el?: T, value: string = ''): T | undefined => {\r\n\t\tif (el) {\r\n\t\t\tel.innerText = value;\r\n\t\t\tthis.showObject(el);\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tpublic setValue = <T extends HTMLFormElement | HTMLInputElement>(el?: T, value: string = ''): T | undefined => {\r\n\t\tif (el) {\r\n\t\t\tel.value = value;\r\n\t\t\tthis.showObject(el);\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tpublic setEnabled = <T extends HTMLInputElement | HTMLButtonElement | HTMLSelectElement>(el?: T, state: boolean = true): T | undefined => {\r\n\t\tif (el) {\r\n\t\t\tif (state) {\r\n\t\t\t\tel.removeAttribute('disabled');\r\n\t\t\t} else {\r\n\t\t\t\tel.setAttribute('disabled', 'disabled');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tpublic setDataAttributeValue = <T extends HTMLElement>(el?: T, attribute: string = '', value: string | number = ''): T | undefined => {\r\n\t\tif (el) {\r\n\t\t\tel.setAttribute(`data-${attribute}`, value.toString());\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n}\r\n\r\nexport default new RenderingService();\r\n","module.exports = \"<h2 class=\\\"section-title\\\">{{HASNOCAMERA_TITLE}}</h2>\\r\\n<p>{{HASNOCAMERA_DESCRIPTION}}</p>\\r\\n<form class=\\\"button-container button-cancel-container button-gateway-container\\\">\\r\\n\\t<button data-jcs-element=\\\"cancel__journey\\\" class=\\\"button button--secondary-destructive button-full-xs\\\" aria-label=\\\"Button Title\\\">\\r\\n\\t{{CANCEL_JOURNEY}}\\r\\n\\t</button>\\r\\n</form>\\r\\n\";","/**\r\n * @public\r\n */\r\nexport enum IdesMicroWorkerMessages {\r\n\tCheckComplete = 'CheckComplete',\r\n\tCheckFailed = 'CheckFailed',\r\n\tInitialise = 'Initialise',\r\n\tTerminate = 'Terminate',\r\n\tLoadingResources = 'LoadingResources',\r\n\tPerformQualityCheck = 'PerformQualityCheck',\r\n\tReadyToProcess = 'ReadyToProcess',\r\n\tError = 'Error',\r\n}\r\n","import { getPlatform } from '../functions/getPlatform';\r\nimport { IStorageItem } from '../interfaces/Storage';\r\nimport { SecretService } from './SecretService';\r\n\r\n/**\r\n * Used only for session persistence for now.\r\n *\r\n * @class StorageService\r\n *\r\n * @internal\r\n */\r\nclass StorageService {\r\n\tprivate _mockStorage: any = {};\r\n\tprivate _storage: Storage;\r\n\r\n\t/**\r\n\t * @constructor for StorageService\r\n\t * Determines whether sessionStorage is usable or not\r\n\t */\r\n\tconstructor() {\r\n\t\tif (getPlatform() === 'BROWSER') {\r\n\t\t\tthis._storage = sessionStorage;\r\n\t\t} else {\r\n\t\t\tthis._storage = this.setMockStorage();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the desired object in the storage (expiration in hours)\r\n\t * @param key\r\n\t * @param value\r\n\t * @param expiration\r\n\t */\r\n\tpublic set = (key: string, value: any, expiration: number): void => {\r\n\t\tconst data = SecretService.encrypt({ key, value, expiration, timestamp: Date.now() });\r\n\r\n\t\tthis._storage.setItem(key, data);\r\n\t}\r\n\r\n\t/**\r\n\t * Gets a desired object from the storage\r\n\t * @param key\r\n\t */\r\n\tpublic get = (key: string): string | undefined => {\r\n\r\n\t\tif (this._storage.getItem(key)) {\r\n\t\t\ttry {\r\n\t\t\t\tconst data = this._storage.getItem(key);\r\n\t\t\t\tconst resolved = SecretService.decrypt<IStorageItem>(!!data ? data : undefined);\r\n\r\n\t\t\t\tif (this.isValid(resolved)) {\r\n\t\t\t\t\treturn resolved.value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis._storage.removeItem(key);\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes an object from the storage\r\n\t * @param key\r\n\t */\r\n\tpublic remove = (key: string) => {\r\n\t\tthis._storage.removeItem(key);\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the storage\r\n\t */\r\n\tpublic clear = () => {\r\n\t\tthis._storage.clear();\r\n\t}\r\n\r\n\t/**\r\n\t * Checks whether the extracted element from the response is still valid\r\n\t * @param element\r\n\t */\r\n\tprivate isValid = ({ timestamp, expiration }: IStorageItem = {} as IStorageItem): boolean => {\r\n\t\tif (timestamp && expiration) {\r\n\t\t\treturn expiration * 60 * 60 * 1000 > Date.now() - timestamp;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a mock storage for non-browser environments\r\n\t */\r\n\tprivate setMockStorage = (): Storage => {\r\n\t\tlet store: any = {};\r\n\r\n\t\tconst getItem = (key: string) => store[key] ? store[key] : undefined;\r\n\t\tconst setItem = (key: string, data: any) => store[key] = data;\r\n\t\tconst removeItem = (key: string) => delete store[key];\r\n\t\tconst clear = () => store = {};\r\n\r\n\t\treturn {\r\n\t\t\tclear,\r\n\t\t\tgetItem,\r\n\t\t\tremoveItem,\r\n\t\t\tsetItem\r\n\t\t} as any;\r\n\t}\r\n}\r\n\r\nexport default new StorageService();\r\n","/**\r\n * @public\r\n */\r\nexport enum CapturingMedia {\r\n\tScanner = 1,\r\n\tFileUpload = 2,\r\n\tWebCamera = 3,\r\n\tCamera = 4\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport enum ChannelType {\r\n\tCaptureStudio = 1,\r\n\tWeb = 2,\r\n\tMobile = 3\r\n}\r\n","/**\r\n * The way the template should be processed to gain the template string for use\r\n * in this particular UI situation. For more detailed information, please\r\n * consult the integration guide.\r\n *\r\n * @public\r\n */\r\nexport enum TemplateType {\r\n\t/**\r\n\t * A function, which, when executed will return the template string\r\n\t */\r\n\tFunction = 'function',\r\n\t/**\r\n\t * No template has been specified for this template name\r\n\t */\r\n\tNull = 'null',\r\n\t/**\r\n\t * A promise, which, when resolves will return the template string.\r\n\t */\r\n\tPromise = 'promise',\r\n\t/**\r\n\t * The template string to use\r\n\t */\r\n\tString = 'string',\r\n\t/**\r\n\t * A URL to retrieve the template string from\r\n\t */\r\n\tUrl = 'url',\r\n}\r\n\r\n/**\r\n * The pro-processor to run the template string through before writing it to the\r\n * DOM. Please check the integration documents or the `Templates` documentation\r\n * for information on which properties will be passed in for processors to use,\r\n * and guidelines for defining templates. All pre-processors will be provided\r\n * with the same data unless otherwise stated.\r\n *\r\n * @public\r\n */\r\nexport enum PreProcessor {\r\n\t/**\r\n\t * Don't perform any pre-processing on the template string before writing it\r\n\t * to the DOM.\r\n\t */\r\n\tNone = 'none',\r\n\t/**\r\n\t * Run the template string through the mustache HTML pre-processor before\r\n\t * writing it to the DOM. Find out more information about Mustache templates\r\n\t * here: https://github.com/janl/mustache.js.\r\n\t */\r\n\tMustache = 'mustache'\r\n}\r\n","\r\nexport enum SmartCaptureFailingReasons {\r\n\tCameraChanged = 'Camera Changed',\r\n\tManualInputProviderChange = 'Manual Input Provider Change',\r\n\tUnknown = 'Unknown'\r\n}\r\n","/**\r\n * The current capture state of the journey. The value of this is dictated by\r\n * the server. These values are usually used alongside the `RequiredAction` enum\r\n * values returned with events.\r\n *\r\n * @public\r\n */\r\nexport enum FlowState {\r\n\t/**\r\n\t * Supported proof of address document.\r\n\t */\r\n\tADDRESS = 'ADDRESS',\r\n\t/**\r\n\t * Rear of supported identity document.\r\n\t */\r\n\tIDENTITY_BACK = 'IDENTITY:BACK',\r\n\t/**\r\n\t * Front of supported identity document.\r\n\t */\r\n\tIDENTITY_FRONT = 'IDENTITY:FRONT',\r\n\t/**\r\n\t * Nothing required at this time.\r\n\t */\r\n\tNONE = 'NONE',\r\n\t/**\r\n\t * Self portrait photograph.\r\n\t */\r\n\tSELFIE = 'SELFIE',\r\n\t/**\r\n\t * Liveness capturing.\r\n\t */\r\n\tLIVENESS = 'LIVENESS',\r\n\t/**\r\n\t * Passive Liveness capturing.\r\n\t */\r\n\tPASSIVE_LIVENESS = 'PASSIVE_LIVENESS',\r\n\t/**\r\n\t * Passive Liveness capturing.\r\n\t */\r\n\tCOVIDPASS = 'COVIDPASS',\r\n\t/**\r\n\t * Covid capturing.\r\n\t */\r\n\tDATACHECKS = 'DATACHECKS',\r\n\t/**\r\n\t * Data checks (CIFAS & ID3)\r\n\t */\r\n}\r\n","import { Croppy } from '../../../helpers/classes/Croppy';\r\nimport EventService from '../../../helpers/classes/EventService';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { removeNullOrUndefined } from '../../../helpers/functions/object';\r\nimport DataService, { DataStoreType } from '../../classes/DataService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { RequiredInputImage } from '../../enums/RequiredInputImage';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { IIdScanData } from '../../interfaces/DataFormats';\r\nimport { IExtendedDocument } from '../../interfaces/Document';\r\nimport { IPerson } from '../../interfaces/Person';\r\nimport { UploadResponse } from '../../interfaces/UploadResponse';\r\n\r\nexport class CropperProvider {\r\n\tpublic static render(this: JourneyContainer) {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tproviderContainer: '[data-jcs-element=\"provider__container\"]',\r\n\t\t})\r\n\t\t\t.then(({ providerContainer }) => TemplateService.renderToContainer(providerContainer, Templates.Cropper))\r\n\t\t\t.then(() => TemplateService.getElements(this._container, {\r\n\t\t\t\ttoggle: '[data-jcs-element=\"gateway__upload__toggle\"]',\r\n\t\t\t\ttoggleLabel: '[data-jcs-element=\"gateway__upload__toggle__label\"]',\r\n\t\t\t\tcropper: '[data-jcs-element=\"cropper__canvas\"]',\r\n\t\t\t\tcropperSubmit: '[data-jcs-element=\"cropper__submit\"]',\r\n\t\t\t\tcropperReset: '[data-jcs-element=\"cropper__retry\"]',\r\n\t\t\t\tstatus: '[data-jcs-element=\"cropper__status\"]',\r\n\t\t\t\tstatusMessage: '[data-jcs-element=\"cropper__status__message\"]',\r\n\t\t\t}))\r\n\t\t\t.then(({ cropper, cropperSubmit, cropperReset, status, statusMessage, toggle, toggleLabel }) => {\r\n\t\t\t\tif (cropper && this._cropResponse !== undefined) {\r\n\t\t\t\t\tcropper.id = 'jcs__cropper__canvas';\r\n\r\n\t\t\t\t\tRenderingService.hideObject(toggle);\r\n\t\t\t\t\tRenderingService.hideObject(toggleLabel);\r\n\r\n\t\t\t\t\tconst croppy = new Croppy({\r\n\t\t\t\t\t\timageSrc: 'data:image/jpeg;base64,' + this._cropResponse.outputImage,\r\n\t\t\t\t\t\tmagnifierCanvasId: 'magnifier',\r\n\t\t\t\t\t\tpadding: 20,\r\n\t\t\t\t\t\tshowCornersAlways: true,\r\n\t\t\t\t\t\ttargetCanvasId: `${cropper.id}`\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (cropperSubmit instanceof HTMLElement) {\r\n\t\t\t\t\t\tcropperSubmit.addEventListener('click', () => {\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(cropperSubmit as HTMLInputElement, false);\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(cropperReset as HTMLInputElement, false);\r\n\r\n\t\t\t\t\t\t\tRenderingService.showObject(status as HTMLElement);\r\n\t\t\t\t\t\t\tRenderingService.setText(statusMessage as HTMLElement, LanguageService.getTranslation(TranslationKey.CROPPER_UPLOADING));\r\n\r\n\t\t\t\t\t\t\tthis.getJourney()\r\n\t\t\t\t\t\t\t\t.then((journey) => journey.continue({\r\n\t\t\t\t\t\t\t\t\timgId: this._cropResponse!.id || '',\r\n\t\t\t\t\t\t\t\t\timgList: [{\r\n\t\t\t\t\t\t\t\t\t\tdata: this._cropResponse!.outputImage,\r\n\t\t\t\t\t\t\t\t\t\tname: this._journey!.action === 'SELFIE' ? RequiredInputImage.SelfiePhoto : RequiredInputImage.WhiteImage,\r\n\t\t\t\t\t\t\t\t\t\tinputFormat: 0\r\n\t\t\t\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t\t\t\tcoordinates: croppy.getOriginalSelectionAreaPoints().points,\r\n\t\t\t\t\t\t\t\t\tjourneyDefinitionId: this._journeyDefinitionId\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t\t.then((res) => DataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN).update(CropperProvider.parseResponseData(res)))\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tthis._cropResponse = undefined;\r\n\t\t\t\t\t\t\t\t\tthis.evaluate();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t\t\tRenderingService.showObject(status as HTMLElement);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setText(statusMessage as HTMLElement, LanguageService.getTranslation(TranslationKey.EXCEPTION_NETWORK));\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cropperSubmit as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cropperReset as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (cropperReset instanceof HTMLElement) {\r\n\t\t\t\t\t\tcropperReset.addEventListener('click', () => {\r\n\t\t\t\t\t\t\tthis._cropResponse = undefined;\r\n\t\t\t\t\t\t\tthis.evaluate();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcroppy.init(this._cropResponse.isDetected ? this._cropResponse.coordinates : [], true);\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_PROVIDER, { provider: Templates.Cropper }));\r\n\t}\r\n\r\n\tprivate static parseResponseData = ({\r\n\t\tentryData,\r\n\t\tentryDateTime,\r\n\t\tjourneyId,\r\n\t\trequiredAction,\r\n\t\thighLevelResult,\r\n\t\tcurrentResult,\r\n\t\thasError,\r\n\t\tisFinished\r\n\t}: UploadResponse): Partial<IIdScanData> => ({\r\n\t\tjourneyId,\r\n\t\tdocuments: (entryData.documents || []).map((doc): IExtendedDocument => removeNullOrUndefined({\r\n\t\t\texpirationDate: doc.expirationDate,\r\n\t\t\tissueDate: doc.issueDate,\r\n\t\t\tissueNumber: doc.issueNumber,\r\n\t\t\tnumber: doc.number,\r\n\t\t\ttype: doc.type,\r\n\t\t\tblurCheck: entryData.blurCheck === 'Good',\r\n\t\t\tglareCheck: entryData.blurCheck === 'Good',\r\n\t\t\tlowResolutionCheck: entryData.lowResolutionCheck === 'Good',\r\n\t\t\tscanReference: entryData.scanReference,\r\n\t\t\tscannerIp: entryData.scannerIp,\r\n\t\t\tdateTime: entryDateTime ? new Date(entryDateTime) : undefined\r\n\t\t})),\r\n\t\tperson: removeNullOrUndefined({\r\n\t\t\taddress: {\r\n\t\t\t\tcity: entryData.holder.address.city,\r\n\t\t\t\tfull: entryData.holder.address.full,\r\n\t\t\t\tpostCode: entryData.holder.address.postCode,\r\n\t\t\t},\r\n\t\t\tbirthDate: entryData.holder.birthDate,\r\n\t\t\tbirthPlace: entryData.holder.birthPlace,\r\n\t\t\tfirstName: entryData.holder.firstName,\r\n\t\t\tfullName: entryData.holder.fullName,\r\n\t\t\tmiddleName: entryData.holder.middleName,\r\n\t\t\tlastName: entryData.holder.lastName,\r\n\t\t\tgender: entryData.holder.gender,\r\n\t\t}) as IPerson,\r\n\t\trequiredAction,\r\n\t\thighLevelResult,\r\n\t\tcurrentResult,\r\n\t\thasError,\r\n\t\tisFinished\r\n\t})\r\n}\r\n","/**\r\n * @internal\r\n */\r\nexport class HttpRequestService {\r\n\tpublic static authenticationToken: string;\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport { BaseImageCaptureService } from '../../baseImageCaptureService';\r\nimport { ICameraMediaChannelOptions, ICortixResponse, IImageCaptureService, MediaChannelType } from '../../types';\r\nimport { CameraCapture } from './cameraCapture';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class CameraCaptureService extends BaseImageCaptureService implements IImageCaptureService {\r\n\r\n\tprivate _camera: CameraCapture;\r\n\tprivate _autoRun: boolean;\r\n\r\n\tpublic get emitter(): EventEmitter {\r\n\t\treturn this._camera.emitter;\r\n\t}\r\n\r\n\tconstructor(journeyId: string, options: ICameraMediaChannelOptions) {\r\n\t\tsuper(journeyId, MediaChannelType.Camera);\r\n\r\n\t\tthis._autoRun = !!options.autoRun;\r\n\r\n\t\tthis._camera = new CameraCapture(options, this.journeyId);\r\n\t}\r\n\r\n\tpublic init = (): Promise<IImageCaptureService> => this._camera.init()\r\n\t\t.then(() => {\r\n\t\t\tif (this._autoRun) {\r\n\t\t\t\tsetTimeout(() => this._camera!.start(), 1000);\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t})\r\n\r\n\tpublic start = () => this._camera.start();\r\n\r\n\tpublic finish = () => this._camera.finish();\r\n\r\n\tpublic runTestResponse = (response: ICortixResponse) => {\r\n\t\tif (this._camera) {\r\n\t\t\treturn this._camera.runTestResponse(response);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","module.exports = \"<div data-jcs-element=\\\"provider__container\\\" class=\\\"provider-container\\\" style=\\\"display: none;\\\"></div>\\r\\n<div class=\\\"dark-inner-provider-container\\\" data-jcs-element=\\\"passive__liveness__step__container\\\">\\r\\n\\t\\r\\n\\t<div>\\r\\n\\t\\t<!-- <form class=\\\"camera-options--container\\\">\\r\\n\\t\\t\\t<select data-jcs-element=\\\"camera__select\\\" class=\\\"camera-choices camera-choices-half-s camera-choices-full-xs control control--select\\\"></select>\\r\\n\\t\\t</form> -->\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t<div class=\\\"help-container\\\">\\r\\n\\t\\t\\t<div class=\\\"camera-viewfinder--container\\\" data-fullscreen=\\\"false\\\">\\r\\n\\t\\t\\t\\t<canvas data-jcs-element=\\\"camera__viewfinder\\\" class=\\\"camera-viewfinder\\\"></canvas> \\r\\n\\r\\n\\t\\t\\t\\t\\t<live-face-camera id=\\\"live-face-camera\\\" style=\\\"display: none;\\\"></live-face-camera>\\r\\n\\t\\t\\t\\t<div data-jcs-element=\\\"overlay_viewfinder\\\" class=\\\"camera-viewfinder--overlay--transparent\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"loading-animation-container\\\" data-jcs-element=\\\"loading-animation\\\" style=\\\"display:none\\\">\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t \\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t <div class=\\\"camera-capture--caption\\\">\\r\\n\\t\\t\\t\\t{{CAMERA_CAPTURE_SELFIE_CAPTION}}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div class=\\\"notification notification-orange\\\" data-jcs-element=\\\"passive__liveness__message__container\\\" style=\\\"display: none;\\\">\\r\\n\\t<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\">\\r\\n\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M13.9212 13.5664L7.99878 1.70494L1.99909 13.5664H13.9212ZM15.3721 13.1144L9.18082 0.71445C8.95064 0.27521 8.49571 0 7.99982 0C7.50392 0 7.04899 0.27521 6.81882 0.71445L0.546752 13.1144C0.33024 13.5277 0.345567 14.0242 0.587162 14.4234C0.828758 14.8226 1.26147 15.0665 1.72808 15.0664H14.1908C14.6574 15.0665 15.0901 14.8226 15.3317 14.4234C15.5733 14.0242 15.5886 13.5277 15.3721 13.1144ZM7.99976 4.75C8.41397 4.75 8.74976 5.08579 8.74976 5.5V9.5C8.74976 9.91421 8.41397 10.25 7.99976 10.25C7.58554 10.25 7.24976 9.91421 7.24976 9.5V5.5C7.24976 5.08579 7.58554 4.75 7.99976 4.75ZM7.99976 13C8.55204 13 8.99976 12.5523 8.99976 12C8.99976 11.4477 8.55204 11 7.99976 11C7.44747 11 6.99976 11.4477 6.99976 12C6.99976 12.5523 7.44747 13 7.99976 13Z\\\" fill=\\\"#F88618\\\" />\\r\\n\\t</svg>\\r\\n\\t<div>\\r\\n\\t\\t<p data-jcs-element=\\\"passive__liveness__message__title\\\" style=\\\"font-weight: bold;\\\"></p>\\r\\n\\t\\t<p data-jcs-element=\\\"passive__liveness__message\\\"></p>\\r\\n\\t</div>\\r\\n</div>\\r\\n</div>\\r\\n<div data-jcs-element=\\\"view__status\\\">\\r\\n\\t<p data-jcs-element=\\\"view__status__message\\\"></p>\\r\\n</div>\\r\\n<form class=\\\"button-container button-cancel-container\\\">\\r\\n\\t<button data-jcs-element=\\\"cancel__journey\\\" type=\\\"button\\\" class=\\\"button button--secondary-destructive button-full-xs\\\" aria-label=\\\"Button Title\\\">\\r\\n\\t\\t{{CANCEL_JOURNEY}}\\r\\n\\t</button>\\r\\n</form>\\r\\n\";","import * as uuid from 'uuid';\r\nimport EventService from '../../../helpers/classes/EventService';\r\nimport HttpService from '../../../helpers/classes/HttpService';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport SocketService, { SocketEvents } from '../../../helpers/classes/SocketService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport DataService, { DataStoreType } from '../../classes/DataService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { ScannerAction, ScannerError, ScannerState, ScanProcess } from '../../enums/Scanner';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { IIdScanData } from '../../interfaces/DataFormats';\r\nimport { IScannerState } from '../../interfaces/ScannerState';\r\nimport * as lottie from 'lottie-web/build/player/lottie';\r\nimport { AnimationService } from '../../../helpers/classes/AnimationService';\r\nimport { FlowState } from '../../enums/FlowState';\r\nimport { InputProvider } from '../../enums/InputProvider';\r\nimport { TripleScanGuidanceProvider } from './triple-scan-guidance';\r\nimport { HighLevelResult } from '../../enums/HighLevelResult';\r\n\r\nexport class ScannerProvider {\r\n\tpublic static render(this: JourneyContainer) {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tproviderContainer: '[data-jcs-element=\"provider__container\"]',\r\n\t\t})\r\n\t\t\t.then(({ providerContainer }) => TemplateService.renderToContainer(providerContainer, Templates.Scanner))\r\n\t\t\t.then((providerContainer) => TemplateService.getElements(providerContainer, {\r\n\t\t\t\taction: '[data-jcs-element=\"scanner__action\"]',\r\n\t\t\t\tscannerAnimationContainer: '[data-jcs-element=\"scanner__animation\"]',\r\n\t\t\t\tloadingAnimationContainer: '[data-jcs-element=\"image__processing\"]',\r\n\t\t\t\tfailureReasonContainer: '[data-jcs-element=\"failure__reason__section\"]'\r\n\t\t\t}))\r\n\t\t\t.then(({ action, scannerAnimationContainer, loadingAnimationContainer, failureReasonContainer }) => {\r\n\t\t\t\tif (scannerAnimationContainer !== undefined && loadingAnimationContainer !== undefined) {\r\n\t\t\t\t\tScannerProvider.scannerAnimation = AnimationService.CreateAnimation(scannerAnimationContainer, this.assetsFolder + '/animations/scan-green.json', true, false, {});\r\n\t\t\t\t\tScannerProvider.loadingAnimation = AnimationService.CreateAnimation(loadingAnimationContainer, this.assetsFolder + '/animations/loading.json', true, false, {});\r\n\t\t\t\t\tRenderingService.hideObject(failureReasonContainer);\r\n\t\t\t\t\tScannerProvider.loadingAnimation!.play();\r\n\t\t\t\t}\r\n\t\t\t\tif (action instanceof HTMLButtonElement) {\r\n\t\t\t\t\tRenderingService.setEnabled(action, false);\r\n\t\t\t\t\tRenderingService.setText(action, LanguageService.getTranslation(TranslationKey.SCANNER_DESC_LOADING));\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\t\t\t.then(() => {\r\n\t\t\t\tif ((HttpService.auth === true || this._config.auth === false) && ScannerProvider._socketReady === false) {\r\n\t\t\t\t\treturn ScannerProvider.startSocket.call(this);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_PROVIDER, { provider: Templates.Scanner }));\r\n\t}\r\n\r\n\t/**\r\n\t * Start socket communications\r\n\t */\r\n\tpublic static startSocket(this: JourneyContainer) {\r\n\t\treturn SocketService.initialise()\r\n\t\t\t.then(() => {\r\n\t\t\t\tSocketService.addListener(SocketEvents.UPDATE, ScannerProvider.onSocketUpdate.bind(this));\r\n\t\t\t\tSocketService.addListener(SocketEvents.RESULT, ScannerProvider.onSocketResult.bind(this));\r\n\t\t\t})\r\n\t\t\t.then(() => SocketService.start(this._journeyDefinitionId, this._journey !== undefined ? this._journey.id : uuid.v4()))\r\n\t\t\t.then((scannerState: IScannerState) => {\r\n\t\t\t\tScannerProvider.processMessage.call(this, scannerState);\r\n\t\t\t\tScannerProvider._socketReady = true;\r\n\t\t\t})\r\n\t\t\t.catch(console.warn);\r\n\t}\r\n\r\n\tprivate static _socketReady: boolean = false;\r\n\tprivate static scannerAnimation: lottie.AnimationItem | undefined;\r\n\tprivate static loadingAnimation: lottie.AnimationItem | undefined;\r\n\r\n\tprivate static processMessage(this: JourneyContainer, state: IScannerState): Promise<void> {\r\n\t\tif (state.connected !== true) {\r\n\t\t\tif (state.error === ScannerError.IS_LOCKED) {\r\n\t\t\t\treturn ScannerProvider.updateScannerUI.call(this, {\r\n\t\t\t\t\tactionEvent: ScannerAction.REGISTER,\r\n\t\t\t\t\tactionText: TranslationKey.SCANNER_ACTION_REGISTER,\r\n\t\t\t\t\ttitleText: TranslationKey.SCANNER_TITLE_BUSY,\r\n\t\t\t\t\terror: TranslationKey.SCANNER_DESC_BUSY,\r\n\t\t\t\t});\r\n\t\t\t} else if (state.error === ScannerError.IS_OFFLINE || state.error === ScannerError.IS_RELEASED) {\r\n\t\t\t\treturn ScannerProvider.updateScannerUI.call(this, {\r\n\t\t\t\t\tactionEvent: ScannerAction.REGISTER,\r\n\t\t\t\t\tactionText: TranslationKey.SCANNER_ACTION_REGISTER,\r\n\t\t\t\t\ttitleText: TranslationKey.SCANNER_TITLE_OFFLINE,\r\n\t\t\t\t\terror: TranslationKey.SCANNER_DESC_OFFLINE,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn ScannerProvider.updateScannerUI.call(this, {\r\n\t\t\t\t\tactionEvent: ScannerAction.REGISTER,\r\n\t\t\t\t\tactionText: TranslationKey.SCANNER_ACTION_REGISTER,\r\n\t\t\t\t\ttitleText: TranslationKey.SCANNER_TITLE_NOT_CONNECTED,\r\n\t\t\t\t\terror: TranslationKey.SCANNER_DESC_NOT_CONNECTED,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (state.state === ScannerState.DISCONNECTED) {\r\n\t\t\t\treturn ScannerProvider.updateScannerUI.call(this, {\r\n\t\t\t\t\tactionEvent: ScannerAction.RELEASE,\r\n\t\t\t\t\tactionText: TranslationKey.SCANNER_ACTION_RELEASE,\r\n\t\t\t\t\ttitleText: TranslationKey.SCANNER_TITLE_DISCONNECTED,\r\n\t\t\t\t});\r\n\t\t\t} else if (state.state === ScannerState.CONNECTED) {\r\n\t\t\t\tif (state.scanProcess === ScanProcess.SCANNING) {\r\n\t\t\t\t\treturn ScannerProvider.updateScannerUI.call(this, {\r\n\t\t\t\t\t\ttitleText: TranslationKey.SCANNER_TITLE_SCANNING,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (state.scanProcess === ScanProcess.PROCESSING) {\r\n\t\t\t\t\treturn ScannerProvider.updateScannerUI.call(this, {\r\n\t\t\t\t\t\ttitleText: TranslationKey.SCANNER_TITLE_PROCESSING,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn ScannerProvider.updateScannerUI.call(this, {\r\n\t\t\t\t\t\tactionEvent: ScannerAction.RELEASE,\r\n\t\t\t\t\t\tactionText: TranslationKey.SCANNER_ACTION_RELEASE,\r\n\t\t\t\t\t\ttitleText: TranslationKey.SCANNER_TITLE_AVAILABLE,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static updateScannerUI(this: JourneyContainer, { titleText, actionText, actionEvent, error }: { titleText: string, actionText?: string, actionEvent?: ScannerAction, error?: string }) {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tproviderContainer: '[data-jcs-element=\"provider__container\"]',\r\n\t\t})\r\n\t\t\t.then(({ providerContainer }) => TemplateService.getElements(providerContainer, {\r\n\t\t\t\tscannerContainer: '[data-jcs-element=\"scanner__container\"]',\r\n\t\t\t\taction: '[data-jcs-element=\"scanner__action\"]',\r\n\t\t\t\ttitle: '[data-jcs-element=\"scanner__box__title\"]',\r\n\t\t\t\terrorContainer: '[data-jcs-element=\"scanner__error\"]',\r\n\t\t\t\terrorBusy: '[data-jcs-element=\"scanner__error__busy\"]',\r\n\t\t\t\terrorOffline: '[data-jcs-element=\"scanner__error__offline\"]',\r\n\t\t\t\tscannerAnimation: '[data-jcs-element=\"scanner__animation\"]',\r\n\t\t\t\timageProcessing: '[data-jcs-element=\"image__processing\"]',\r\n\t\t\t\terrorImage: '[data-jcs-element=\"error__image\"]',\r\n\t\t\t\tsuccessImage: '[data-jcs-element=\"success__image\"]',\r\n\t\t\t\tfailureReasonMessage: '[data-jcs-element=\"failure__reason__message\"]',\r\n\t\t\t\ttryAgainMessage: '[data-jcs-element=\"try__again__message\"]',\r\n\t\t\t\tattemptCountContainer: '[data-jcs-element=\"attempt__count__container\"]',\r\n\t\t\t\tattemptCounter: '[data-jcs-element=\"attempt__counter\"]',\r\n\t\t\t\tfailureReasonContainer: '[data-jcs-element=\"failure__reason__section\"]'\r\n\t\t\t}))\r\n\t\t\t.then(({ scannerContainer, title, action, errorContainer, errorBusy, errorOffline, scannerAnimation, imageProcessing, errorImage, successImage, failureReasonMessage, tryAgainMessage, attemptCountContainer, attemptCounter, failureReasonContainer }) => {\r\n\t\t\t\tRenderingService.setText(title, LanguageService.getTranslation(titleText as TranslationKey));\r\n\t\t\t\tRenderingService.hideObject(successImage);\r\n\t\t\t\tRenderingService.hideObject(errorImage);\r\n\t\t\t\tScannerProvider.scannerAnimation!.stop();\r\n\t\t\t\t// ScannerProvider.loadingAnimation!.stop();\r\n\t\t\t\tif (error) {\r\n\t\t\t\t\tRenderingService.showObject(errorContainer);\r\n\t\t\t\t\tRenderingService.addClass(scannerContainer, 'error');\r\n\t\t\t\t\tRenderingService.addClass(title, 'scanner-error-text');\r\n\t\t\t\t\tRenderingService.addClass(scannerAnimation, 'animation-error');\r\n\t\t\t\t\tRenderingService.removeClass(scannerAnimation, 'animation-success');\r\n\t\t\t\t\tRenderingService.removeClass(scannerAnimation, 'animation-scanning');\r\n\t\t\t\t\tRenderingService.removeClass(title, 'scanner-success-text');\r\n\t\t\t\t\tRenderingService.showObject(errorImage);\r\n\t\t\t\t\tif (error === TranslationKey.SCANNER_DESC_BUSY) {\r\n\t\t\t\t\t\tRenderingService.hideObject(errorOffline);\r\n\t\t\t\t\t\tRenderingService.showObject(errorBusy);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tRenderingService.showObject(errorOffline);\r\n\t\t\t\t\t\tRenderingService.hideObject(errorBusy);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRenderingService.hideObject(errorContainer);\r\n\t\t\t\t\tRenderingService.removeClass(scannerContainer, 'error');\r\n\t\t\t\t\tRenderingService.removeClass(title, 'scanner-error-text');\r\n\t\t\t\t\tRenderingService.removeClass(scannerAnimation, 'animation-error');\r\n\t\t\t\t\tRenderingService.addClass(title, 'scanner-success-text');\r\n\t\t\t\t\tRenderingService.addClass(scannerAnimation, 'animation-success');\r\n\t\t\t\t\tif (titleText === TranslationKey.SCANNER_TITLE_SCANNING) {\r\n\t\t\t\t\t\tScannerProvider.scannerAnimation!.play();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tScannerProvider.scannerAnimation!.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (titleText === TranslationKey.SCANNER_TITLE_AVAILABLE) {\r\n\t\t\t\t\tRenderingService.showObject(successImage);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (titleText === TranslationKey.SCANNER_TITLE_PROCESSING) {\r\n\t\t\t\t\tScannerProvider.loadingAnimation!.play();\r\n\t\t\t\t\tRenderingService.hideObject(scannerAnimation);\r\n\t\t\t\t\tRenderingService.showObject(imageProcessing);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRenderingService.showObject(scannerAnimation);\r\n\t\t\t\t\tRenderingService.hideObject(imageProcessing);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this._journey) {\r\n\r\n\t\t\t\t\tswitch (this._journey.actionAttempt) {\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tScannerProvider.setTriplescanReasonMessages(this._journey.tripleScanReason, failureReasonMessage, tryAgainMessage, failureReasonContainer);\r\n\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '2');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tScannerProvider.setTriplescanReasonMessages(this._journey.tripleScanReason, failureReasonMessage, tryAgainMessage, failureReasonContainer);\r\n\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '1');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tRenderingService.hideObject(failureReasonContainer);\r\n\t\t\t\t\t\t\tRenderingService.hideObject(attemptCountContainer);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (action instanceof HTMLButtonElement) {\r\n\t\t\t\t\tif (actionText && actionEvent) {\r\n\t\t\t\t\t\tRenderingService.setText(action, LanguageService.getTranslation(actionText as TranslationKey));\r\n\t\t\t\t\t\tRenderingService.setEnabled(action, true);\r\n\r\n\t\t\t\t\t\taction.removeEventListener('click', () => { /* NO-OP */ });\r\n\t\t\t\t\t\taction.addEventListener('click', () => {\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(action as HTMLButtonElement, false);\r\n\t\t\t\t\t\t\tRenderingService.setText(action as HTMLButtonElement, LanguageService.getTranslation(TranslationKey.SCANNER_DESC_LOADING));\r\n\r\n\t\t\t\t\t\t\tswitch (actionEvent) {\r\n\t\t\t\t\t\t\t\tcase ScannerAction.RELEASE:\r\n\t\t\t\t\t\t\t\t\tSocketService.release();\r\n\t\t\t\t\t\t\t\tcase ScannerAction.REGISTER:\r\n\t\t\t\t\t\t\t\t\tSocketService.tryRegistering();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tRenderingService.setEnabled(action, false);\r\n\t\t\t\t\t\tRenderingService.setText(action, LanguageService.getTranslation(TranslationKey.SCANNER_DESC_LOADING));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).catch(() => { /*\r\n\t\t\t\tWe don't care about the errors in here, it's likely the\r\n\t\t\t\telement has been de-rendered if an exception occurs\r\n\t\t\t*/ });\r\n\t}\r\n\r\n\t/**\r\n\t * Stop socket communications\r\n\t */\r\n\tprivate static stopSocket(this: JourneyContainer) {\r\n\t\tSocketService.removeAllListeners(SocketEvents.UPDATE);\r\n\t\tSocketService.removeAllListeners(SocketEvents.RESULT);\r\n\t\treturn SocketService.stop()\r\n\t\t\t.then((stopped) => {\r\n\t\t\t\tif (stopped) {\r\n\t\t\t\t\tScannerProvider._socketReady = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate static releaseTerminal(this: JourneyContainer) {\r\n\t\treturn SocketService.resetTerminal()\r\n\t\t\t.then((stopped) => {\r\n\t\t\t\tif (stopped) {\r\n\t\t\t\t\tScannerProvider._socketReady = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate static onSocketUpdate(this: JourneyContainer, update: any) {\r\n\t\tScannerProvider.processMessage.call(this, update)\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.SCANNER_UPDATE, {\r\n\t\t\t\tprocess: update.scanProcess,\r\n\t\t\t\tstate: update.state,\r\n\t\t\t}))\r\n\t\t\t.catch(console.error);\r\n\t}\r\n\r\n\tprivate static onSocketResult(this: JourneyContainer, res: any) {\r\n\t\tres.entryData = {\r\n\t\t\tscanReference: res.scanReference, blurCheck: res.entryData['qualityChecks.BlurCheck'],\r\n\t\t\tglareCheck: res.entryData['qualityChecks.GlareCheck'], lowResolutionCheck: res.entryData['qualityChecks.LowResolutionCheck'],\r\n\t\t\tfullDocumentInViewCheck: res.entryData['qualityChecks.FullDocumentInViewCheck'], tripleScanReason: res.entryData.tripleScanReason\r\n\t\t};\r\n\r\n\t\tDataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN)\r\n\t\t\t.update(ScannerProvider.parseResponseData(res));\r\n\r\n\t\tif (res.requiredAction === 'ADDRESSDOCUMENT' ||\r\n\t\t\tres.requiredAction === 'SELFIE' ||\r\n\t\t\tres.requiredAction === 'LIVENESS' ||\r\n\t\t\tres.requiredAction === 'COVIDPASS' ||\r\n\t\t\tres.requiredAction === 'DATACHECKS') {\r\n\t\t\tScannerProvider.releaseTerminal.call(this);\r\n\t\t}\r\n\t\treturn ScannerProvider.stopSocket.call(this)\r\n\t\t\t.then(() => this._journey!.bindUpdate(res))\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.SCANNER_RESULT, {\r\n\t\t\t\tcurrentResult: res.currentResult\r\n\t\t\t}))\r\n\t\t\t.then(() => this.evaluate())\r\n\t\t\t.then(this.updateJourneyFields)\r\n\t\t\t.catch(console.error);\r\n\t}\r\n\r\n\tprivate static parseResponseData = ({\r\n\t\tcurrentResult,\r\n\t\thighLevelResult,\r\n\t\tdocumentType,\r\n\t\trequiredAction,\r\n\t\tscanReference,\r\n\t\tentryData,\r\n\t\tisFinished,\r\n\t}: any): Partial<IIdScanData> => ({\r\n\t\tdocuments: [{\r\n\t\t\ttype: documentType,\r\n\t\t\tscanReference\r\n\t\t}],\r\n\t\tblurCheck: entryData.blurCheck,\r\n\t\tglareCheck: entryData.glareCheck,\r\n\t\tlowResolutionCheck: entryData.lowResolutionCheck,\r\n\t\tfullDocumentInViewCheck: entryData.fullDocumentInViewCheck,\r\n\t\ttripleScanReason: entryData.tripleScanReason,\r\n\t\trequiredAction,\r\n\t\thighLevelResult,\r\n\t\tcurrentResult,\r\n\t\tisFinished\r\n\t})\r\n\r\n\tprivate static setTriplescanReasonMessages(tripleScanReason: string, failureReasonMessage: HTMLElement | undefined, tryAgainMessage: HTMLElement | undefined, failureReasonContainer: HTMLElement | undefined) {\r\n\t\tRenderingService.showObject(failureReasonContainer);\r\n\r\n\t\tswitch (tripleScanReason) {\r\n\t\t\tcase HighLevelResult.NotSupported:\r\n\t\t\t\tRenderingService.setText(failureReasonMessage, LanguageService.getTranslation(TranslationKey.FAILURE_REASON_NOT_SUPPORTED));\r\n\t\t\t\tRenderingService.setText(tryAgainMessage, LanguageService.getTranslation(TranslationKey.PLEASE_TRY_AGAIN_NOT_SUPPORTED));\r\n\t\t\t\tbreak;\r\n\t\t\tcase HighLevelResult.Refer:\r\n\t\t\t\tRenderingService.setText(failureReasonMessage, LanguageService.getTranslation(TranslationKey.FAILURE_REASON_REFER));\r\n\t\t\t\tRenderingService.setText(tryAgainMessage, LanguageService.getTranslation(TranslationKey.PLEASE_TRY_AGAIN_REFER));\r\n\t\t\t\tbreak;\r\n\t\t\tcase HighLevelResult.NotAccepted:\r\n\t\t\t\tRenderingService.setText(failureReasonMessage, LanguageService.getTranslation(TranslationKey.FAILURE_REASON_NOT_ACCEPTED));\r\n\t\t\t\tRenderingService.setText(tryAgainMessage, LanguageService.getTranslation(TranslationKey.PLEASE_TRY_AGAIN_NOT_ACCEPTED));\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase HighLevelResult.Expired:\r\n\t\t\t\tRenderingService.setText(failureReasonMessage, LanguageService.getTranslation(TranslationKey.FAILURE_REASON_EXPIRED));\r\n\t\t\t\tRenderingService.setText(tryAgainMessage, LanguageService.getTranslation(TranslationKey.PLEASE_TRY_AGAIN_EXPIRED));\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tRenderingService.setText(failureReasonMessage, LanguageService.getTranslation(TranslationKey.FAILURE_REASON_NOT_SUPPORTED));\r\n\t\t\t\tRenderingService.setText(tryAgainMessage, LanguageService.getTranslation(TranslationKey.PLEASE_TRY_AGAIN_NOT_SUPPORTED));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n}\r\n","/**\r\n * The current stage of the scanning process.\r\n *\r\n * @public\r\n */\r\nexport enum ScanProcess {\r\n\t/**\r\n\t * The scanner is not currently engaged.\r\n\t */\r\n\tEMPTY = 'EMPTY',\r\n\t/**\r\n\t * The scanner service is processing an uploaded document.\r\n\t */\r\n\tPROCESSING = 'PROCESSING',\r\n\t/**\r\n\t * The scanner is currently capturing a document.\r\n\t */\r\n\tSCANNING = 'SCANNING',\r\n}\r\n\r\n/**\r\n * The current state of the scanner.\r\n *\r\n * @public\r\n */\r\nexport enum ScannerState {\r\n\t/**\r\n\t * The scanner service is currently busy. It may currently be in use by\r\n\t * another agent. If this state persists check the scanner service.\r\n\t */\r\n\tBUSY = 'SOURCE:BUSY',\r\n\t/**\r\n\t * The scanner service is connected and ready. You should now be able to\r\n\t * register the scanner for this instance.\r\n\t */\r\n\tCONNECTED = 'SOURCE:CONNECTED',\r\n\t/**\r\n\t * The scanner service is currently disconnected.\r\n\t */\r\n\tDISCONNECTED = 'SOURCE:DISCONNECTED',\r\n}\r\n\r\n/**\r\n * The action to instruct the scanner service to perform.\r\n *\r\n * @internal\r\n */\r\nexport enum ScannerAction {\r\n\t/**\r\n\t * Instruct the scanner service to register the scanner to this instance.\r\n\t */\r\n\tREGISTER = 'SCANNER:REGISTER',\r\n\t/**\r\n\t * Instruct the scanner service to release the scanner from this instance.\r\n\t */\r\n\tRELEASE = 'SCANNER:RELEASE',\r\n}\r\n\r\n/**\r\n * The error state of the scanner.\r\n *\r\n * @public\r\n */\r\nexport enum ScannerError {\r\n\t/**\r\n\t * The scanner is currently locked for use by another agent.\r\n\t */\r\n\tIS_LOCKED = 'ScannerIsLocked',\r\n\t/**\r\n\t * The scanner is currently offline. Check the network connection between\r\n\t * the scanner client and the service, and that the printer is powered on\r\n\t * and connected to the host machine.\r\n\t */\r\n\tIS_OFFLINE = 'ScannerOffline',\r\n\t/**\r\n\t * The scanner was released by the service and is no longer available for\r\n\t * use.\r\n\t */\r\n\tIS_RELEASED = 'ScannerIsReleased',\r\n}\r\n","import { JourneyEvent } from '../../idscan/enums/JourneyEvent';\r\nimport EventService from './EventService';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport namespace ExceptionManager {\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\texport function process(exception: Exception): Exception {\r\n\t\tEventService.publish(JourneyEvent.ERROR, { exception });\r\n\r\n\t\treturn exception;\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\texport class Exception extends Error {\r\n\t\tpublic timestamp: number;\r\n\t\tpublic response: any;\r\n\r\n\t\t/**\r\n\t\t * @class Exception\r\n\t\t * @param message\r\n\t\t * @param name\r\n\t\t * @param response\r\n\t\t */\r\n\t\tconstructor(message: string, name: string = 'Exception', response?: any | undefined) {\r\n\t\t\tsuper(message);\r\n\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.response = response;\r\n\t\t\tthis.timestamp = Date.now();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class NetworkException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class NetworkException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'NetworkException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class ServerException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class ServerException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'ServerException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class BadRequestException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class BadRequestException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'BadRequestException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class AuthorizationException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class AuthorizationException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'AuthorizationException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class MissingParameterException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class MissingParameterException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'MissingParameterException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class PlatformException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class PlatformException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'PlatformException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class NotFoundException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class NotFoundException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'NotFoundException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class FlowStateException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class FlowStateException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'FlowStateException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class InvalidParameterException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class InvalidParameterException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'InvalidParameterException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class UnavailableInputProviderException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class UnavailableInputProviderException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'UnavailableInputProviderException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class WebSocketException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class WebSocketException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'WebSocketException', response);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * class WebSocketException extends Exception\r\n\t * @param response\r\n\t * @param message\r\n\t *\r\n\t * @internal\r\n\t */\r\n\texport class TemplateException extends Exception {\r\n\t\tconstructor(message: string, response?: any) {\r\n\t\t\tsuper(message, 'TemplateException', response);\r\n\t\t}\r\n\t}\r\n}\r\n","/**\r\n * @public\r\n */\r\nexport enum ReticleType {\r\n\tNONE = 'NONE',\r\n\tDOCUMENT = 'DOCUMENT',\r\n\tPORTRAIT = 'PORTRAIT'\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport enum HintType {\r\n\tNONE = 'NONE',\r\n\tAUTOCAPTUREON = 'AUTOCAPTURE_ON',\r\n\tAUTOCAPTUREOFF = 'AUTOCAPTURE_OFF'\r\n}\r\n","import * as uuid from 'uuid';\r\nimport EventService from '../../helpers/classes/EventService';\r\nimport { ExceptionManager } from '../../helpers/classes/ExceptionManager';\r\nimport { HttpResponse } from '../../helpers/classes/HttpResponse';\r\nimport HttpService from '../../helpers/classes/HttpService';\r\nimport StorageService from '../../helpers/classes/StorageService';\r\nimport { STORAGE_KEYS } from '../configuration/StorageKeys';\r\nimport { CurrentResult } from '../enums/CurrentResult';\r\nimport { DocumentSource } from '../enums/DocumentSource';\r\nimport { FlowState } from '../enums/FlowState';\r\nimport { HighLevelResult } from '../enums/HighLevelResult';\r\nimport { JourneyEvent } from '../enums/JourneyEvent';\r\nimport { JourneyState } from '../enums/JourneyState';\r\nimport { TranslationKey } from '../enums/Translation';\r\nimport { ICropResponse } from '../interfaces/CropResponse';\r\nimport { IInputImage } from '../interfaces/InputImage';\r\nimport { IJourneyInformation } from '../interfaces/Journey';\r\nimport { UploadResponse } from '../interfaces/UploadResponse';\r\nimport { JourneyFlow } from './JourneyFlow';\r\nimport { IAdditionalData } from '../interfaces/AdditionalData';\r\nimport { osName, osVersion, browserName, fullBrowserVersion, mobileVendor, mobileModel, isMobile } from '../../helpers/utils/browserDetection';\r\nimport { IMetaData } from '../interfaces/MetaData';\r\nimport { JourneyStep } from '../enums/JourneyStep';\r\nimport JourneyManager from './JourneyManager';\r\nimport { Mode } from '../enums/Mode';\r\nimport { IConfidoInfo } from '../interfaces/ConfidoInfo';\r\nimport DataService, { DataStoreType } from './DataService';\r\nimport { IIdScanData } from '../interfaces/DataFormats';\r\n\r\n//global version string\r\ndeclare var VERSION: string;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class Journey {\r\n\r\n\t/**\r\n\t * Generate a guid-like id and return it.\r\n\t */\r\n\tprotected static generateId = (): string => {\r\n\t\treturn uuid.v4();\r\n\t}\r\n\r\n\tpublic get endDate(): Date {\r\n\t\treturn this._endDate!;\r\n\t}\r\n\r\n\tpublic get id(): string {\r\n\t\treturn this._id;\r\n\t}\r\n\r\n\tpublic get glareCheck(): string {\r\n\t\treturn this._glareCheck!;\r\n\t}\r\n\r\n\tpublic get blurCheck(): string {\r\n\t\treturn this._blurCheck!;\r\n\t}\r\n\r\n\tpublic get lowResolutionCheck(): string {\r\n\t\treturn this._lowResolutionCheck!;\r\n\t}\r\n\r\n\tpublic get fullDocumentInViewCheck(): string {\r\n\t\treturn this._fullDocumentInViewCheck!;\r\n\t}\r\n\r\n\tpublic get information(): IJourneyInformation {\r\n\t\treturn this._information!;\r\n\t}\r\n\r\n\tpublic get isCancelled(): boolean {\r\n\t\treturn this._isCancelled;\r\n\t}\r\n\r\n\tpublic get isFinished(): boolean {\r\n\t\treturn this._isFinished;\r\n\t}\r\n\r\n\tpublic get additionalData(): IAdditionalData[] {\r\n\t\treturn this._additionalData;\r\n\t}\r\n\r\n\tpublic get startDate(): Date {\r\n\t\treturn this._startDate!;\r\n\t}\r\n\r\n\tpublic get reference(): string | undefined {\r\n\t\treturn this._reference;\r\n\t}\r\n\r\n\tpublic get result(): HighLevelResult {\r\n\t\treturn this._result;\r\n\t}\r\n\r\n\tpublic get status(): JourneyState {\r\n\t\treturn this._status!;\r\n\t}\r\n\r\n\tpublic get totalRequests(): number {\r\n\t\treturn this._totalRequests;\r\n\t}\r\n\r\n\tpublic get action(): FlowState {\r\n\t\treturn this._flow.state;\r\n\t}\r\n\r\n\tpublic get actionAttempt(): number {\r\n\t\treturn this._flow.attempt;\r\n\t}\r\n\r\n\tpublic get tripleScanReason(): string {\r\n\t\treturn this._tripleScanReason!;\r\n\t}\r\n\r\n\tpublic get confidoInfo(): IConfidoInfo {\r\n\t\treturn this._confidoInfo!;\r\n\t}\r\n\r\n\tprivate _endDate?: Date;\r\n\tprivate _id: string;\r\n\tprivate _information?: IJourneyInformation;\r\n\tprivate _inProgress: boolean = false;\r\n\tprivate _isCancelled: boolean = false;\r\n\tprivate _isFinished: boolean = false;\r\n\tprivate _additionalData: IAdditionalData[];\r\n\tprivate _metaData: IMetaData[] = [];\r\n\tprivate _reference: string | undefined;\r\n\tprivate _result: HighLevelResult = HighLevelResult.Undefined;\r\n\tprivate _startDate?: Date;\r\n\tprivate _status?: JourneyState;\r\n\tprivate _totalRequests: number = 0;\r\n\tprivate _flow: JourneyFlow = new JourneyFlow();\r\n\tprivate _glareCheck?: string;\r\n\tprivate _blurCheck?: string;\r\n\tprivate _lowResolutionCheck?: string;\r\n\tprivate _fullDocumentInViewCheck?: string;\r\n\tprivate _tripleScanReason?: string | undefined;\r\n\tprivate _confidoInfo?: IConfidoInfo;\r\n\r\n\theaderToken = StorageService.get(STORAGE_KEYS.journeyId);\r\n\tconstructor(data?: IAdditionalData[], journeyId: string = Journey.generateId()) {\r\n\t\tif (!this.headerToken) { this._id = journeyId; }\r\n\t\telse { this._id = StorageService.get(STORAGE_KEYS.journeyId)!; }\r\n\t\tthis._additionalData = data ? data : [];\r\n\t}\r\n\r\n\t/**\r\n\t * Sets up the request object with the given parameters and sends it.\r\n\t * Returns the promise of the request.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tpublic continue = (image: {\r\n\t\timgId?: string;\r\n\t\timgList?: IInputImage[];\r\n\t\tcoordinates?: number[][];\r\n\t\texcludeOutputImages?: boolean;\r\n\t\tisDocumentExtracted?: boolean;\r\n\t\tjourneyDefinitionId: string;\r\n\t}, metaData?: IMetaData[]\r\n\t): Promise<UploadResponse> => {\r\n\t\treturn this.assertIsNotInProgress()\r\n\t\t\t.then(this.assertUserAuthenticated)\r\n\t\t\t.then(this.assertJourneyNotEnded)\r\n\t\t\t.then(() => {\r\n\t\t\t\tif (image.imgId) {\r\n\t\t\t\t\treturn this.assertImgIdExists(image.imgId)\r\n\t\t\t\t\t\t.then(() => this.assertCoordinatesExists(image.coordinates))\r\n\t\t\t\t\t\t.then(() => this.sendWithCoordinates(image.imgId!, image.coordinates!, image.excludeOutputImages, image.journeyDefinitionId, metaData));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.assertImgListExists(image.imgList)\r\n\t\t\t\t\t\t.then(() => this.send(image.imgList!, image.coordinates, image.isDocumentExtracted, image.excludeOutputImages, image.journeyDefinitionId, metaData));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t* Sets up the request object with the given parameters and sends it.\r\n\t* Returns the promise of the request.\r\n\t*\r\n\t* @internal\r\n\t*/\r\n\tpublic continueCovid = (Base64Input: string,\r\n\t\tjourneyDefinitionId?: string,\r\n\t): Promise<UploadResponse> => {\r\n\t\treturn this.assertIsNotInProgress()\r\n\t\t\t.then(this.assertUserAuthenticated)\r\n\t\t\t.then(this.assertJourneyNotEnded)\r\n\t\t\t.then(() => {\r\n\t\t\t\treturn this.sendCovid(Base64Input, journeyDefinitionId);\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n* Sets up the request object with the given parameters and sends it.\r\n* Returns the promise of the request.\r\n*\r\n* @internal\r\n*/\r\n\tpublic continueDataChecks = (ConfidoInfo: IConfidoInfo): Promise<IConfidoInfo> => {\r\n\t\treturn this.assertIsNotInProgress()\r\n\t\t\t.then(this.assertUserAuthenticated)\r\n\t\t\t.then(this.assertJourneyNotEnded)\r\n\t\t\t.then(() => {\r\n\t\t\t\treturn this.sendDataChecks(ConfidoInfo);\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Changes journey status to 'ENDED'.\r\n\t * Cancelled journeys cannot send more requests.\r\n\t */\r\n\tpublic cancel = (highLevelResult: HighLevelResult = HighLevelResult.Aborted): Promise<void> => {\r\n\t\treturn this.assertUserAuthenticated()\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis._isCancelled = true;\r\n\t\t\t\tthis._status = JourneyState.ENDED;\r\n\t\t\t\tthis._result = highLevelResult;\r\n\t\t\t\tthis._endDate = new Date();\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.JOURNEY_CANCEL, { id: this.id }));\r\n\t}\r\n\r\n\t/**\r\n\t * Crop the image.\r\n\t */\r\n\r\n\tpublic crop = (img: IInputImage): Promise<ICropResponse> => HttpService.post(HttpService.endpoints.crop, img, undefined, 'crop')\r\n\t\t.catch((e) => {\r\n\t\t\tif (e.response && e.response.status === 401) {\r\n\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.AuthorizationException(TranslationKey.EXCEPTION_AUTHORIZATION_ACCOUNT_NOT_AUTHORIZED, e.response));\r\n\t\t\t} else {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\r\n\t\t})\r\n\r\n\t/**\r\n\t * A method for socket response to be integrated to a journey internally.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tpublic bindUpdate = (res: any) => this.process(res);\r\n\r\n\t/**\r\n\t * Check out the response from server and update the journey accordingly.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tpublic update = (res: HttpResponse<UploadResponse>) => this.process(res instanceof HttpResponse ? res.data : res);\r\n\r\n\t/**\r\n\t * Get the username\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tpublic getUsername = () => StorageService.get(STORAGE_KEYS.userName);\r\n\r\n\t/**\r\n\t * Get the current state of the journey\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tpublic getState = () => {\r\n\t\treturn {\r\n\t\t\taction: this.action,\r\n\t\t\tactionAttempt: this.actionAttempt\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Starts the journey\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tpublic start = (): Promise<this> => {\r\n\t\tthis._startDate = new Date();\r\n\t\tthis._status = JourneyState.STARTED;\r\n\t\tStorageService.set(STORAGE_KEYS.journeyId, this.id, 24);\r\n\t\treturn EventService.publish(JourneyEvent.JOURNEY_START, { id: this.id })\r\n\t\t\t.then(() => this);\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprivate send = (\r\n\t\timgList: IInputImage[],\r\n\t\tcoordinates?: number[][],\r\n\t\tisDocumentExtracted: boolean = typeof coordinates !== 'undefined',\r\n\t\texcludeOutputImages: boolean = true,\r\n\t\tjourneyDefinitionId?: string,\r\n\t\tmetaData?: IMetaData[]\r\n\t): Promise<any> => {\r\n\t\tmetaData = metaData === undefined ? [] : metaData;\r\n\t\tthis.setMetaData(metaData);\r\n\t\treturn EventService.publish(JourneyEvent.JOURNEY_PROGRESS, { id: this.id })\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis._inProgress = true;\r\n\t\t\t})\r\n\r\n\t\t\t.then(() => HttpService.post(HttpService.endpoints.upload, {\r\n\t\t\t\t...(this.id ? { journeyId: this.id } : {}),\r\n\t\t\t\tPersonEntryId: this.id,\r\n\t\t\t\tadditionalData: [{\r\n\t\t\t\t\tname: 'Platform',\r\n\t\t\t\t\tvalue: JourneyManager.mode === Mode.WEB ? 'WJCS' : Mode.CAPTURESTUDIO.toLowerCase()\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: 'UserName',\r\n\t\t\t\t\tvalue: this.getUsername()\r\n\t\t\t\t},\r\n\t\t\t\t...(journeyDefinitionId ? [{\r\n\t\t\t\t\tname: 'JourneyDefinitionId',\r\n\t\t\t\t\tvalue: journeyDefinitionId\r\n\t\t\t\t}] : []),\r\n\t\t\t\t...this._additionalData\r\n\t\t\t\t],\r\n\t\t\t\tmetadata: this.getMetaData(),\r\n\t\t\t\tcoordinates,\r\n\t\t\t\texcludeOutputImagesFromResponse: excludeOutputImages !== undefined ? excludeOutputImages : true,\r\n\t\t\t\tinputImages: imgList,\r\n\t\t\t\tisDocumentExtracted,\r\n\t\t\t\tsource: this.inferSource(),\r\n\t\t\t}, {}, 'upload'))\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis._inProgress = false;\r\n\t\t\t\tthis._metaData.splice(0, this._metaData.length);\r\n\t\t\t\treturn this.update(res);\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tthis._inProgress = false;\r\n\t\t\t\treturn Promise.reject(e);\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprivate sendCovid = (\r\n\t\tBase64Input: string,\r\n\t\tjourneyDefinitionId?: string,\r\n\r\n\t): Promise<any> => {\r\n\r\n\t\treturn EventService.publish(JourneyEvent.JOURNEY_PROGRESS, { id: this.id })\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis._inProgress = true;\r\n\t\t\t})\r\n\r\n\t\t\t.then(() => HttpService.post(HttpService.endpoints.covidpass,\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tBase64Input: Base64Input,\r\n\t\t\t\t\tJourneyId: journeyDefinitionId,\r\n\t\t\t\t}),\r\n\t\t\t\tundefined,\r\n\t\t\t\t'covid'))\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis._inProgress = false;\r\n\t\t\t\treturn this.update(res);\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tthis._inProgress = false;\r\n\t\t\t\treturn Promise.reject(e);\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n* @internal\r\n*/\r\n\tprivate sendDataChecks = (\r\n\t\tConfidoInfo: IConfidoInfo\r\n\t): Promise<any> => {\r\n\r\n\t\treturn EventService.publish(JourneyEvent.JOURNEY_PROGRESS, { id: this.id })\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis._inProgress = true;\r\n\t\t\t})\r\n\t\t\t.then(() => HttpService.post(HttpService.endpoints.dataChecks,\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tjourneyId: ConfidoInfo.journeyId,\r\n\t\t\t\t\thouseName: ConfidoInfo.houseName,\r\n\t\t\t\t\tstreetName: ConfidoInfo.streetName,\r\n\t\t\t\t\ttown: ConfidoInfo.town,\r\n\t\t\t\t\tpostCode: ConfidoInfo.postCode\r\n\t\t\t\t}),\r\n\t\t\t\tundefined,\r\n\t\t\t\t'dataChecks'\r\n\t\t\t))\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis._inProgress = false;\r\n\t\t\t\tthis._confidoInfo = ConfidoInfo;\r\n\t\t\t\treturn this.update(res);\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tthis._inProgress = false;\r\n\t\t\t\treturn Promise.reject(e);\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprivate sendWithCoordinates = (\r\n\t\timgId: string,\r\n\t\tcoordinates: number[][],\r\n\t\texcludeOutputImages?: boolean,\r\n\t\tjourneyDefinitionId?: string,\r\n\t\tmetaData?: IMetaData[]\r\n\t): Promise<any> => EventService.publish(JourneyEvent.JOURNEY_PROGRESS, { id: this.id })\r\n\t\t.then(() => {\r\n\t\t\tthis._inProgress = true;\r\n\t\t\tmetaData = metaData === undefined ? [] : metaData;\r\n\t\t\tthis.setMetaData(metaData);\r\n\t\t})\r\n\t\t.then(() => HttpService.post(HttpService.endpoints.upload, {\r\n\t\t\t...(this.id ? { journeyId: this.id } : {}),\r\n\t\t\tadditionalData: [{\r\n\t\t\t\tname: 'Platform',\r\n\t\t\t\tvalue: JourneyManager.mode === Mode.WEB ? \"WJCS\" : Mode.CAPTURESTUDIO.toLowerCase()\r\n\t\t\t}, {\r\n\t\t\t\tname: 'UserName',\r\n\t\t\t\tvalue: this.getUsername()\r\n\t\t\t},\r\n\t\t\t...(journeyDefinitionId ? [{\r\n\t\t\t\tname: 'JourneyDefinitionId',\r\n\t\t\t\tvalue: journeyDefinitionId\r\n\t\t\t}] : []),\r\n\t\t\t...this._additionalData\r\n\t\t\t],\r\n\t\t\tmetadata: this.getMetaData(),\r\n\t\t\tcoordinates,\r\n\t\t\texcludeOutputImagesFromResponse: excludeOutputImages !== undefined ? excludeOutputImages : true,\r\n\t\t\tinputImageId: imgId,\r\n\t\t\tisDocumentExtracted: true,\r\n\t\t\tsource: this.inferSource()\r\n\t\t}, {}, 'send'))\r\n\t\t.then((res) => {\r\n\t\t\tthis._inProgress = false;\r\n\t\t\treturn this.update(res);\r\n\t\t})\r\n\t\t.catch((e) => {\r\n\t\t\tthis._inProgress = false;\r\n\t\t\tthrow e;\r\n\t\t})\r\n\r\n\t/**\r\n\t * Checking information object for properties, and merging it with the local information object.\r\n\t */\r\n\tprivate checkInformation = (info: IJourneyInformation): Promise<void> => new Promise((resolve) => {\r\n\t\tthis._information = this._information ? this._information : {\r\n\t\t\tblurCheck: undefined,\r\n\t\t\tdocuments: [],\r\n\t\t\tglareCheck: undefined,\r\n\t\t\tholder: {\r\n\t\t\t\taddress: {\r\n\t\t\t\t\tcity: undefined,\r\n\t\t\t\t\tfull: undefined,\r\n\t\t\t\t\tpostCode: undefined\r\n\t\t\t\t},\r\n\t\t\t\tbirthDate: undefined,\r\n\t\t\t\tbirthPlace: undefined,\r\n\t\t\t\tfirstName: undefined,\r\n\t\t\t\tfullName: undefined,\r\n\t\t\t\tgender: undefined,\r\n\t\t\t\tlastName: undefined,\r\n\t\t\t\tmiddleName: undefined\r\n\t\t\t},\r\n\t\t\tlowResolutionCheck: undefined,\r\n\t\t\tfullDocumentInViewCheck: undefined,\r\n\t\t\tscanReference: undefined,\r\n\t\t\tscannerIp: undefined,\r\n\t\t\ttripleScanReason: undefined\r\n\t\t};\r\n\r\n\t\tif (info.documents) {\r\n\t\t\tthis._information.documents.push(...info.documents);\r\n\t\t}\r\n\r\n\t\tif (info.holder) {\r\n\t\t\tif (info.holder.address) {\r\n\t\t\t\tthis._information.holder.address.city = info.holder.address.city || this._information.holder.address.city;\r\n\t\t\t\tthis._information.holder.address.full = info.holder.address.full || this._information.holder.address.full;\r\n\t\t\t\tthis._information.holder.address.postCode = info.holder.address.postCode || this._information.holder.address.postCode;\r\n\t\t\t}\r\n\r\n\t\t\tif (info.holder.birthDate) {\r\n\t\t\t\tthis._information.holder.birthDate = info.holder.birthDate || this._information.holder.birthDate;\r\n\t\t\t}\r\n\r\n\t\t\tif (info.holder.birthPlace) {\r\n\t\t\t\tthis._information.holder.birthPlace = info.holder.birthPlace || this._information.holder.birthPlace;\r\n\t\t\t}\r\n\r\n\t\t\tif (info.holder.firstName) {\r\n\t\t\t\tthis._information.holder.firstName = info.holder.firstName || this._information.holder.firstName;\r\n\t\t\t}\r\n\r\n\t\t\tif (info.holder.fullName) {\r\n\t\t\t\tthis._information.holder.fullName = info.holder.fullName || this._information.holder.fullName;\r\n\t\t\t}\r\n\r\n\t\t\tif (info.holder.gender) {\r\n\t\t\t\tthis._information.holder.gender = info.holder.gender || this._information.holder.gender;\r\n\t\t\t}\r\n\r\n\t\t\tif (info.holder.lastName) {\r\n\t\t\t\tthis._information.holder.lastName = info.holder.lastName || this._information.holder.lastName;\r\n\t\t\t}\r\n\r\n\t\t\tif (info.holder.middleName) {\r\n\t\t\t\tthis._information.holder.middleName = info.holder.middleName || this._information.holder.middleName;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (info.scannerIp) {\r\n\t\t\tthis._information.scannerIp = info.scannerIp || this._information.scannerIp;\r\n\t\t}\r\n\r\n\t\tif (info.glareCheck) {\r\n\t\t\tthis._information.glareCheck = info.glareCheck || this._information.glareCheck;\r\n\t\t}\r\n\r\n\t\tif (info.blurCheck) {\r\n\t\t\tthis._information.blurCheck = info.blurCheck || this._information.blurCheck;\r\n\t\t}\r\n\r\n\t\tif (info.lowResolutionCheck) {\r\n\t\t\tthis._information.lowResolutionCheck = info.lowResolutionCheck || this._information.lowResolutionCheck;\r\n\t\t}\r\n\r\n\t\tif (info.fullDocumentInViewCheck) {\r\n\t\t\tthis._information.fullDocumentInViewCheck = info.fullDocumentInViewCheck || this._information.fullDocumentInViewCheck;\r\n\t\t}\r\n\r\n\t\tif (info.scanReference) {\r\n\t\t\tthis._information.scanReference = info.scanReference || this._information.scanReference;\r\n\t\t}\r\n\r\n\t\tif (info.tripleScanReason) {\r\n\t\t\tthis._information.tripleScanReason = info.tripleScanReason || this._information.tripleScanReason;\r\n\t\t}\r\n\t\treturn resolve();\r\n\t})\r\n\r\n\t/**\r\n\t * The main method that inspects the response and updates the related fields\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprivate process = (data: UploadResponse): Promise<UploadResponse> => {\r\n\t\tthis._totalRequests++;\r\n\r\n\t\tif (data) {\r\n\t\t\treturn this.assertNoErrors(data.hasError)\r\n\t\t\t\t.then(() => this._flow.proceed(data.requiredAction))\r\n\t\t\t\t.then(() => this.checkInformation(data.entryData))\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tconst { entryData: { scanReference, glareCheck, blurCheck, lowResolutionCheck, fullDocumentInViewCheck, tripleScanReason } = {} as any } = data;\r\n\r\n\t\t\t\t\tthis._reference = scanReference;\r\n\t\t\t\t\tthis._glareCheck = glareCheck;\r\n\t\t\t\t\tthis._blurCheck = blurCheck;\r\n\t\t\t\t\tthis._lowResolutionCheck = lowResolutionCheck;\r\n\t\t\t\t\tthis._fullDocumentInViewCheck = fullDocumentInViewCheck;\r\n\t\t\t\t\tthis._tripleScanReason = tripleScanReason;\r\n\t\t\t\t\tif (data.personEntryId !== undefined && !data.journeyId) {\r\n\t\t\t\t\t\tthis._id = data.personEntryId;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.isFinished === true) {\r\n\t\t\t\t\t\tthis._status = JourneyState.ENDED;\r\n\t\t\t\t\t\tthis._isFinished = true;\r\n\t\t\t\t\t\tthis._endDate = new Date();\r\n\t\t\t\t\t\tthis._result = this.parseResult(data);\r\n\r\n\t\t\t\t\t\tnew Promise(() => {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\treturn EventService.publish(JourneyEvent.JOURNEY_END, { id: this.id })\r\n\t\t\t\t\t\t\t}, 200)\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t} else if (this.totalRequests > 0) {\r\n\t\t\t\t\t\tthis._status = JourneyState.INPROGRESS;\r\n\t\t\t\t\t\tEventService.publish(JourneyEvent.JOURNEY_PROGRESS, { id: this.id });\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tif (data.personEntryId !== undefined && !data.journeyId) {\r\n\t\t\t\t\t\tthis._id = data.personEntryId;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => data);\r\n\t\t} else {\r\n\t\t\treturn Promise.resolve(data);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate parseResult = ({ highLevelResult }: any) => {\r\n\t\tswitch (highLevelResult) {\r\n\t\t\tcase 'Passed':\r\n\t\t\t\treturn HighLevelResult.Passed;\r\n\t\t\tcase 'Refer':\r\n\t\t\t\treturn HighLevelResult.Refer;\r\n\t\t\tcase 'Expired':\r\n\t\t\t\treturn HighLevelResult.Expired;\r\n\t\t\tcase 'NotAccepted':\r\n\t\t\t\treturn HighLevelResult.NotAccepted;\r\n\t\t\tcase 'Notsupported':\r\n\t\t\t\treturn HighLevelResult.NotSupported;\r\n\t\t\tdefault:\r\n\t\t\t\treturn HighLevelResult.Undefined;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Infer the source of the request\r\n\t */\r\n\tprivate inferSource = (): DocumentSource => this._flow.state === FlowState.ADDRESS ? DocumentSource.ADDRESS : DocumentSource.IDENTITY;\r\n\r\n\t/**\r\n\t * Check if the user is authorized for this process, if not throw an exception .\r\n\t */\r\n\tprivate assertUserAuthenticated = (): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (HttpService.auth !== true && HttpService.authSettings !== false) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.AuthorizationException(TranslationKey.EXCEPTION_AUTHORIZATION_PROCESS_NOT_AUTHORIZED)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Check if the journey has ended to send requests, if not throw an exception .\r\n\t */\r\n\tprivate assertJourneyNotEnded = (): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (this._status === JourneyState.ENDED) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.FlowStateException(TranslationKey.EXCEPTION_FLOW_STATE_JOURNEY_ENDED)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Supplied parameters must contain coordinates.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprivate assertCoordinatesExists = (coordinates?: number[][]): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (coordinates === undefined) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_MISSING_PARAMETER_COORDINATES_MISSING)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Supplied parameters must contain image.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprivate assertImgIdExists = (imgId?: string): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (imgId === undefined || imgId === '') {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_MISSING_PARAMETER_IMAGES_MISSING)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Supplied parameters must contain input images.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprivate assertImgListExists = (imgList: IInputImage[] = []): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (!imgList.length) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.MissingParameterException(TranslationKey.EXCEPTION_MISSING_PARAMETER_IMAGES_MISSING)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Assert if hasError is true to throw an exeption\r\n\t * Returns the promise of the request.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprivate assertNoErrors = (hasError: boolean): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (hasError === true) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.ServerException(TranslationKey.EXCEPTION_SERVER_DATA_NOT_PERSISTED)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Assert if current result is 'Pass' or undefined\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprivate assertCurrentResult = (cr: string = CurrentResult.Pass): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (cr !== CurrentResult.Pass) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.ServerException(TranslationKey.EXCEPTION_SERVER_RESULT_NOT_PASSING)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\t/**\r\n\t * Assert if the journey is waiting for a response\r\n\t */\r\n\tprivate assertIsNotInProgress = (): Promise<void> => new Promise((resolve, reject) => {\r\n\t\tif (this._inProgress) {\r\n\t\t\treturn reject(ExceptionManager.process(new ExceptionManager.BadRequestException(TranslationKey.EXCEPTION_BAD_REQUEST_WAITING_FOR_RESPONSE)));\r\n\t\t} else {\r\n\t\t\treturn resolve();\r\n\t\t}\r\n\t})\r\n\r\n\tprivate setMetaData(metaData: IMetaData[]): void {\r\n\t\tlet step: string = this._flow.state;\r\n\r\n\t\tswitch (step) {\r\n\t\t\tcase FlowState.IDENTITY_FRONT:\r\n\t\t\t\tstep = JourneyStep.FRONTSIDE;\r\n\t\t\t\tbreak;\r\n\t\t\tcase FlowState.IDENTITY_BACK:\r\n\t\t\t\tstep = JourneyStep.BACKSIDE;\r\n\t\t\t\tbreak;\r\n\t\t\tcase FlowState.ADDRESS:\r\n\t\t\t\tstep = JourneyStep.ADDRESSDOCUMENT;\r\n\t\t\t\tbreak;\r\n\t\t\tcase FlowState.COVIDPASS:\r\n\t\t\t\tstep = JourneyStep.COVIDPASS;\r\n\t\t\t\tbreak;\r\n\t\t\tcase FlowState.DATACHECKS:\r\n\t\t\t\tstep = JourneyStep.DATACHECKS;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tmetaData.forEach((element) => {\r\n\t\t\tif (element.step === '') {\r\n\t\t\t\telement.step = step;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._metaData.push(...metaData);\r\n\t}\r\n\tprivate getMetaData(): IMetaData[] {\r\n\r\n\t\tif (this._flow.state === FlowState.IDENTITY_FRONT) {\r\n\t\t\t// will send MetaData for first request(Identity front)\r\n\r\n\t\t\tconst generalMetaData = [{\r\n\t\t\t\tname: 'Channel', // Mobile, Web, or Capture Studio\r\n\t\t\t\tvalue: 'Web',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Web Sdk Version', // Version Number of WEB SDK\r\n\t\t\t\tvalue: VERSION ?? '',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Platform', // Windows, MacOS, Android, iOS, Linux, etc\r\n\t\t\t\tvalue: osName ?? '',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Platform Version', // The version number of the above-mentioned platform\r\n\t\t\t\tvalue: osVersion ?? '',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Browser', // Chrome, Safari, etc\r\n\t\t\t\tvalue: browserName ?? '',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Browser Version', // Browser version\r\n\t\t\t\tvalue: fullBrowserVersion ?? '',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}];\r\n\r\n\t\t\tthis._metaData.push(...generalMetaData);\r\n\t\t}\r\n\r\n\t\tif (JourneyManager.mode === Mode.CAPTURESTUDIO) {\r\n\r\n\t\t\tconst captureType = this._metaData.filter((ct) => ct.name === 'Capture Type');\r\n\r\n\t\t\tthis._metaData.splice(0, this._metaData.length);\r\n\t\t\tthis._metaData.push(...captureType);\r\n\r\n\t\t\tconst captureStudioMetaData = [{\r\n\t\t\t\tname: 'Platform', // Windows, MacOS, Android, iOS, Linux, etc\r\n\t\t\t\tvalue: osName ?? '',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Platform Version', // The version number of the above-mentioned platform\r\n\t\t\t\tvalue: osVersion ?? '',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Browser', // Chrome, Safari, etc\r\n\t\t\t\tvalue: browserName ?? '',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Browser Version', // Browser version\r\n\t\t\t\tvalue: fullBrowserVersion ?? '',\r\n\t\t\t\tstep: 'GENERAL',\r\n\t\t\t\ttype: 'Simple'\r\n\t\t\t}];\r\n\r\n\t\t\tthis._metaData.push(...captureStudioMetaData);\r\n\t\t}\r\n\r\n\t\treturn this._metaData;\r\n\t}\r\n}\r\n","/**\r\n * The currently required action\r\n *\r\n * @public\r\n */\r\nexport enum RequiredAction {\r\n\t/**\r\n\t * An address document is required. Currently capturing for the first time.\r\n\t */\r\n\tADDRESSDOCUMENT_FIRST_SCAN = 'ADDRESSDOCUMENT',\r\n\t/**\r\n\t * An address document is required. Currently capturing for the second time.\r\n\t */\r\n\tADDRESSDOCUMENT_SECOND_SCAN = 'ADDRESSDOCUMENT:SECONDSCAN',\r\n\t/**\r\n\t * An address document is required. Currently capturing for the third time.\r\n\t */\r\n\tADDRESSDOCUMENT_THIRD_SCAN = 'ADDRESSDOCUMENT:THIRDSCAN',\r\n\t/**\r\n\t * The back side of an identity document is required. Currently capturing\r\n\t * for the first time.\r\n\t */\r\n\tBACKSIDE_FIRST_SCAN = 'BACKSIDE',\r\n\t/**\r\n\t * The back side of an identity document is required. Currently capturing\r\n\t * for the second time.\r\n\t */\r\n\tBACKSIDE_SECOND_SCAN = 'BACKSIDE:SECONDSCAN',\r\n\t/**\r\n\t * The back side of an identity document is required. Currently capturing\r\n\t * for the third time.\r\n\t */\r\n\tBACKSIDE_THIRD_SCAN = 'BACKSIDE:THIRDSCAN',\r\n\t/**\r\n\t * A self portrait image is required. Currently capturing for the first\r\n\t * time.\r\n\t */\r\n\tSELFIE_FIRST_SCAN = 'SELFIE',\r\n\t/**\r\n\t * A self portrait image is required. Currently capturing for the second\r\n\t * time.\r\n\t */\r\n\tSELFIE_SECOND_SCAN = 'SELFIE:SECONDSCAN',\r\n\t/**\r\n\t * A self portrait image is required. Currently capturing for the third\r\n\t * time.\r\n\t */\r\n\tSELFIE_THIRD_SCAN = 'SELFIE:THIRDSCAN',\r\n\t/**\r\n\t * The front side of an identity document is required. Currently capturing\r\n\t * for the first time.\r\n\t */\r\n\tFRONTSIDE_FIRST_SCAN = 'FRONTSIDE',\r\n\t/**\r\n\t * The front side of an identity document is required. Currently capturing\r\n\t * for the second time.\r\n\t */\r\n\tFRONTSIDE_SECOND_SCAN = 'FRONTSIDE:SECONDSCAN',\r\n\t/**\r\n\t * The front side of an identity document is required. Currently capturing\r\n\t * for the third time.\r\n\t */\r\n\tFRONTSIDE_THIRD_SCAN = 'FRONTSIDE:THIRDSCAN',\r\n\t/**\r\n\t * A liveness capture is required.\r\n\t */\r\n\tLIVENESS = 'LIVENESS',\r\n\t/**\r\n\t * Passive liveness capture is required.\r\n\t */\r\n\tPASSIVE_LIVENESS = 'PASSIVE_LIVENESS',\r\n\t/**\r\n\t * There is currently no required action.\r\n\t */\r\n\t/**\r\n\t * A covid document is required. Currently capturing for the first time.\r\n\t */\r\n\tCOVIDPASS_FIRST_SCAN = 'COVIDPASS',\r\n\t/**\r\n\t * A covid document is required. Currently capturing for the second time.\r\n\t */\r\n\tCOVIDPASS_SECOND_SCAN = 'COVIDPASS:SECONDSCAN',\r\n\t/**\r\n\t * A covid document is required. Currently capturing for the third time.\r\n\t */\r\n\tCOVIDPASS_THIRD_SCAN = 'COVIDPASS:THIRDSCAN',\r\n\t/**\r\n\t * Confido project, CIFAS & ID3 API calls step\r\n\t */\r\n\tDATACHECKS = 'DATACHECKS',\r\n\tNONE = 'NONE',\r\n}\r\n","/**\r\n * Type for DocumentRole\r\n *\r\n * @public\r\n */\r\nexport enum DocumentRole {\r\n\tA4Paper = 'A4 Paper',\r\n\tIdDocumentBack = 'Id Document Back',\r\n\tIdDocumentFront = 'Id Document Front',\r\n}\r\n","import { TranslationKey } from '../enums/Translation';\r\n\r\n/**\r\n * A collection of `TranslationKey`s and their translations\r\n *\r\n * @public\r\n */\r\nexport type TranslationDictionary = Record<TranslationKey, string>;\r\n\r\n/**\r\n * These are the default translations for the above `TranslationKey`s. These can\r\n * be individually overridden, or wholly overridden as required. Be sure to use\r\n * the `TranslationKey` rather than the string literal as they may change\r\n * without warning in the future.\r\n *\r\n * @internal\r\n */\r\nexport const DefaultTranslations: TranslationDictionary = {\r\n\t[TranslationKey.REQUIRED_ACTION_KEEP_CAPTURING]: 'Keep Capturing',\r\n\t[TranslationKey.REQUIRED_ACTION_STOP_CAPTURING]: 'Stop Capturing',\r\n\t[TranslationKey.REQUIRED_ACTION_PAUSE_CAPTURING]: 'Pause Capturing',\r\n\t[TranslationKey.REQUIRED_ACTION_CLOSE]: 'Close',\r\n\t[TranslationKey.REQUIRED_ACTION_ERROR]: 'Error',\r\n\t[TranslationKey.REQUIRED_ACTION_AGREE]: 'Agree',\r\n\t[TranslationKey.REQUIRED_ACTION_DISAGREE]: 'Disagree',\r\n\r\n\t[TranslationKey.LIVENESS_ACTION_SMILE]: 'Smile',\r\n\t[TranslationKey.LIVENESS_ACTION_FROWN]: 'Frown',\r\n\t[TranslationKey.LIVENESS_ACTION_TILT_LEFT]: 'Look Left',\r\n\t[TranslationKey.LIVENESS_ACTION_TILT_RIGHT]: 'Look Right',\r\n\t[TranslationKey.LIVENESS_ACTION_TILT_UP]: 'Look Up',\r\n\t[TranslationKey.LIVENESS_ACTION_TILT_DOWN]: 'Look Down',\r\n\t[TranslationKey.LIVENESS_ACTION_TILT_STRAIGHT]: 'Look Straight Ahead',\r\n\t[TranslationKey.LIVENESS_ACTION_NO_ACTION]: 'No Action',\r\n\t[TranslationKey.LIVENESS_ACTION_PROCESSING_LIVENESS]: 'Processing Liveness',\r\n\r\n\t[TranslationKey.LIVENESS_RESULT_FAILED]: 'Failed',\r\n\t[TranslationKey.LIVENESS_RESULT_PASSED]: 'Passed',\r\n\t[TranslationKey.LIVENESS_RESULT_ACTION_TIMED_OUT]: 'Action Timed Out',\r\n\t[TranslationKey.LIVENESS_RESULT_INTERRUPTED]: 'Interrupted',\r\n\t[TranslationKey.LIVENESS_RESULT_UNDEFINED]: 'Undefined',\r\n\r\n\t[TranslationKey.LIVENESS_ACTION_LOOK_STRAIGHT_TITLE]: 'Look straight ahead',\r\n\t[TranslationKey.LIVENESS_ACTION_LOOK_STRAIGHT_TEXT]: 'Keep your eyes on the screen at all times',\r\n\t[TranslationKey.LIVENESS_ACTION_LOOK_LEFT_TITLE]: 'Rotate your head slightly to the left',\r\n\t[TranslationKey.LIVENESS_ACTION_LOOK_LEFT_TEXT]: 'Keep your eyes on the screen at all times',\r\n\t[TranslationKey.LIVENESS_ACTION_LOOK_RIGHT_TITLE]: 'Rotate your head slightly to the right',\r\n\t[TranslationKey.LIVENESS_ACTION_LOOK_RIGHT_TEXT]: 'Keep your eyes on the screen at all times',\r\n\t[TranslationKey.LIVENESS_ACTION_LOOK_UP_TITLE]: 'Rotate your head slightly upwards',\r\n\t[TranslationKey.LIVENESS_ACTION_LOOK_UP_TEXT]: 'Keep your eyes on the screen at all times',\r\n\t[TranslationKey.LIVENESS_ACTION_LOOK_DOWN_TITLE]: 'Rotate your head slightly downwards',\r\n\t[TranslationKey.LIVENESS_ACTION_LOOK_DOWN_TEXT]: 'Keep your eyes on the screen at all times',\r\n\t[TranslationKey.LIVENESS_ACTION_SMILE_TITLE]: 'Smile',\r\n\t[TranslationKey.LIVENESS_ACTION_SMILE_TEXT]: 'Keep your eyes on the screen at all times',\r\n\t[TranslationKey.LIVENESS_ACTION_FROWN_TITLE]: 'Frown',\r\n\t[TranslationKey.LIVENESS_ACTION_FROWN_TEXT]: 'Keep your eyes on the screen at all times',\r\n\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_TOO_CLOSE_TITLE]: 'Uh Oh...You are too close.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_TOO_CLOSE]: 'You are too close, please move further away so that your face fits within the provided frame. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_CLOSE_TO_BORDER_TITLE]: 'Uh Oh...You are too close.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_CLOSE_TO_BORDER]: 'You are too close, please move further away so that your face fits within the provided frame. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_CROPPED_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_CROPPED]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_NOT_FOUND_TITLE]: 'Uh Oh...We are unable to detect a face.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_NOT_FOUND]: 'We are unable to detect a face within the image. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_TOO_SMALL_TITLE]: 'Uh Oh...You are too far away.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_TOO_SMALL]: 'You are too far away, please move closer to the camera and make sure your face fits within the frame. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_TOO_FAR_TITLE]: 'Uh Oh...You are too far away.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_TOO_FAR]: 'You are too far away, please move closer to the camera and make sure your face fits within the frame. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_NOT_INITIALIZED_TITLE]: 'Uh Oh...Not initialized.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_NOT_INITIALIZED]: 'The system is not initialized. Please wait a moment while initializing.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INITIALIZING_TITLE]: 'Uh Oh...Still initializing.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INITIALIZING]: 'The system is still initializing. Please wait a moment and try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_TOO_MANY_FACES_TITLE]: 'Uh Oh...Too many faces.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_TOO_MANY_FACES]: 'We detected multiple faces in the frame. Please ensure only your face is visible in the camera and try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_ANGLE_TOO_LARGE_TITLE]: 'Uh Oh...Face angle issue.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_ANGLE_TOO_LARGE]: 'Your face is at too much of an angle. Please face the camera directly and try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_PROBABILITY_TOO_SMALL_TITLE]: 'Uh Oh...Detection uncertainty.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_PROBABILITY_TOO_SMALL]: 'We\\'re not confident about the face detection. Please ensure good lighting and a clear view of your face, then try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_IS_OCCLUDED_TITLE]: 'Uh Oh...We are unable to detect a face.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FACE_IS_OCCLUDED]: 'It looks like your face is partly covered, please make sure that the whole of your face is in full view. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_UNKNOWN_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_UNKNOWN]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INTERNAL_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INTERNAL]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_LOW_THRESHOLD_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_LOW_THRESHOLD]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_None_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_None]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FailedExpressions_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FailedExpressions]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_IMAGE_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_IMAGE]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_IMAGE_ERROR_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_IMAGE_ERROR]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INTERNAL_ERROR_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INTERNAL_ERROR]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_WRITE_IMAGE_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_WRITE_IMAGE]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_MODEL_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_MODEL]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_ALLOCATE_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_ALLOCATE]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INVALID_CONFIG_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INVALID_CONFIG]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_NO_SUCH_OBJECT_IN_BUILD_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_NO_SUCH_OBJECT_IN_BUILD]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_PREDICT_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_PREDICT]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_DETECT_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_DETECT]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_PREDICT_LANDMARKS_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_FAILED_TO_PREDICT_LANDMARKS]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INVALID_FUSE_MODE_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INVALID_FUSE_MODE]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_NULLPTR_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_NULLPTR]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_LICENSE_ERROR_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_LICENSE_ERROR]: 'Something went wrong. Please try again.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INVALID_META_TITLE]: 'Uh Oh...Something went wrong.',\r\n\t[TranslationKey.PASSIVE_LIVENESS_ERROR_INVALID_META]: 'Something went wrong. Please try again.',\r\n\r\n\r\n\r\n\t[TranslationKey.INITIALIZING_TITLE]: 'Initializing',\r\n\t[TranslationKey.INITIALIZING_DESCRIPTION]: 'Checking hardware capabilities, please wait...',\r\n\r\n\t[TranslationKey.JOURNEY_STATE_STARTED]: 'Started',\r\n\t[TranslationKey.JOURNEY_STATE_IN_PROGRESS]: 'In Progress',\r\n\t[TranslationKey.JOURNEY_STATE_ENDED]: 'Ended',\r\n\r\n\t[TranslationKey.INFO_JOURNEY_STATE]: 'State',\r\n\t[TranslationKey.INFO_JOURNEY_ACTION]: 'Action',\r\n\t[TranslationKey.INFO_JOURNEY_ACTION_ATTEMPT]: 'Action Attempt',\r\n\t[TranslationKey.INFO_JOURNEY_ID]: 'Journey ID',\r\n\t[TranslationKey.INFO_JOURNEY_RESULT]: 'Result',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_EXPIRED_MESSAGE]: 'Result Message',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_EXPIRED_MESSAGE_VALUE]: 'That id you gave us was out of date  try something else',\r\n\t[TranslationKey.INFO_JOURNEY_REFERENCE]: 'Reference',\r\n\r\n\t[TranslationKey.FLOW_STATE_NONE]: 'None',\r\n\t[TranslationKey.FLOW_STATE_IDENTITY_FRONT]: 'Front Side',\r\n\t[TranslationKey.FLOW_STATE_IDENTITY_BACK]: 'Back Side',\r\n\t[TranslationKey.FLOW_STATE_ADDRESS]: 'Address',\r\n\t[TranslationKey.FLOW_STATE_SELFIE]: 'Selfie',\r\n\t[TranslationKey.FLOW_STATE_LIVENESS]: 'Liveness',\r\n\t[TranslationKey.FLOW_STATE_COVID]: 'Covid',\r\n\r\n\t[TranslationKey.PROVIDER_TITLE_CAMERA]: 'Camera',\r\n\t[TranslationKey.PROVIDER_TITLE_CROPPER]: 'Cropper',\r\n\t[TranslationKey.PROVIDER_TITLE_FILESYSTEM_ID]: 'Upload a photo of your Identity Document',\r\n\t[TranslationKey.PROVIDER_TITLE_FILESYSTEM_FACEMATCH]: 'Upload a photo of yourself',\r\n\t[TranslationKey.PROVIDER_TITLE_FILESYSTEM_ADDRESS]: 'Upload a photo of your Proof of Address',\r\n\t[TranslationKey.PROVIDER_TITLE_FILESYSTEM_COVID]: 'Upload a photo of your Covid Document',\r\n\r\n\t[TranslationKey.PROVIDER_TITLE_GATEWAY]: 'Gateway',\r\n\t[TranslationKey.PROVIDER_TITLE_LIVENESS]: 'Liveness',\r\n\t[TranslationKey.PROVIDER_TITLE_PASSIVE_LIVENESS]: 'Liveness',\r\n\t[TranslationKey.PROVIDER_TITLE_LOGIN]: 'Login',\r\n\t[TranslationKey.PROVIDER_TITLE_RESULTS]: 'Results',\r\n\t[TranslationKey.PROVIDER_TITLE_SCANNER]: 'Scan your Identity Document',\r\n\t[TranslationKey.PROVIDER_TITLE_VIEW_ID]: 'Check the preview of your Identity Document',\r\n\t[TranslationKey.PROVIDER_TITLE_VIEW_FACEMATCH]: 'Check the preview of your selfie',\r\n\t[TranslationKey.PROVIDER_TITLE_VIEW_ADDRESS]: 'Check the preview of your Proof of Address',\r\n\t[TranslationKey.PROVIDER_TITLE_VIEW_COVID]: 'Check the preview of your Covid',\r\n\t[TranslationKey.PROVIDER_SUBTITLE_FILESYSTEM_ID]: 'Please upload a photo of your Identity Document that is clear, in focus, not covered and directly face on.',\r\n\t[TranslationKey.PROVIDER_SUBTITLE_FILESYSTEM_FACEMATCH]: 'Please upload a photo of yourself that is clear, in focus, not covered and directly face on.',\r\n\t[TranslationKey.PROVIDER_SUBTITLE_FILESYSTEM_ADDRESS]: 'Please upload a photo of your document that is clear, in focus, not covered and directly face on.',\r\n\t[TranslationKey.PROVIDER_SUBTITLE_FILESYSTEM_COVID]: 'Please upload a photo of your document that is clear, in focus, not covered and directly face on.',\r\n\t[TranslationKey.PROVIDER_SUBTITLE_SCANNER_ID]: 'Place the photo page of your Identity Document face down onto the scanner.',\r\n\t[TranslationKey.PROVIDER_SUBTITLE_VIEW_ID]: 'Please check the preview of your document is clear, in focus, not covered and directly face on.',\r\n\t[TranslationKey.PROVIDER_SUBTITLE_VIEW_FACEMATCH]: 'Please check the preview of your selfie is clear, in focus, not covered and directly face on.',\r\n\t[TranslationKey.PROVIDER_SUBTITLE_VIEW_ADDRESS]: 'Please check the preview of your document is clear, in focus, not covered and directly face on.',\r\n\t[TranslationKey.PROVIDER_SUBTITLE_VIEW_COVID]: 'Please check the preview of your document is clear, in focus, not covered and directly face on.',\r\n\t[TranslationKey.PROVIDER_TITLE_SMART_CAPTURE]: 'Smart Capture',\r\n\t[TranslationKey.PROVIDER_TITLE_JOURNEY_SELECT]: 'Select Journey',\r\n\t[TranslationKey.PROVIDER_TITLE_TERMS_AND_CONDITIONS]: 'Terms and Conditions',\r\n\t[TranslationKey.PROVIDER_TITLE_USER_INPUT]: 'Please complete the following form',\r\n\r\n\t[TranslationKey.FILESYSTEM_SUPPORTED_TYPES_START]: 'Accepted formats: JPG, PNG, PDF ',\r\n\t[TranslationKey.FILESYSTEM_SUPPORTED_TYPES_END]: '(for PDF, only the first page will be processed)',\r\n\t[TranslationKey.FILESYSTEM_SUPPORTED_TYPES_START_SELFIE]: 'Accepted formats: JPG, PNG ',\r\n\t[TranslationKey.FILESYSTEM_MAX_FILE_SIZE]: 'File size: we accept any file size smaller than 7.5MB',\r\n\t[TranslationKey.FILESYSTEM_CHECK_FILE_TOO_BIG]: 'Your file is too big. Please upload a file that is smaller than 7.5MB.',\r\n\t[TranslationKey.FILESYSTEM_CHECK_FILE_INCORRECT_FORMAT]: 'Your file is the incorrect format. Please upload one of the accepted formats.',\r\n\t[TranslationKey.FILESYSTEM_IDENTITY_DOCUMENT]: 'Identity Document',\r\n\t[TranslationKey.FILESYSTEM_FACEMATCH]: 'Face Match',\r\n\t[TranslationKey.FILESYSTEM_ADDRESS]: 'Proof of Address',\r\n\t[TranslationKey.FILESYSTEM_COVID]: 'Covid',\r\n\t[TranslationKey.FILESYSTEM_DRAG_DROP]: 'Drag and Drop',\r\n\t[TranslationKey.FILESYSTEM_OR]: 'or',\r\n\t[TranslationKey.FILESYSTEM_CHOOSE]: 'Choose a file',\r\n\t[TranslationKey.FILESYSTEM_UPLOADING]: 'Uploading...',\r\n\r\n\t[TranslationKey.TRIPLESCAN_GUIDANCE_TRYAGAIN]: 'Try again',\r\n\t[TranslationKey.FAILURE_REASON_REFER]: 'Your Identity Document failed the validation.',\r\n\t[TranslationKey.FAILURE_REASON_EXPIRED]: 'Your Identity Document is expired.',\r\n\t[TranslationKey.FAILURE_REASON_NOT_ACCEPTED]: 'Your Identity Document is not an accepted document type.',\r\n\t[TranslationKey.FAILURE_REASON_NOT_SUPPORTED]: 'Your Identity Document could not be classified or is not supported.',\r\n\t[TranslationKey.PLEASE_TRY_AGAIN_REFER]: 'Please try again.',\r\n\t[TranslationKey.PLEASE_TRY_AGAIN_EXPIRED]: 'Please try again with a valid document.',\r\n\t[TranslationKey.PLEASE_TRY_AGAIN_NOT_ACCEPTED]: 'Please try again with a different document.',\r\n\t[TranslationKey.PLEASE_TRY_AGAIN_NOT_SUPPORTED]: 'Please try again.',\r\n\t[TranslationKey.BLUR_CHECK_REASON]: 'Blur - the document is unclear;',\r\n\t[TranslationKey.GLARE_CHECK_REASON]: 'Glare - the document is unreadable due to a bright light source;',\r\n\t[TranslationKey.RESOLUTION_CHECK_REASON]: 'Low Resolution - the document does not fill the frame properly;',\r\n\t[TranslationKey.EDGES_CHECK_REASON]: 'Missing Edges - the document is not positioned in the frame properly;',\r\n\t[TranslationKey.VALIDATION_FAILED]: 'Validation failed',\r\n\t[TranslationKey.VALIDATION_FAILED_REASON_DOC_UNKNOWN]: '- document unknown.',\r\n\t[TranslationKey.VALIDATION_FAILED_REASON_DOC_NOT_ACCEPTED]: '- document not accepted.',\r\n\t[TranslationKey.VALIDATION_FAILED_REASON_DOC_EXPIRED]: '- document expired.',\r\n\r\n\r\n\t[TranslationKey.PREVIEW_INFO_TITLE_ID]: 'Examples of good and bad photos',\r\n\t[TranslationKey.PREVIEW_INFO_GOOD]: 'Good',\r\n\t[TranslationKey.PREVIEW_INFO_BAD]: 'Bad',\r\n\t[TranslationKey.PREVIEW_INFO_GOOD_EXAMPLE_ID]: 'Photo is clear, in focus, and directly face on.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ID]: 'Photo must show all four corners.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_COVER_ID]: 'Document must not be covered.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_BLUR_ID]: 'Photo must not be blurry.',\r\n\r\n\t[TranslationKey.PREVIEW_INFO_TITLE_FACEMATCH]: 'Tips for a good quality selfie',\r\n\t[TranslationKey.PREVIEW_INFO_GOOD_EXAMPLE_FACEMATCH]: 'Selfie is clear, in focus, and directly face on.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_ANGLE_FACEMATCH]: 'Selfie must show the full face.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_COVER_FACEMATCH]: 'Face must not be covered.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_BLUR_FACEMATCH]: 'Selfie must not be blurry.',\r\n\r\n\t[TranslationKey.PREVIEW_INFO_TITLE_ADDRESS]: 'Tips for a good quality photo',\r\n\t[TranslationKey.PREVIEW_INFO_GOOD_EXAMPLE_ADDRESS]: 'Photo is clear, in focus, and directly face on.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ADDRESS]: 'Photo must show all four corners.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_COVER_ADDRESS]: 'Document must not be covered.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_BLUR_ADDRESS]: 'Photo must not be blurry.',\r\n\r\n\t[TranslationKey.PREVIEW_INFO_TITLE_COVID]: 'Tips for a good quality photo',\r\n\t[TranslationKey.PREVIEW_INFO_GOOD_EXAMPLE_COVID]: 'Photo is clear, in focus, and directly face on.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_ANGLE_COVID]: 'Photo must show all four corners.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_COVER_COVID]: 'Document must not be covered.',\r\n\t[TranslationKey.PREVIEW_INFO_BAD_EXAMPLE_BLUR_COVID]: 'Photo must not be blurry.',\r\n\r\n\t[TranslationKey.ATTEMPTS_REMAINING]: 'Attempts remaining: ',\r\n\t[TranslationKey.CAMERA_CAPTURE]: 'Turn on camera',\r\n\t[TranslationKey.CAMERA_CAPTURE_START_BUTTON]: 'Start Auto Capture',\r\n\t[TranslationKey.CAMERA_CAPTURE_CAPTION]: 'Click on Start Auto Capture to begin',\r\n\t[TranslationKey.CAMERA_PREVIEW_START]: 'Turn on your camera to start Auto Capture',\r\n\t[TranslationKey.CAMERA_CONDITION_BLUR]: 'Blur Detected',\r\n\t[TranslationKey.CAMERA_CONDITION_CAPTURING]: 'Capturing',\r\n\t[TranslationKey.CAMERA_CONDITION_UPLOADING]: 'Uploading...Please wait',\r\n\t[TranslationKey.CAMERA_CONDITION_ALIGNMENT]: 'Document not in frame',\r\n\t[TranslationKey.CAMERA_CONDITION_GLARE]: 'Glare Detected',\r\n\t[TranslationKey.VERIFYING_TITLE]: 'Verifying ...',\r\n\t[TranslationKey.PREPARING_PREVIEW_TITLE]: 'Preparing preview ...',\r\n\t[TranslationKey.CAMERA_CONDITION_LOW_RESOLUTION]: 'Document Too Far',\r\n\t[TranslationKey.CAMERA_LOADING]: 'Opening Camera...',\r\n\t[TranslationKey.CAMERA_SMARTCAPTURE_ON]: 'AUTO CAPTURE - ON',\r\n\t[TranslationKey.CAMERA_SMARTCAPTURE_OFF]: 'AUTO CAPTURE - OFF',\r\n\t[TranslationKey.CAMERA_CAPTURE_FRONT]: 'Position the photo side of your Identity Document within the frame above.',\r\n\t[TranslationKey.CAMERA_MANUAL_CAPTURE_FRONT]: 'Position your Identity Document within the frame and click on the button below',\r\n\t[TranslationKey.CAMERA_CAPTURE_BACK]: 'Position the BACK of your Identity Document within the frame',\r\n\t[TranslationKey.CAMERA_CAPTURE_SELFIE_CAPTION]: 'Position your face within the oval, your selfie image will be taken automatically.',\r\n\t[TranslationKey.CAMERA_CAPTURE_ADDRESS_CAPTION]: 'Position your Proof of Address within the frame and click on the button below to take a photo.',\r\n\t[TranslationKey.CAMERA_CAPTURE_COVID_CAPTION]: 'Position your Covid document within the frame and click on the button below to take a photo.',\r\n\r\n\t[TranslationKey.CAMERA_PREVENT_GLARE_HINT]: 'Move the document away from direct light sources.',\r\n\t[TranslationKey.CAMERA_PREVENT_BLUR_HINT]: 'Hold the document or device steady.',\r\n\t[TranslationKey.CAMERA_PREVENT_LOW_RES_HINT]: 'Fit the document fully within the frame.',\r\n\r\n\t[TranslationKey.CROPPER_RETRY]: 'Retry',\r\n\t[TranslationKey.CROPPER_UPLOAD]: 'Upload',\r\n\t[TranslationKey.CROPPER_UPLOADING]: 'Uploading...',\r\n\r\n\t[TranslationKey.FILESYSTEM_SELECT]: 'Select',\r\n\t[TranslationKey.FILESYSTEM_DROP_IMAGE]: 'or Drop Image',\r\n\r\n\t[TranslationKey.GATEWAY_CAMERA]: 'Camera Enabled',\r\n\t[TranslationKey.GATEWAY_CANCEL]: 'Cancel Journey',\r\n\r\n\t[TranslationKey.LIVENESS_START]: 'Start Liveness',\r\n\t[TranslationKey.PASSIVE_LIVENESS_START]: 'Take Picture',\r\n\r\n\t[TranslationKey.LOGIN_USERNAME]: 'Username',\r\n\t[TranslationKey.LOGIN_PASSWORD]: 'Password',\r\n\t[TranslationKey.LOGIN_SUBMIT]: 'Submit',\r\n\r\n\t[TranslationKey.RESULTS_DOCUMENTS]: 'Documents',\r\n\t[TranslationKey.RESULTS_DOCUMENTS_NONE]: 'None Found',\r\n\t[TranslationKey.RESULTS_DOCUMENT_TYPE]: 'Document Type',\r\n\t[TranslationKey.RESULTS_DOCUMENT_RESULT]: 'Document Result',\r\n\t[TranslationKey.RESULTS_EXTRACTED_FIELDS_NONE]: 'No Fields Extracted',\r\n\t[TranslationKey.RESULTS_DETAILS]: 'Result Details',\r\n\t[TranslationKey.RESULTS_DETAILS_NONE]: 'None Found',\r\n\t[TranslationKey.RESULTS_NEW_JOURNEY]: 'Start New Journey',\r\n\t[TranslationKey.RESULTS_NO_INFORMATION]: 'There is no information for this journey',\r\n\t[TranslationKey.RESULTS_LOGOUT]: 'Logout',\r\n\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_ABORTED]: 'Aborted',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_TCCDISAGREE]: 'Aborted T&C\\'s',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_EXPIRED]: 'Expired',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_NOT_ACCEPTED]: 'Not Accepted',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_NOT_SUPPORTED]: 'Not Supported',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_NOTSUPPORTED]: 'Not Supported',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_PASSED]: 'Passed',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_REFER]: 'Refer',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_UNDEFINED]: 'Undefined',\r\n\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_ACCUMULATIVE_LIVENESS_RESULT]: 'Accumulative Liveness Result',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_FRONT_SIDE_TYPE_CHECK]: 'Document Front Side Type Check',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_BACK_SIDE_TYPE_CHECK]: 'Document Back Side Type Check',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_BACK_SIDE_CHECK]: 'Document Back Side Check',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_BLOCKING_POLICY]: 'Document Blocking Policy',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_OVERALL_VALIDATION]: 'Document Overall Validation',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_EXPIRY]: 'Document Expiry',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_SUPPORT]: 'Document Support',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_VALIDATION]: 'Document Validation',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_PROOF_POLICY]: 'Document Proof Policy',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_FACEMATCH_VALIDATION]: 'Facematch Validation',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_UNDERAGE_RULE]: 'Underage Rule',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_VALUE_SUCCESS_NEEDED]: 'Success Needed',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_COVID_PASS_CROSSCHECK]: 'Covid Pass Cross Check',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_DATA_CHECK]: 'Data Checks',\r\n\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_VALUE_FAILED]: 'Failed',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_VALUE_FAIL]: 'Failed',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_VALUE_NOTNEEDED]: 'Not Needed',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_VALUE_PASSED]: 'Passed',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_VALUE_PASS]: 'Passed',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_VALUE_NA]: 'N/A',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_VALUE_SKIPPED]: 'Skipped',\r\n\t[TranslationKey.RESULTS_HIGH_LEVEL_DETAIL_VALUE_UNDETERMINED]: 'Undetermined',\r\n\r\n\t[TranslationKey.ADDITIONAL_CHECKS_DETAILS]: 'Additional Checks',\r\n\t[TranslationKey.ADDITIONAL_CHECKS_DETAILS_NONE]: 'None Found',\r\n\t[TranslationKey.ADDITIONAL_CHECKS_DETAIL_DATACHECKS]: 'Data Checks',\r\n\t[TranslationKey.ADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK]: 'Lookback Checks',\r\n\t[TranslationKey.ADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK_NA]: 'N/A',\r\n\r\n\t[TranslationKey.GBG_SCORES]: 'GBG Scores',\r\n\t[TranslationKey.GBG_TRUST_SCORE]: 'GBG Trust Score',\r\n\t[TranslationKey.GBG_SCORE]: 'GBG Score',\r\n\r\n\t[TranslationKey.IAD_RESULT]: 'IAD Result',\r\n\r\n\t[TranslationKey.VIEW_RETRY]: 'Change photo',\r\n\t[TranslationKey.VIEW_CROP]: 'Crop',\r\n\t[TranslationKey.VIEW_CROPPING]: 'Cropping...',\r\n\t[TranslationKey.VIEW_UPLOAD]: 'Continue',\r\n\t[TranslationKey.VIEW_UPLOADING]: 'Uploading...',\r\n\r\n\t[TranslationKey.SMART_CAPTURE_START]: 'Start',\r\n\t[TranslationKey.SMART_CAPTURE_INITIALIZING]: 'Initializing Smart Capture, Please Wait...',\r\n\r\n\t[TranslationKey.SCANNER_DESC_AVAILABLE]: 'The scanner is available. Place your document in the scanner.',\r\n\t[TranslationKey.SCANNER_DESC_PROCESSING]: 'The image is being processed by the server.',\r\n\t[TranslationKey.SCANNER_DESC_SCANNING]: 'The image is being scanned by the device.',\r\n\t[TranslationKey.SCANNER_DESC_DISCONNECTED]: 'The scanner is disconnected from the network.',\r\n\t[TranslationKey.SCANNER_DESC_NOT_CONNECTED]: 'The scanner is not connected, please check your scanner settings.',\r\n\t[TranslationKey.SCANNER_DESC_OFFLINE]: 'The scanner is offline.',\r\n\t[TranslationKey.SCANNER_DESC_BUSY]: 'The scanner is used by another user in your local network, please wait',\r\n\t[TranslationKey.SCANNER_DESC_WAITING]: 'Waiting for the connection to be established.',\r\n\t[TranslationKey.SCANNER_DESC_LOADING]: 'Please Wait...',\r\n\r\n\t[TranslationKey.SCANNER_TITLE_AVAILABLE]: 'Scanner ready',\r\n\t[TranslationKey.SCANNER_TITLE_PROCESSING]: 'Verifying ...',\r\n\t[TranslationKey.SCANNER_TITLE_SCANNING]: 'Scanning ...',\r\n\t[TranslationKey.SCANNER_TITLE_DISCONNECTED]: 'DISCONNECTED',\r\n\t[TranslationKey.SCANNER_TITLE_NOT_CONNECTED]: 'Scanner Offline',\r\n\t[TranslationKey.SCANNER_TITLE_OFFLINE]: 'Scanner Offline',\r\n\t[TranslationKey.SCANNER_TITLE_BUSY]: 'Scanner Busy',\r\n\t[TranslationKey.SCANNER_TITLE_WAITING]: 'WAITING',\r\n\r\n\t[TranslationKey.SCANNER_ACTION_REGISTER]: 'Register',\r\n\t[TranslationKey.SCANNER_ACTION_RELEASE]: 'Release',\r\n\r\n\t[TranslationKey.CANCEL_JOURNEY]: 'Cancel',\r\n\t[TranslationKey.MANUAL_PHOTO_UPLOAD_TOGGLE_FALSE]: 'Upload a photo instead',\r\n\t[TranslationKey.MANUAL_PHOTO_UPLOAD_TOGGLE_TRUE]: 'Take a photo instead',\r\n\r\n\t[TranslationKey.JOURNEY_SELECT_CONTINUE]: 'Continue',\r\n\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_TITLE]: 'How to take a photo of your Identity Document',\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_SUBTITLE]: 'When Auto Capture is on, the capture screen will automatically take a photo of your document when it has recognised that it is of good enough quality.',\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_TIPS]: 'Tips for taking a good quality photo',\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_GLARE_TITLE]: 'Prevent Glare',\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_GLARE_SUBTITLE]: 'Move the document away from direct light sources.',\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_FAR_TITLE]: 'Document Too Far',\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_FAR_SUBTITLE]: 'Fit the document fully within the frame.',\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_BLUR_TITLE]: 'Prevent Blur',\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_BLUR_SUBTITLE]: 'Hold the document or device steady.',\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_MANUAL_CAPTURE]: 'Still struggling? Take a photo with Manual Capture',\r\n\t[TranslationKey.HELP_MODAL_AUTOCAPTURE_TURN_MANUAL_CAPTURE]: 'Manual Capture',\r\n\r\n\t[TranslationKey.HELP_MODAL_SELFIE_TITLE]: 'How to take a selfie',\r\n\t[TranslationKey.HELP_MODAL_SELFIE_SUBTITLE]: 'Look directly into the camera and click on the manual capture button.',\r\n\r\n\t[TranslationKey.HELP_MODAL_POA_TITLE]: 'How to take a photo of your Proof of Address',\r\n\t[TranslationKey.HELP_MODAL_POA_SUBTITLE]: 'Position your document within the frame and click on the capture button to take a photo of your document.',\r\n\t[TranslationKey.HELP_MODAL_POA_TIPS]: 'Tips for taking a good quality photo',\r\n\t[TranslationKey.HELP_MODAL_POA_GLARE_TITLE]: 'Prevent Glare',\r\n\t[TranslationKey.HELP_MODAL_POA_GLARE_SUBTITLE]: 'Move the document away from direct light sources.',\r\n\t[TranslationKey.HELP_MODAL_POA_FAR_TITLE]: 'Document Too Far',\r\n\t[TranslationKey.HELP_MODAL_POA_FAR_SUBTITLE]: 'Fit the document fully within the frame.',\r\n\t[TranslationKey.HELP_MODAL_POA_BLUR_TITLE]: 'Prevent Blur',\r\n\t[TranslationKey.HELP_MODAL_POA_BLUR_SUBTITLE]: 'Hold the document or device steady.',\r\n\t[TranslationKey.HELP_MODAL_POA_MANUAL_CAPTURE]: 'Still struggling? Turn on Manual Capture',\r\n\t[TranslationKey.HELP_MODAL_POA_TURN_MANUAL_CAPTURE]: 'Manual Capture',\r\n\r\n\r\n\t[TranslationKey.HELP_MODAL_COVID_TITLE]: 'How to take a photo of your Covid document',\r\n\t[TranslationKey.HELP_MODAL_COVID_SUBTITLE]: 'Position your document within the frame and click on the capture button to take a photo of your document.',\r\n\t[TranslationKey.HELP_MODAL_COVID_TIPS]: 'Tips for taking a good quality photo',\r\n\t[TranslationKey.HELP_MODAL_COVID_GLARE_TITLE]: 'Prevent Glare',\r\n\t[TranslationKey.HELP_MODAL_COVID_GLARE_SUBTITLE]: 'Move the document away from direct light sources.',\r\n\t[TranslationKey.HELP_MODAL_COVID_FAR_TITLE]: 'Document Too Far',\r\n\t[TranslationKey.HELP_MODAL_COVID_FAR_SUBTITLE]: 'Fit the document fully within the frame.',\r\n\t[TranslationKey.HELP_MODAL_COVID_BLUR_TITLE]: 'Prevent Blur',\r\n\t[TranslationKey.HELP_MODAL_COVID_BLUR_SUBTITLE]: 'Hold the document or device steady.',\r\n\t[TranslationKey.HELP_MODAL_COVID_MANUAL_CAPTURE]: 'Still struggling? Turn on Manual Capture',\r\n\t[TranslationKey.HELP_MODAL_COVID_TURN_MANUAL_CAPTURE]: 'Manual Capture',\r\n\r\n\t[TranslationKey.HELP_MODAL_NEED_HELP]: 'Need help?',\r\n\r\n\t[TranslationKey.EXCEPTION]: 'An unexpected exception has occurred',\r\n\r\n\t[TranslationKey.EXCEPTION_AUTHORIZATION]: 'Unauthorized',\r\n\t[TranslationKey.EXCEPTION_AUTHORIZATION_ACCOUNT_NOT_AUTHORIZED]: 'Your account is not authorized to access this resource',\r\n\t[TranslationKey.EXCEPTION_AUTHORIZATION_AUTH_DETAILS_INVALID]: 'Username and Password combination is not valid',\r\n\t[TranslationKey.EXCEPTION_AUTHORIZATION_AUTH_NOT_ENABLED]: 'You must enable auth to use this functionality',\r\n\t[TranslationKey.EXCEPTION_AUTHORIZATION_PROCESS_NOT_AUTHORIZED]: 'You are not authorized for this process',\r\n\r\n\t[TranslationKey.EXCEPTION_BAD_REQUEST]: 'Bad Request with status code 400',\r\n\t[TranslationKey.EXCEPTION_BAD_REQUEST_INVALID_IMAGE]: 'Not a valid image',\r\n\t[TranslationKey.EXCEPTION_BAD_REQUEST_WAITING_FOR_RESPONSE]: 'The journey is waiting for a response',\r\n\r\n\t[TranslationKey.EXCEPTION_FLOW_STATE_JOURNEY_ENDED]: 'Cannot send requests. The journey has ended',\r\n\t[TranslationKey.EXCEPTION_FLOW_STATE_MISSING]: 'Flow state not found',\r\n\r\n\t[TranslationKey.EXCEPTION_INVALID_PARAMETER_CALLBACK_MUST_BE_FUNCTION]: 'Callback must be a valid function',\r\n\t[TranslationKey.EXCEPTION_INVALID_PARAMETER_NAME_MUST_BE_STRING]: 'Event name must be a string value',\r\n\t[TranslationKey.EXCEPTION_INVALID_PARAMETER_PRIORITY_MUST_BE_NUMBER]: 'Priority must be a number',\r\n\t[TranslationKey.EXCEPTION_INVALID_PARAMETER_PRIORITY_MUST_BE_POSITIVE_NUMBER]: 'Priority must be a positive number',\r\n\t[TranslationKey.EXCEPTION_INVALID_PARAMETER_SHOULD_BE_ELEMENT_OR_SELECTOR]: 'Container should either be an element or selector',\r\n\t[TranslationKey.EXCEPTION_INVALID_PARAMETER_VALUE_NOT_VALID]: 'Value is not valid',\r\n\t[TranslationKey.EXCEPTION_INVALID_PARAMETER_VALUE_DAMAGED]: 'Value has been damaged',\r\n\r\n\t[TranslationKey.EXCEPTION_MISSING_PARAMETER_BACKEND_URL_MISSING]: 'Configuration should include a backendUrl parameter',\r\n\t[TranslationKey.EXCEPTION_MISSING_PARAMETER_COORDINATES_MISSING]: 'Supplied parameters must contain coordinates',\r\n\t[TranslationKey.EXCEPTION_MISSING_PARAMETER_IMAGES_MISSING]: 'Supplied parameters must contain images',\r\n\t[TranslationKey.EXCEPTION_MISSING_PARAMETER_PASSWORD_MISSING]: 'Supplied parameters should contain password',\r\n\t[TranslationKey.EXCEPTION_MISSING_PARAMETER_USERNAME_MISSING]: 'Supplied parameters should contain username',\r\n\t[TranslationKey.EXCEPTION_MISSING_REQUIRED_FIELD_MISSING]: 'Please fill the all required fields',\r\n\r\n\t[TranslationKey.EXCEPTION_POSTCODE_FORMAT_ERROR]: 'Postal code format is not valid minLength:5 / maxLength:8 ',\r\n\t[TranslationKey.EXCEPTION_HOUSENUMBER_FORMAT_ERROR]: 'House Name/Number format is not valid minLength:1 / maxLength:20',\r\n\t[TranslationKey.EXCEPTION_STREETNAME_FORMAT_ERROR]: 'Street Name is not valid minLength:1 / maxLength:30',\r\n\t[TranslationKey.EXCEPTION_TOWN_FORMAT_ERROR]: 'Town format is not valid minLength:1 / maxLength:20',\r\n\r\n\t[TranslationKey.EXCEPTION_JOURNEY_DEFINITIONS_MISSING]: 'No journey definitions are available for this channel',\r\n\r\n\t[TranslationKey.EXCEPTION_NETWORK]: 'A network exception has occurred, please check your connection and try again',\r\n\r\n\t[TranslationKey.EXCEPTION_PLATFORM_BROWSER_ONLY]: 'This feature can only be used in browser',\r\n\t[TranslationKey.EXCEPTION_PLATFORM_UNSUPPORTED]: 'Your environment does not support this feature',\r\n\t[TranslationKey.EXCEPTION_PLATFORM_CAMERA_PERMISSION_DENIED]: 'Camera permissions have not been granted, please check your browser settings',\r\n\t[TranslationKey.EXCEPTION_PLATFORM_CAMERA_PERMISSION_UNAVAILABLE]: '',\r\n\t[TranslationKey.EXCEPTION_PLATFORM_CAMERA_NOT_READABLE]: 'The camera could not be accessed. Please close any other applications and try again',\r\n\t[TranslationKey.EXCEPTION_PLATFORM_CAMERA_NONE_SUITABLE]: 'No suitable cameras have been found on your device',\r\n\r\n\t[TranslationKey.EXCEPTION_SERVER]: 'Request failed with status code 500',\r\n\t[TranslationKey.EXCEPTION_SERVER_UNREACHABLE]: 'Request failed, Server Unreachable',\r\n\t[TranslationKey.EXCEPTION_SERVER_DATA_NOT_PERSISTED]: 'An error occurred during the process. Your data may not be persisted',\r\n\t[TranslationKey.EXCEPTION_SERVER_RESULT_NOT_PASSING]: 'Current result not passing',\r\n\r\n\t[TranslationKey.EXCEPTION_TEMPLATE_CANVAS_CONTEXT_UNAVAILABLE]: 'Canvas context not available',\r\n\t[TranslationKey.EXCEPTION_TEMPLATE_CONTAINER_MISSING]: 'Container is not present',\r\n\t[TranslationKey.EXCEPTION_TEMPLATE_ELEMENTS_MISSING]: 'Required elements missing',\r\n\t[TranslationKey.EXCEPTION_TEMPLATE_MISSING]: 'Template not found',\r\n\t[TranslationKey.EXCEPTION_TEMPLATE_SOURCE_ELEMENT_MISSING]: 'Unable to find source element',\r\n\r\n\t[TranslationKey.EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_CANNOT_RETRIEVE]: 'Cannot get input providers',\r\n\t[TranslationKey.EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NONE_SPECIFIED]: 'No input providers specified',\r\n\t[TranslationKey.EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NOT_AVAILABLE]: 'Input provider is not available',\r\n\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_ACCOUNT_STATEMENT]: 'Account Statement',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_AGREEMENT_TENANCY]: 'Agreement (Tenancy)',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_BANK_DOCUMENT]: 'Bank Document',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_BANK_LETTER]: 'Bank Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_BANK_STATEMENT]: 'Bank Statement',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_BENEFIT_LETTER]: 'Benefit Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_CERTIFICATE]: 'Certificate (Birth, Marriage, Civil partnership)',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_COUNCIL_DOCUMENT]: 'Council Document',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_COUNCIL_LETTER]: 'Council Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_COUNCIL_TAX]: 'Council Tax',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_DRIVING_LICENSE]: 'Driving License',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_DWP_DOCUMENT]: 'DWP Document',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_HMRC_DOCUMENT]: 'HMRC Document',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_INFORMATION_SHEET]: 'Information Sheet',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_INSURANCE_DOCUMENT]: 'Insurance Document',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_INSURANCE_LETTER]: 'Insurance Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_INVOICE]: 'Invoice',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_NIC_LETTER]: 'NIC Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_NINO_LETTER]: 'NINO Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_OFFICIAL_DOCUMENT]: 'Official Document',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_OFFICIAL_LETTER]: 'Official Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_REPAYMENT]: 'Repayment Letter (related to Tax or Social support)',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_TAX_LETTER]: 'Tax Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_TAX_STATEMENT]: 'Tax Statement',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_TEL_BILL]: 'Tel Bill',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_TEL_LETTER]: 'Tel Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_TELECOMMUNICATION_DOCUMENT]: 'Telecommunication Document',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_TV_LICENSE]: 'TV Licence',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_UNIVERSITY_LETTER]: 'University Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_UTILITY_BILL]: 'Utility Bill',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_UTILITY_DOCUMENT]: 'Utility Document',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_UTILITY_LETTER]: 'Utility Letter',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_WATER_BILL]: 'Water Bil',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_WATER_DOCUMENT]: 'Water Document',\r\n\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_AGENTS_LICENCE]: 'Agents License',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_ELECTORAL_CARD]: 'Electoral Card',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_FOREIGNER_IDENTIFICATION_CARD]: 'Foreigner Identification Card',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_HEALTH_CARD]: 'Health Card',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_JOB_LICENCE]: 'Job License ',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_MEMBERSHIP_IDENTIFICATION_CARD]: 'Membership Identification Card',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_MILITARY_IDENTIFICATION_CARD]: 'Military Identification Card',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_NATIONAL_IDENTIFICATION_CARD]: 'National Identification Card',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_PASSPORT]: 'Passport',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_TRAVEL_PERMIT]: 'Travel Permit',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_VISA]: 'Visa',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_WEAPONS_LICENCE]: 'Weapons Licence',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_SELFIE_PHOTO]: 'Selfie Photo',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_UNKNOWN]: 'Unknown',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_COVIDPASS]: 'Covid Pass',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_DATACHECKS]: 'Data Checks',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_PAPER_DOCUMENT]: 'Paper Document',\r\n\t[TranslationKey.SUPPORTED_DOCUMENT_ADDRESS_DOCUMENT]: 'Address Document',\r\n\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_FULL]: 'Address Full',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_CITY]: 'Address City',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_POSTCODE]: 'Address Post Code',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LASTNAME_FIRST_PART]: 'Last Name First Part',\r\n\t[TranslationKey.EXTRACTED_FIELDS_SEX]: 'Sex',\r\n\t[TranslationKey.EXTRACTED_FIELDS_BIRTH_PLACE]: 'Birth Place',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUE_NUMBER]: 'Issue Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_DOCUMENT_NUMBER_CHECK_DIGIT]: 'Document Number Check Digit',\r\n\t[TranslationKey.EXTRACTED_FIELDS_BIRTH_DATE]: 'Birth Date',\r\n\t[TranslationKey.EXTRACTED_FIELDS_DOCUMENT_NUMBER]: 'Document Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_FIRST_NAME]: 'First Name',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ARBITRARY_DIGIT]: 'Arbitrary Digit',\r\n\t[TranslationKey.EXTRACTED_FIELDS_FIRST_NAME_INITIAL]: 'First Name Initial',\r\n\t[TranslationKey.EXTRACTED_FIELDS_EXPIRY_DATE]: 'Expiry Date',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUE_DATE]: 'Issue Date',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LAST_NAME]: 'Last Name',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LICENSE_CATEGORY]: 'License Category',\r\n\t[TranslationKey.EXTRACTED_FIELDS_DOCUMENT_CATEGORY]: 'Document Category',\r\n\t[TranslationKey.EXTRACTED_FIELDS_DOCUMENT_TYPE]: 'Document Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_DOCUMENT_SUB_TYPE]: 'Document Sub Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_NATIONALITY_CODE]: 'Nationality Code',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MIDDLE_NAME]: 'Middle Name',\r\n\t[TranslationKey.EXTRACTED_FIELDS_FIRST_ISSUANCE_DATE]: 'First Issue Date',\r\n\t[TranslationKey.EXTRACTED_FIELDS_SECOND_LAST_NAME]: 'Second Last Name',\r\n\t[TranslationKey.EXTRACTED_FIELDS_FULL_NAME]: 'Full Name',\r\n\t[TranslationKey.EXTRACTED_FIELDS_PERSONAL_NUMBER]: 'Personal Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_NATIONALITY_NAME]: 'Nationality',\r\n\t[TranslationKey.EXTRACTED_FIELDS_BARCODE_ITEMS]: 'BarcodeS',\r\n\t[TranslationKey.EXTRACTED_FIELDS_BIRTH_PLACE_CITY]: 'City of Birth',\r\n\t[TranslationKey.EXTRACTED_FIELDS_BIRTH_PLACE_STATE]: 'State of Birth',\r\n\t[TranslationKey.EXTRACTED_FIELDS_BIRTH_PLACE_COUNTRY]: 'Country of Birth',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_FULL]: 'Full MRZ',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_LINE_1]: 'MRZ Line 1',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_LINE_2]: 'MRZ Line 2',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_LINE_3]: 'MRZ Line 3',\r\n\t[TranslationKey.EXTRACTED_FIELDS_OBSERVATION_PAGE]: 'Observation Page',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUING_AUTHORITY]: 'Issuing Authority',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUING_LOCATION]: 'Issuing Location',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MARITAL_STATUS]: 'Marital Status',\r\n\t[TranslationKey.EXTRACTED_FIELDS_OCCUPATION]: 'Occupation',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ALIEN_NUMBER]: 'Alien Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_EMPLOYER]: 'Employer',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_LINE_1]: 'Address Line 1',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_LINE_2]: 'Address Line 2',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_LINE_3]: 'Address Line 3',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_LINE_4]: 'Address Line 4',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_STATE]: 'State',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_DISTRICT]: 'District',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_BUILDING_NUM]: 'Building Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_BUILDING_NAME]: 'Building Name',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_STREET]: 'Street',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_COUNTRY]: 'Country',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_FULL]: 'Reference Address',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_LINE_1]: 'Reference Address Line 1',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_LINE_2]: 'Reference Address Line 2',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_LINE_3]: 'Reference Address Line 3',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_LINE_4]: 'Reference Address Line 4',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_CITY]: 'Reference Address City',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_STATE]: 'Reference Address State',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_DISTRICT]: 'Reference Address District',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_BUILTING_NUM]: 'Reference Address Building Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_BUILDING_NAME]: 'Reference Address Building Name',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_SUB_BUILDING_NAME]: 'Reference Address Sub Building Name',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_STREET]: 'Reference Address Street',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_COUNTRY]: 'Reference Address Country',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_POST_CODE]: 'Reference Address Postcode',\r\n\t[TranslationKey.EXTRACTED_FIELDS_HEALTH_NUMBER]: 'Health Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ENDORSMENTS]: 'Endorsements',\r\n\t[TranslationKey.EXTRACTED_FIELDS_CONSTRAINTS]: 'Constraints',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LICENSE_MARINE]: 'License Marine',\r\n\t[TranslationKey.EXTRACTED_FIELDS_HEIGHT]: 'Height',\r\n\t[TranslationKey.EXTRACTED_FIELDS_WEIGHT]: 'Weight',\r\n\t[TranslationKey.EXTRACTED_FIELDS_HAIR_COLOR]: 'Hair Colour',\r\n\t[TranslationKey.EXTRACTED_FIELDS_EYE_COLOR]: 'Eye Colour',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LENS_DATA]: 'Eyesight',\r\n\t[TranslationKey.EXTRACTED_FIELDS_SOCIAL_SECURITY_NUM]: 'Social Security Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_NATIONAL_INSURANCE_NUM]: 'National Insurance Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RACE]: 'Race',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MOTHER_NAME]: \"Mother's Name\",\r\n\t[TranslationKey.EXTRACTED_FIELDS_FATHER_NAME]: \"Father's Name\",\r\n\t[TranslationKey.EXTRACTED_FIELDS_PARENTS]: 'Parents',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REMARKS]: 'Remarks',\r\n\t[TranslationKey.EXTRACTED_FIELDS_DISTINGUISHING_MARKS]: 'Distinguishing Marks',\r\n\t[TranslationKey.EXTRACTED_FIELDS_PERIOD_OF_STAY]: 'Period Of Stay',\r\n\t[TranslationKey.EXTRACTED_FIELDS_TAX_NUMBER]: 'Tax Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_DONOR]: 'Donor',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RFIDG1]: 'RFID Raw Data Group 1',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RFIDG2]: 'RFID Raw Data Group 2',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RFIDG3]: 'RFID Raw Data Group 3',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RFIDG15]: 'RFID Raw Data Group 4',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RFIDSOD]: 'RFID Raw Data Group 5',\r\n\t[TranslationKey.EXTRACTED_FIELDS_PORTRAIT_PHOTO]: 'Extracted Portrait Photo',\r\n\t[TranslationKey.EXTRACTED_FIELDS_TITLE]: 'Title',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUE_DATE_2]: 'Second Issue Date',\r\n\t[TranslationKey.EXTRACTED_FIELDS_EXPIRY_DATE_2]: 'Second Expiry Date',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LICENSE_CATEGORY_2]: 'Second License Category',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUE_DATE_3]: 'Third Issue Date',\r\n\t[TranslationKey.EXTRACTED_FIELDS_EXPIRY_DATE_3]: 'Third Expiry Date',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LICENSE_CATEGORY_3]: 'Third License Category',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUE_DATE_4]: 'Fourth Issue Date',\r\n\t[TranslationKey.EXTRACTED_FIELDS_EXPIRY_DATE_4]: 'Fourth Expiry Date',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LICENSE_CATEGORY_4]: 'Fourth License Category',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_CODE_1]: 'MRZ Code 1',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_CODE_2]: 'MRZ Code 2',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_STANDARD_TYPE]: 'MRZ Standard Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_STREET_SUFFIX]: 'Street Suffix',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_STREET_TYPE]: 'Street Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_UNIT_NUMBER]: 'Address Unit Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LICENSE_NUMBER]: 'License Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_STATE_CODE]: 'State Code',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_STREET_TYPE_ABBREVIATION]: 'Street Abbreviation',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_UNIT_TYPE]: 'Address Unit Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_DELIVERY_POINT_ID]: 'Delivery Point Identifier',\r\n\t[TranslationKey.EXTRACTED_FIELDS_AGE_CATEGORY]: 'Age Category',\r\n\t[TranslationKey.EXTRACTED_FIELDS_CHILDREN_COUNT]: 'Number of Children',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ENTRY_MODE]: 'Entry Mode',\r\n\t[TranslationKey.EXTRACTED_FIELDS_VAF_NUM]: 'VAF Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_LINE_5]: 'Address Line 5',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RFID_PORTRAIT_PHOTO]: 'RFID Portrait Photo',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_LINE_5]: 'Reference Address Line 5',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_STATE_CODE]: 'Reference Address State',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_STREET_TYPE]: 'Reference Address Street Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_STREET_TYPE_ABBREVIATION]: 'Reference Address Street Type Abbreviation',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_STREET_SUFFIX]: 'Reference Address Street Suffix',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_UNIT_NUM]: 'Reference Address Unit Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_UNIT_TYPE]: 'Reference Address Unit Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_POST_CODE_TYPE]: 'Reference Address Postcode Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_DELIVERY_POINT_ID]: 'Reference Address Delivery Point Identifier',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_PO_BOX_NUM]: 'Reference Address PO Box Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_DEPENDENT_LOCALITY]: 'Reference Address Dependant Locality',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_DOUBLE_DEPENDENT_LOCALITY]: 'Reference Address Double Dependant Locality',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_THOROUGHFARE]: 'Reference Address Thoroughfare',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_THOROUGHFARE_DESC]: 'Reference Address Thoroughfare Description',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_DEPENDENT_THOROUGHFARE]: 'Reference Address Dependant Thoroughfare',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_DEPENDENT_THOROUGHFARE_DESC]: 'Reference Address Dependent Thoroughfare Description',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REF_ADDRESS_SUB_BUILDING_NUM]: 'Reference Address Sub Building Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_SUB_BUILDING_NUM]: 'Sub Building Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_SUB_BUILDING_NAME]: 'Sub Building Name',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_POST_CODE_TYPE]: 'Postcode Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUING_AUTHORITY_TYPE]: 'Issuing Authority Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_SIGNATURE]: 'Signature',\r\n\t[TranslationKey.EXTRACTED_FIELDS_HOLOGRAM]: 'Hologram',\r\n\t[TranslationKey.EXTRACTED_FIELDS_CARD_NUMBER]: 'Card Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MIDDLE_NAME_INITIAL]: 'Middle Name Initial',\r\n\t[TranslationKey.EXTRACTED_FIELDS_PERMIT_NUM]: 'Permit Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_REFERENCE_NUM]: 'Reference Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_CUSTOMER_NUM]: 'Customer Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_BOS_NUM]: 'BOS Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_STUDENT_ID]: 'Student Identification Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MEMBERSHIP_NUMBER]: 'Membership Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LICENSE_TYPE]: 'License Type',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LICENSE_TYPE_2]: 'License Type 2',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LICENSE_TYPE_3]: 'License Type 3',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LICENSE_TYPE_4]: 'License Type 4',\r\n\t[TranslationKey.EXTRACTED_FIELDS_DOCUMENT_TYPE_CODE]: 'Document Type Code',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_DOCUMENT_NUMBER_CHECK_DIGIT]: 'MRZ CheckDigit',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_BIRTH_DATE_CHECK_DIGIT]: 'MRZ Birth Date Check Digit',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_EXPORY_DATE_CHECK_DIGIT]: 'MRZ Expiry Date Check Digit',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_PERSONAL_NUMBER_CHECK_DIGIT]: 'MRZ Personal Number Check Digit',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MRZ_COMPOSITE_CHECK_DIGIT]: 'MRZ Composite Check Digit',\r\n\t[TranslationKey.EXTRACTED_FIELDS_SECONDARY_PORTRAIT_PHOTO]: 'Secondary Portrait Photo',\r\n\t[TranslationKey.EXTRACTED_FIELDS_FINGERPRINT]: 'Fingerprint',\r\n\t[TranslationKey.EXTRACTED_FIELDS_VERSION_NUMBER]: 'Version Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_CONDITIONS]: 'Conditions',\r\n\t[TranslationKey.EXTRACTED_FIELDS_NICKNAME]: 'Nickname',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_APARTMENT_NUMBER]: 'Apartment Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_FLOOR_NUM]: 'Floor Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_FIRST_NAME_LOCAL]: 'First Name Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_LAST_NAME_LOCAL]: 'Last Name Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_FULL_NAME_LOCAL]: 'Full Name Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_BIRTH_PLACE_LOCAL]: 'Birth Place Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUING_AUTHORITY_LOCAL]: 'Issuing Authority Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MOTHER_NAME_LOCAL]: 'Mother Name Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_FATHER_NAME_LOCAL]: 'Father Name Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_FULL_LOCAL]: 'Address Full Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MIDDLE_NAME_LOCAL]: 'Middle Name Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_LINE_1_LOCAL]: 'Address Line1 Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_LINE_2_LOCAL]: 'Address Line2 Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ADDRESS_LINE_3_LOCAL]: 'Address Line3 Local',\r\n\t[TranslationKey.EXTRACTED_FIELDS_IND_REF_NUMBER_1]: 'Individual Reference Number 1',\r\n\t[TranslationKey.EXTRACTED_FIELDS_IND_REF_NUMBER_2]: 'Individual Reference Number 2',\r\n\t[TranslationKey.EXTRACTED_FIELDS_IND_REF_NUMBER_3]: 'Individual Reference Number 3',\r\n\t[TranslationKey.EXTRACTED_FIELDS_IND_REF_NUMBER_4]: 'Individual Reference Number 4',\r\n\t[TranslationKey.EXTRACTED_FIELDS_IND_REF_NUMBER_5]: 'Individual Reference Number 5',\r\n\t[TranslationKey.EXTRACTED_FIELDS_NAME_1]: 'Name 1',\r\n\t[TranslationKey.EXTRACTED_FIELDS_NAME_2]: 'Name 2',\r\n\t[TranslationKey.EXTRACTED_FIELDS_NAME_3]: 'Name 3',\r\n\t[TranslationKey.EXTRACTED_FIELDS_NAME_4]: 'Name 4',\r\n\t[TranslationKey.EXTRACTED_FIELDS_NAME_5]: 'Name 5',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RECIPIENT_NAME]: 'Name 5',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RECIPIENT_NAME_1]: 'Recipient Name 1',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RECIPIENT_NAME_2]: 'Recipient Name 2',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RECIPIENT_NAME_3]: 'Recipient Name 3',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RECIPIENT_NAME_4]: 'Recipient Name 4',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RECIPIENT_ADDRESS_FULL]: 'Recipient Address Full',\r\n\t[TranslationKey.EXTRACTED_FIELDS_IBAN]: 'IBAN Account Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ACCOUNT_NUM]: 'Account Number',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUER]: 'Issuer',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RECIPIENT_ADDRESS_CITY]: 'Recipient Address City',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RECIPIENT_ADDRESS_POST_CODE]: 'Recipient Address Post Code',\r\n\t[TranslationKey.EXTRACTED_FIELDS_DAY]: 'Day',\r\n\t[TranslationKey.EXTRACTED_FIELDS_MONTH]: 'Month',\r\n\t[TranslationKey.EXTRACTED_FIELDS_YEAR]: 'Year',\r\n\t[TranslationKey.EXTRACTED_FIELDS_OPTIONAL_VALUE_1]: 'Optional Value 1',\r\n\t[TranslationKey.EXTRACTED_FIELDS_OPTIONAL_VALUE_2]: 'Optional Value 2',\r\n\t[TranslationKey.EXTRACTED_FIELDS_OPTIONAL_VALUE_3]: 'Optional Value 3',\r\n\t[TranslationKey.EXTRACTED_FIELDS_OPTIONAL_VALUE_4]: 'Optional Value 4',\r\n\t[TranslationKey.EXTRACTED_FIELDS_ISSUING_STATE_NAME]: 'Issuing State Name',\r\n\t[TranslationKey.EXTRACTED_FIELDS_FRONT_DOCUMENT_TYPE_ID]: 'Frontside Document Type Id',\r\n\t[TranslationKey.EXTRACTED_FIELDS_BACK_DOCUMENT_TYPE_ID]: 'Backside Document Type Id',\r\n\r\n\t[TranslationKey.HASNOCAMERA_TITLE]: 'Oops, we could not recognise a camera on your device!',\r\n\t[TranslationKey.HASNOCAMERA_DESCRIPTION]: 'it looks like your device does not have a camera, please retry on a different device that has a working camera so you are able to carry out all the steps required.',\r\n\t[TranslationKey.EXTRACTED_FIELDS_COVIDPASSCROSSCHECKRESULT]: 'Covid Type Id',\r\n\r\n\t[TranslationKey.USER_INPUT_FIRST_NAME]: 'First Name',\r\n\t[TranslationKey.USER_INPUT_MIDDLE_NAME]: 'Middle Name',\r\n\t[TranslationKey.USER_INPUT_LAST_NAME]: 'Last Name',\r\n\t[TranslationKey.USER_INPUT_DOB]: 'Date of Birth',\r\n\t[TranslationKey.USER_INPUT_HOUSE_NAME_NUMBER]: 'House Name/Number*',\r\n\t[TranslationKey.USER_INPUT_STREET_NAME]: 'Street Name*',\r\n\t[TranslationKey.USER_INPUT_TOWN]: 'Town*',\r\n\t[TranslationKey.USER_INPUT_POSTAL_CODE]: 'Postal Code*',\r\n\t[TranslationKey.USER_INPUT_HOUSE_NAME_NUMBER_EXAMPLE]: 'e.g. House/35',\r\n\t[TranslationKey.USER_INPUT_STREET_NAME_EXAMPLE]: 'e.g. Test Street',\r\n\t[TranslationKey.USER_INPUT_TOWN_EXAMPLE]: 'e.g. Somewhere',\r\n\t[TranslationKey.USER_INPUT_POSTAL_CODE_EXAMPLE]: 'e.g. CH496 (no spaces)',\r\n\t[TranslationKey.EXTRACTED_FIELDS_RECIPIENT_ADDRESS]: 'Recipient Address',\r\n\r\n\t[TranslationKey.ACCEPT_TERMS_AND_CONDITIONS]: 'I accept the terms and conditions and the privacy policy. I understand that my data will be screened against fraud avoidance systems.',\r\n\t[TranslationKey.CONSENT_USE_BIOMETRIC_DATA]: 'I consent to use of my biometric data for the purpose of identity verification.',\r\n};\r\n","import EventService from '../../../helpers/classes/EventService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport JourneyManager from '../../classes/JourneyManager';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { ImageProvider } from './image';\r\nimport { IMetaData } from '../../interfaces/MetaData';\r\nimport { FlowState } from '../../enums/FlowState';\r\nimport { ImageService } from '../../../helpers/classes/ImageService';\r\nimport { RequiredInputImage } from '../../enums/RequiredInputImage';\r\nimport DataService, { DataStoreType } from '../../classes/DataService';\r\nimport { IIdScanData } from '../../interfaces/DataFormats';\r\nimport { Journey } from '../../classes/Journey';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport {\r\n\tremoveItems,\r\n} from '../../../helpers/functions/arrays';\r\nimport { TripleScanGuidanceProvider } from './triple-scan-guidance';\r\nimport { InputProvider } from '../../enums/InputProvider';\r\n\r\nexport class FileSystemProvider {\r\n\r\n\tpublic static render(this: JourneyContainer, isFromTripleScanGuidancePage: boolean = false) {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tproviderContainer: '[data-jcs-element=\"provider__container\"]',\r\n\t\t})\r\n\t\t\t.then(({ providerContainer }) => TemplateService.renderToContainer(providerContainer, Templates.Filesystem))\r\n\t\t\t.then((providerContainer) => TemplateService.getElements(providerContainer, {\r\n\t\t\t\tfileUploadButton: '[data-jcs-element=\"file__input__Button\"]',\r\n\t\t\t\tfileInput: '[data-jcs-element=\"file__input\"]',\r\n\t\t\t\tdropbox: '[data-jcs-element=\"file__drop__box\"]',\r\n\t\t\t\tfileTooLargeError: '[data-jcs-element=\"file__too__large__error\"]',\r\n\t\t\t\tinvalidFileFormatError: '[data-jcs-element=\"invalid__format__error\"]',\r\n\t\t\t\topenPreviewInfoId: '[data-jcs-element=\"preview__page__open__info__id\"]',\r\n\t\t\t\topenPreviewInfoFM: '[data-jcs-element=\"preview__page__open__info__fm\"]',\r\n\t\t\t\topenPreviewInfoPOA: '[data-jcs-element=\"preview__page__open__info__poa\"]',\r\n\t\t\t\topenPreviewInfoCovid: '[data-jcs-element=\"preview__page__open__info__covid\"]',\r\n\t\t\t\tpreviewInfoContainerId: '[data-jcs-element=\"preview__info__container__id\"]',\r\n\t\t\t\tpreviewInfoContainerFM: '[data-jcs-element=\"preview__info__container__fm\"]',\r\n\t\t\t\tpreviewInfoContainerPOA: '[data-jcs-element=\"preview__info__container__poa\"]',\r\n\t\t\t\tpreviewInfoContainerCovid: '[data-jcs-element=\"preview__info__container__covid\"]',\r\n\t\t\t\tclosePreviewInfoId: '[data-jcs-element=\"preview__page__close__info__id\"]',\r\n\t\t\t\tclosePreviewInfoFM: '[data-jcs-element=\"preview__page__close__info__fm\"]',\r\n\t\t\t\tclosePreviewInfoPOA: '[data-jcs-element=\"preview__page__close__info__poa\"]',\r\n\t\t\t\tclosePreviewInfoCovid: '[data-jcs-element=\"preview__page__close__info__covid\"]',\r\n\t\t\t\tattemptCountContainer: '[data-jcs-element=\"attempt__count__container\"]',\r\n\t\t\t\tattemptCounter: '[data-jcs-element=\"attempt__counter\"]',\r\n\t\t\t\tidDocumentContainer: '[data-jcs-element=\"identity__document__file__upload\"]',\r\n\t\t\t\tfacematchContainer: '[data-jcs-element=\"facematch__file__upload\"]',\r\n\t\t\t\taddressContainer: '[data-jcs-element=\"address__file__upload\"]',\r\n\t\t\t\tcovidContainer: '[data-jcs-element=\"covid__file__upload\"]',\r\n\t\t\t\tuploading: '[data-jcs-element=\"uploading__file__without__preview\"]',\r\n\t\t\t\tsupportedTypes: '[data-jcs-element=\"supported__types\"]',\r\n\t\t\t\tsupportedTypesSelfie: '[data-jcs-element=\"supported__types__selfie\"]',\r\n\t\t\t\taction: '[data-jcs-element=\"info__journey__action\"]'\r\n\r\n\t\t\t}))\r\n\t\t\t.then(({ fileUploadButton, fileInput, dropbox, fileTooLargeError, invalidFileFormatError, openPreviewInfoId, openPreviewInfoFM, openPreviewInfoPOA, openPreviewInfoCovid, previewInfoContainerId, previewInfoContainerFM, previewInfoContainerPOA, previewInfoContainerCovid, closePreviewInfoId, closePreviewInfoFM, closePreviewInfoPOA, closePreviewInfoCovid, attemptCountContainer, attemptCounter, idDocumentContainer, facematchContainer, addressContainer, covidContainer, uploading, supportedTypes, supportedTypesSelfie, action }) => {\r\n\t\t\t\tRenderingService.hideObject(previewInfoContainerId);\r\n\t\t\t\tRenderingService.hideObject(previewInfoContainerFM);\r\n\t\t\t\tRenderingService.hideObject(previewInfoContainerPOA);\r\n\t\t\t\tRenderingService.hideObject(previewInfoContainerCovid);\r\n\t\t\t\tRenderingService.hideObject(closePreviewInfoId);\r\n\t\t\t\tRenderingService.hideObject(closePreviewInfoFM);\r\n\t\t\t\tRenderingService.hideObject(closePreviewInfoPOA);\r\n\t\t\t\tRenderingService.hideObject(closePreviewInfoCovid);\r\n\t\t\t\tRenderingService.hideObject(idDocumentContainer);\r\n\t\t\t\tRenderingService.hideObject(facematchContainer);\r\n\t\t\t\tRenderingService.hideObject(addressContainer);\r\n\t\t\t\tRenderingService.hideObject(covidContainer);\r\n\t\t\t\tRenderingService.hideObject(uploading);\r\n\t\t\t\tRenderingService.hideObject(supportedTypes);\r\n\t\t\t\tRenderingService.hideObject(supportedTypesSelfie);\r\n\t\t\t\tRenderingService.hideObject(dropbox);\r\n\t\t\t\tif (this._journey) {\r\n\t\t\t\t\t// Check if triple scan guidance page mode is enabled & journey is on triple scan state\r\n\t\t\t\t\tif (this._journey.actionAttempt > 1 &&\r\n\t\t\t\t\t\tthis._config.tripleScanGuidancePage && ((this._journey.action === FlowState.IDENTITY_BACK) || (this._journey.action === FlowState.IDENTITY_FRONT)) &&\r\n\t\t\t\t\t\t!isFromTripleScanGuidancePage &&\r\n\t\t\t\t\t\t!this._retry) {\r\n\r\n\t\t\t\t\t\tTripleScanGuidanceProvider.render.call(this, InputProvider.FILESYSTEM);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tisFromTripleScanGuidancePage = false;\r\n\t\t\t\t\t\tRenderingService.showObject(dropbox);\r\n\r\n\t\t\t\t\t\tswitch (this._journey.action) {\r\n\t\t\t\t\t\t\tcase FlowState.SELFIE:\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(facematchContainer);\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(supportedTypesSelfie);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase FlowState.IDENTITY_BACK:\r\n\t\t\t\t\t\t\tcase FlowState.IDENTITY_FRONT:\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(idDocumentContainer);\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(supportedTypes);\r\n\t\t\t\t\t\t\t\tRenderingService.setText(\r\n\t\t\t\t\t\t\t\t\taction,\r\n\t\t\t\t\t\t\t\t\tLanguageService.getTranslation(\r\n\t\t\t\t\t\t\t\t\t\t`FLOW_STATE_${this._journey.action}` as TranslationKey\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase FlowState.ADDRESS:\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(addressContainer);\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(supportedTypes);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase FlowState.COVIDPASS:\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(covidContainer);\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(supportedTypes);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tswitch (this._journey.actionAttempt) {\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '2');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '1');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tRenderingService.hideObject(attemptCountContainer);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._retry = false;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (openPreviewInfoId instanceof HTMLElement) {\r\n\t\t\t\t\topenPreviewInfoId.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.showObject(previewInfoContainerId);\r\n\t\t\t\t\t\tRenderingService.showObject(closePreviewInfoId);\r\n\t\t\t\t\t\tRenderingService.hideObject(openPreviewInfoId);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (openPreviewInfoFM instanceof HTMLElement) {\r\n\t\t\t\t\topenPreviewInfoFM.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.showObject(previewInfoContainerFM);\r\n\t\t\t\t\t\tRenderingService.showObject(closePreviewInfoFM);\r\n\t\t\t\t\t\tRenderingService.hideObject(openPreviewInfoFM);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (openPreviewInfoPOA instanceof HTMLElement) {\r\n\t\t\t\t\topenPreviewInfoPOA.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.showObject(previewInfoContainerPOA);\r\n\t\t\t\t\t\tRenderingService.showObject(closePreviewInfoPOA);\r\n\t\t\t\t\t\tRenderingService.hideObject(openPreviewInfoPOA);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (openPreviewInfoCovid instanceof HTMLElement) {\r\n\t\t\t\t\topenPreviewInfoCovid.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.showObject(previewInfoContainerCovid);\r\n\t\t\t\t\t\tRenderingService.showObject(closePreviewInfoCovid);\r\n\t\t\t\t\t\tRenderingService.hideObject(openPreviewInfoCovid);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (closePreviewInfoId instanceof HTMLElement) {\r\n\t\t\t\t\tclosePreviewInfoId.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.hideObject(previewInfoContainerId);\r\n\t\t\t\t\t\tRenderingService.hideObject(closePreviewInfoId);\r\n\t\t\t\t\t\tRenderingService.showObject(openPreviewInfoId);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (closePreviewInfoFM instanceof HTMLElement) {\r\n\t\t\t\t\tclosePreviewInfoFM.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.hideObject(previewInfoContainerFM);\r\n\t\t\t\t\t\tRenderingService.hideObject(closePreviewInfoFM);\r\n\t\t\t\t\t\tRenderingService.showObject(openPreviewInfoFM);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (closePreviewInfoPOA instanceof HTMLElement) {\r\n\t\t\t\t\tclosePreviewInfoPOA.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.hideObject(previewInfoContainerPOA);\r\n\t\t\t\t\t\tRenderingService.hideObject(closePreviewInfoPOA);\r\n\t\t\t\t\t\tRenderingService.showObject(openPreviewInfoPOA);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (closePreviewInfoCovid instanceof HTMLElement) {\r\n\t\t\t\t\tclosePreviewInfoCovid.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.hideObject(previewInfoContainerCovid);\r\n\t\t\t\t\t\tRenderingService.hideObject(closePreviewInfoPOA);\r\n\t\t\t\t\t\tRenderingService.showObject(openPreviewInfoCovid);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (fileInput instanceof HTMLInputElement) {\r\n\t\t\t\t\tif (fileUploadButton instanceof HTMLElement) {\r\n\t\t\t\t\t\tfileUploadButton.addEventListener('click', () => {\r\n\t\t\t\t\t\t\tconst event = new MouseEvent('click');\r\n\t\t\t\t\t\t\tfileInput.dispatchEvent(event);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (this._journey!.action) {\r\n\t\t\t\t\t\tcase FlowState.SELFIE:\r\n\t\t\t\t\t\t\tfileInput.accept = removeItems(this.getAllowedFileFormats(), \"application/pdf\").join(', ');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tfileInput.accept = this.getAllowedFileFormats().join(', ');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfileInput.addEventListener('change', FileSystemProvider.fileSelectHandler.bind(this), false);\r\n\t\t\t\t}\r\n\t\t\t\tRenderingService.hideObject(fileTooLargeError);\r\n\t\t\t\tRenderingService.hideObject(invalidFileFormatError);\r\n\r\n\t\t\t\tif (dropbox && RenderingService.supportsDragDrop()) {\r\n\t\t\t\t\tdropbox.addEventListener('dragover', FileSystemProvider.fileDragHover.bind(this), false);\r\n\t\t\t\t\tdropbox.addEventListener('dragleave', FileSystemProvider.fileDragHover.bind(this), false);\r\n\t\t\t\t\tdropbox.addEventListener('drop', FileSystemProvider.fileDropHandler.bind(this), false);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_PROVIDER, { provider: Templates.Filesystem }));\r\n\t}\r\n\r\n\tprivate static continueJourney(this: JourneyContainer, image: string, metaData: IMetaData[]) {\r\n\t\tif (this._journey !== undefined) {\r\n\t\t\tswitch (this._journey.action) {\r\n\t\t\t\tcase FlowState.IDENTITY_BACK:\r\n\t\t\t\tcase FlowState.IDENTITY_FRONT:\r\n\t\t\t\t\treturn ImageProvider.render.call(this, image, metaData);\r\n\t\t\t\tcase FlowState.ADDRESS:\r\n\t\t\t\t\treturn ImageProvider.render.call(this, image, metaData);\r\n\t\t\t\tcase FlowState.SELFIE:\r\n\t\t\t\t\treturn ImageProvider.render.call(this, image, metaData);\r\n\t\t\t\tcase FlowState.COVIDPASS:\r\n\t\t\t\t\treturn ImageProvider.render.call(this, image, metaData);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static continueJourneySkipPreview(this: JourneyContainer, image: string, metaData: IMetaData[]) {\r\n\t\tconst { type } = ImageService.getBase64Components(image);\r\n\t\treturn this.assertImageExists(image)\r\n\t\t\t.then(() => this.getJourney())\r\n\t\t\t.then((journey) => journey.continue({\r\n\t\t\t\timgList: [{\r\n\t\t\t\t\t...ImageService.remapNames(ImageService.getBase64Components(image)),\r\n\t\t\t\t\tname: journey.action === 'SELFIE' ? RequiredInputImage.SelfiePhoto : RequiredInputImage.WhiteImage,\r\n\t\t\t\t\tinputFormat: type === 'pdf' ? 1 : 0\r\n\t\t\t\t}],\r\n\t\t\t\tjourneyDefinitionId: this._journeyDefinitionId\r\n\t\t\t}, metaData)\r\n\t\t\t\t.then((res) => DataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN).update(ImageProvider.parseResponseData(res)))\r\n\t\t\t\t.then(() => this.evaluate)\r\n\t\t\t\t.then(this.updateJourneyFields));\r\n\t}\r\n\r\n\t/**\r\n\t * If dragover event is triggered on dropbox, assigns hover class to the dropbox\r\n\t * @param e\r\n\t */\r\n\tprivate static fileDragHover(this: JourneyContainer, e: any) {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\r\n\t\tTemplateService.getElements(this._container, {\r\n\t\t\tfileDropBox: '[data-jcs-element=\"file__drop__box\"]',\r\n\t\t}).then(({ fileDropBox }) => {\r\n\t\t\tif (e.type === 'dragover') {\r\n\t\t\t\tRenderingService.addClass(fileDropBox, 'dragover');\r\n\t\t\t} else {\r\n\t\t\t\tRenderingService.removeClass(fileDropBox, 'dragover');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate static async fileDropHandler(this: JourneyContainer, e: DragEvent) {\r\n\t\tFileSystemProvider.fileDragHover.call(this, e);\r\n\r\n\t\tconst [file] = Array.from((e.dataTransfer ? e.dataTransfer.files : []));\r\n\t\tconst metaData: IMetaData[] = [];\r\n\t\tif (await FileSystemProvider.checkAndShowErrors(this, this._container, file)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tuploading: '[data-jcs-element=\"uploading__file__without__preview\"]'\r\n\t\t}).then(({ uploading }) => {\r\n\t\t\tif (file.type === 'application/pdf' && this._journey!.action != FlowState.SELFIE) {\r\n\t\t\t\tRenderingService.showObject(uploading);\r\n\t\t\t\tFileSystemProvider.skipPreviewAndUpload.call(this, file, metaData).then(() => RenderingService.hideObject(uploading));\r\n\t\t\t} else {\r\n\t\t\t\treturn JourneyManager.toBase64(file)\r\n\t\t\t\t\t.then((base64) => FileSystemProvider.continueJourney.call(this, base64, metaData))\r\n\t\t\t\t\t.then(() => this.updateJourneyFields());\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate static async fileSelectHandler(this: JourneyContainer, e: Event) {\r\n\t\tconst [file] = Array.from(((e.currentTarget as HTMLInputElement).files || []));\r\n\t\tconst metaData: IMetaData[] = [];\r\n\t\tif (await FileSystemProvider.checkAndShowErrors(this, this._container, file)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tuploading: '[data-jcs-element=\"uploading__file__without__preview\"]'\r\n\t\t}).then(({ uploading }) => {\r\n\t\t\tif (file.type === 'application/pdf' && this._journey!.action != FlowState.SELFIE) {\r\n\t\t\t\tRenderingService.showObject(uploading);\r\n\t\t\t\tFileSystemProvider.skipPreviewAndUpload.call(this, file, metaData).then(() => RenderingService.hideObject(uploading));\r\n\t\t\t} else {\r\n\t\t\t\tEventService.publish(JourneyEvent.DISPLAY_INFO, { fileName: file.name, fileSize: file.size, fileType: file.type });\r\n\t\t\t\treturn JourneyManager.toBase64(file)\r\n\t\t\t\t\t.then((base64) => FileSystemProvider.continueJourney.call(this, base64, metaData))\r\n\t\t\t\t\t.then(() => this.updateJourneyFields());\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate static async skipPreviewAndUpload(this: JourneyContainer, file: File, metaData: IMetaData[]) {\r\n\t\tconst base64 = await JourneyManager.toBase64(file);\r\n\t\treturn this.assertImageExists(base64)\r\n\t\t\t.then(() => this.getJourney())\r\n\t\t\t.then((journey) => journey.continue({\r\n\t\t\t\timgList: [{\r\n\t\t\t\t\t...ImageService.remapNames(ImageService.getBase64Components(base64)),\r\n\t\t\t\t\tname: journey.action === 'SELFIE' ? RequiredInputImage.SelfiePhoto : RequiredInputImage.WhiteImage,\r\n\t\t\t\t\tinputFormat: 1\r\n\t\t\t\t}],\r\n\t\t\t\tjourneyDefinitionId: this._journeyDefinitionId\r\n\t\t\t}, metaData)\r\n\t\t\t\t.then((res) => DataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN).update(ImageProvider.parseResponseData(res)))\r\n\t\t\t\t.then(() => this.evaluate())\r\n\t\t\t\t.then(this.updateJourneyFields));\r\n\t}\r\n\r\n\tprivate static checkAndShowErrors(container: JourneyContainer, htmlContainer: HTMLElement, file: File): Promise<boolean> {\r\n\t\treturn TemplateService.getElements(htmlContainer, {\r\n\t\t\tfileTooLargeError: '[data-jcs-element=\"file__too__large__error\"]',\r\n\t\t\tinvalidFileFormatError: '[data-jcs-element=\"invalid__format__error\"]',\r\n\t\t\tdropbox: '[data-jcs-element=\"file__drop__box\"]',\r\n\t\t}).then(({ fileTooLargeError, invalidFileFormatError, dropbox }) => {\r\n\t\t\tif (file) {\r\n\t\t\t\tRenderingService.hideObject(invalidFileFormatError);\r\n\t\t\t\tRenderingService.hideObject(fileTooLargeError);\r\n\t\t\t\tif (container.getAllowedFileFormats().indexOf(file.type) < 0) {\r\n\t\t\t\t\tRenderingService.showObject(invalidFileFormatError);\r\n\t\t\t\t\tRenderingService.addClass(dropbox, 'error');\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif (file.size > 7864320) {\r\n\t\t\t\t\tRenderingService.showObject(fileTooLargeError);\r\n\t\t\t\t\tRenderingService.addClass(dropbox, 'error');\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}\r\n}\r\n","import * as lottie from 'lottie-web/build/player/lottie';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class AnimationService {\r\n\t// Flag to track if we've patched the customElements registry\r\n\tprivate static hasPatched = false;\r\n\r\n\t/**\r\n\t * Patches the customElements.define method to prevent errors when custom elements\r\n\t * are registered multiple times\r\n\t */\r\n\tprivate static patchCustomElementsRegistry(): void {\r\n\t\tif (AnimationService.hasPatched || typeof window === 'undefined' || !window.customElements) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\t// Store the original define method\r\n\t\t\tconst originalDefine = window.customElements.define;\r\n\r\n\t\t\t// Override the define method\r\n\t\t\twindow.customElements.define = function (name: string, constructor: CustomElementConstructor, options?: ElementDefinitionOptions) {\r\n\t\t\t\t// Check if the element already exists\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (window.customElements.get(name)) {\r\n\t\t\t\t\t\tconsole.log(`Prevented redefinition of custom element: ${name}`);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\t// If any error occurs during the check, proceed with original implementation\r\n\t\t\t\t\tconsole.warn(`Error checking for existing custom element ${name}:`, err);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// For all other elements, use the original method\r\n\t\t\t\treturn originalDefine.call(this, name, constructor, options);\r\n\t\t\t};\r\n\r\n\t\t\tAnimationService.hasPatched = true;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.warn('Failed to patch customElements.define:', error);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static CreateAnimation(htmlContainer: HTMLElement, animationPath: string, loop: boolean, autoplay: boolean, settings: lottie.SVGRendererConfig | lottie.CanvasRendererConfig | lottie.HTMLRendererConfig): lottie.AnimationItem {\r\n\t\t// Apply the patch before creating any animations\r\n\t\tAnimationService.patchCustomElementsRegistry();\r\n\r\n\t\ttry {\r\n\t\t\ttype LottiePlayer = typeof lottie.default;\r\n\t\t\tconst lottiePlayer = lottie as any as LottiePlayer;\r\n\t\t\treturn lottiePlayer.loadAnimation({\r\n\t\t\t\trenderer: 'svg',\r\n\t\t\t\tcontainer: htmlContainer,\r\n\t\t\t\tloop,\r\n\t\t\t\tautoplay,\r\n\t\t\t\tpath: animationPath,\r\n\t\t\t\trendererSettings: settings\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error creating lottie animation:', error);\r\n\r\n\t\t\t// Return minimal mock implementation to prevent further errors\r\n\t\t\treturn {\r\n\t\t\t\tplay: () => { },\r\n\t\t\t\tstop: () => { },\r\n\t\t\t\tpause: () => { },\r\n\t\t\t\tdestroy: () => { },\r\n\t\t\t\taddEventListener: () => function () { },\r\n\t\t\t\tremoveEventListener: () => { },\r\n\t\t\t\thide: () => { },\r\n\t\t\t\tshow: () => { },\r\n\t\t\t} as unknown as lottie.AnimationItem;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initialize the AnimationService by applying the custom elements registry patch\r\n\t * This should be called as early as possible in the application lifecycle\r\n\t */\r\n\tpublic static initialize(): void {\r\n\t\tAnimationService.patchCustomElementsRegistry();\r\n\t}\r\n}","import CameraService, {\r\n\tCameraFacingMode,\r\n} from '../../helpers/classes/CameraService';\r\nimport { DataStore } from '../../helpers/classes/DataStore';\r\nimport EventService from '../../helpers/classes/EventService';\r\nimport { ExceptionManager } from '../../helpers/classes/ExceptionManager';\r\nimport HttpService from '../../helpers/classes/HttpService';\r\nimport LanguageService from '../../helpers/classes/LanguageService';\r\nimport RenderingService from '../../helpers/classes/RenderingService';\r\nimport SocketService from '../../helpers/classes/SocketService';\r\nimport TemplateService from '../../helpers/classes/TemplateService';\r\nimport {\r\n\tallowItems,\r\n\tcontainsItems,\r\n\tremoveItems,\r\n} from '../../helpers/functions/arrays';\r\nimport IdesMicroHost from '../../ides/host';\r\nimport RetinaFactory from '../../retina/factory';\r\nimport { DefaultTemplates } from '../configuration/DefaultTemplates';\r\nimport { HintType, ReticleType } from '../enums/Camera';\r\nimport { FlowState } from '../enums/FlowState';\r\nimport { ChangeMode, InputProvider } from '../enums/InputProvider';\r\nimport { CapturingMedia } from '../enums/JourneyDefinition';\r\nimport { JourneyEvent } from '../enums/JourneyEvent';\r\nimport { JourneyState } from '../enums/JourneyState';\r\nimport { Templates } from '../enums/Templates';\r\nimport { TranslationKey } from '../enums/Translation';\r\nimport { IContainerConfiguration, IManualCaptureConfiguration, IPreviewPagesConfiguration } from '../interfaces/ContainerConfiguration';\r\nimport { ICropResponse } from '../interfaces/CropResponse';\r\nimport { IIdScanData } from '../interfaces/DataFormats';\r\nimport { IJourneyState } from '../interfaces/Journey';\r\nimport { GatewayStep } from '../renderers/step/gateway';\r\nimport { JourneySelectStep } from '../renderers/step/journeySelect';\r\nimport { LivenessStep } from '../renderers/step/liveness';\r\nimport { LoginStep } from '../renderers/step/login';\r\nimport { ResultsStep } from '../renderers/step/results';\r\nimport DataService, { DataStoreType } from './DataService';\r\nimport { Journey } from './Journey';\r\nimport JourneyManager from './JourneyManager';\r\nimport { isMobile, isSafari, isIOS } from '../../helpers/utils/browserDetection';\r\nimport { PassiveLivenessStep } from '../renderers/step/passiveLiveness';\r\nimport { IJourneyDefinition } from '../interfaces/JourneyDefinition';\r\nimport { ScannerProvider } from '../renderers/provider/scanner';\r\nimport { resolve } from 'url';\r\nimport * as deepmerge from 'deepmerge';\r\nimport { DataChecksStep } from '../renderers/step/dataChecks';\r\nimport { TermsAndConditionsStep } from '../renderers/step/termsAndConditions';\r\nimport StorageService from '../../helpers/classes/StorageService';\r\nimport { STORAGE_KEYS } from '../configuration/StorageKeys';\r\n\r\ndeclare var ENV: string;\r\n\r\n// tslint:disable: array-type\r\n\r\n/**\r\n * Primary container for the IDScan Journey\r\n *\r\n * @public\r\n */\r\nexport class JourneyContainer {\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprotected _config: IContainerConfiguration;\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprotected _container: HTMLElement = document.createElement('div');\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprotected _cropResponse?: ICropResponse;\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprotected _journey?: Journey;\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprotected _inputProvider?: InputProvider;\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprotected _providers: InputProvider[] = [];\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprotected _ready: boolean = false;\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprotected _dataStore: DataStore<IIdScanData> = DataService.getDataStore<\r\n\t\tIIdScanData\r\n\t>(DataStoreType.ID_SCAN);\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tprotected _journeyDefinitionId!: string;\r\n\r\n\tprotected _previewPages: IPreviewPagesConfiguration;\r\n\r\n\tprotected _manualCapture: IManualCaptureConfiguration;\r\n\r\n\tprotected assetsFolder: string;\r\n\r\n\tprotected _isPredefinedJourney: boolean = false;\r\n\r\n\tprotected _isTCCAccepted: boolean = false;\r\n\r\n\tprotected _retry: boolean = false;\r\n\r\n\t/**\r\n\t * Primary container for the IDScan Journey\r\n\t */\r\n\tconstructor(config: IContainerConfiguration) {\r\n\t\tthis._config = config;\r\n\t\tthis.assetsFolder = this._config.assetsDirectory === undefined ? 'assets' : this._config.assetsDirectory;\r\n\t\tthis._previewPages = deepmerge(\r\n\t\t\t{\r\n\t\t\t\tdocumentStep: {\r\n\t\t\t\t\tsmartCapture: false,\r\n\t\t\t\t\tmanualCapture: false,\r\n\t\t\t\t\tfileUpload: true\r\n\t\t\t\t},\r\n\t\t\t\tfacematchStep: {\r\n\t\t\t\t\tmanualCapture: false,\r\n\t\t\t\t\tfileUpload: true\r\n\t\t\t\t},\r\n\t\t\t\tpoaStep: {\r\n\t\t\t\t\tmanualCapture: false,\r\n\t\t\t\t\tfileUpload: true\r\n\t\t\t\t},\r\n\t\t\t\tpassiveLivenessStep: {\r\n\t\t\t\t\tmanualCapture: false,\r\n\t\t\t\t},\r\n\t\t\t\tcovidStep: {\r\n\t\t\t\t\tmanualCapture: false,\r\n\t\t\t\t\tfileUpload: true\r\n\t\t\t\t},\r\n\t\t\t\tdataChecksStep: {\r\n\t\t\t\t\tsmartCapture: false,\r\n\t\t\t\t\tmanualCapture: false,\r\n\t\t\t\t\tfileUpload: false\r\n\t\t\t\t}\r\n\t\t\t}, this._config.previewPages !== undefined\r\n\t\t\t? this._config.previewPages\r\n\t\t\t: {});\r\n\t\tthis._manualCapture = deepmerge(\r\n\t\t\t{\r\n\t\t\t\tenabled: false,\r\n\t\t\t\ttimeout: 15\r\n\t\t\t}, this._config.manualCapture !== undefined\r\n\t\t\t? this._config.manualCapture\r\n\t\t\t: {}\r\n\t\t);\r\n\t\tconst {\r\n\t\t\ttemplates = {},\r\n\t\t\ttranslator,\r\n\t\t\tdictionary,\r\n\t\t\toverlay,\r\n\t\t\tcameraOptions,\r\n\t\t} = config;\r\n\r\n\r\n\t\tTemplateService.updateTemplates({ ...DefaultTemplates, ...templates });\r\n\t\tLanguageService.setTranslator(translator);\r\n\t\tLanguageService.setDictionary(dictionary);\r\n\t\tCameraService.setConfiguration({ overlay, cameraOptions });\r\n\t}\r\n\r\n\t/**\r\n\t * Initialise this instance of the `JourneyContainer` and begin the journey\r\n\t * process for the user.\r\n\t *\r\n\t * @returns The instance of the `JourneyContainer` to chain from\r\n\t */\r\n\tpublic initialize = (): Promise<this> => {\r\n\t\tconst { backendUrl, endpoints, container, token, mode, isVerboseLogEnabled, hideLogo } = this._config;\r\n\t\treturn this.setContainer(container)\r\n\t\t\t.then((c) => TemplateService.renderToContainer(c, Templates.Initializing))\r\n\t\t\t.then(() =>\r\n\t\t\t\tJourneyManager.configure({ auth: true, backendUrl, endpoints, mode, isVerboseLogEnabled, hideLogo })\r\n\t\t\t)\r\n\t\t\t.then(() => JourneyManager.initialize({ token }))\r\n\t\t\t.then(() =>\r\n\t\t\t\tPromise.all([\r\n\t\t\t\t\tEventService.subscribe(\r\n\t\t\t\t\t\tJourneyEvent.AUTH_CHANGE,\r\n\t\t\t\t\t\tthis.onAuthStateChanged\r\n\t\t\t\t\t),\r\n\t\t\t\t\t...Object.keys(JourneyEvent).map((key) =>\r\n\t\t\t\t\t\tEventService.subscribe(\r\n\t\t\t\t\t\t\t(JourneyEvent as any)[key],\r\n\t\t\t\t\t\t\tthis.onJourneyEvent(key as JourneyEvent)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t),\r\n\t\t\t\t])\r\n\t\t\t)\r\n\t\t\t.then(() => (this._ready = true))\r\n\t\t\t.then(() => this.evaluate())\r\n\t\t\t.then(() => this);\r\n\t};\r\n\r\n\tpublic getJourneyDefinitions = (): Promise<IJourneyDefinition[]> => {\r\n\t\tconst { backendUrl, endpoints, token, mode, isVerboseLogEnabled, hideLogo } = this._config;\r\n\r\n\t\treturn JourneyManager.configure({ auth: true, backendUrl, endpoints, mode, isVerboseLogEnabled, hideLogo })\r\n\t\t\t.then(() => JourneyManager.initialize({ token }))\r\n\t\t\t.then(() => JourneyManager.getJourneyDefinitions());\r\n\t}\r\n\r\n\tpublic setJourneyDefinitonId = (id: string): Promise<void> =>\r\n\t\tnew Promise((resolve) => {\r\n\t\t\tthis._config.journeyDefinitionId = id;\r\n\t\t\tresolve();\r\n\t\t});\r\n\r\n\r\n\t/**\r\n\t * Changes input provider if the provider selected exists\r\n\t *\r\n\t * @param provider - The `InputProvider` to change to if available\r\n\t * @param force - Force the change even if the provider isn't showing as available\r\n\t *\r\n\t * @returns The new input provider\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tpublic changeInputProvider = (\r\n\t\tprovider: InputProvider = InputProvider.NONE,\r\n\t\tmode: ChangeMode = ChangeMode.DEFAULT\r\n\t): Promise<InputProvider> =>\r\n\t\tnew Promise((resolve, reject) => {\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase ChangeMode.DEFAULT:\r\n\t\t\t\t\treturn this._providers.indexOf(provider) >= 0\r\n\t\t\t\t\t\t? resolve((this._inputProvider = provider))\r\n\t\t\t\t\t\t: reject(\r\n\t\t\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\t\t\tnew ExceptionManager.UnavailableInputProviderException(\r\n\t\t\t\t\t\t\t\t\tTranslationKey.EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NOT_AVAILABLE\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\tcase ChangeMode.FALLBACK:\r\n\t\t\t\t\treturn resolve(\r\n\t\t\t\t\t\t(this._inputProvider =\r\n\t\t\t\t\t\t\tthis._providers.indexOf(provider) >= 0\r\n\t\t\t\t\t\t\t\t? provider\r\n\t\t\t\t\t\t\t\t: this._providers[0])\r\n\t\t\t\t\t);\r\n\t\t\t\tcase ChangeMode.FORCE:\r\n\t\t\t\t\treturn resolve((this._inputProvider = provider));\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn reject(\r\n\t\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\t\tnew ExceptionManager.UnavailableInputProviderException(\r\n\t\t\t\t\t\t\t\tTranslationKey.EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NOT_AVAILABLE\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t/**\r\n\t * Terminate this instance of the `JourneyContainer`. This un-subscribes all\r\n\t * event handlers throughout the system then terminates the journey.\r\n\t *\r\n\t * NOTE: To terminate the journey, the `terminateJourney` function is\r\n\t *       automatically called and should not be called beforehand. If you\r\n\t *       only want to terminate the journey, call this method instead.\r\n\t *\r\n\t * @returns Promise to chain from\r\n\t */\r\n\tpublic terminate = () => {\r\n\t\tEventService.terminate()\r\n\t\t\t.then(() => IdesMicroHost.destroyWorker())\r\n\t\t\t.then(() => this.terminateJourney());\r\n\t};\r\n\r\n\t/**\r\n\t * Terminate the current journey and halt the retina service currently\r\n\t * associated with it.\r\n\t *\r\n\t * @returns Promise to chain from\r\n\t */\r\n\tpublic terminateJourney = () =>\r\n\t\tSocketService.resetTerminal()\r\n\t\t\t.catch(() => {\r\n\t\t\t\t/* NO-OP */\r\n\t\t\t})\r\n\t\t\t.then(() => CameraService.stopStreaming())\r\n\t\t\t.catch(() => {\r\n\t\t\t\t/* NO-OP */\r\n\t\t\t})\r\n\t\t\t.then(() => this._journey && this._journey.cancel())\r\n\t\t\t.then(() => this.clearJourney())\r\n\t\t\t.then(() => RetinaFactory.terminateService());\r\n\r\n\t/**\r\n\t * Get the current state of the journey\r\n\t *\r\n\t * @returns The current state of the journey as an `IJourneyState`\r\n\t */\r\n\tpublic getJourneyState = (): IJourneyState => {\r\n\t\treturn {\r\n\t\t\tjourney: this._dataStore.getState(),\r\n\t\t\tinputProvider: this._inputProvider\r\n\t\t\t\t? this._inputProvider\r\n\t\t\t\t: InputProvider.NONE,\r\n\t\t\t// TODO: This needs populating\r\n\t\t\tpage: Templates.None,\r\n\t\t\t...(this._journey\r\n\t\t\t\t? this._journey.getState()\r\n\t\t\t\t: {\r\n\t\t\t\t\taction: FlowState.NONE,\r\n\t\t\t\t\tactionAttempt: 0,\r\n\t\t\t\t}),\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Does the current journey configuration require the use of a camera?\r\n\t *\r\n\t * @remarks This will only review the requirement of a camera for normal\r\n\t * \t\t\tdocument upload, not the use of liveness as it's not always\r\n\t * \t\t\tpossible to assert this.\r\n\t *\r\n\t * @public\r\n\t */\r\n\tpublic requiresCamera = (): boolean =>\r\n\t\t[\r\n\t\t\tInputProvider.CAMERA,\r\n\t\t\tInputProvider.SMART_CAPTURE,\r\n\t\t\tInputProvider.LIVENESS,\r\n\t\t].indexOf(this._inputProvider!) >= 0;\r\n\r\n\t/**\r\n\t * Get the allowed file formats as specified by the provided configuration\r\n\t * or the defaults if not provided.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tpublic getAllowedFileFormats(this: JourneyContainer): string[] {\r\n\t\tvar allowedTypes = [\r\n\t\t\t'image/bmp',\r\n\t\t\t'image/jpg',\r\n\t\t\t'image/jpeg',\r\n\t\t\t'image/png',\r\n\t\t\t'application/pdf',\r\n\t\t];\r\n\t\tif (this._journey!.action == FlowState.SELFIE) {\r\n\t\t\tallowedTypes = [\r\n\t\t\t\t'image/bmp',\r\n\t\t\t\t'image/jpg',\r\n\t\t\t\t'image/jpeg',\r\n\t\t\t\t'image/png',\r\n\t\t\t]\r\n\t\t}\r\n\t\tconst {\r\n\t\t\tallowedFileFormats = allowedTypes,\r\n\t\t} = this._config;\r\n\t\treturn allowedFileFormats;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get a list of the currently available providers\r\n\t */\r\n\tpublic getAvailableProviders = () => [...this._providers];\r\n\r\n\t/**\r\n\t * Calculates the current state in the journey based on several parameters\r\n\t * and alters the UI accordingly.\r\n\t *\r\n\t * @returns Promise to chain from\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprotected evaluate = (isFromTripleScanGuidancePage: boolean = false, isPredefinedJourney: boolean = false, selectedInputProvider: InputProvider = InputProvider.NONE): Promise<void> =>\r\n\t\tthis.getJourney()\r\n\t\t\t.then((journey) => {\r\n\t\t\t\tthis._isPredefinedJourney = isPredefinedJourney;\r\n\r\n\t\t\t\tif (ENV === 'DEVELOPMENT') {\r\n\t\t\t\t\tconsole.log(`********* Current step ${journey.action} *********`);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tjourney.status === JourneyState.ENDED ||\r\n\t\t\t\t\tjourney.action === FlowState.LIVENESS ||\r\n\t\t\t\t\tjourney.action === FlowState.PASSIVE_LIVENESS ||\r\n\t\t\t\t\tjourney.action === FlowState.SELFIE ||\r\n\t\t\t\t\tjourney.action === FlowState.ADDRESS ||\r\n\t\t\t\t\tjourney.action === FlowState.COVIDPASS ||\r\n\t\t\t\t\tjourney.action === FlowState.DATACHECKS\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn SocketService.resetTerminal()\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t/* NO-OP */\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => journey);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn journey;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then((journey) => {\r\n\t\t\t\tjourney\r\n\t\t\t\tif (this._ready === true) {\r\n\t\t\t\t\tif (HttpService.auth === false) {\r\n\t\t\t\t\t\treturn LoginStep.render.call(this);\r\n\t\t\t\t\t} else if (!this._journeyDefinitionId) {\r\n\t\t\t\t\t\treturn JourneySelectStep.render.call(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (!this._journeyDefinitionId && !this._journeyDefinitionId) {\r\n\t\t\t\t\t\treturn JourneySelectStep.render.call(this);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (!this._isTCCAccepted && !journey.isCancelled)\r\n\t\t\t\t\t\t\treturn TermsAndConditionsStep.render.call(this);\r\n\r\n\t\t\t\t\t\tif (journey.status === JourneyState.ENDED) {\r\n\t\t\t\t\t\t\treturn ResultsStep.render.call(this);\r\n\t\t\t\t\t\t} else if (journey.action === FlowState.LIVENESS) {\r\n\t\t\t\t\t\t\treturn LivenessStep.render\r\n\t\t\t\t\t\t\t\t.call(this)\r\n\t\t\t\t\t\t\t\t.then(() => this.updateJourneyFields())\r\n\t\t\t\t\t\t\t\t.then(() => this.hookGlobalButtons());\r\n\t\t\t\t\t\t} else if (journey.action === FlowState.PASSIVE_LIVENESS) {\r\n\t\t\t\t\t\t\treturn PassiveLivenessStep.render\r\n\t\t\t\t\t\t\t\t.call(this)\r\n\t\t\t\t\t\t\t\t.then(() => this.updateJourneyFields())\r\n\t\t\t\t\t\t\t\t.then(() => this.hookGlobalButtons());\r\n\t\t\t\t\t\t} else if (journey.action === FlowState.DATACHECKS) {\r\n\t\t\t\t\t\t\treturn DataChecksStep.render\r\n\t\t\t\t\t\t\t\t.call(this)\r\n\t\t\t\t\t\t\t\t.then(() => this.updateJourneyFields())\r\n\t\t\t\t\t\t\t\t.then(() => this.hookGlobalButtons());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn GatewayStep.render\r\n\t\t\t\t\t\t\t\t.call(this, isFromTripleScanGuidancePage, isPredefinedJourney, selectedInputProvider)\r\n\t\t\t\t\t\t\t\t.then(() => this.updateJourneyFields())\r\n\t\t\t\t\t\t\t\t.then(() => this.hookGlobalButtons());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tif (HttpService.auth === false) {\r\n\t\t\t\t\treturn LoginStep.render.call(this);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t/**\r\n\t * Clears the current journey and removes associated data\r\n\t *\r\n\t * @returns Promise to chain from\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprotected clearJourney = (): Promise<void> => {\r\n\t\tthis._journey = undefined;\r\n\t\tthis._cropResponse = undefined;\r\n\t\tStorageService.remove(STORAGE_KEYS.journeyId);\r\n\t\tthis._dataStore.reset();\r\n\t\treturn EventService.publish(JourneyEvent.JOURNEY_CLEAR, {\r\n\t\t\tstep: Templates.Result,\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Creates a journey and assigns it as the main journey in this instance.\r\n\t *\r\n\t * @returns The current journey\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprotected getJourney = (): Promise<Journey> => {\r\n\t\tif (this._journey) {\r\n\t\t\treturn Promise.resolve(this._journey);\r\n\t\t} else {\r\n\t\t\tconst _id =\r\n\t\t\t\twindow && (window as any).jcs__id__box\r\n\t\t\t\t\t? (window as any).jcs__id__box\r\n\t\t\t\t\t: undefined;\r\n\r\n\t\t\treturn JourneyManager.createJourney(\r\n\t\t\t\t_id,\r\n\t\t\t\tthis._config.additionalData\r\n\t\t\t).then((journey) => (this._journey = journey));\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Update the UI to represent the current state of the journey\r\n\t *\r\n\t * @returns Promise<void>\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprotected hookGlobalButtons = (isDisplay: boolean = true): Promise<void> =>\r\n\t\tTemplateService.getElements(this._container, {\r\n\t\t\tcancel: '[data-jcs-element=\"cancel__journey\"]',\r\n\t\t}).then(({ cancel }) => {\r\n\t\t\tif (cancel instanceof HTMLElement) {\r\n\r\n\t\t\t\tif (!isDisplay) { RenderingService.hideObject(cancel); }\r\n\r\n\t\t\t\tcancel.addEventListener('click', () =>\r\n\t\t\t\t\tSocketService.resetTerminal()\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t/* NO-OP */\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => SocketService.release())\r\n\t\t\t\t\t\t.then(() => CameraService.stopStreaming())\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t/* NO-OP */\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => this._journey && this._journey!.cancel())\r\n\t\t\t\t\t\t.then(() => RetinaFactory.terminateService())\r\n\t\t\t\t\t\t.then(() => this.evaluate())\r\n\t\t\t\t);\r\n\t\t\t\tif (SocketService && SocketService.state === 1)\r\n\t\t\t\t\treturn ScannerProvider.startSocket.call(this);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t/**\r\n\t * Update the UI to represent the current state of the journey\r\n\t *\r\n\t * @returns Promise<void>\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprotected updateJourneyFields = (): Promise<void> =>\r\n\t\tTemplateService.getElements(this._container, {\r\n\t\t\taction: '[data-jcs-element=\"info__journey__action\"]',\r\n\t\t\tactionContainer: '[data-jcs-element=\"info__journey__action__container\"]',\r\n\t\t\tattempt: '[data-jcs-element=\"info__journey__action__attempt\"]',\r\n\t\t\tid: '[data-jcs-element=\"info__journey__id\"]',\r\n\t\t}).then(({ id, action, actionContainer, attempt }) => {\r\n\t\t\tif (this._journey) {\r\n\t\t\t\tRenderingService.setText(id, this._journey.id.substr(0, 8));\r\n\t\t\t\tRenderingService.setText(attempt, String(this._journey.actionAttempt));\r\n\t\t\t\tRenderingService.setText(\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tLanguageService.getTranslation(\r\n\t\t\t\t\t\t`FLOW_STATE_${this._journey.action}` as TranslationKey\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t/**\r\n\t * Change the camera the images are currently being streamed from. If no\r\n\t * deviceId is defined, the first camera will be used.\r\n\t *\r\n\t * @param deviceId - The id of the camera to change the stream for to\r\n\t *\r\n\t * @returns Promise resolving with the deviceId for the camera in use\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprotected changeCameraStream = (\r\n\t\tdeviceId?: string,\r\n\t\treticleType: ReticleType = ReticleType.NONE,\r\n\t\twatermark: boolean = false,\r\n\t\thintType: HintType = HintType.NONE,\r\n\t\tmirror: boolean | undefined = undefined,\r\n\t\tfacingMode?: CameraFacingMode\r\n\t): Promise<string | undefined> =>\r\n\t\tTemplateService.getElements(this._container, {\r\n\t\t\tcameraViewfinder: '[data-jcs-element=\"camera__viewfinder\"]',\r\n\t\t\tstatus: '[data-jcs-element=\"view__status\"]',\r\n\t\t\tstatusMessage: '[data-jcs-element=\"view__status__message\"]',\r\n\t\t})\r\n\t\t\t.then(({ cameraViewfinder, status, statusMessage, }) => {\r\n\t\t\t\tRenderingService.hideObject(status);\r\n\t\t\t\tif (cameraViewfinder instanceof HTMLCanvasElement) {\r\n\t\t\t\t\treturn CameraService.stopStreaming()\r\n\t\t\t\t\t\t.then(() => CameraService.clearCanvas(cameraViewfinder))\r\n\t\t\t\t\t\t.then(() =>\r\n\t\t\t\t\t\t\tEventService.publish(JourneyEvent.CAMERA_CHANGE, {\r\n\t\t\t\t\t\t\t\tcamera: deviceId,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.then(() => CameraService.getStream(deviceId, facingMode))\r\n\t\t\t\t\t\t.then((stream) =>\r\n\t\t\t\t\t\t\tCameraService.renderStreamToElement(stream, cameraViewfinder, {\r\n\t\t\t\t\t\t\t\treticleType,\r\n\t\t\t\t\t\t\t\thintType,\r\n\t\t\t\t\t\t\t\twatermark,\r\n\t\t\t\t\t\t\t\tmirror\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t).catch((error) => {\r\n\t\t\t\t\t\t\tif (error.message == 'EXCEPTION_PLATFORM_CAMERA_NOT_READABLE') {\r\n\t\t\t\t\t\t\t\t// camera stream can not be read, might be in use by another application\r\n\t\t\t\t\t\t\t\tRenderingService.showObject(status as HTMLElement);\r\n\t\t\t\t\t\t\t\tRenderingService.setText(statusMessage as HTMLElement, LanguageService.getTranslation(TranslationKey.EXCEPTION_PLATFORM_CAMERA_NOT_READABLE));\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => CameraService.currentDeviceId);\r\n\r\n\t/**\r\n\t * Freezes the image in the canvas, stopping the streaming.\r\n\t */\r\n\tprotected freezeCameraStream = (): Promise<void> =>\r\n\t\tTemplateService.getElements(this._container, {\r\n\t\t\tcameraViewfinder: '[data-jcs-element=\"camera__viewfinder\"]',\r\n\t\t}).then(({ cameraViewfinder }) => {\r\n\t\t\tif (cameraViewfinder instanceof HTMLCanvasElement) {\r\n\t\t\t\tconst context = cameraViewfinder.getContext('2d');\r\n\t\t\t\tif (context) {\r\n\t\t\t\t\tCameraService.getImageFromCurrentStream().then((data) => {\r\n\t\t\t\t\t\tconst img = new Image();\r\n\t\t\t\t\t\timg.src = data;\r\n\t\t\t\t\t\tcontext.drawImage(img, 0, 0);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn CameraService.stopStreaming();\r\n\t\t\t} else {\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t/**\r\n\t * Checks whether the base64 string is valid or not\r\n\t *\r\n\t * @param base64 - The string to validate\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprotected assertImageExists = (base64: string) =>\r\n\t\tnew Promise<void>((resolve, reject) => {\r\n\t\t\tif (\r\n\t\t\t\tbase64 === undefined ||\r\n\t\t\t\tbase64 === null ||\r\n\t\t\t\ttypeof base64 !== 'string'\r\n\t\t\t) {\r\n\t\t\t\treturn reject(\r\n\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\tnew ExceptionManager.BadRequestException(\r\n\t\t\t\t\t\t\tTranslationKey.EXCEPTION_BAD_REQUEST_INVALID_IMAGE\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\treturn resolve();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t/**\r\n\t * Renders the currently available cameras into the specified element and\r\n\t * sets the currently used/active camera in the element.\r\n\t *\r\n\t * @param el - HTMLSelectElement to render the camera names into\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprotected renderAvailableCameras = (el?: HTMLSelectElement) =>\r\n\t\tCameraService.getVideoCameras()\r\n\t\t\t.then((cameras) =>\r\n\t\t\t\tcameras.map((camera) => ({\r\n\t\t\t\t\tname: camera.label,\r\n\t\t\t\t\tvalue: camera.deviceId,\r\n\t\t\t\t\tselected: CameraService.currentDeviceId === camera.deviceId,\r\n\t\t\t\t}))\r\n\t\t\t)\r\n\t\t\t.then((cameras) => {\r\n\t\t\t\tRenderingService.updateSelect(el, cameras);\r\n\t\t\t\tif (cameras && cameras.length > 1) {\r\n\t\t\t\t\tRenderingService.showObject(el);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tRenderingService.hideObject(el);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t/**\r\n\t * Sets the available providers\r\n\t *\r\n\t * @returns Promise for chaining\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprotected setProviders = (\r\n\t\tmedia: CapturingMedia,\r\n\t\tisPredefinedJourney: boolean = false\r\n\t): Promise<Array<InputProvider>> =>\r\n\t\tnew Promise((resolve, reject) => {\r\n\t\t\tconst providers = this.parseProvidersFromCapturingMedia(media, isPredefinedJourney);\r\n\t\t\treturn Promise.resolve()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tallowedInputProviders = Object.keys(InputProvider),\r\n\t\t\t\t\t} = this._config;\r\n\r\n\t\t\t\t\treturn allowItems(providers, allowedInputProviders);\r\n\t\t\t\t})\r\n\t\t\t\t.then(() =>\r\n\t\t\t\t\t!!(window as any).Worker\r\n\t\t\t\t\t\t? providers\r\n\t\t\t\t\t\t: removeItems(providers, [InputProvider.SMART_CAPTURE])\r\n\t\t\t\t)\r\n\t\t\t\t.then(() =>\r\n\t\t\t\t\t!!(window as any).WebAssembly\r\n\t\t\t\t\t\t? providers\r\n\t\t\t\t\t\t: removeItems(providers, [InputProvider.SMART_CAPTURE])\r\n\t\t\t\t)\r\n\t\t\t\t.then(\r\n\t\t\t\t\t(): Promise<Array<InputProvider>> => {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tcontainsItems(providers, [\r\n\t\t\t\t\t\t\t\tInputProvider.CAMERA,\r\n\t\t\t\t\t\t\t\tInputProvider.SMART_CAPTURE,\r\n\t\t\t\t\t\t\t\tInputProvider.LIVENESS,\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn CameraService.doDeviceProbe().then(() => {\r\n\t\t\t\t\t\t\t\tif (CameraService.hasDeviceCapableOfResolution()) {\r\n\t\t\t\t\t\t\t\t\treturn providers;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn removeItems(providers, [\r\n\t\t\t\t\t\t\t\t\t\tInputProvider.CAMERA,\r\n\t\t\t\t\t\t\t\t\t\tInputProvider.SMART_CAPTURE,\r\n\t\t\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn Promise.resolve(providers);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tif (providers.length) {\r\n\t\t\t\t\t\treturn resolve((this._providers = providers));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn reject(\r\n\t\t\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\t\t\tnew ExceptionManager.UnavailableInputProviderException(\r\n\t\t\t\t\t\t\t\t\tTranslationKey.EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NONE_SPECIFIED\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() =>\r\n\t\t\t\t\treject(\r\n\t\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\t\tnew ExceptionManager.UnavailableInputProviderException(\r\n\t\t\t\t\t\t\t\tTranslationKey.EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_CANNOT_RETRIEVE\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t});\r\n\r\n\t/**\r\n\t * Trigger proxy for the journey event callback\r\n\t *\r\n\t * @param key - The key to report on\r\n\t *\r\n\t * @returns Function for passing event data into with the referenced key as the first parameter\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprivate onJourneyEvent = (key: JourneyEvent) => (eventData: any) => {\r\n\t\tconst {\r\n\t\t\tonJourneyEvent = () => {\r\n\t\t\t\t/* NO-OP */\r\n\t\t\t},\r\n\t\t} = this._config;\r\n\r\n\t\tonJourneyEvent(\r\n\t\t\t(JourneyEvent as any)[key],\r\n\t\t\teventData,\r\n\t\t\tthis.getJourneyState()\r\n\t\t);\r\n\t};\r\n\r\n\t/**\r\n\t * Set the container to use for the lifetime of this instance.\r\n\t *\r\n\t * NOTE: This should not be changed once the instance has been initialised\r\n\t *       as references to objects will be destroyed. If the component needs\r\n\t *       to be changed, the `JourneyContainer` should be terminated and\r\n\t *       reinitialized instead.\r\n\t *\r\n\t * @returns Promise resolving with the specified container for chaining\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprivate setContainer = (\r\n\t\tcontainer: string | HTMLElement\r\n\t): Promise<HTMLElement> =>\r\n\t\tnew Promise((resolve, reject) => {\r\n\t\t\tif (typeof container === 'string') {\r\n\t\t\t\tconst _container = RenderingService.getElementBySelector(container);\r\n\r\n\t\t\t\tif (_container instanceof HTMLElement) {\r\n\t\t\t\t\t_container.setAttribute('wsdk-container', '');\r\n\t\t\t\t\treturn resolve((this._container = _container));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn reject(\r\n\t\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\t\tnew ExceptionManager.TemplateException(\r\n\t\t\t\t\t\t\t\tTranslationKey.EXCEPTION_TEMPLATE_CONTAINER_MISSING\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else if (container instanceof HTMLElement) {\r\n\t\t\t\tcontainer.setAttribute('wsdk-container', '');\r\n\t\t\t\treturn resolve((this._container = container));\r\n\t\t\t} else {\r\n\t\t\t\treturn reject(\r\n\t\t\t\t\tExceptionManager.process(\r\n\t\t\t\t\t\tnew ExceptionManager.InvalidParameterException(\r\n\t\t\t\t\t\t\tTranslationKey.EXCEPTION_INVALID_PARAMETER_SHOULD_BE_ELEMENT_OR_SELECTOR\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t/**\r\n\t * Activates the new auth state and reinitializes the rendering process.\r\n\t *\r\n\t * @param state - Object containing the new `authorized` state to use\r\n\t *\r\n\t * @returns Promise for chaining\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprivate onAuthStateChanged = ({ authorized }: { authorized: boolean }) =>\r\n\t\tthis.evaluate().catch(() =>\r\n\t\t\tconsole.error('onAuthStateChanged', authorized)\r\n\t\t);\r\n\r\n\t/**\r\n\t * @param media - The CapturingMedia value to use\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprivate parseProvidersFromCapturingMedia = (media: CapturingMedia, isPredefinedJourney: boolean = false) => {\r\n\t\tswitch (media) {\r\n\t\t\tcase CapturingMedia.FileUpload:\r\n\t\t\t\treturn [InputProvider.FILESYSTEM];\r\n\r\n\t\t\tcase CapturingMedia.Camera:\r\n\t\t\t\treturn [InputProvider.CAMERA, InputProvider.FILESYSTEM];\r\n\r\n\t\t\tcase CapturingMedia.WebCamera:\r\n\t\t\t\t{\r\n\t\t\t\t\tif (isPredefinedJourney) {\r\n\t\t\t\t\t\treturn [\r\n\t\t\t\t\t\t\tInputProvider.SMART_CAPTURE,\r\n\t\t\t\t\t\t\tInputProvider.CAMERA,\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn [\r\n\t\t\t\t\t\t\tInputProvider.SMART_CAPTURE,\r\n\t\t\t\t\t\t\tInputProvider.CAMERA,\r\n\t\t\t\t\t\t\tInputProvider.FILESYSTEM,\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\tcase CapturingMedia.Scanner:\r\n\t\t\t\treturn [InputProvider.SCANNER, InputProvider.FILESYSTEM, InputProvider.CAMERA];\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn [];\r\n\t\t}\r\n\t};\r\n}\r\n","import CameraService, { CameraPermissionState, CameraFacingMode } from '../../../helpers/classes/CameraService';\r\nimport EventService from '../../../helpers/classes/EventService';\r\nimport { ImageService } from '../../../helpers/classes/ImageService';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { retryOperationWithTimeout, wait } from '../../../helpers/functions/functions';\r\nimport IdesMicroHost from '../../../ides/host';\r\nimport { IImageResult, IImageCounter } from '../../../ides/interfaces/image';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport { HintType, ReticleType } from '../../enums/Camera';\r\nimport { InputProvider } from '../../enums/InputProvider';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { ImageProvider } from '../provider/image';\r\nimport { IMetaData } from '../../interfaces/MetaData';\r\nimport * as lottie from 'lottie-web/build/player/lottie';\r\nimport { FlowState } from '../../enums/FlowState';\r\nimport CancellationToken from 'cancellationtoken';\r\nimport { SmartCaptureFailingReasons } from '../../../helpers/enums/smartCaptureFailingReasons';\r\nimport { RequiredInputImage } from '../../enums/RequiredInputImage';\r\nimport DataService, { DataStoreType } from '../../classes/DataService';\r\nimport { IIdScanData } from '../../interfaces/DataFormats';\r\nimport { AnimationService } from '../../../helpers/classes/AnimationService';\r\nimport { TripleScanGuidanceProvider } from './triple-scan-guidance';\r\n\r\ndeclare var ENV: string;\r\nexport class SmartCaptureProvider {\r\n\r\n\tpublic static render(this: JourneyContainer, isFromTripleScanGuidancePage: boolean = false, isPredefinedJourney: boolean = false) {\r\n\t\tconst { recaptureDelay = 5, workerScriptUrl = './ides-micro.js', asmScriptUrl = './idesmicro_asm.js', timeout = 60000, timeLogsEnabled = true, autoStart = false } = this._config.smartCapture || {};\r\n\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tproviderContainer: '[data-jcs-element=\"provider__container\"]',\r\n\t\t})\r\n\t\t\t.then(({ providerContainer }) => TemplateService.renderToContainer(providerContainer, Templates.SmartCapture))\r\n\t\t\t.then(() => TemplateService.getElements(this._container, {\r\n\t\t\t\tcameraStatus: '[data-jcs-element=\"camera__status\"]',\r\n\t\t\t\tcameraCapture: '[data-jcs-element=\"camera__capture\"]',\r\n\t\t\t\tcameraViewfinder: '[data-jcs-element=\"camera__viewfinder\"]',\r\n\t\t\t\tcameraViewfinderInnerContainer: '[data-jcs-element=\"camera__viewfinder__inner__container\"]',\r\n\t\t\t\tcameraSelect: '[data-jcs-element=\"camera__select\"]',\r\n\t\t\t\terrorImg: '[data-jcs-element=\"canvas__condition__error\"]',\r\n\t\t\t\talignment: '[data-jcs-element=\"camera__condition__alignment\"]',\r\n\t\t\t\tblur: '[data-jcs-element=\"camera__condition__blur\"]',\r\n\t\t\t\tuploading: '[data-jcs-element=\"camera__condition__uploading\"]',\r\n\t\t\t\tglare: '[data-jcs-element=\"camera__condition__glare\"]',\r\n\t\t\t\tlowResolution: '[data-jcs-element=\"camera__condition__low__resolution\"]',\r\n\t\t\t\tactionContainer: '[data-jcs-element=\"info__journey__action__container\"]',\r\n\t\t\t\tactionText: '[data-jcs-element=\"info__journey__action__text\"]',\r\n\t\t\t\thintAnimationContainer: '[data-jcs-element=\"animation__viewfinder\"]',\r\n\t\t\t\tcameraOverlay: '[data-jcs-element=\"overlay_viewfinder\"]',\r\n\t\t\t\tloadingAnimationContainer: '[data-jcs-element=\"loading-animation\"]',\r\n\t\t\t\tverifyingAnimation: '[data-jcs-element=\"verifying__title\"]',\r\n\t\t\t\tmanualCaptureButton: '[data-jcs-element=\"camera__manual__capture\"]',\r\n\t\t\t\tmodalManualCaptureButton: '[data-jcs-element=\"capture__modal__camera__manual__capture\"]',\r\n\t\t\t\tmodalManualCaptureText: '[data-jcs-element=\"capture__modal__manual__capture__text\"]',\r\n\t\t\t\tmanualCaptureCheck: '[data-jcs-element=\"camera__manual__capture__check\"]',\r\n\t\t\t\tmodalManualCaptureCheck: '[data-jcs-element=\"capture__modal__camera__manual__capture__check\"]',\r\n\t\t\t\tcloseHelp: '[data-jcs-element=\"smart__capture__close__help\"]',\r\n\t\t\t\topenHelp: '[data-jcs-element=\"smart__capture__open__help\"]',\r\n\t\t\t\thelpContainer: '[data-jcs-element=\"capture__help__container\"]',\r\n\t\t\t\tmodalClose: '[data-jcs-element=\"smart__capture__modal__close__help\"]',\r\n\t\t\t\tmodalGlareContainer: '[data-jcs-element=\"modal__glare__animation__container\"]',\r\n\t\t\t\tmodalLowResContainer: '[data-jcs-element=\"modal__low__res__animation__container\"]',\r\n\t\t\t\tmodalBlurContainer: '[data-jcs-element=\"modal__blur__animation__container\"]',\r\n\t\t\t\tcameraConditionsContainer: '[data-jcs-element=\"camera__conditions\"]',\r\n\t\t\t\tconditionDetailContainer: '[data-jcs-element=\"camera__condition__detail\"]',\r\n\t\t\t\tattemptCountContainer: '[data-jcs-element=\"attempt__count__container\"]',\r\n\t\t\t\tattemptCounter: '[data-jcs-element=\"attempt__counter\"]',\r\n\t\t\t\tcameraCaptureHint: '[data-jcs-element=\"camera__capture__hint\"]',\r\n\t\t\t}))\r\n\t\t\t.then(({ cameraStatus, cameraCapture, cameraViewfinder, cameraViewfinderInnerContainer, cameraSelect, errorImg, alignment, blur, uploading, glare, lowResolution, actionContainer, actionText, hintAnimationContainer, cameraOverlay, loadingAnimationContainer, verifyingAnimation, manualCaptureButton, modalManualCaptureButton, modalManualCaptureText, manualCaptureCheck, modalManualCaptureCheck, closeHelp, openHelp, helpContainer, modalClose, modalGlareContainer, modalLowResContainer, modalBlurContainer, cameraConditionsContainer, conditionDetailContainer, attemptCountContainer, attemptCounter, cameraCaptureHint }) => {\r\n\t\t\t\tRenderingService.hideObject(cameraSelect);\r\n\t\t\t\tRenderingService.hideObject(errorImg);\r\n\t\t\t\tRenderingService.hideObject(alignment);\r\n\t\t\t\tRenderingService.hideObject(blur);\r\n\t\t\t\tRenderingService.hideObject(uploading);\r\n\t\t\t\tRenderingService.hideObject(glare);\r\n\t\t\t\tRenderingService.hideObject(lowResolution);\r\n\t\t\t\tRenderingService.hideObject(actionContainer);\r\n\t\t\t\tRenderingService.hideObject(hintAnimationContainer);\r\n\t\t\t\tRenderingService.hideObject(manualCaptureButton);\r\n\t\t\t\tRenderingService.hideObject(helpContainer);\r\n\t\t\t\tRenderingService.hideObject(closeHelp);\r\n\t\t\t\tRenderingService.hideObject(modalManualCaptureButton);\r\n\t\t\t\tRenderingService.hideObject(modalManualCaptureText);\r\n\t\t\t\tRenderingService.hideObject(cameraConditionsContainer);\r\n\t\t\t\tRenderingService.hideObject(loadingAnimationContainer);\r\n\t\t\t\tRenderingService.hideObject(verifyingAnimation);\r\n\t\t\t\tif (this._config.smartCapture?.autoStart)\r\n\t\t\t\t\tRenderingService.hideObject(cameraCapture);\r\n\r\n\t\t\t\tSmartCaptureProvider.loadingAnimation = AnimationService.CreateAnimation(loadingAnimationContainer as HTMLDivElement, this.assetsFolder + '/animations/loading.json', true, true, {});\r\n\r\n\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLInputElement, false);\r\n\t\t\t\tRenderingService.setEnabled(cameraSelect as HTMLSelectElement, false);\r\n\r\n\t\t\t\tif (this._journey) {\r\n\t\t\t\t\tif (this._journey.actionAttempt > 1 &&\r\n\t\t\t\t\t\tthis._config.tripleScanGuidancePage && ((this._journey.action === FlowState.IDENTITY_BACK) || (this._journey.action === FlowState.IDENTITY_FRONT)) && !isFromTripleScanGuidancePage) {\r\n\r\n\t\t\t\t\t\tTripleScanGuidanceProvider.render.call(this, InputProvider.SMART_CAPTURE);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tisFromTripleScanGuidancePage = false;\r\n\t\t\t\t\t\tswitch (this._journey.actionAttempt) {\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '2');\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '1');\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tRenderingService.hideObject(attemptCountContainer);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this._journey.action === FlowState.IDENTITY_FRONT) {\r\n\t\t\t\t\t\t\tRenderingService.setText(actionText, LanguageService.getTranslation(TranslationKey.CAMERA_CAPTURE_FRONT));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this._journey.action === FlowState.IDENTITY_BACK) {\r\n\t\t\t\t\t\t\tRenderingService.setText(actionText, LanguageService.getTranslation(TranslationKey.CAMERA_CAPTURE_BACK));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (manualCaptureCheck instanceof HTMLInputElement) {\r\n\t\t\t\t\tmanualCaptureCheck.addEventListener('change', async () => {\r\n\t\t\t\t\t\tSmartCaptureProvider.smartCaptureCancel(SmartCaptureFailingReasons.ManualInputProviderChange);\r\n\t\t\t\t\t\tthis._inputProvider = manualCaptureCheck.checked ? InputProvider.CAMERA : InputProvider.SMART_CAPTURE;\r\n\t\t\t\t\t\tawait CameraService.stopStreaming();\r\n\t\t\t\t\t\tawait this.evaluate(true, isPredefinedJourney, this._inputProvider);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (modalManualCaptureCheck instanceof HTMLInputElement) {\r\n\t\t\t\t\tmodalManualCaptureCheck.addEventListener('change', async () => {\r\n\t\t\t\t\t\tSmartCaptureProvider.smartCaptureCancel(SmartCaptureFailingReasons.ManualInputProviderChange);\r\n\t\t\t\t\t\tthis._inputProvider = modalManualCaptureCheck.checked ? InputProvider.CAMERA : InputProvider.SMART_CAPTURE;\r\n\t\t\t\t\t\tawait CameraService.stopStreaming();\r\n\t\t\t\t\t\tawait this.evaluate(true, isPredefinedJourney, this._inputProvider);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (openHelp instanceof HTMLElement) {\r\n\t\t\t\t\topenHelp.addEventListener('click', () => {\r\n\t\t\t\t\t\tRenderingService.showObject(helpContainer);\r\n\t\t\t\t\t\tRenderingService.showObject(closeHelp);\r\n\t\t\t\t\t\tRenderingService.hideObject(openHelp);\r\n\t\t\t\t\t\tSmartCaptureProvider.glareAnimation = AnimationService.CreateAnimation(modalGlareContainer as HTMLElement, this.assetsFolder + '/animations/glare.json', true, true, {});\r\n\t\t\t\t\t\tSmartCaptureProvider.blurAnimation = AnimationService.CreateAnimation(modalBlurContainer as HTMLElement, this.assetsFolder + '/animations/blur.json', true, true, {});\r\n\t\t\t\t\t\tSmartCaptureProvider.lowResAnimation = AnimationService.CreateAnimation(modalLowResContainer as HTMLElement, this.assetsFolder + '/animations/low-res.json', true, true, {});\r\n\t\t\t\t\t\tSmartCaptureProvider.glareAnimation.show();\r\n\t\t\t\t\t\tSmartCaptureProvider.glareAnimation.play();\r\n\t\t\t\t\t\tSmartCaptureProvider.blurAnimation.show();\r\n\t\t\t\t\t\tSmartCaptureProvider.blurAnimation.play();\r\n\t\t\t\t\t\tSmartCaptureProvider.lowResAnimation.show();\r\n\t\t\t\t\t\tSmartCaptureProvider.lowResAnimation.play();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (closeHelp instanceof HTMLElement) {\r\n\t\t\t\t\tcloseHelp.addEventListener('click', () => {\r\n\t\t\t\t\t\tSmartCaptureProvider.closeModal(helpContainer, closeHelp, openHelp);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (modalClose instanceof HTMLElement) {\r\n\t\t\t\t\tmodalClose.addEventListener('click', () => {\r\n\t\t\t\t\t\tSmartCaptureProvider.closeModal(helpContainer, closeHelp, openHelp);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn CameraService.getCameraPermission()\r\n\t\t\t\t\t.then((permission) => {\r\n\t\t\t\t\t\tswitch (permission) {\r\n\t\t\t\t\t\t\tcase CameraPermissionState.UNKNOWN: // safari 15.5 workaround\r\n\t\t\t\t\t\t\tcase CameraPermissionState.GRANTED:\r\n\t\t\t\t\t\t\t\tRenderingService.setText(cameraStatus, LanguageService.getTranslation(TranslationKey.CAMERA_LOADING));\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tif (cameraSelect instanceof HTMLSelectElement) {\r\n\t\t\t\t\t\t\tcameraSelect.addEventListener('change', () => {\r\n\t\t\t\t\t\t\t\tRenderingService.hideObject(manualCaptureButton);\r\n\t\t\t\t\t\t\t\tRenderingService.hideObject(modalManualCaptureButton);\r\n\t\t\t\t\t\t\t\tRenderingService.setText(cameraStatus, LanguageService.getTranslation(TranslationKey.CAMERA_LOADING));\r\n\r\n\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect, false);\r\n\r\n\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLInputElement, false);\r\n\t\t\t\t\t\t\t\tif (SmartCaptureProvider.isRunning && SmartCaptureProvider.smartCaptureCancel != null) {\r\n\t\t\t\t\t\t\t\t\tSmartCaptureProvider.smartCaptureCancel(SmartCaptureFailingReasons.CameraChanged);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tthis.changeCameraStream(cameraSelect.value, ReticleType.DOCUMENT, !this._config.hideLogo, !this._config.hideAutoCaptureHints && SmartCaptureProvider.isRunning ? HintType.AUTOCAPTUREON : HintType.NONE, undefined)\r\n\t\t\t\t\t\t\t\t\t.then(() => this.renderAvailableCameras(cameraSelect as HTMLSelectElement))\r\n\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\tif (SmartCaptureProvider.isRunning && cameraCapture && cameraViewfinder instanceof HTMLCanvasElement) {\r\n\t\t\t\t\t\t\t\t\t\t\tSmartCaptureProvider.startCapturing.call(this,\r\n\t\t\t\t\t\t\t\t\t\t\t\thintAnimationContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcameraSelect,\r\n\t\t\t\t\t\t\t\t\t\t\t\terrorImg,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcameraViewfinder,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcameraViewfinderInnerContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\tactionContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\trecaptureDelay,\r\n\t\t\t\t\t\t\t\t\t\t\t\tuploading,\r\n\t\t\t\t\t\t\t\t\t\t\t\talignment,\r\n\t\t\t\t\t\t\t\t\t\t\t\tblur,\r\n\t\t\t\t\t\t\t\t\t\t\t\tglare,\r\n\t\t\t\t\t\t\t\t\t\t\t\tlowResolution,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcameraOverlay,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmanualCaptureButton,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmodalManualCaptureButton,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmodalManualCaptureText,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcameraCapture,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcameraCaptureHint,\r\n\t\t\t\t\t\t\t\t\t\t\t\tconditionDetailContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcameraConditionsContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\tloadingAnimationContainer as HTMLDivElement,\r\n\t\t\t\t\t\t\t\t\t\t\t\tverifyingAnimation\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.hideObject(cameraStatus);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.hideObject(verifyingAnimation);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect, true);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLInputElement, true);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect, true);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setText(cameraStatus, LanguageService.getTranslation(error.message as TranslationKey));\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tRenderingService.setText(cameraStatus, LanguageService.getTranslation(TranslationKey.SMART_CAPTURE_INITIALIZING));\r\n\t\t\t\t\t\t\tif (hintAnimationContainer instanceof HTMLDivElement && cameraViewfinder instanceof HTMLCanvasElement) {\r\n\t\t\t\t\t\t\t\tEventService.subscribe(\r\n\t\t\t\t\t\t\t\t\tJourneyEvent.CAMERA_CANVAS_RESIZE,\r\n\t\t\t\t\t\t\t\t\t({ isPortrait }: { isPortrait: boolean }) => {\r\n\t\t\t\t\t\t\t\t\t\tSmartCaptureProvider.handleCameraSelectedChange.call(this, hintAnimationContainer, cameraViewfinder, isPortrait);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tSmartCaptureProvider.animationCompleted = true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn Promise.all([\r\n\t\t\t\t\t\t\t\tIdesMicroHost.createWorker(workerScriptUrl, asmScriptUrl, timeout, timeLogsEnabled),\r\n\t\t\t\t\t\t\t\tthis.renderAvailableCameras(cameraSelect as HTMLSelectElement)\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tif (cameraCapture && cameraViewfinder instanceof HTMLCanvasElement) {\r\n\t\t\t\t\t\t\t\t\t\tconst startCapturing = (cameraFacingMode) => {\r\n\t\t\t\t\t\t\t\t\t\t\tSmartCaptureProvider.isRunning = true;\r\n\t\t\t\t\t\t\t\t\t\t\tRenderingService.hideObject(cameraOverlay);\r\n\t\t\t\t\t\t\t\t\t\t\tRenderingService.hideObject(verifyingAnimation);\r\n\t\t\t\t\t\t\t\t\t\t\tRenderingService.hideObject(cameraCaptureHint);\r\n\t\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLSelectElement, false);\r\n\t\t\t\t\t\t\t\t\t\t\tRenderingService.hideObject(cameraCapture as HTMLSelectElement);\r\n\t\t\t\t\t\t\t\t\t\t\tRenderingService.showObject(actionContainer);\r\n\t\t\t\t\t\t\t\t\t\t\tthis.changeCameraStream(cameraSelect.value, ReticleType.DOCUMENT, !this._config.hideLogo, !this._config.hideAutoCaptureHints ? HintType.AUTOCAPTUREON : HintType.NONE, undefined, cameraFacingMode)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tSmartCaptureProvider.startCapturing.call(this,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thintAnimationContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcameraSelect,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terrorImg,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcameraViewfinder,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcameraViewfinderInnerContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactionContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecaptureDelay,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuploading,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talignment,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tblur,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tglare,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlowResolution,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcameraOverlay,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmanualCaptureButton,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodalManualCaptureButton,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodalManualCaptureText,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcameraCapture,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcameraCaptureHint,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconditionDetailContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcameraConditionsContainer,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloadingAnimationContainer as HTMLDivElement,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tverifyingAnimation);\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst startCapturingWithDeviceDecision = async () => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet cameraFacingMode = CameraFacingMode.BACK;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// Ensure this._journey is defined and handle SELFIE step\r\n\t\t\t\t\t\t\t\t\t\t\tif (this._journey?.action === FlowState.SELFIE) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcameraFacingMode = CameraFacingMode.FRONT;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (cameraCapture && cameraViewfinder instanceof HTMLCanvasElement) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// If not in SELFIE step, try to select \"Back Dual Wide Camera\" as default\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (cameraSelect instanceof HTMLSelectElement) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst cameras = await CameraService.getVideoCameras();\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet selectedCamera: { deviceId: string, label: string } | undefined = undefined;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// If in SELFIE mode, find the first camera that is not a back camera\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (cameraFacingMode === CameraFacingMode.FRONT) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCamera = cameras.find(camera => !CameraService.isBackCameraLabel(camera.label));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// For non-SELFIE mode, select \"Back Dual Wide Camera\" as default for iPhone 13 and above\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCamera = cameras.find(camera => CameraService.isBackDualWideCameraLabel(camera.label));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst selectedCameraId = selectedCamera ? selectedCamera.deviceId : \"\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// If a camera was found, update the facing mode and mark it as selected\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (selectedCameraId !== \"\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcameraFacingMode = cameraFacingMode === CameraFacingMode.FRONT\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? CameraFacingMode.FRONT\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: CameraFacingMode.ENVIRONMENT;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tRenderingService.markSelected(cameraSelect, selectedCameraId);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Handle error if CameraService.getVideoCameras() fails\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.error(\"Error getting video cameras:\", error);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tstartCapturing(cameraFacingMode);\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Check the autoStart flag to decide when to start capturing\r\n\t\t\t\t\t\t\t\t\t\tif (this._config.smartCapture?.autoStart) {\r\n\t\t\t\t\t\t\t\t\t\t\tstartCapturingWithDeviceDecision();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tcameraCapture.addEventListener('click', startCapturingWithDeviceDecision);\r\n\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.hideObject(cameraStatus);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLSelectElement, true);\r\n\t\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect as HTMLSelectElement, true);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\t\t\tthis._providers = this._providers.filter((provider) => provider !== InputProvider.SMART_CAPTURE);\r\n\t\t\t\t\t\t\t\t\tthis._inputProvider = InputProvider.CAMERA;\r\n\t\t\t\t\t\t\t\t\treturn CameraService.stopStreaming()\r\n\t\t\t\t\t\t\t\t\t\t.then(() => IdesMicroHost.destroyWorker())\r\n\t\t\t\t\t\t\t\t\t\t.then(() => wait(250))\r\n\t\t\t\t\t\t\t\t\t\t.then(() => this.evaluate());\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_PROVIDER, { provider: Templates.SmartCapture }));\r\n\t}\r\n\r\n\r\n\tprivate static counterImage: IImageCounter = { Blur: 0, Glare: 0, Resolution: 0, Alignment: 0 };\r\n\tprivate static metaData: IMetaData[] = [];\r\n\tprivate static lengthStartTime: number;\r\n\tprivate static lastStartFrameTime: number;\r\n\tprivate static captureAnimation: lottie.AnimationItem | undefined;\r\n\tprivate static hintAnimation: lottie.AnimationItem | undefined;\r\n\tprivate static captureAnimationComplete: (() => void) | undefined;\r\n\tprivate static glareAnimation: lottie.AnimationItem;\r\n\tprivate static lowResAnimation: lottie.AnimationItem;\r\n\tprivate static blurAnimation: lottie.AnimationItem;\r\n\tprivate static smartCaptureCancel: (reason?: any) => void;\r\n\tprivate static isRunning: boolean;\r\n\tprivate static animationCompleted: boolean;\r\n\tprivate static lastQualityCheckPriority: number;\r\n\tprivate static qualityChecksTimeout: ReturnType<typeof setTimeout>;\r\n\tprivate static loadingAnimation: lottie.AnimationItem | undefined;\r\n\r\n\tprivate static startCapturing(\r\n\t\tthis: JourneyContainer,\r\n\t\thintAnimationContainer: HTMLElement | undefined,\r\n\t\tcameraSelect: HTMLSelectElement,\r\n\t\terrorImg: HTMLElement | undefined,\r\n\t\tcameraViewfinder: HTMLCanvasElement,\r\n\t\tcameraViewfinderInnerContainer: HTMLElement | undefined,\r\n\t\tactionContainer: HTMLElement | undefined,\r\n\t\trecaptureDelay: number,\r\n\t\tuploading: HTMLElement | undefined,\r\n\t\talignment: HTMLElement | undefined,\r\n\t\tblur: HTMLElement | undefined,\r\n\t\tglare: HTMLElement | undefined,\r\n\t\tlowResolution: HTMLElement | undefined,\r\n\t\tcameraOverlay: HTMLElement | undefined,\r\n\t\tmanualCaptureButton: HTMLElement | undefined,\r\n\t\tmodalManualCaptureButton: HTMLElement | undefined,\r\n\t\tmodalManualCaptureText: HTMLElement | undefined,\r\n\t\tcameraCapture: HTMLElement,\r\n\t\tcameraCaptureHint: HTMLElement | undefined,\r\n\t\tconditionDetailContainer: HTMLElement | undefined,\r\n\t\tcameraConditionsContainer: HTMLElement | undefined,\r\n\t\tloadingAnimationContainer: HTMLDivElement | undefined,\r\n\t\tverifyingAnimation: HTMLElement | undefined) {\r\n\t\tSmartCaptureProvider.lastQualityCheckPriority = -1;\r\n\t\tRenderingService.showObject(hintAnimationContainer);\r\n\t\tthis.renderAvailableCameras(cameraSelect as HTMLSelectElement);\r\n\t\tEventService.publish(JourneyEvent.CAMERA_START);\r\n\t\tSmartCaptureProvider.lengthStartTime = performance.now();\r\n\t\tconst expiryDate = new Date();\r\n\t\texpiryDate.setMilliseconds(expiryDate.getMilliseconds() + 60000);\r\n\t\tconst { cancel, token } = CancellationToken.create();\r\n\t\tSmartCaptureProvider.smartCaptureCancel = cancel;\r\n\r\n\t\tif (this._manualCapture.enabled) {\r\n\t\t\tif (this._manualCapture.timeout <= 60 && this._manualCapture.timeout >= 0) {\r\n\t\t\t\tconst smartCaptureTimeout = this._manualCapture.timeout * 1000;\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (this._manualCapture.enabled) {\r\n\t\t\t\t\t\tRenderingService.showObject(manualCaptureButton);\r\n\t\t\t\t\t\tRenderingService.showObject(modalManualCaptureButton);\r\n\t\t\t\t\t\tRenderingService.showObject(modalManualCaptureText);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, smartCaptureTimeout);\r\n\t\t\t} else {\r\n\t\t\t\tthis._manualCapture.enabled = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (ENV === 'DEVELOPMENT') {\r\n\t\t\tconsole.log(`Start smartcapture to expire at ${expiryDate}`);\r\n\t\t}\r\n\r\n\t\tretryOperationWithTimeout(() => SmartCaptureProvider.processFrame.call(this, errorImg as HTMLElement, cameraViewfinder, cameraViewfinderInnerContainer, hintAnimationContainer, actionContainer, verifyingAnimation), recaptureDelay, expiryDate, token)\r\n\t\t\t.then(({ image, result }) => ImageService.convert(image)\r\n\t\t\t\t.then(async (image64) => {\r\n\t\t\t\t\tRenderingService.showObject(loadingAnimationContainer);\r\n\t\t\t\t\tif (this._previewPages.documentStep.smartCapture) {\r\n\t\t\t\t\t\tRenderingService.setText(verifyingAnimation, LanguageService.getTranslation(TranslationKey.PREPARING_PREVIEW_TITLE));\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tRenderingService.setText(verifyingAnimation, LanguageService.getTranslation(TranslationKey.VERIFYING_TITLE));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tRenderingService.showObject(verifyingAnimation);\r\n\t\t\t\t\tSmartCaptureProvider.isRunning = false;\r\n\t\t\t\t\tSmartCaptureProvider.setMetaData();\r\n\t\t\t\t\tawait EventService.publish(JourneyEvent.CAMERA_FEEDBACK, { succeeded: true });\r\n\t\t\t\t\t// Stop the camera streaming\r\n\t\t\t\t\tawait CameraService.stopStreaming();\r\n\t\t\t\t\tCameraService.clearCanvas(cameraViewfinder);\r\n\t\t\t\t\tRenderingService.showObject(cameraOverlay);\r\n\t\t\t\t\tRenderingService.removeClass(cameraViewfinderInnerContainer, 'camera-viewfinder--inner-container-error');\r\n\t\t\t\t\tRenderingService.addClass(cameraViewfinderInnerContainer, `camera-viewfinder--inner-container-success`);\r\n\t\t\t\t\tSmartCaptureProvider.removeIDAnimation();\r\n\t\t\t\t\t// show uploading object\r\n\t\t\t\t\t// Hide smart capture objects\r\n\t\t\t\t\tRenderingService.hideObject(errorImg);\r\n\t\t\t\t\tRenderingService.hideObject(alignment);\r\n\t\t\t\t\tRenderingService.hideObject(blur);\r\n\t\t\t\t\tRenderingService.hideObject(glare);\r\n\t\t\t\t\tRenderingService.hideObject(lowResolution);\r\n\t\t\t\t\tRenderingService.hideObject(conditionDetailContainer);\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tif (this._previewPages.documentStep.smartCapture) {\r\n\t\t\t\t\t\t\treturn ImageProvider.render.call(this, image64, SmartCaptureProvider.metaData);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn SmartCaptureProvider.continueJourneySkipPreview.call(this, image64, SmartCaptureProvider.metaData);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.catch((reason?: any) => {\r\n\t\t\t\tif (ENV === 'DEVELOPMENT') {\r\n\t\t\t\t\tconsole.log(`Start smartcapture cancelled`, reason);\r\n\t\t\t\t}\r\n\t\t\t\tif (reason === SmartCaptureFailingReasons.ManualInputProviderChange) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tRenderingService.removeClass(cameraViewfinderInnerContainer, 'camera-viewfinder--inner-container-error');\r\n\t\t\t\tRenderingService.hideObject(errorImg);\r\n\t\t\t\tRenderingService.hideObject(alignment);\r\n\t\t\t\tRenderingService.hideObject(blur);\r\n\t\t\t\tRenderingService.hideObject(glare);\r\n\t\t\t\tRenderingService.hideObject(lowResolution);\r\n\t\t\t\tRenderingService.hideObject(actionContainer);\r\n\t\t\t\tRenderingService.hideObject(uploading);\r\n\t\t\t\tRenderingService.hideObject(cameraConditionsContainer);\r\n\t\t\t\tSmartCaptureProvider.removeIDAnimation();\r\n\t\t\t\tif (reason === SmartCaptureFailingReasons.CameraChanged) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tRenderingService.showObject(cameraCaptureHint);\r\n\t\t\t\tRenderingService.showObject(cameraCapture as HTMLSelectElement);\r\n\t\t\t\tRenderingService.setEnabled(cameraCapture as HTMLSelectElement, true);\r\n\t\t\t\tRenderingService.setEnabled(cameraSelect as HTMLSelectElement, true);\r\n\t\t\t\tRenderingService.showObject(cameraOverlay);\r\n\t\t\t\tthis.changeCameraStream(cameraSelect.value, ReticleType.DOCUMENT, !this._config.hideLogo, HintType.NONE, undefined, CameraFacingMode.BACK);\r\n\t\t\t\tSmartCaptureProvider.isRunning = false;\r\n\t\t\t\tEventService.publish(JourneyEvent.CAMERA_FEEDBACK, { failed: true });\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate static continueJourneySkipPreview(this: JourneyContainer, image: string, metaData: IMetaData[]) {\r\n\t\tconst { type } = ImageService.getBase64Components(image);\r\n\t\treturn this.assertImageExists(image)\r\n\t\t\t.then(() => this.getJourney())\r\n\t\t\t.then((journey) => journey.continue({\r\n\t\t\t\timgList: [{\r\n\t\t\t\t\t...ImageService.remapNames(ImageService.getBase64Components(image)),\r\n\t\t\t\t\tname: journey.action === 'SELFIE' ? RequiredInputImage.SelfiePhoto : RequiredInputImage.WhiteImage,\r\n\t\t\t\t\tinputFormat: type === 'pdf' ? 1 : 0\r\n\t\t\t\t}],\r\n\t\t\t\tjourneyDefinitionId: this._journeyDefinitionId\r\n\t\t\t}, metaData)\r\n\t\t\t\t.then((res) => DataService.getDataStore<IIdScanData>(DataStoreType.ID_SCAN).update(ImageProvider.parseResponseData(res)))\r\n\t\t\t\t.then(() => this.evaluate())\r\n\t\t\t\t.then(this.updateJourneyFields));\r\n\t}\r\n\r\n\tprivate static removeIDAnimation() {\r\n\t\tif (SmartCaptureProvider.captureAnimationComplete) {\r\n\t\t\tSmartCaptureProvider.captureAnimationComplete();\r\n\t\t\tSmartCaptureProvider.captureAnimationComplete = undefined;\r\n\t\t}\r\n\r\n\t\tif (SmartCaptureProvider.captureAnimation) {\r\n\t\t\tSmartCaptureProvider.captureAnimation.removeEventListener('complete');\r\n\t\t\tSmartCaptureProvider.captureAnimation.stop();\r\n\t\t\tSmartCaptureProvider.captureAnimation.destroy();\r\n\t\t\tSmartCaptureProvider.captureAnimation = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static closeModal(helpContainer: HTMLElement | undefined, closeHelp: HTMLElement | undefined, openHelp: HTMLElement | undefined) {\r\n\t\tRenderingService.hideObject(helpContainer);\r\n\t\tRenderingService.hideObject(closeHelp);\r\n\t\tRenderingService.showObject(openHelp);\r\n\t\tSmartCaptureProvider.glareAnimation.stop();\r\n\t\tSmartCaptureProvider.glareAnimation.destroy();\r\n\t\tSmartCaptureProvider.blurAnimation.stop();\r\n\t\tSmartCaptureProvider.blurAnimation.destroy();\r\n\t\tSmartCaptureProvider.lowResAnimation.stop();\r\n\t\tSmartCaptureProvider.lowResAnimation.destroy();\r\n\t}\r\n\r\n\tprivate static setMetaData = () => {\r\n\t\tconst lengthStart = performance.now() - SmartCaptureProvider.lengthStartTime;\r\n\t\tconst lastFrameTime = performance.now() - SmartCaptureProvider.lastStartFrameTime;\r\n\t\tconst numberOfFrames = SmartCaptureProvider.counterImage.Blur + SmartCaptureProvider.counterImage.Glare + SmartCaptureProvider.counterImage.Resolution;\r\n\r\n\t\tSmartCaptureProvider.metaData = [{\r\n\t\t\tname: 'Capture Type', // Smart Capture or Manual Capture\r\n\t\t\tvalue: 'Smart Capture',\r\n\t\t\tstep: '',\r\n\t\t\ttype: 'Simple'\r\n\t\t}, {\r\n\t\t\tname: 'SC: Length of Smart Capture', // The time period from start to end of smart capture\r\n\t\t\tvalue: lengthStart.toString(),\r\n\t\t\tstep: '',\r\n\t\t\ttype: 'Simple'\r\n\t\t}, {\r\n\t\t\tname: 'SC: Number of Frames', // Smart Capture or Manual Capture\r\n\t\t\tvalue: numberOfFrames.toString(),\r\n\t\t\tstep: '',\r\n\t\t\ttype: 'Simple'\r\n\t\t}, {\r\n\t\t\tname: 'SC: Last Processes Frame', // The last processed frames time\r\n\t\t\tvalue: lastFrameTime.toString(),\r\n\t\t\tstep: '',\r\n\t\t\ttype: 'Simple'\r\n\t\t}, {\r\n\t\t\tname: 'SC: Number of Glary frames', // Number of frames that had glare\r\n\t\t\tvalue: SmartCaptureProvider.counterImage.Glare.toString(),\r\n\t\t\tstep: '',\r\n\t\t\ttype: 'Simple'\r\n\t\t}, {\r\n\t\t\tname: 'SC: Number of Blurry frames', // Number of frames that had blure\r\n\t\t\tvalue: SmartCaptureProvider.counterImage.Blur.toString(),\r\n\t\t\tstep: '',\r\n\t\t\ttype: 'Simple'\r\n\t\t}, {\r\n\t\t\tname: 'SC: Number of Low-Resolution frames', // Number of low res frames\r\n\t\t\tvalue: SmartCaptureProvider.counterImage.Resolution.toString(),\r\n\t\t\tstep: '',\r\n\t\t\ttype: 'Simple'\r\n\t\t}];\r\n\t}\r\n\r\n\tprivate static setConditionsFlags(this: JourneyContainer, conditions: IImageResult['quality']) {\r\n\t\tSmartCaptureProvider.setConditionChecks.call(this, conditions.blurCheck, conditions.glareCheck, conditions.resolutionCheck, conditions.coordinateCheck);\r\n\t}\r\n\r\n\tprivate static setConditionChecks(this: JourneyContainer, blurCheck: boolean, glareCheck: boolean, resolutionCheck: boolean, alignmentCheck: boolean) {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tblur: '[data-jcs-element=\"camera__condition__blur\"]',\r\n\t\t\tglare: '[data-jcs-element=\"camera__condition__glare\"]',\r\n\t\t\tlowResolution: '[data-jcs-element=\"camera__condition__low__resolution\"]',\r\n\t\t\talignment: '[data-jcs-element=\"camera__condition__alignment\"]',\r\n\t\t\tcameraConditionsContainer: '[data-jcs-element=\"camera__conditions\"]'\r\n\t\t})\r\n\t\t\t.then(({ blur, glare, lowResolution, alignment, cameraConditionsContainer }) => {\r\n\t\t\t\tif (ENV === 'DEVELOPMENT') {\r\n\t\t\t\t\tconsole.log(`**** QUALITY CHECKS **** GLARE: ${glareCheck}; BLUR: ${blurCheck}; RESOLUTION: ${resolutionCheck}; ALIGNEMENT: ${alignmentCheck} **** END QUALITY CHECKS ****`);\r\n\t\t\t\t}\r\n\t\t\t\tRenderingService[glareCheck ? 'hideObject' : 'showObject'](glare);\r\n\t\t\t\tRenderingService[blurCheck ? 'hideObject' : 'showObject'](blur);\r\n\t\t\t\tRenderingService[(resolutionCheck) ? 'hideObject' : 'showObject'](lowResolution);\r\n\t\t\t\tRenderingService[(alignmentCheck) ? 'hideObject' : 'showObject'](alignment);\r\n\t\t\t\tRenderingService[(alignmentCheck && blurCheck && glareCheck && resolutionCheck) ? 'hideObject' : 'showObject'](cameraConditionsContainer);\r\n\r\n\t\t\t\tSmartCaptureProvider.setConditionChecksDetail.call(this, glareCheck, blurCheck, resolutionCheck, alignmentCheck);\r\n\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate static setConditionChecksDetail(this: JourneyContainer, glareCheck: boolean, blurCheck: boolean, resolutionCheck: boolean, alignmentCheck: boolean) {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tdetailContainer: '[data-jcs-element=\"camera__condition__detail\"]'\r\n\t\t})\r\n\t\t\t.then(({ detailContainer }) => {\r\n\t\t\t\t// tslint:disable-next-line:no-bitwise\r\n\t\t\t\tconst checkPriority = ((alignmentCheck ? 0 : 1) << 3)\r\n\t\t\t\t\t// tslint:disable-next-line:no-bitwise\r\n\t\t\t\t\t| ((resolutionCheck ? 0 : 1) << 2)\r\n\t\t\t\t\t// tslint:disable-next-line:no-bitwise\r\n\t\t\t\t\t| ((blurCheck ? 0 : 1) << 1)\r\n\t\t\t\t\t| (glareCheck ? 0 : 1);\r\n\t\t\t\tif (checkPriority > SmartCaptureProvider.lastQualityCheckPriority) {\r\n\t\t\t\t\tSmartCaptureProvider.lastQualityCheckPriority = checkPriority;\r\n\t\t\t\t\tif (!alignmentCheck) {\r\n\t\t\t\t\t\tSmartCaptureProvider.showTitleHintAndAnimation.call(\r\n\t\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\t\tLanguageService.getTranslation(TranslationKey.CAMERA_CONDITION_ALIGNMENT),\r\n\t\t\t\t\t\t\tLanguageService.getTranslation(TranslationKey.CAMERA_PREVENT_LOW_RES_HINT),\r\n\t\t\t\t\t\t\tthis.assetsFolder + '/animations/low-res-white.json');\r\n\t\t\t\t\t} else if (!resolutionCheck) {\r\n\t\t\t\t\t\tSmartCaptureProvider.showTitleHintAndAnimation.call(\r\n\t\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\t\tLanguageService.getTranslation(TranslationKey.CAMERA_CONDITION_LOW_RESOLUTION),\r\n\t\t\t\t\t\t\tLanguageService.getTranslation(TranslationKey.CAMERA_PREVENT_LOW_RES_HINT),\r\n\t\t\t\t\t\t\tthis.assetsFolder + '/animations/low-res-white.json');\r\n\t\t\t\t\t} else if (!blurCheck) {\r\n\t\t\t\t\t\tSmartCaptureProvider.showTitleHintAndAnimation.call(\r\n\t\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\t\tLanguageService.getTranslation(TranslationKey.CAMERA_CONDITION_BLUR),\r\n\t\t\t\t\t\t\tLanguageService.getTranslation(TranslationKey.CAMERA_PREVENT_BLUR_HINT),\r\n\t\t\t\t\t\t\tthis.assetsFolder + '/animations/blur-white.json');\r\n\t\t\t\t\t} else if (!glareCheck) {\r\n\t\t\t\t\t\tSmartCaptureProvider.showTitleHintAndAnimation.call(\r\n\t\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\t\tLanguageService.getTranslation(TranslationKey.CAMERA_CONDITION_GLARE),\r\n\t\t\t\t\t\t\tLanguageService.getTranslation(TranslationKey.CAMERA_PREVENT_GLARE_HINT),\r\n\t\t\t\t\t\t\tthis.assetsFolder + '/animations/glare-white.json');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tRenderingService.hideObject(detailContainer);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (checkPriority === SmartCaptureProvider.lastQualityCheckPriority && checkPriority) {\r\n\t\t\t\t\tif (SmartCaptureProvider.qualityChecksTimeout) {\r\n\t\t\t\t\t\tclearTimeout(SmartCaptureProvider.qualityChecksTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tSmartCaptureProvider.qualityChecksTimeout = setTimeout(() => {\r\n\t\t\t\t\t\tSmartCaptureProvider.lastQualityCheckPriority = -1;\r\n\t\t\t\t\t}, 4000);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate static showTitleHintAndAnimation(this: JourneyContainer, titleText: string, hintText: string, animationPath: string) {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tdetailContainer: '[data-jcs-element=\"camera__condition__detail\"]',\r\n\t\t\tanimation: '[data-jcs-element=\"camera__condition__detail__animation\"]',\r\n\t\t\ttitle: '[data-jcs-element=\"camera__condition__detail__description__title\"]',\r\n\t\t\thint: '[data-jcs-element=\"camera__condition__detail__description__hint\"]',\r\n\t\t})\r\n\t\t\t.then(({ detailContainer, animation, title, hint }) => {\r\n\t\t\t\tRenderingService.showObject(detailContainer);\r\n\t\t\t\tRenderingService.setText(title, titleText);\r\n\t\t\t\tRenderingService.setText(hint, hintText);\r\n\t\t\t\tif (animation instanceof HTMLDivElement) {\r\n\t\t\t\t\tSmartCaptureProvider.RemoveHintImage();\r\n\t\t\t\t\tSmartCaptureProvider.hintAnimation = AnimationService.CreateAnimation(\r\n\t\t\t\t\t\tanimation,\r\n\t\t\t\t\t\tanimationPath,\r\n\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t{});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate static RemoveHintImage() {\r\n\t\tif (SmartCaptureProvider.hintAnimation !== undefined) {\r\n\t\t\tSmartCaptureProvider.hintAnimation.stop();\r\n\t\t\tSmartCaptureProvider.hintAnimation.destroy();\r\n\t\t\tSmartCaptureProvider.hintAnimation = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static processFrame(this: JourneyContainer, errorImg: HTMLElement, cameraViewfinder: HTMLCanvasElement, cameraViewfinderInnerContainer: HTMLElement | undefined, hintAnimationContainer: HTMLElement | undefined, verifyingAnimation: HTMLElement | undefined, actionContainer: HTMLElement | undefined): Promise<{ image: Blob, result: IImageResult }> {\r\n\t\tSmartCaptureProvider.lastStartFrameTime = performance.now();\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar startTime = performance.now();\r\n\r\n\t\t\tif (CameraService.hasActiveStream()) {\r\n\t\t\t\tvar blobFromCurrentStreamStartTime = performance.now();\r\n\r\n\t\t\t\tvar blobFromCurrentStream = CameraService.getBlobFromCurrentStream()\r\n\t\t\t\t\t.then((image) => {\r\n\t\t\t\t\t\tvar result = IdesMicroHost.checkImage(image);\r\n\r\n\t\t\t\t\t\tvar blobFromCurrentStreamEndTime = performance.now();\r\n\t\t\t\t\t\tif (this._config.isVerboseLogEnabled)\r\n\t\t\t\t\t\t\tconsole.log(`| getBlobFromCurrentStream method took: ${blobFromCurrentStreamEndTime - blobFromCurrentStreamStartTime} ms |`);\r\n\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\tvar renderingStartTime = performance.now();\r\n\r\n\t\t\t\t\t\tif (SmartCaptureProvider.animationCompleted) {\r\n\t\t\t\t\t\t\tSmartCaptureProvider.setConditionsFlags.call(this, { ...result.quality });\r\n\t\t\t\t\t\t\tconst hasChecks = result.quality.blurCheck || result.quality.glareCheck || result.quality.resolutionCheck;\r\n\t\t\t\t\t\t\tRenderingService[hasChecks ? 'showObject' : 'hideObject'](errorImg);\r\n\t\t\t\t\t\t\tRenderingService.addClass(cameraViewfinderInnerContainer,\r\n\t\t\t\t\t\t\t\t`camera-viewfinder--inner-container-${hasChecks ? 'error' : 'success'}`);\r\n\t\t\t\t\t\t\tRenderingService.hideObject(hintAnimationContainer);\r\n\t\t\t\t\t\t\tRenderingService.hideObject(actionContainer);\r\n\t\t\t\t\t\t\tif (SmartCaptureProvider.captureAnimation) {\r\n\t\t\t\t\t\t\t\tSmartCaptureProvider.captureAnimation.hide();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (SmartCaptureProvider.lastQualityCheckPriority === 0) {\r\n\t\t\t\t\t\t\tRenderingService.removeClass(cameraViewfinderInnerContainer, 'camera-viewfinder--inner-container-error');\r\n\t\t\t\t\t\t\tRenderingService.hideObject(errorImg);\r\n\t\t\t\t\t\t\tRenderingService.showObject(verifyingAnimation);\r\n\t\t\t\t\t\t\tRenderingService.showObject(hintAnimationContainer);\r\n\t\t\t\t\t\t\tRenderingService.showObject(actionContainer);\r\n\t\t\t\t\t\t\tSmartCaptureProvider.RemoveHintImage();\r\n\t\t\t\t\t\t\tSmartCaptureProvider.setConditionChecks.call(this, true, true, true, true);\r\n\t\t\t\t\t\t\tif (SmartCaptureProvider.captureAnimation) {\r\n\t\t\t\t\t\t\t\tSmartCaptureProvider.captureAnimation.show();\r\n\t\t\t\t\t\t\t\tSmartCaptureProvider.captureAnimation.play();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (result && result.quality) {\r\n\t\t\t\t\t\t\tif (result.quality.blurCheck) { SmartCaptureProvider.counterImage.Blur++; }\r\n\t\t\t\t\t\t\tif (result.quality.glareCheck) { SmartCaptureProvider.counterImage.Glare++; }\r\n\t\t\t\t\t\t\tif (result.quality.resolutionCheck) { SmartCaptureProvider.counterImage.Resolution++; }\r\n\r\n\t\t\t\t\t\t\tif (result.image == undefined) {\r\n\t\t\t\t\t\t\t\treturn EventService.publish(JourneyEvent.CAMERA_FEEDBACK, { ...result.quality })\r\n\t\t\t\t\t\t\t\t\t.then(() => reject({ result }));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn EventService.publish(JourneyEvent.CAMERA_FEEDBACK, { ...result.quality })\r\n\t\t\t\t\t\t\t\t\t.then(() => resolve({ image: new Blob([result.image], { type: 'image/png' }), result: result }));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar renderingEndTime = performance.now();\r\n\t\t\t\t\t\tconsole.log(`| rendering took: ${renderingEndTime - renderingStartTime} ms |`);\r\n\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\tvar endTime = performance.now();\r\n\r\n\t\t\t\tif (this._config.isVerboseLogEnabled)\r\n\t\t\t\t\tconsole.log(`| processFrame method took: ${endTime - startTime} ms |`);\r\n\r\n\t\t\t\treturn blobFromCurrentStream;\r\n\t\t\t} else {\r\n\t\t\t\treturn reject(false);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate static handleCameraSelectedChange(this: JourneyContainer, animationContainer: HTMLDivElement, canvasContainer: HTMLCanvasElement, isPortrait: boolean) {\r\n\t\ttry {\r\n\t\t\tif (SmartCaptureProvider.isRunning) {\r\n\r\n\t\t\t\ttype LottiePlayer = typeof lottie.default;\r\n\t\t\t\tconst lottiePlayer = lottie as any as LottiePlayer;\r\n\t\t\t\tanimationContainer.style.height = `${canvasContainer.clientHeight}px`;\r\n\t\t\t\tanimationContainer.style.width = `${canvasContainer.clientWidth}px`;\r\n\t\t\t\tlet imagePath = '';\r\n\r\n\t\t\t\tif (!isPortrait) {\r\n\t\t\t\t\tif (this._journey && this._journey.action === FlowState.IDENTITY_FRONT) {\r\n\t\t\t\t\t\timagePath = this.assetsFolder + '/animations/position-document-v5.json';\r\n\t\t\t\t\t} else if (this._journey && this._journey.action === FlowState.IDENTITY_BACK) {\r\n\t\t\t\t\t\timagePath = this.assetsFolder + '/animations/flip-document-v2.json';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this._journey && this._journey.action === FlowState.IDENTITY_FRONT) {\r\n\t\t\t\t\t\timagePath = this.assetsFolder + '/animations/rotate-document-v3-1.json';\r\n\t\t\t\t\t} else if (this._journey && this._journey.action === FlowState.IDENTITY_BACK) {\r\n\t\t\t\t\t\timagePath = this.assetsFolder + '/animations/flip-document-mobile-v2.json';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tSmartCaptureProvider.removeIDAnimation();\r\n\r\n\t\t\t\tSmartCaptureProvider.animationCompleted = false;\r\n\t\t\t\tSmartCaptureProvider.captureAnimation = AnimationService.CreateAnimation(\r\n\t\t\t\t\tanimationContainer,\r\n\t\t\t\t\timagePath,\r\n\t\t\t\t\tfalse,\r\n\t\t\t\t\ttrue,\r\n\t\t\t\t\t{});\r\n\r\n\t\t\t\tSmartCaptureProvider.captureAnimationComplete = SmartCaptureProvider.captureAnimation.addEventListener('complete', (_) => {\r\n\t\t\t\t\tSmartCaptureProvider.animationCompleted = true;\r\n\t\t\t\t\tSmartCaptureProvider.removeIDAnimation();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n}\r\n","/**\r\n * The available input providers for the system. Which input provider should be\r\n * used is dictated by the services and should not be overridden unless\r\n * absolutely necessary.\r\n *\r\n * @public\r\n */\r\nexport enum InputProvider {\r\n\t/**\r\n\t * No input provider specified at this time. This could be because\r\n\t * authentication is required or the results overview is being shown.\r\n\t */\r\n\tNONE = 'NONE',\r\n\t/**\r\n\t * The customer will be presented with a viewfinder showing a camera preview\r\n\t * with the option to manually capture a frame. Options should be provided\r\n\t * to allow the user to control which camera to capture from based on their\r\n\t * hardware's capabilities.\r\n\t *\r\n\t * NOTE: This will require the user to allow access to the camera first\r\n\t * using the browser's default permissions process.\r\n\t */\r\n\tCAMERA = 'CAMERA',\r\n\t/**\r\n\t * The customer will be presented with an input box to either select a file\r\n\t * or drag a file into.\r\n\t */\r\n\tFILESYSTEM = 'FILESYSTEM',\r\n\t/**\r\n\t * The customer will be presented with the current scanner status and\r\n\t * instructions to allow to complete the capture process.\r\n\t *\r\n\t * NOTE: This will require the scanner to be set up and enabled in the\r\n\t * configuration before it will be made available for use.\r\n\t */\r\n\tSCANNER = 'SCANNER',\r\n\t/**\r\n\t * The customer will be presented with a viewfinder showing a camera preview\r\n\t * with the option to begin the automatic capture. They will then be guided\r\n\t * with on-screen instructions to indicate which pose should be performed.\r\n\t *\r\n\t * NOTE: This will require the user to allow access to the camera first\r\n\t * using the browser's default permissions dialog.\r\n\t */\r\n\tLIVENESS = 'LIVENESS',\r\n\t/**\r\n\t * The customer will be presented with a viewfinder showing a camera preview\r\n\t * with the option to begin the automatic capture.\r\n\t *\r\n\t * NOTE: This will require the user to allow access to the camera first\r\n\t * using the browser's default permissions dialog.\r\n\t */\r\n\tSMART_CAPTURE = 'SMART_CAPTURE'\r\n}\r\n\r\n/**\r\n * The mode to use when changing input providers\r\n *\r\n * @public\r\n */\r\nexport enum ChangeMode {\r\n\t/**\r\n\t * The default behaviour which is to reject when the specified provider\r\n\t * doesn't exist.\r\n\t */\r\n\tDEFAULT = 'DEFAULT',\r\n\t/**\r\n\t * Force the input provider to the specified provider even if the device\r\n\t * doesn't support it or it's been removed from the allowed providers list.\r\n\t */\r\n\tFORCE = 'FORCE',\r\n\t/**\r\n\t * Use the specified behaviour, but fall back to the first available\r\n\t * provider if it is not available.\r\n\t */\r\n\tFALLBACK = 'FALLBACK'\r\n}\r\n","/**\r\n * Type for DocumentSide\r\n *\r\n * @public\r\n */\r\nexport enum DocumentSide {\r\n\tBACK = 'BACK',\r\n\tFRONT = 'FRONT'\r\n}\r\n","/**\r\n * @deprecated\r\n *\r\n * @internal\r\n */\r\nexport enum JourneyAction {\r\n\tCANCEL = 'CANCEL',\r\n\tEND = 'END',\r\n\tFINISH = 'FINISH',\r\n\tHASERROR = 'HASERROR',\r\n\tPROGRESS = 'PROGRESS',\r\n\tSTART = 'START'\r\n}\r\n","import EventService from '../../../helpers/classes/EventService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport JourneyManager from '../../classes/JourneyManager';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { ImageProvider } from './image';\r\nimport { IMetaData } from '../../interfaces/MetaData';\r\nimport { FlowState } from '../../enums/FlowState';\r\nimport { ImageService } from '../../../helpers/classes/ImageService';\r\nimport { RequiredInputImage } from '../../enums/RequiredInputImage';\r\nimport DataService, { DataStoreType } from '../../classes/DataService';\r\nimport { IIdScanData } from '../../interfaces/DataFormats';\r\nimport { Journey } from '../../classes/Journey';\r\nimport {\r\n\tremoveItems,\r\n} from '../../../helpers/functions/arrays';\r\nimport { FileSystemProvider } from './fileSystem';\r\nimport { InputProvider } from '../../enums/InputProvider';\r\nimport { CameraProvider } from './camera';\r\nimport { ScannerProvider } from './scanner';\r\nimport { SmartCaptureProvider } from './smart-capture';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { HighLevelResult } from '../../enums/HighLevelResult';\r\n\r\nexport class TripleScanGuidanceProvider {\r\n\tpublic static render(this: JourneyContainer, provider: InputProvider) {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tproviderContainer: '[data-jcs-element=\"provider__container\"]',\r\n\t\t})\r\n\t\t\t.then(({ providerContainer }) => TemplateService.renderToContainer(providerContainer, Templates.TripleScanGuidance))\r\n\t\t\t.then((providerContainer) => TemplateService.getElements(providerContainer, {\r\n\t\t\t\ttripleScanGuidanceContainer: '[data-jcs-element=\"identity__document__triple__scan__guidance\"]',\r\n\t\t\t\ttripleScanRetry: '[data-jcs-element=\"triple__scan__retry__button\"]',\r\n\t\t\t\tattemptCountContainer: '[data-jcs-element=\"attempt__count__container\"]',\r\n\t\t\t\tattemptCounter: '[data-jcs-element=\"attempt__counter\"]',\r\n\t\t\t\tfailureReasonMessage: '[data-jcs-element=\"failure__reason__message\"]',\r\n\t\t\t\ttryAgainMessage: '[data-jcs-element=\"try__again__message\"]',\r\n\t\t\t\tblurCheck: '[data-jcs-element=\"blur-check-reason\"]',\r\n\t\t\t\tglareCheck: '[data-jcs-element=\"glare-check-reason\"]',\r\n\t\t\t\tresolutionCheck: '[data-jcs-element=\"resolution-check-reason\"]',\r\n\t\t\t\tedgesCheck: '[data-jcs-element=\"edges-check-reason\"]',\r\n\t\t\t\tqualityChecksContainer: '[data-jcs-element=\"quality-checks-container\"]',\r\n\t\t\t\tvalidationFailedReason: '[data-jcs-element=\"validation-failed-reason\"]',\r\n\t\t\t\ttoggleUploadLabel: '[data-jcs-element=\"gateway__upload__toggle\"]'\r\n\t\t\t}))\r\n\t\t\t.then(({\r\n\t\t\t\ttripleScanGuidanceContainer,\r\n\t\t\t\ttripleScanRetry,\r\n\t\t\t\tattemptCountContainer,\r\n\t\t\t\tattemptCounter,\r\n\t\t\t\tfailureReasonMessage,\r\n\t\t\t\ttryAgainMessage,\r\n\t\t\t\tblurCheck,\r\n\t\t\t\tglareCheck,\r\n\t\t\t\tresolutionCheck,\r\n\t\t\t\tedgesCheck,\r\n\t\t\t\tqualityChecksContainer,\r\n\t\t\t\tvalidationFailedReason,\r\n\t\t\t\ttoggleUploadLabel\r\n\t\t\t}) => {\r\n\t\t\t\t// Focus on the guidance container for accessibility\r\n\t\t\t\tif (tripleScanGuidanceContainer instanceof HTMLElement) {\r\n\t\t\t\t\ttripleScanGuidanceContainer.setAttribute('tabindex', '-1'); // Ensure the element is focusable\r\n\t\t\t\t\ttripleScanGuidanceContainer.focus();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tRenderingService.hideObject(blurCheck);\r\n\t\t\t\tRenderingService.hideObject(glareCheck);\r\n\t\t\t\tRenderingService.hideObject(resolutionCheck);\r\n\t\t\t\tRenderingService.hideObject(edgesCheck);\r\n\t\t\t\tRenderingService.hideObject(toggleUploadLabel);\r\n\r\n\t\t\t\tTemplateService.getElements(this._container, {\r\n\t\t\t\t\tuploadToggleButton: '[data-jcs-element=\"gateway__upload__toggle\"]',\r\n\t\t\t\t}).then(({ uploadToggleButton }) => {\r\n\t\t\t\t\tRenderingService.hideObject(uploadToggleButton);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (this._journey) {\r\n\t\t\t\t\tswitch (this._journey.actionAttempt) {\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '2');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tRenderingService.setText(attemptCounter, '1');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tRenderingService.hideObject(attemptCountContainer);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tTripleScanGuidanceProvider.setTriplescanReasonMessages(this._journey.tripleScanReason, failureReasonMessage, tryAgainMessage, validationFailedReason);\r\n\t\t\t\t\tTripleScanGuidanceProvider.setQualityChecks(this._journey, blurCheck, glareCheck, resolutionCheck, edgesCheck, qualityChecksContainer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (tripleScanRetry instanceof HTMLElement) {\r\n\t\t\t\t\ttripleScanRetry.addEventListener('click', () => {\r\n\r\n\t\t\t\t\t\tswitch (provider) {\r\n\t\t\t\t\t\t\tcase InputProvider.CAMERA:\r\n\t\t\t\t\t\t\t\tTemplateService.getElements(this._container, {\r\n\t\t\t\t\t\t\t\t\tuploadToggleButton: '[data-jcs-element=\"gateway__upload__toggle\"]',\r\n\t\t\t\t\t\t\t\t}).then(({ uploadToggleButton }) => {\r\n\t\t\t\t\t\t\t\t\tRenderingService.showObject(uploadToggleButton);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn CameraProvider.render.call(this, true);\r\n\t\t\t\t\t\t\tcase InputProvider.FILESYSTEM:\r\n\t\t\t\t\t\t\t\tTemplateService.getElements(this._container, {\r\n\t\t\t\t\t\t\t\t\tuploadToggleButton: '[data-jcs-element=\"gateway__upload__toggle\"]',\r\n\t\t\t\t\t\t\t\t}).then(({ uploadToggleButton }) => {\r\n\t\t\t\t\t\t\t\t\tRenderingService.showObject(uploadToggleButton);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn FileSystemProvider.render.call(this, true);\r\n\t\t\t\t\t\t\tcase InputProvider.SMART_CAPTURE:\r\n\t\t\t\t\t\t\t\tTemplateService.getElements(this._container, {\r\n\t\t\t\t\t\t\t\t\tuploadToggleButton: '[data-jcs-element=\"gateway__upload__toggle\"]',\r\n\t\t\t\t\t\t\t\t}).then(({ uploadToggleButton }) => {\r\n\t\t\t\t\t\t\t\t\tRenderingService.showObject(uploadToggleButton);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn SmartCaptureProvider.render.call(this, true);\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tTemplateService.getElements(this._container, {\r\n\t\t\t\t\t\t\t\t\tuploadToggleButton: '[data-jcs-element=\"gateway__upload__toggle\"]',\r\n\t\t\t\t\t\t\t\t}).then(({ uploadToggleButton }) => {\r\n\t\t\t\t\t\t\t\t\tRenderingService.showObject(uploadToggleButton);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn FileSystemProvider.render.call(this, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate static setTriplescanReasonMessages(tripleScanReason: string, failureReasonMessage: HTMLElement | undefined, tryAgainMessage: HTMLElement | undefined, validationFailedReason: HTMLElement | undefined) {\r\n\t\tswitch (tripleScanReason) {\r\n\t\t\tcase HighLevelResult.NotSupported:\r\n\t\t\t\tRenderingService.setText(failureReasonMessage, LanguageService.getTranslation(TranslationKey.FAILURE_REASON_NOT_SUPPORTED));\r\n\t\t\t\tRenderingService.setText(tryAgainMessage, LanguageService.getTranslation(TranslationKey.PLEASE_TRY_AGAIN_NOT_SUPPORTED));\r\n\t\t\t\tRenderingService.setText(validationFailedReason, LanguageService.getTranslation(TranslationKey.VALIDATION_FAILED_REASON_DOC_UNKNOWN));\r\n\t\t\t\tbreak;\r\n\t\t\tcase HighLevelResult.Refer:\r\n\t\t\t\tRenderingService.setText(failureReasonMessage, LanguageService.getTranslation(TranslationKey.FAILURE_REASON_REFER));\r\n\t\t\t\tRenderingService.setText(tryAgainMessage, LanguageService.getTranslation(TranslationKey.PLEASE_TRY_AGAIN_REFER));\r\n\t\t\t\tbreak;\r\n\t\t\tcase HighLevelResult.NotAccepted:\r\n\t\t\t\tRenderingService.setText(failureReasonMessage, LanguageService.getTranslation(TranslationKey.FAILURE_REASON_NOT_ACCEPTED));\r\n\t\t\t\tRenderingService.setText(tryAgainMessage, LanguageService.getTranslation(TranslationKey.PLEASE_TRY_AGAIN_NOT_ACCEPTED));\r\n\t\t\t\tRenderingService.setText(validationFailedReason, LanguageService.getTranslation(TranslationKey.VALIDATION_FAILED_REASON_DOC_NOT_ACCEPTED));\r\n\t\t\t\tbreak;\r\n\t\t\tcase HighLevelResult.Expired:\r\n\t\t\t\tRenderingService.setText(failureReasonMessage, LanguageService.getTranslation(TranslationKey.FAILURE_REASON_EXPIRED));\r\n\t\t\t\tRenderingService.setText(tryAgainMessage, LanguageService.getTranslation(TranslationKey.PLEASE_TRY_AGAIN_EXPIRED));\r\n\t\t\t\tRenderingService.setText(validationFailedReason, LanguageService.getTranslation(TranslationKey.VALIDATION_FAILED_REASON_DOC_EXPIRED));\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tRenderingService.setText(failureReasonMessage, LanguageService.getTranslation(TranslationKey.FAILURE_REASON_NOT_SUPPORTED));\r\n\t\t\t\tRenderingService.setText(tryAgainMessage, LanguageService.getTranslation(TranslationKey.PLEASE_TRY_AGAIN_NOT_SUPPORTED));\r\n\t\t\t\tRenderingService.setText(validationFailedReason, LanguageService.getTranslation(TranslationKey.VALIDATION_FAILED_REASON_DOC_UNKNOWN));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static setQualityChecks(journey: Journey, blurCheck: HTMLElement | undefined, glareCheck: HTMLElement | undefined, resolutionCheck: HTMLElement | undefined, edgesCheck: HTMLElement | undefined, qualityChecksContainer: HTMLElement | undefined) {\r\n\t\tif (journey.blurCheck == \"Bad\")\r\n\t\t\tRenderingService.showObject(blurCheck);\r\n\t\tif (journey.glareCheck == \"Bad\")\r\n\t\t\tRenderingService.showObject(glareCheck);\r\n\t\tif (journey.lowResolutionCheck == \"Bad\")\r\n\t\t\tRenderingService.showObject(resolutionCheck);\r\n\t\tif (journey.fullDocumentInViewCheck == \"Bad\")\r\n\t\t\tRenderingService.showObject(edgesCheck);\r\n\r\n\t\tif (journey.blurCheck != \"Bad\" && journey.glareCheck != \"Bad\" && journey.lowResolutionCheck != \"Bad\" && journey.fullDocumentInViewCheck != \"Bad\")\r\n\t\t\tRenderingService.hideObject(qualityChecksContainer);\r\n\t}\r\n}\r\n","module.exports = \"<h2 class=\\\"section-title\\\">{{PROVIDER_TITLE_LOGIN}}</h2>\\r\\n<form data-jcs-element=\\\"login__form\\\" class=\\\"login-form\\\">\\r\\n\\t<div class=\\\"input--container\\\">\\r\\n\\t\\t<span class=\\\"input--label\\\">{{LOGIN_USERNAME}}</span>\\r\\n\\t\\t<input data-jcs-element=\\\"login__username\\\" class=\\\"input\\\" id=\\\"login_username\\\" type=\\\"text\\\" />\\r\\n\\t</div>\\r\\n\\t<div class=\\\"input--container\\\">\\r\\n\\t\\t<span class=\\\"input--label\\\">{{LOGIN_PASSWORD}}</span>\\r\\n\\t\\t<input data-jcs-element=\\\"login__password\\\" class=\\\"input\\\" id=\\\"login_password\\\" type=\\\"password\\\" />\\r\\n\\t</div>\\r\\n\\t<div class=\\\"login-error--container\\\">\\r\\n\\t\\t<p data-jcs-element=\\\"login__errors\\\" class=\\\"login-error\\\"></p>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"button-container\\\">\\r\\n\\t\\t<input data-jcs-element=\\\"login__submit\\\" class=\\\"button button--primary\\\" type=\\\"submit\\\" value=\\\"{{LOGIN_SUBMIT}}\\\" />\\r\\n\\t</div>\\r\\n</form>\";","import { EventEmitter } from 'events';\r\nimport CameraService, { CameraPermissionState } from '../../../helpers/classes/CameraService';\r\nimport EventService from '../../../helpers/classes/EventService';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport RenderingService from '../../../helpers/classes/RenderingService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { ReticleType } from '../../../idscan/enums/Camera';\r\nimport { JourneyEvent } from '../../../idscan/enums/JourneyEvent';\r\nimport { TranslationKey } from '../../../idscan/enums/Translation';\r\nimport { CortixResponseAction, ICameraMediaChannelOptions, ICortixResponse, LivenessActionType, LivenessFinalResult } from '../../types';\r\nimport { Helper } from './helper';\r\nimport { SendingFramesManager } from './sendingFramesManager';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class CameraCapture {\r\n\tpublic journeyId: string;\r\n\tpublic cortexApiPath: string;\r\n\tpublic cortexApiController: string;\r\n\tpublic imageQuality: number;\r\n\tpublic grayscale: boolean;\r\n\r\n\tprivate _capturingTimer: number | undefined;\r\n\tprivate _sendingFramesTimer: number | undefined;\r\n\tprivate _pauseTimer: number | undefined;\r\n\tprivate _downCounterTimer: number | undefined;\r\n\r\n\tprivate _SENDING_REQUESTS_DELAY_MILLISECOND: number = 10;\r\n\tprivate _CAPTURING_DELAY_MILLISECOND: number = 100;\r\n\tprivate _MAX_AVAILABLE_CAPTURED_IMAGES_COUNT: number = 1;\r\n\tprivate _SEND_REQUEST_TIMEOUT_SECOND: number = 0.001;\r\n\r\n\tprivate _capturedImagesQueue: Blob[] = [];\r\n\tprivate _lastSentRequestTime: number = new Date().getTime();\r\n\tprivate _sendingFramesManager: SendingFramesManager;\r\n\tprivate _isLastFrameConfirmed: boolean = false;\r\n\tprivate _currentStep: number = 8;\r\n\r\n\tprivate _container?: HTMLElement;\r\n\r\n\tpublic get emitter(): EventEmitter {\r\n\t\treturn this._sendingFramesManager;\r\n\t}\r\n\r\n\tconstructor(options: ICameraMediaChannelOptions, journeyId: string) {\r\n\t\tconst { imageQuality = 85, frameSubmissionDelay = 0.001, grayscale = false, cortexApiPath, cortexApiController, container } = options;\r\n\r\n\t\tthis.journeyId = journeyId;\r\n\t\tthis._container = container;\r\n\r\n\t\tthis.imageQuality = Helper.boundValue(imageQuality, 0, 100);\r\n\t\t// this._SEND_REQUEST_TIMEOUT_SECOND = Helper.boundValue(frameSubmissionDelay, 0.1, 1);\r\n\t\tthis._SEND_REQUEST_TIMEOUT_SECOND = 0.001;\r\n\t\tthis.grayscale = grayscale;\r\n\t\tthis.cortexApiPath = cortexApiPath;\r\n\t\tthis.cortexApiController = cortexApiController;\r\n\r\n\t\tthis._sendingFramesManager = new SendingFramesManager(this.journeyId, this.cortexApiPath, this.cortexApiController);\r\n\r\n\t\tthis._sendingFramesManager.on(CortixResponseAction.KeepCapturing, ({ message, requiredAction }: ICortixResponse) => {\r\n\t\t\tthis._isLastFrameConfirmed = true;\r\n\t\t\tEventService.publish(JourneyEvent.CAMERA_POSE, { pose: message, requiredAction })\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tif (window.navigator && window.navigator.vibrate) {\r\n\t\t\t\t\t\twindow.navigator.vibrate(300);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.showMessage(message);\r\n\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t});\r\n\r\n\t\tthis._sendingFramesManager.on(CortixResponseAction.PauseCapturing, ({ message, pauseDuration }: ICortixResponse) => {\r\n\t\t\tEventService.publish(JourneyEvent.CAMERA_PAUSE)\r\n\t\t\t\t.then(() => this.showMessage(message))\r\n\t\t\t\t.then(() => this.pauseCapturing(pauseDuration));\r\n\t\t});\r\n\r\n\t\tthis._sendingFramesManager.on(CortixResponseAction.StopCapturing, ({ message }: ICortixResponse) => {\r\n\t\t\tEventService.publish(JourneyEvent.CAMERA_DONE)\r\n\t\t\t\t.then(() => this.showMessage(message))\r\n\t\t\t\t.then(() => this.finish());\r\n\t\t});\r\n\r\n\t\tthis._sendingFramesManager.on(CortixResponseAction.FinishLivenessCapturing, ({ message }: ICortixResponse) => {\r\n\t\t\tEventService.publish(JourneyEvent.CAMERA_DONE)\r\n\t\t\t\t.then(() => this.showMessage(message));\r\n\t\t});\r\n\r\n\t\tthis._sendingFramesManager.on(CortixResponseAction.Close, ({ code, reason, wasClean }: CloseEvent) => {\r\n\t\t\tif (code !== 1000) {\r\n\t\t\t\tEventService.publish(JourneyEvent.ERROR, { code, reason, wasClean })\r\n\t\t\t\t\t.then(() => this.finish());\r\n\t\t\t} else {\r\n\t\t\t\tthis.finish();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._sendingFramesManager.on(CortixResponseAction.Error, (event: Event) => {\r\n\t\t\tEventService.publish(JourneyEvent.ERROR, { event })\r\n\t\t\t\t.then(() => this.finish());\r\n\t\t});\r\n\t}\r\n\r\n\tpublic init = () => {\r\n\t\treturn this.cleanHtmlContent().then(this.renderStatus)\r\n\t\t\t.then(() => TemplateService.getElements(this._container, {\r\n\t\t\t\tcameraSelect: '[data-jcs-element=\"camera__select\"]',\r\n\t\t\t\tcameraStatus: '[data-jcs-element=\"camera__status\"]',\r\n\t\t\t\tstart: '[data-jcs-element=\"retina__start\"]',\r\n\t\t\t}).then(({ cameraSelect, cameraStatus, start }) => {\r\n\t\t\t\tRenderingService.setEnabled(cameraSelect as HTMLSelectElement, false);\r\n\t\t\t\tRenderingService.hideObject(cameraSelect as HTMLSelectElement);\r\n\t\t\t\tRenderingService.setEnabled(start as HTMLInputElement, false);\r\n\r\n\t\t\t\tthis.changeCameraStream(undefined, ReticleType.PORTRAIT)\r\n\t\t\t\t\t.then(() => this.renderAvailableCameras(cameraSelect as HTMLSelectElement))\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect as HTMLSelectElement, true);\r\n\t\t\t\t\t\tRenderingService.setEnabled(start as HTMLInputElement, true);\r\n\t\t\t\t\t\tRenderingService.hideObject(cameraStatus);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(this.attachEvents)\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tRenderingService.hideObject(cameraSelect);\r\n\t\t\t\t\t\tRenderingService.showObject(cameraStatus);\r\n\t\t\t\t\t\tRenderingService.setText(cameraStatus, LanguageService.getTranslation(error.message as TranslationKey));\r\n\t\t\t\t\t});\r\n\t\t\t}));\r\n\t}\r\n\r\n\tpublic start = () => {\r\n\t\tthis._sendingFramesManager.connect().then(() => {\r\n\t\t\tthis.startCapturingTimer();\r\n\t\t\tEventService.publish(JourneyEvent.CAMERA_START, { camera: CameraService.currentDeviceId });\r\n\t\t});\r\n\t}\r\n\r\n\tpublic finish = () => {\r\n\t\tthis.stopPausingTimers();\r\n\t\tthis.stopCapturingTimer();\r\n\t\tthis.stopSendingFramesTimer();\r\n\r\n\t\tCameraService.stopStreaming()\r\n\t\t\t.then(() => this._sendingFramesManager.close());\r\n\t}\r\n\r\n\tpublic runTestResponse = (response: ICortixResponse) => {\r\n\t\tthis._sendingFramesManager.runTestResponse(response);\r\n\t}\r\n\r\n\t/**\r\n\t * Change the camera the images are currently being streamed from. If no\r\n\t * deviceId is defined, the first camera will be used.\r\n\t *\r\n\t * @param deviceId - The id of the camera to change the stream for to\r\n\t *\r\n\t * @returns Promise resolving with the deviceId for the camera in use\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tprotected changeCameraStream = (deviceId?: string, reticleType: ReticleType = ReticleType.NONE): Promise<string | undefined> => TemplateService.getElements(this._container, {\r\n\t\tcameraViewfinder: '[data-jcs-element=\"camera__viewfinder\"]',\r\n\t})\r\n\t\t.then(({ cameraViewfinder }) => {\r\n\t\t\tif (cameraViewfinder instanceof HTMLCanvasElement) {\r\n\t\t\t\treturn CameraService.stopStreaming()\r\n\t\t\t\t\t.then(() => CameraService.clearCanvas(cameraViewfinder))\r\n\t\t\t\t\t.then(() => EventService.publish(JourneyEvent.CAMERA_CHANGE, { camera: deviceId }))\r\n\t\t\t\t\t.then(() => CameraService.getStream(deviceId, undefined, {\r\n\t\t\t\t\t\thorizontal: 800,\r\n\t\t\t\t\t\tvertical: 480\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\thorizontal: 640,\r\n\t\t\t\t\t\tvertical: 480\r\n\t\t\t\t\t}))\r\n\t\t\t\t\t.then((stream) => CameraService.renderStreamToElement(stream, cameraViewfinder, {\r\n\t\t\t\t\t\treticleType,\r\n\t\t\t\t\t\tmirror: true\r\n\t\t\t\t\t}));\r\n\t\t\t} else {\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(() => CameraService.currentDeviceId)\r\n\r\n\tprivate attachEvents = () => TemplateService.getElements(this._container, {\r\n\t\tcameraSelect: '[data-jcs-element=\"camera__select\"]',\r\n\t\tcameraStatus: '[data-jcs-element=\"camera__status\"]',\r\n\t\tcameraViewfinder: '[data-jcs-element=\"camera__viewfinder\"]',\r\n\t\tstart: '[data-jcs-element=\"retina__start\"]',\r\n\t})\r\n\t\t.then(({ cameraSelect, cameraStatus, cameraViewfinder, start }) => {\r\n\t\t\tif (start instanceof HTMLElement) {\r\n\t\t\t\tstart.addEventListener('click', () => {\r\n\t\t\t\t\tthis.start();\r\n\r\n\t\t\t\t\tRenderingService.setEnabled(cameraSelect as HTMLSelectElement, false);\r\n\t\t\t\t\tRenderingService.setEnabled(start as HTMLInputElement, false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (cameraSelect instanceof HTMLSelectElement) {\r\n\t\t\t\tRenderingService.setEnabled(cameraSelect, true);\r\n\r\n\t\t\t\tcameraSelect.addEventListener('change', () => {\r\n\t\t\t\t\tRenderingService.hideObject(cameraStatus);\r\n\t\t\t\t\tRenderingService.setEnabled(cameraSelect, false);\r\n\t\t\t\t\tRenderingService.setEnabled(start as HTMLInputElement, false);\r\n\r\n\t\t\t\t\tCameraService.stopStreaming()\r\n\t\t\t\t\t\t.then(() => CameraService.clearCanvas(cameraViewfinder as HTMLCanvasElement))\r\n\t\t\t\t\t\t.then(() => EventService.publish(JourneyEvent.CAMERA_CHANGE, { camera: cameraSelect.value }))\r\n\t\t\t\t\t\t.then(() => this.changeCameraStream(cameraSelect.value, ReticleType.PORTRAIT))\r\n\t\t\t\t\t\t.then(() => this.renderAvailableCameras(cameraSelect as HTMLSelectElement))\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect as HTMLSelectElement, true);\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(start as HTMLInputElement, true);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\tRenderingService.setEnabled(cameraSelect, true);\r\n\t\t\t\t\t\t\tRenderingService.showObject(cameraStatus);\r\n\t\t\t\t\t\t\tRenderingService.setText(cameraStatus, LanguageService.getTranslation(error.message as TranslationKey));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\r\n\tprivate cleanHtmlContent = () => TemplateService.getElements(this._container, {\r\n\t\tcameraNotification: '[data-jcs-element=\"retina__notifications\"]',\r\n\t\ttimeCounterContainer: '[data-jcs-element=\"retina__timer\"]',\r\n\t\tmessageContainer: '[data-jcs-element=\"retina__message\"]',\r\n\t\tstart: '[data-jcs-element=\"retina__start\"]',\r\n\t})\r\n\t\t.then(({ cameraNotification, timeCounterContainer, messageContainer, start }) => {\r\n\t\t\tRenderingService.setEnabled(start as HTMLInputElement, false);\r\n\t\t\tRenderingService.hideObject(messageContainer);\r\n\t\t\tRenderingService.hideObject(cameraNotification);\r\n\t\t\tRenderingService.hideObject(timeCounterContainer);\r\n\t\t\tRenderingService.setText(timeCounterContainer);\r\n\t\t\tRenderingService.setText(messageContainer);\r\n\t\t})\r\n\r\n\tprivate startCapturingTimer = () => {\r\n\t\tthis.stopCapturingTimer();\r\n\t\tthis._capturingTimer = setInterval(this.captureAndSendFrame, this._CAPTURING_DELAY_MILLISECOND) as any as number;\r\n\t}\r\n\r\n\tprivate stopCapturingTimer = () => {\r\n\t\tclearInterval(this._capturingTimer);\r\n\t\tthis._capturingTimer = undefined;\r\n\r\n\t\t// Clear the queue out so there's nothing to send\r\n\t\tthis._capturedImagesQueue.length = 0;\r\n\t\tthis._capturedImagesQueue = [];\r\n\t}\r\n\r\n\tprivate captureAndSendFrame = () => {\r\n\t\t// Get a new blob from the stream and send it\r\n\t\t// if (this._isLastFrameConfirmed) {\r\n\t\tconst step = this._currentStep;\r\n\t\treturn CameraService.getLivenessBlobFromCurrentStream()\r\n\t\t\t.then((frame) => {\r\n\t\t\t\tnew Response(frame).arrayBuffer().then((result) => {\r\n\t\t\t\t\tconst a = new Uint8Array(2);\r\n\t\t\t\t\ta[0] = step;\r\n\t\t\t\t\ta[1] = 2;\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\tconst finalBuffer = this._appendBuffer(a, result);\r\n\t\t\t\t\t\tconst finalBlob = new Blob([new Uint8Array(finalBuffer)]);\r\n\t\t\t\t\t\tif (this._currentStep === step) {\r\n\t\t\t\t\t\t\tthis._sendingFramesManager.send(finalBlob);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t// }\r\n\t\t// else { return; }\r\n\t}\r\n\r\n\tprivate startSendingFramesTimer = () => {\r\n\t\tthis.stopSendingFramesTimer();\r\n\r\n\t\tthis._sendingFramesTimer = setInterval(() => {\r\n\t\t\tthis.sendNewFrame();\r\n\t\t\t/**\r\n\t\t\t * This code is to apply a delay time between sending frames\r\n\t\t\t * for example send new frame after minimum 0.5 second\r\n\t\t\t * if SEND_REQUEST_TIMEOUT_SECOND variable is set to 0 then frames will be sent without any delay\r\n\t\t\t */\r\n\t\t\t// here format delayToComplete to be in seconds:\r\n\t\t\tconst delayToComplete = new Date().getTime() - this._lastSentRequestTime;\r\n\t\t\tconst delayToCompleteFormatted = delayToComplete / 1000;\r\n\t\t\tif (delayToCompleteFormatted >= this._SEND_REQUEST_TIMEOUT_SECOND) {\r\n\t\t\t\tthis.sendNewFrame();\r\n\t\t\t}\r\n\t\t}, this._SENDING_REQUESTS_DELAY_MILLISECOND) as any as number;\r\n\t}\r\n\r\n\tprivate stopSendingFramesTimer = () => {\r\n\t\tif (Helper.isDefined(this._sendingFramesTimer)) {\r\n\t\t\tclearInterval(this._sendingFramesTimer);\r\n\t\t\tthis._sendingFramesTimer = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate pauseCapturing = (pauseDuration: number) => {\r\n\t\tthis.showDownCounter(pauseDuration);\r\n\t\tpauseDuration += 2;\r\n\r\n\t\tthis.stopPausingTimers();\r\n\r\n\t\tthis.stopCapturingTimer();\r\n\t\tthis.stopSendingFramesTimer();\r\n\t\tthis._sendingFramesManager.close();\r\n\r\n\t\tthis._pauseTimer = setTimeout(() => {\r\n\t\t\tthis._sendingFramesManager.connect()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\t// this.startSendingFramesTimer();\r\n\t\t\t\t\tthis.startCapturingTimer();\r\n\t\t\t\t\tthis._pauseTimer = undefined;\r\n\t\t\t\t});\r\n\t\t}, pauseDuration * 1000) as any as number;\r\n\t}\r\n\tprivate stopPausingTimers = () => {\r\n\t\tif (Helper.isDefined(this._pauseTimer)) {\r\n\t\t\tclearTimeout(this._pauseTimer);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate sendNewFrame = () => {\r\n\t\tif (!this._capturingTimer || this._capturedImagesQueue.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Get an image from the beginning of the queue and send it\r\n\t\tconst frame = this._capturedImagesQueue.shift();\r\n\t\tthis._lastSentRequestTime = new Date().getTime();\r\n\r\n\t\tif (this._sendingFramesManager && frame) {\r\n\t\t\tthis._sendingFramesManager.send(frame);\r\n\t\t}\r\n\t}\r\n\tprivate _appendBuffer = (firstBuffer: ArrayBuffer, secondBuffer: ArrayBuffer) => {\r\n\r\n\t\tif (!firstBuffer) {\r\n\t\t\treturn secondBuffer;\r\n\t\t} else if (!secondBuffer) {\r\n\t\t\treturn firstBuffer;\r\n\t\t}\r\n\r\n\t\tconst tmp = new Uint8Array(firstBuffer.byteLength + secondBuffer.byteLength);\r\n\t\ttmp.set(new Uint8Array(firstBuffer), 0);\r\n\t\ttmp.set(new Uint8Array(secondBuffer), firstBuffer.byteLength);\r\n\t\treturn tmp.buffer;\r\n\t}\r\n\r\n\tprivate _updateCurrentActionEnum = (msg: string) => {\r\n\t\tswitch (msg) {\r\n\t\t\tcase LivenessActionType.Smile:\r\n\t\t\t\tthis._currentStep = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase LivenessActionType.Frown:\r\n\t\t\t\tthis._currentStep = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tcase LivenessActionType.TiltLeft:\r\n\t\t\t\tthis._currentStep = 2;\r\n\t\t\t\tbreak;\r\n\t\t\tcase LivenessActionType.TiltRight:\r\n\t\t\t\tthis._currentStep = 3;\r\n\t\t\t\tbreak;\r\n\t\t\tcase LivenessActionType.TiltUp:\r\n\t\t\t\tthis._currentStep = 4;\r\n\t\t\t\tbreak;\r\n\t\t\tcase LivenessActionType.TiltDown:\r\n\t\t\t\tthis._currentStep = 5;\r\n\t\t\t\tbreak;\r\n\t\t\tcase LivenessActionType.TiltStraight:\r\n\t\t\t\tthis._currentStep = 6;\r\n\t\t\t\tbreak;\r\n\t\t\tcase LivenessActionType.NoAction:\r\n\t\t\t\tthis._currentStep = 7;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis._currentStep = 8;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate showMessage = (msg: string = '') => TemplateService.getElements(this._container, {\r\n\t\tcameraNotification: '[data-jcs-element=\"retina__notifications\"]',\r\n\t\tmessageContainer: '[data-jcs-element=\"retina__message\"]'\r\n\t})\r\n\t\t.then(({ cameraNotification, messageContainer }) => {\r\n\t\t\tthis._updateCurrentActionEnum(msg);\r\n\t\t\tswitch (msg) {\r\n\t\t\t\tcase LivenessActionType.Smile:\r\n\t\t\t\tcase LivenessActionType.Frown:\r\n\t\t\t\tcase LivenessActionType.TiltLeft:\r\n\t\t\t\tcase LivenessActionType.TiltRight:\r\n\t\t\t\tcase LivenessActionType.TiltUp:\r\n\t\t\t\tcase LivenessActionType.TiltDown:\r\n\t\t\t\tcase LivenessActionType.TiltStraight:\r\n\t\t\t\tcase LivenessActionType.NoAction:\r\n\t\t\t\tcase LivenessActionType.ProcessingLiveness:\r\n\t\t\t\t\tRenderingService.setText(messageContainer, LanguageService.getTranslation(`LIVENESS_ACTION_${msg}` as TranslationKey));\r\n\t\t\t\t\tRenderingService.showObject(messageContainer);\r\n\t\t\t\t\tRenderingService.showObject(cameraNotification);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase LivenessFinalResult.Failed:\r\n\t\t\t\tcase LivenessFinalResult.Passed:\r\n\t\t\t\tcase LivenessFinalResult.ActionTimedOut:\r\n\t\t\t\tcase LivenessFinalResult.Interrupted:\r\n\t\t\t\tcase LivenessFinalResult.Undefined:\r\n\t\t\t\t\tRenderingService.setText(messageContainer, LanguageService.getTranslation(`LIVENESS_RESULT_${msg}` as TranslationKey));\r\n\t\t\t\t\tRenderingService.showObject(messageContainer);\r\n\t\t\t\t\tRenderingService.showObject(cameraNotification);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.debug(msg);\r\n\t\t\t}\r\n\t\t})\r\n\r\n\tprivate showDownCounter = (startTime: number) => TemplateService.getElements(this._container, {\r\n\t\tcameraNotification: '[data-jcs-element=\"retina__notifications\"]',\r\n\t\tmessageContainer: '[data-jcs-element=\"retina__message\"]',\r\n\t\ttimeCounterContainer: '[data-jcs-element=\"retina__timer\"]'\r\n\t})\r\n\t\t.then(({ cameraNotification, timeCounterContainer, messageContainer }) => {\r\n\t\t\tif (startTime !== undefined) {\r\n\r\n\t\t\t\tif (Helper.isDefined(this._downCounterTimer)) {\r\n\t\t\t\t\tclearInterval(this._downCounterTimer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tRenderingService.setText(timeCounterContainer, startTime.toString());\r\n\t\t\t\tRenderingService.showObject(timeCounterContainer);\r\n\t\t\t\tRenderingService.showObject(cameraNotification);\r\n\t\t\t\tRenderingService.showObject(messageContainer);\r\n\r\n\t\t\t\tthis._downCounterTimer = setInterval(() => {\r\n\t\t\t\t\tif (startTime >= 0) {\r\n\t\t\t\t\t\tif (timeCounterContainer) {\r\n\t\t\t\t\t\t\ttimeCounterContainer.innerHTML = startTime.toString();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tstartTime--;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclearInterval(this._downCounterTimer);\r\n\r\n\t\t\t\t\t\tRenderingService.hideObject(timeCounterContainer);\r\n\t\t\t\t\t\tRenderingService.hideObject(cameraNotification);\r\n\t\t\t\t\t\tRenderingService.hideObject(messageContainer);\r\n\t\t\t\t\t\tRenderingService.setText(timeCounterContainer);\r\n\t\t\t\t\t\tRenderingService.setText(messageContainer);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000) as any as number;\r\n\t\t\t}\r\n\t\t})\r\n\r\n\tprivate renderStatus = () => {\r\n\t\treturn TemplateService.getElements(this._container, {\r\n\t\t\tcameraStatus: '[data-jcs-element=\"camera__status\"]',\r\n\t\t})\r\n\t\t\t.then(({ cameraStatus }) => CameraService.getCameraPermission().then((permission) => {\r\n\t\t\t\tswitch (permission) {\r\n\t\t\t\t\tcase CameraPermissionState.GRANTED:\r\n\t\t\t\t\t\treturn RenderingService.hideObject(cameraStatus);\r\n\r\n\t\t\t\t\tcase CameraPermissionState.DENIED:\r\n\t\t\t\t\tcase CameraPermissionState.PROMPT:\r\n\t\t\t\t\t\treturn RenderingService.setText(cameraStatus, LanguageService.getTranslation(TranslationKey.EXCEPTION_PLATFORM_CAMERA_PERMISSION_DENIED));\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn RenderingService.setText(cameraStatus, LanguageService.getTranslation(TranslationKey.EXCEPTION_PLATFORM_CAMERA_PERMISSION_UNAVAILABLE));\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t}\r\n\r\n\tprivate renderAvailableCameras = (el?: HTMLSelectElement) => CameraService.getVideoCameras()\r\n\t\t.then((cameras) => cameras.map((camera) => ({\r\n\t\t\tname: camera.label,\r\n\t\t\tvalue: camera.deviceId,\r\n\t\t\tselected: CameraService.currentDeviceId === camera.deviceId\r\n\t\t})))\r\n\t\t.then((cameras) => RenderingService.updateSelect(el as HTMLSelectElement, cameras))\r\n}\r\n","import CameraService, { CameraPermissionState } from '../../../helpers/classes/CameraService';\r\nimport EventService from '../../../helpers/classes/EventService';\r\nimport { ExceptionManager } from '../../../helpers/classes/ExceptionManager';\r\nimport LanguageService from '../../../helpers/classes/LanguageService';\r\nimport RenderingService, { ISelectItem } from '../../../helpers/classes/RenderingService';\r\nimport SocketService from '../../../helpers/classes/SocketService';\r\nimport TemplateService from '../../../helpers/classes/TemplateService';\r\nimport { TemplateType } from '../../../helpers/enums/Templates';\r\nimport { JourneyContainer } from '../../classes/JourneyContainer';\r\nimport JourneyManager from '../../classes/JourneyManager';\r\nimport { ChangeMode } from '../../enums/InputProvider';\r\nimport { JourneyEvent } from '../../enums/JourneyEvent';\r\nimport { JourneyStep } from '../../enums/JourneyStep';\r\nimport { Templates } from '../../enums/Templates';\r\nimport { TranslationKey } from '../../enums/Translation';\r\nimport { IJourneyDefinition } from '../../interfaces/JourneyDefinition';\r\nimport { STORAGE_KEYS } from '../../configuration/StorageKeys';\r\nimport StorageService from '../../../helpers/classes/StorageService';\r\n\r\n\r\nexport class JourneySelectStep {\r\n\r\n\tpublic static journeyDefinitionsCount = 0;\r\n\r\n\tpublic static render(this: JourneyContainer) {\r\n\t\treturn TemplateService.renderToContainer(this._container, Templates.Initializing)\r\n\t\t\t.then(() => JourneyManager.getJourneyDefinitions())\r\n\t\t\t.then((journeyDefinitions = []) => {\r\n\t\t\t\tJourneySelectStep.journeyDefinitionsCount = journeyDefinitions.length;\r\n\t\t\t\tconst externalJourneyDefinition = journeyDefinitions.find((d) => d.JourneyDefinitionId === this._config.journeyDefinitionId);\r\n\t\t\t\tconst externalHeaderJourneyDefinition = journeyDefinitions.find((d) => d.JourneyDefinitionId === StorageService.get(STORAGE_KEYS.journeyDefinitionId)!);\r\n\t\t\t\tif (externalJourneyDefinition) {\r\n\t\t\t\t\tJourneySelectStep.chooseJourney.call(this, externalJourneyDefinition);\r\n\t\t\t\t}\r\n\t\t\t\telse if (externalHeaderJourneyDefinition) {\r\n\t\t\t\t\tJourneySelectStep.chooseJourney.call(this, externalHeaderJourneyDefinition);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tTemplateService.renderToContainer(this._container, Templates.JourneySelect)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\t\t\tdefinitions: journeyDefinitions.map((definition) => ({\r\n\t\t\t\t\t\t\t\t\t_definitionName: definition.Name,\r\n\t\t\t\t\t\t\t\t\tentryDefinitions: definition.EntryDefinitions.map((entry) => ({\r\n\t\t\t\t\t\t\t\t\t\t_type: JourneySelectStep.getJourneyEntryDefinitionName(entry.Type),\r\n\t\t\t\t\t\t\t\t\t\t_id: entry.JourneyEntryDefinitionId\r\n\t\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\treturn TemplateService.renderToContainer(this._container, Templates.JourneySelect, data);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((element) => TemplateService.getElements(element, {\r\n\t\t\t\t\t\t\tchoices: '[data-jcs-element=\"journey-select__choices\"]',\r\n\t\t\t\t\t\t\tselect: '[data-jcs-element=\"journey-select__continue\"]'\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t.then(({ choices, select }) => {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tchoices instanceof HTMLSelectElement &&\r\n\t\t\t\t\t\t\t\tselect instanceof HTMLInputElement\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tif (journeyDefinitions.length === 0) {\r\n\t\t\t\t\t\t\t\t\tRenderingService.updateSelect(choices, [{\r\n\t\t\t\t\t\t\t\t\t\tname: LanguageService.getTranslation(TranslationKey.EXCEPTION_JOURNEY_DEFINITIONS_MISSING),\r\n\t\t\t\t\t\t\t\t\t\tvalue: '',\r\n\t\t\t\t\t\t\t\t\t\tdisabled: true\r\n\t\t\t\t\t\t\t\t\t}]);\r\n\t\t\t\t\t\t\t\t\tRenderingService.setEnabled(select, false);\r\n\r\n\t\t\t\t\t\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.TemplateException(TranslationKey.EXCEPTION_JOURNEY_DEFINITIONS_MISSING));\r\n\t\t\t\t\t\t\t\t} else if (journeyDefinitions.length === 1) {\r\n\t\t\t\t\t\t\t\t\tJourneySelectStep.chooseJourney.call(this, journeyDefinitions[0]);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tselect.addEventListener('click', (e) => JourneySelectStep.chooseJourney.call(this, journeyDefinitions.find((definition) => definition.JourneyDefinitionId === choices.value)));\r\n\r\n\t\t\t\t\t\t\t\t\tRenderingService.updateSelect(choices, journeyDefinitions.reduce((out, curr, i) => [\r\n\t\t\t\t\t\t\t\t\t\t...out,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tname: curr.Name,\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: curr.JourneyDefinitionId,\r\n\t\t\t\t\t\t\t\t\t\t\tselected: i === 0\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t], [] as ISelectItem[]));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthrow ExceptionManager.process(new ExceptionManager.TemplateException(TranslationKey.EXCEPTION_TEMPLATE_ELEMENTS_MISSING));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => EventService.publish(JourneyEvent.DISPLAY_STEP, { step: Templates.JourneySelect }));\r\n\t}\r\n\r\n\tprivate static chooseJourney(this: JourneyContainer, journeyDefinition?: IJourneyDefinition): void {\r\n\t\tif (journeyDefinition) {\r\n\r\n\t\t\tlet hasLivenessStep = false;\r\n\t\t\tjourneyDefinition.EntryDefinitions.forEach(element => {\r\n\t\t\t\tif (JourneyStep.LIVENESS === JourneySelectStep.getJourneyEntryDefinitionName(element.Type)) {\r\n\t\t\t\t\treturn hasLivenessStep = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (hasLivenessStep) {\r\n\t\t\t\t// There is Liveness Step\r\n\t\t\t\tCameraService.getVideoCameras()\r\n\t\t\t\t\t.then(devices => {\r\n\t\t\t\t\t\tif (devices.length === 0) {\r\n\t\t\t\t\t\t\tTemplateService.renderToContainer(this._container, Templates.HasNoCamera)\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tif (JourneySelectStep.journeyDefinitionsCount === 1) {\r\n\t\t\t\t\t\t\t\t\t\tthis.hookGlobalButtons(false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse { //There is camera\r\n\t\t\t\t\t\t\tif (devices.length != 0) {\r\n\t\t\t\t\t\t\t\tCameraService.getVideoCameras()\r\n\t\t\t\t\t\t\t\tPromise.all([\r\n\t\t\t\t\t\t\t\t\tCameraService.getCameraPermission(),\r\n\t\t\t\t\t\t\t\t\tCameraService.hasDeviceCapableOfResolution()\r\n\t\t\t\t\t\t\t\t]).then(([permission]) => {\r\n\t\t\t\t\t\t\t\t\tswitch (permission) {\r\n\t\t\t\t\t\t\t\t\t\tcase CameraPermissionState.DENIED:\r\n\t\t\t\t\t\t\t\t\t\t\treturn TemplateService.renderToContainer(this._container, Templates.HasNoCamera)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (JourneySelectStep.journeyDefinitionsCount === 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.hookGlobalButtons(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\t\t\tcase CameraPermissionState.GRANTED:\r\n\t\t\t\t\t\t\t\t\t\t\tthis._journeyDefinitionId = journeyDefinition.JourneyDefinitionId;\r\n\t\t\t\t\t\t\t\t\t\t\tTemplateService.renderToContainer(this._container, Templates.Initializing)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => this.setProviders(journeyDefinition.CapturingMedia, journeyDefinition.IsPredefinedJourney))\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => this.changeInputProvider(this._config.defaultInputProvider, ChangeMode.FALLBACK))\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => this.evaluate(false, journeyDefinition.IsPredefinedJourney));\r\n\t\t\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\tthis._journeyDefinitionId = journeyDefinition.JourneyDefinitionId;\r\n\t\t\t\t\t\t\t\t\t\t\tTemplateService.renderToContainer(this._container, Templates.Initializing)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => this.setProviders(journeyDefinition.CapturingMedia, journeyDefinition.IsPredefinedJourney))\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => this.changeInputProvider(this._config.defaultInputProvider, ChangeMode.FALLBACK))\r\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => this.evaluate(false, journeyDefinition.IsPredefinedJourney));\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse { // There is no Liveness Step\r\n\t\t\t\tif (journeyDefinition.CapturingMedia === 1) {\r\n\t\t\t\t\tthis.getJourney().then(result => {\r\n\t\t\t\t\t\tSocketService.start(journeyDefinition.JourneyDefinitionId, result.id)\r\n\t\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t\t/* NO-OP */\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(() => SocketService.release())\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tSocketService.stop();\r\n\t\t\t\t}\r\n\t\t\t\tthis._journeyDefinitionId = journeyDefinition.JourneyDefinitionId;\r\n\r\n\t\t\t\tTemplateService.renderToContainer(this._container, Templates.Initializing)\r\n\t\t\t\t\t.then(() => this.setProviders(journeyDefinition.CapturingMedia, journeyDefinition.IsPredefinedJourney))\r\n\t\t\t\t\t.then(() => this.changeInputProvider(this._config.defaultInputProvider, ChangeMode.FALLBACK))\r\n\t\t\t\t\t.then(() => this.evaluate(false, journeyDefinition.IsPredefinedJourney));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n\tprivate static getJourneyEntryDefinitionName(entryDefinitionType: number): any {\r\n\t\tswitch (entryDefinitionType) {\r\n\t\t\tcase 1: {\r\n\t\t\t\treturn JourneyStep.FRONTSIDE;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 2: {\r\n\t\t\t\treturn JourneyStep.BACKSIDE;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 3: {\r\n\t\t\t\treturn JourneyStep.SELFIE;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 4: {\r\n\t\t\t\treturn JourneyStep.ADDRESSDOCUMENT;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 6: {\r\n\t\t\t\treturn JourneyStep.LIVENESS;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 9: {\r\n\t\t\t\treturn JourneyStep.COVIDPASS;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 10: {\r\n\t\t\t\treturn JourneyStep.DATACHECKS;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport { Helper } from './helper';\r\nimport { CameraCaptureService } from './MediaChannelType/camera/cameraCaptureService';\r\nimport { ICameraMediaChannelOptions, ICortixResponse, IImageCaptureService, IMediaChannelInformation, IRetinaService, IRetinaSettings, MediaChannelType } from './types';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class RetinaService implements IRetinaService {\r\n\tprivate _journeyId: string;\r\n\tprivate _container: HTMLElement;\r\n\tprivate _currentImageCaptureService?: IImageCaptureService;\r\n\tprivate _retinaSettings: IRetinaSettings;\r\n\r\n\tpublic get emitter(): EventEmitter {\r\n\t\treturn this._currentImageCaptureService!.emitter;\r\n\t}\r\n\r\n\tconstructor(\r\n\t\tjourneyId: string,\r\n\t\tcontainer: HTMLElement,\r\n\t\tretinaSettings?: IRetinaSettings\r\n\t) {\r\n\t\tthis._journeyId = journeyId;\r\n\t\tthis._container = container;\r\n\t\tthis._retinaSettings = { ...Helper.defaultRetinaSettings, ...retinaSettings };\r\n\t}\r\n\r\n\tpublic start = () => {\r\n\t\tif (!this._currentImageCaptureService) {\r\n\t\t\tthrow new Error('The current image capture service is undefined');\r\n\t\t}\r\n\r\n\t\treturn this._currentImageCaptureService.start();\r\n\t}\r\n\r\n\tpublic reset = (journeyId: string) => {\r\n\t\tthis._journeyId = journeyId;\r\n\r\n\t\treturn this.create()\r\n\t\t\t.then(() => this);\r\n\t}\r\n\r\n\tpublic terminate = (): Promise<void> => new Promise((resolve) => {\r\n\t\tif (this._currentImageCaptureService) {\r\n\t\t\tthis._currentImageCaptureService.finish();\r\n\t\t\tthis._currentImageCaptureService = undefined;\r\n\t\t}\r\n\r\n\t\treturn resolve();\r\n\t})\r\n\r\n\tpublic runTestResponse = (response: ICortixResponse) => {\r\n\t\tif (!this._currentImageCaptureService) {\r\n\t\t\tthrow new Error('The current image capture service is undefined');\r\n\t\t}\r\n\r\n\t\treturn this._currentImageCaptureService.runTestResponse(response);\r\n\t}\r\n\r\n\tprivate create = (retinaSettings: IRetinaSettings = this._retinaSettings): Promise<IImageCaptureService> => {\r\n\t\treturn this.getMediaInstance({\r\n\t\t\tchannelType: MediaChannelType.Camera,\r\n\t\t\toptions: {\r\n\t\t\t\tcontainer: this._container,\r\n\t\t\t\tjourneyId: this._journeyId,\r\n\t\t\t\t...retinaSettings\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then((imageCaptureService: IImageCaptureService) => this._currentImageCaptureService = imageCaptureService);\r\n\t}\r\n\r\n\tprivate getMediaInstance = (mediaChannelInformation: IMediaChannelInformation): Promise<IImageCaptureService> => {\r\n\t\tconst { channelType = MediaChannelType.None, options = {} } = mediaChannelInformation || {};\r\n\r\n\t\tswitch (channelType) {\r\n\t\t\tcase MediaChannelType.Camera:\r\n\t\t\t\treturn new CameraCaptureService(this._journeyId, options as ICameraMediaChannelOptions).init();\r\n\t\t\tdefault:\r\n\t\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n}\r\n","module.exports = \"<div>\\r\\n\\t<div class=\\\"preview-title-container\\\">\\r\\n\\t\\t<h2>{{PROVIDER_TITLE_SCANNER}}</h2>\\r\\n\\t\\t<span class=\\\"preview-description\\\">{{PROVIDER_SUBTITLE_SCANNER_ID}}</span>\\r\\n\\t</div>\\r\\n\\t<div>\\r\\n\\t\\t<h3>{{FILESYSTEM_IDENTITY_DOCUMENT}} - <span data-jcs-element=\\\"info__journey__action\\\"></h3>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div class=\\\"scanner-container\\\" data-jcs-element=\\\"scanner__container\\\">\\r\\n\\t<div class=\\\"scanner-inner-container\\\">\\r\\n\\r\\n\\t\\t<div class=\\\"scanner-feedback-container\\\">\\r\\n\\t\\t\\t<div class=\\\"scanner-loading-container\\\" data-jcs-element=\\\"image__processing\\\">\\r\\n\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"scanner-animation-container\\\" data-jcs-element=\\\"scanner__animation\\\" style=\\\"display:none\\\">\\r\\n\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t<svg width=\\\"21\\\" height=\\\"16\\\" viewBox=\\\"0 0 21 16\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"\\r\\n\\t\\t\\t\\t\\tstyle=\\\"display: none;margin-top:0px;margin-bottom:0px;\\\" data-jcs-element=\\\"error__image\\\">\\r\\n\\t\\t\\t\\t\\t<g clip-path=\\\"url(#clip0)\\\">\\r\\n\\t\\t\\t\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\td=\\\"M12.241 0.71445L20.0783 13.1144C20.3524 13.5277 20.333 14.0242 20.0272 14.4234C19.7213 14.8226 19.1736 15.0665 18.5829 15.0664H2.80676C2.21608 15.0665 1.66833 14.8226 1.3625 14.4234C1.05667 14.0242 1.03727 13.5277 1.31134 13.1144L9.25098 0.71445C9.54236 0.27521 10.1182 0 10.746 0C11.3737 0 11.9496 0.27521 12.241 0.71445ZM9.90174 5.61532C9.90174 5.24713 10.2796 4.94865 10.7457 4.94865C11.2117 4.94865 11.5896 5.24713 11.5896 5.61532V9.61532C11.5896 9.98351 11.2117 10.282 10.7457 10.282C10.2796 10.282 9.90174 9.98351 9.90174 9.61532V5.61532ZM10.7884 13.2887H10.7648C10.0732 13.2869 9.50657 12.8546 9.48032 12.3087C9.46804 12.0447 9.59059 11.788 9.82041 11.5961C10.0502 11.4043 10.368 11.2935 10.7023 11.2887H10.7259C11.4174 11.2893 11.9849 11.7209 12.0121 12.2667C12.0253 12.5312 11.9029 12.7888 11.6726 12.9812C11.4423 13.1735 11.1235 13.2844 10.7884 13.2887Z\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tfill=\\\"#F88618\\\" />\\r\\n\\t\\t\\t\\t\\t</g>\\r\\n\\t\\t\\t\\t\\t<defs>\\r\\n\\t\\t\\t\\t\\t\\t<clipPath id=\\\"clip0\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<rect width=\\\"20.254\\\" height=\\\"16\\\" fill=\\\"white\\\" transform=\\\"translate(0.619141)\\\" />\\r\\n\\t\\t\\t\\t\\t\\t</clipPath>\\r\\n\\t\\t\\t\\t\\t</defs>\\r\\n\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t<svg width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"\\r\\n\\t\\t\\t\\t\\tstyle=\\\"display: none;margin-top:0px;margin-bottom:0px;\\\" data-jcs-element=\\\"success__image\\\">\\r\\n\\t\\t\\t\\t\\t<circle cx=\\\"8\\\" cy=\\\"8\\\" r=\\\"8\\\" fill=\\\"#219C4C\\\" />\\r\\n\\t\\t\\t\\t\\t<path d=\\\"M11.8787 5.09131L7.03018 10.9095L4.12109 8.00039\\\" stroke=\\\"white\\\" stroke-width=\\\"2\\\"\\r\\n\\t\\t\\t\\t\\t\\tstroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n\\t\\t\\t\\t</svg>\\r\\n\\r\\n\\t\\t\\t\\t<span data-jcs-element=\\\"scanner__box__title\\\" class=\\\"scanner-title\\\" style=\\\"display: none;\\\">\\r\\n\\t\\t\\t\\t\\t{{SCANNER_TITLE_WAITING}}\\r\\n\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<button class=\\\"button button--secondary\\\" data-jcs-element=\\\"scanner__action\\\">{{SCANNER_DESC_LOADING}}</button>\\r\\n\\t</div>\\r\\n\\r\\n</div>\\r\\n<div data-jcs-element=\\\"failure__reason__section\\\">\\r\\n\\t<p class=\\\"guidance-info-text\\\" data-jcs-element=\\\"failure__reason__message\\\"></p>\\r\\n\\t<p class=\\\"guidance-info-text\\\" data-jcs-element=\\\"try__again__message\\\"></p>\\r\\n\\t<div class=\\\"notification notification-blue\\\" data-jcs-element=\\\"attempt__count__container\\\">\\r\\n\\t\\t<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\">\\r\\n\\t\\t\\t<path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\"\\r\\n\\t\\t\\t\\td=\\\"M0.25 8C0.25 3.71979 3.71979 0.25 8 0.25H8.00081C12.2787 0.254627 15.7454 3.72135 15.75 7.99919L15.75 8C15.75 12.2802 12.2802 15.75 8 15.75C3.71979 15.75 0.25 12.2802 0.25 8ZM7.99958 1.75C4.54799 1.75023 1.75 4.54836 1.75 8C1.75 11.4518 4.54822 14.25 8 14.25C11.4515 14.25 14.2496 11.4522 14.25 8.00081C14.2463 4.55026 11.4501 1.75394 7.99958 1.75ZM8 5C7.44772 5 7 4.55228 7 4C7 3.44772 7.44772 3 8 3C8.55229 3 9 3.44772 9 4C9 4.55228 8.55229 5 8 5ZM7 6.25C6.58579 6.25 6.25 6.58579 6.25 7C6.25 7.41421 6.58579 7.75 7 7.75H7.25V11.25H6.5C6.08579 11.25 5.75 11.5858 5.75 12C5.75 12.4142 6.08579 12.75 6.5 12.75H8H9.5C9.91421 12.75 10.25 12.4142 10.25 12C10.25 11.5858 9.91421 11.25 9.5 11.25H8.75V7C8.75 6.58579 8.41421 6.25 8 6.25H7Z\\\"\\r\\n\\t\\t\\t\\tfill=\\\"#4A88C6\\\" />\\r\\n\\t\\t</svg>\\r\\n\\t\\t<p>{{ATTEMPTS_REMAINING}}<span\\r\\n\\t\\t\\t\\tdata-jcs-element=\\\"attempt__counter\\\"></span></p>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div data-jcs-element=\\\"scanner__error\\\" style=\\\"display: none;\\\">\\r\\n\\t<p class=\\\"check-error-color\\\" data-jcs-element=\\\"scanner__error__busy\\\">{{SCANNER_DESC_BUSY}}</p>\\r\\n\\t<p class=\\\"check-error-color\\\" data-jcs-element=\\\"scanner__error__offline\\\">{{SCANNER_DESC_OFFLINE}}</p>\\r\\n</div>\";","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// The chunk loading function for additional chunks\n// Since all referenced chunks are already included\n// in this file, this function is empty here.\n__webpack_require__.e = () => (Promise.resolve());","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t824: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = this[\"webpackChunkGBG_Idscan\"] = this[\"webpackChunkGBG_Idscan\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [121], () => (__webpack_require__(6339)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["root","factory","exports","module","define","amd","this","deferred","JourneyStep","TemplateService","_mustache","Mustache","Writer","updateTemplates","templates","_templates","renderToContainer","container","templateName","Templates","None","data","Promise","resolve","reject","HTMLElement","innerHTML","getTemplate","then","renderableTemplate","processTemplate","getElements","elements","Object","keys","reduce","out","element","querySelectorAll","ExceptionManager","TemplateException","TranslationKey","EXCEPTION_TEMPLATE_SOURCE_ELEMENT_MISSING","configuration","type","TemplateType","Null","provider","processor","template","Function","Url","getFile","String","process","EXCEPTION_TEMPLATE_MISSING","PreProcessor","render","dictionary","SecretService","encrypt","val","Buffer","from","JSON","stringify","sjcl","secret","toString","e","InvalidParameterException","EXCEPTION_INVALID_PARAMETER_VALUE_NOT_VALID","decrypt","decodedJson","parse","err","atob","EXCEPTION_INVALID_PARAMETER_VALUE_DAMAGED","SocketEvents","HubEvents","HubActions","SocketService","EventEmitter","_state","_journeyDefinitionId","_scannerState","connected","error","undefined","scanProcess","ScanProcess","EMPTY","state","_oldScannerState","configure","socketUrl","_socketUrl","logging","_logging","initialise","removeAllListeners","clearListeners","_connection","hubConnection","useDefaultPath","qs","get","STORAGE_KEYS","defaultToken","_hub","createHubProxy","setListeners","release","invoke","RELEASE_TERMINAL","ScannerError","IS_RELEASED","pushState","stateChanged","change","newState","start","journeyDefinitionId","journeyId","_journeyId","done","tryRegistering","fail","off","TERMINAL_STATUS_UPDATED","BATCH_SCAN_WORKFLOW_SCAN_STARTED","BATCH_SCAN_WORKFLOW_SCAN_FINISHED","BATCH_SCAN_WORKFLOW_PROCESSING_FINISHED","IMAGE_SOURCE_BUSY","IMAGE_SOURCE_CONNECTED","IMAGE_SOURCE_DISCONNECTED","setSourceState","ScannerState","DISCONNECTED","on","setState","setScanProcess","SCANNING","PROCESSING","result","turnOffAutoTriggerMode","emit","RESULT","BUSY","CONNECTED","stop","platform","metaData","mode","Mode","WEB","name","value","step","osName","osVersion","browserName","fullBrowserVersion","CAPTURESTUDIO","REGISTER_AND_OCCUPY_SCANNER","deviceId","setScannerTriggerMode","SET_SCANNER_TRIGGER_MODE","resetTerminal","RESET","sourceState","failReason","isOccupiedSuccessfully","scannerInfo","isConnected","UPDATE","assign","JourneyEvent","ImageFormat","wait","ms","setTimeout","retryOperation","operation","delay","times","catch","reason","bind","retryOperationWithTimeout","expiryTime","cancellationToken","isCancelled","currentTime","Date","ImageService","convert","blob","reader","FileReader","readAsDataURL","onerror","PlatformException","EXCEPTION_PLATFORM_UNSUPPORTED","onload","resolveImageFormat","mime","subtype","split","getBase64Components","str","contentType","content","remapNames","imageFormat","defaults","imageSrc","magnifierCanvasId","selection","coordsTextColor","highlightColor","lineColor","showCornersAlways","targetCanvasId","padding","Croppy","constructor","options","workspace","height","heightFactor","width","widthFactor","rotationDegrees","zs","magSZ","mouseDragging","isInTouchMode","cursorDraggingIcon","cursorIcon","init","selectionAreaPoints","areOriginalCoords","image","Image","setWorkspace","length","setSelectionAreaValues","drawScene","src","setCursor","setEvents","crop","elementContainerId","tempCanvas","document","createElement","$targetCanvas","tCtx","getContext","drawPath","clip","drawImage","restore","getElementById","Array","children","forEach","el","removeChild","append","getOriginalSelectionAreaPoints","x","y","i","selectionArea","points","getFloat","rotation","getSelectionAreaPoints","rotate","degrees","rotateCanvas","targetCanvasContext","drawSelectionArea","getAttribute","parseInt","ratio","widthWithPadding","heightWithPadding","setAttribute","$magnifier","pts","SelectionArea","targetCanvas","initSelectAreaPoints","onTouchStart","pointerDownFunc","preventDefault","addEventListener","onMove","passive","onTouchEnd","pointerUpFunc","removeEventListener","onMouseDown","onMouseUp","target","clientX","clientY","getPointerLocation","getRelativeTouchPosition","moveCubes","normalize","containerRect","getClientRects","DOMRect","rect","getTargetActualSize","scale","getTargetScale","left","scaleX","top","scaleY","window","ResizeObserver","observe","TouchEvent","touches","MouseEvent","pointer","getPointUnderCursor","hovering","index","dragging","magnifierContext","clearRect","xPos","yPos","mouseX","Math","floor","mouseY","sx","cSizeH","sy","between","draggingPointerIndex","indexOf","isDragging","style","cursor","context","beginPath","trim","moveTo","lineTo","closePath","canvas","save","centerX","centerY","translate","PI","setDynamicLineWidth","cSize","drawn","draggedCubeFound","fillStyle","highlight","textColor","drawMagnifier","drawLineBetweenCubes","strokeStyle","ellipse","stroke","strokeRect","fillRect","fromRight","fromBottom","wid","hgt","fac","j","noSquares","contains","containerWidth","containerHeight","doRatio","cRatio","targetWidth","targetHeight","lineWidth","parseFloat","toFixed","getOffset","getBoundingClientRect","body","scrollLeft","scrollTop","min","max","canvasOffset","initCanvasLeft","initCanvasTop","LoginStep","_container","Login","password","form","submit","username","errors","HTMLFormElement","HTMLInputElement","clearJourney","setText","setEnabled","login","area","renderErrors","EXCEPTION_TEMPLATE_ELEMENTS_MISSING","publish","DISPLAY_STEP","getTranslation","message","LanguageService","_language","_dictionary","DefaultTranslations","defaultTranslator","key","language","props","_translator","setLanguage","setTranslator","translator","setDictionary","translation","userName","userGroups","HighLevelResult","HighLevelResultDetails","HighLevelResultDetailValues","JourneyManager","_case","CaseDictionaryService","_journeys","config","_config","auth","backendUrl","endpoints","isVerboseLogEnabled","hideLogo","_endpoints","constants","ENDPOINTS","_authSettings","AUTH_DEFAULTS","_mode","_isVerboseLoggingEnabled","socket","assertBackendUrlExists","initialize","token","performance","now","authSettings","responseType","ResponseType","REFINED","assertAuthEnabled","injectToken","setUserInfo","caseDic","res","getVersion","_version","buildVersion","edition","CapturingMedia","backend","backendEdition","capturingMedia","library","VERSION","post","postToken","set","AuthorizationException","user","assertUsernameExists","assertPasswordExists","doLogin","originalResponse","ReductionService","fullName","memberOf","role","access_token","logout","assertUserAuthenticated","doLogout","createJourney","id","additionalData","journey","Journey","push","toBase64","getToken","getResults","headersRequest","journeyResult","getJourney","headers","response","status","EXCEPTION_AUTHORIZATION_ACCOUNT_NOT_AUTHORIZED","ServerException","EXCEPTION","getJourneyDefinitions","journeyDefinitions","map","getCapturingMedia","encodeURIComponent","Exception","EXCEPTION_SERVER_UNREACHABLE","EXCEPTION_AUTHORIZATION_AUTH_DETAILS_INVALID","EXCEPTION_SERVER","EXCEPTION_AUTHORIZATION_PROCESS_NOT_AUTHORIZED","EXCEPTION_AUTHORIZATION_AUTH_NOT_ENABLED","MissingParameterException","EXCEPTION_MISSING_PARAMETER_BACKEND_URL_MISSING","EXCEPTION_MISSING_PARAMETER_USERNAME_MISSING","EXCEPTION_MISSING_PARAMETER_PASSWORD_MISSING","journeys","Bowser","userAgent","navigator","browser","getParser","getOSName","getOSVersion","getBrowserName","getBrowserVersion","platformType","getPlatformType","isMobile","ua","mobileVendor","test","extractVendor","mobileModel","androidMatch","match","model","extractModel","isFirefox","isSafari","isChrome","isIOS","ImageProvider","base64","providerContainer","View","retry","upload","statusMessage","openPreviewInfoId","previewInfoContainerId","closePreviewInfoId","openPreviewInfoFM","previewInfoContainerFM","closePreviewInfoFM","openPreviewInfoPOA","openPreviewInfoCovid","previewInfoContainerPOA","previewInfoContainerCovid","closePreviewInfoPOA","closePreviewInfoCovid","idDocumentContainer","facematchContainer","addressContainer","covidContainer","attemptCountContainer","attemptCounter","loadingAnimationContainer","hideObject","loadingAnimation","AnimationService","CreateAnimation","assetsFolder","uploadToggleButton","_journey","action","FlowState","SELFIE","PASSIVE_LIVENESS","showObject","IDENTITY_BACK","IDENTITY_FRONT","ADDRESS","COVIDPASS","actionAttempt","display","Pdf","Bmp","Jpeg","Jpg","Png","removeAttribute","_retry","evaluate","VIEW_CROPPING","inputFormat","_cropResponse","EXCEPTION_NETWORK","passiveLiveness","Base64Input","JourneyId","PASSIVE_LIVENESS_FINISHED","assertImageExists","continueCovid","getDataStore","DataStoreType","ID_SCAN","update","parseResponseCovidData","updateJourneyFields","ex","_metaData","continue","imgList","RequiredInputImage","SelfiePhoto","WhiteImage","parseResponseData","DISPLAY_PROVIDER","entryData","entryDateTime","requiredAction","highLevelResult","currentResult","hasError","isFinished","journeyReference","scanReference","blurCheck","glareCheck","lowResolutionCheck","fullDocumentInViewCheck","tripleScanReason","documents","doc","removeNullOrUndefined","expirationDate","issueDate","issueNumber","number","scannerIp","dateTime","person","address","city","holder","full","postCode","birthDate","birthPlace","firstName","middleName","lastName","gender","IdesMicroHost","isWorkerSupported","createWorker","workerScriptUrl","asmScriptUrl","timeout","timeLogsEnabled","idesMicroWorker","makeRequest","IdesMicroWorkerMessages","Initialise","TRANSFER_STARTED","percentage","createCrossDomainWorker","TRANSFER_COMPLETE","createNewWorker","destroyWorker","Terminate","terminate","checkImage","imageBlob","generateFile","PerformQualityCheck","requestMessage","requestData","requestId","getTime","responseHandler","errorHandler","Error","postMessage","fileReader","Uint8Array","readAsArrayBuffer","workerUrl","worker","testSameOrigin","Worker","event","createWorkerFallback","Blob","blobEx","blobBuilder","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","getBlob","blobUrl","URL","webkitURL","createObjectURL","e1","url","loc","location","a","href","hostname","port","protocol","attempt","_attempt","history","_history","proceed","internalState","RequiredAction","FRONTSIDE_FIRST_SCAN","setFlowVariables","FRONTSIDE_SECOND_SCAN","FRONTSIDE_THIRD_SCAN","BACKSIDE_FIRST_SCAN","BACKSIDE_SECOND_SCAN","BACKSIDE_THIRD_SCAN","ADDRESSDOCUMENT_FIRST_SCAN","ADDRESSDOCUMENT_SECOND_SCAN","ADDRESSDOCUMENT_THIRD_SCAN","SELFIE_FIRST_SCAN","SELFIE_SECOND_SCAN","SELFIE_THIRD_SCAN","LIVENESS","COVIDPASS_FIRST_SCAN","COVIDPASS_SECOND_SCAN","COVIDPASS_THIRD_SCAN","DATACHECKS","NONE","FlowStateException","EXCEPTION_FLOW_STATE_MISSING","Helper","isValidIntNumber","param","isDefined","isFinite","isNumber","isValidFloatNumber","boundValue","newGuid","s4","random","substring","getCurrentTime","date","getHours","getMinutes","getSeconds","getMilliseconds","mediaDevicesimplementationForOlderBrowsers","_navigator","mediaDevices","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","call","setWebSocketPort","path","temp","endsWith","slice","base","checkCameraCompatibility","isCanvasSupported","isBolbSupported","isWebsocketsSupported","elem","canvasPrototype","HTMLCanvasElement","prototype","toBlob","EventService","_topics","subscriber","fn","timestamp","reset","unsubscribeAll","topic","sub","unsubscribe","subscribe","priority","assertStringEvent","assertValidFunction","assertValidPriority","sort","unsubscribeTopic","filter","b","EXCEPTION_INVALID_PARAMETER_NAME_MUST_BE_STRING","EXCEPTION_INVALID_PARAMETER_CALLBACK_MUST_BE_FUNCTION","EXCEPTION_INVALID_PARAMETER_PRIORITY_MUST_BE_NUMBER","EXCEPTION_INVALID_PARAMETER_PRIORITY_MUST_BE_POSITIVE_NUMBER","ResultsStep","Result","results","resultMessage","RESULTS_HIGH_LEVEL_EXPIRED_MESSAGE_VALUE","referenceId","referenceNumber","resultDetails","startsWith","_name","toLowerCase","dataLookBackCheckDetails","getLookBackCheckDetails","JourneySteps","trustScoreDetails","getTrustScoreDetails","GBGScoreDetails","getGBGScoreDetails","dataChecksDetails","getDataCheckDetails","find","Type","IADResultDetails","getIADResult","processedDocuments","documentType","getDocumentTypeForDisplay","normalizedTypeKey","replace","normalizedType","documentTypeMap","toUpperCase","translatedType","translationKey1","translationKey2","_type","_result","extractedFields","ExtractedFields","field","fieldName","Name","fieldValue","Value","images","documentImages","DocumentImages","includes","_role","_url","JourneySelectStep","docType","DocumentType","documentTypeField","documentCategoryField","documentSide","DocumentSide","fieldNames","fieldValues","hasBankFields","some","values","hasRecipientFields","steps","lookBackCheck","ValidationChecks","check","trustScoreValue","GBGScoreValue","IADResultValue","dataCheck","bankstatement","bankdocument","utilitybill","utilitydocument","drivinglicense","drivinglicence","dl","paperdocument","poa","proofofaddress","unknown","DataChecksStep","DataChecks","houseNumber","streetName","town","postalCode","setValue","information","validateInputs","validationResult","continueDataChecks","houseName","removeClass","addClass","EXCEPTION_POSTCODE_FORMAT_ERROR","EXCEPTION_HOUSENUMBER_FORMAT_ERROR","EXCEPTION_STREETNAME_FORMAT_ERROR","EXCEPTION_TOWN_FORMAT_ERROR","EXCEPTION_MISSING_REQUIRED_FIELD_MISSING","input","output","deepMerge","obj","RegExp","HttpService","httpConfig","_httpConfig","_caseDictionaryService","setDefaults","_axios","onDownloadProgress","onUploadProgress","onPostSuccess","onPostFailure","Workflow","PersonEntryId","TRANSFER_FAILED","removeToken","writeToken","setToken","debug","tokenName","getUrlString","urlPart","pathname","create","adapter","baseURL","isAuthEnabled","setHttpResponse","setCaseDictionaryInterceptors","setTransformationInterception","setTokenInterceptor","setCatchInterception","setResponseFormattingInterception","percentCompleted","loaded","total","TRANSFER_PROGRESS","common","AUTH_CHANGE","authorized","tokenTTL","remove","interceptors","use","HttpResponse","request","req","TransformationService","clear","NetworkException","BadRequestException","EXCEPTION_BAD_REQUEST","EXCEPTION_AUTHORIZATION","RAW","persistence","expire","CameraPermissionState","CameraFacingMode","defaultConfiguration","overlay","documentReticle","inset","thickness","portraitReticle","ovalHeight","reticle","horizontalRadius","verticalRadius","cameraOptions","resolutions","ideal","horizontal","vertical","minimum","CameraService","_availableCameras","_observedDeviceCapabilities","cameras","doDeviceProbe","getAllDeviceCapabilities","devices","observedDeviceCapabilities","curr","getStream","_lastActiveDeviceId","facingMode","minimumResolution","_configuration","idealResolution","stopStreaming","getVideoCameras","facingCameras","BACK","camera","isBackCameraLabel","label","ENVIRONMENT","isBackDualWideCameraLabel","camera1","camera2","localeCompare","video","exact","stream","_stream","reconcileDevice","device","_currentDeviceId","getDeviceCapabilities","capabilities","CAMERA_READY","cancelAnimationFrame","_animationHandle","getVideoTracks","track","CAMERA_STOP","enumerateDevices","kind","dev","getCameraPermission","decideCameraPermission","permissions","query","PROMPT","UNKNOWN","_lastCameraPermissionState","cameraPermissionState","audio","GRANTED","exception","DENIED","permissionState","hasActiveStream","getTracks","getImageFromCurrentStream","resizeCanvas","_videoContext","renderFrameToContext","toDataURL","getBlobFromCurrentStream","getLivenessBlobFromCurrentStream","resizeLivenessCanvas","renderLivenessFrameToContext","renderStreamToElement","reticleType","ReticleType","hintType","HintType","srcObject","play","resizeCanvasPromise","CAMERA_CANVAS_RESIZE","isPortrait","videoHeight","videoWidth","c","setReticlePath","doFrameCycle","setConfiguration","deepmerge","clearCanvas","globalCompositeOperation","requestAnimationFrame","watermark","renderReticles","renderHintType","renderWatermark","_reticlePath","_reticleType","fill","widthRatio","AUTOCAPTUREOFF","Path2D","logoWidth","logoHeight","autoCaptureOffHint","AUTOCAPTUREON","autoCaptureOnHint","defaultWatermarkPath","grayscale","mirror","setTransform","getCameraCapabilitiesSequentially","EXCEPTION_PLATFORM_CAMERA_PERMISSION_DENIED","EXCEPTION_PLATFORM_CAMERA_NOT_READABLE","EXCEPTION_PLATFORM_CAMERA_NONE_SUITABLE","Set","getSettings","DOCUMENT","PORTRAIT","groupId","aspectRatio","frameRate","getCapabilities","GetCurrentTrackSettings","maximum","deviceName","CAMERA_CAPABILITIES_UPDATED","currentDeviceId","hasDeviceCapableOfResolution","maximumResolution","cameraLabel","isLatinScript","keyword","camerasFuncs","getCameraCapabilities","cameraFunc","PassiveLivenessStep","all","permission","HasNoCamera","hookGlobalButtons","PassiveLiveness","changeCameraStream","FRONT","cameraClick","cameraSelect","messages","messagesTitle","messagesContainer","mobileHelp","desktopHelp","mobileCloseHelp","mobileOpenHelp","desktopCloseHelp","desktopOpenHelp","passiveLivenessContainer","passiveLivenessProviderContainer","faceCamera","captureInProgress","retryAttempts","faceCameraCheckInterval","clearInterval","setInterval","isOpen","maxRetryAttempts","HTMLSelectElement","renderAvailableCameras","markSelected","updateSelect","NextAction","ErrorCode","parseResponse","bindUpdate","LiveFaceCamera","OpenEventName","CloseEventName","CaptureEventName","imageBase64","encryptedFile","detail","querySelector","freezeCameraStream","continueJourneySkipPreview","base64String","FailureEventName","code","DetectEventName","InputProvider","cleanup","EncryptedInput","CurrentResult","documentSource","DocumentSource","IDENTITY","ScanReference","EntryDateTime","entryImages","EntryImages","HasError","IsFinished","personEntryId","ResultDetails","EntryData","Documents","BlurCheck","LowResolutionCheck","ScannerIp","array","toRemove","isArray","allow","toAllow","toContain","MediaChannelType","WebCamRequiredAction","CortixResponseAction","LivenessActionType","LivenessFinalResult","StillImageRequiredAction","MediaType","MediaSource","defaultRetinaSettings","cortexApiPath","cortexApiController","autoRun","extend","settings","prop","DataService","_dataStores","DataStore","IdScanDataDefaults","deleteDataStore","CameraProvider","isFromTripleScanGuidancePage","isPredefinedJourney","Camera","cameraStatus","cameraCapture","cameraViewfinder","smartCaptureToggle","smartCaptureToggleInner","modalSmartCaptureButton","modalManualCaptureText","manualCaptureCheck","modalManualCaptureCheck","closeHelp","openHelp","helpDocumentContainer","helpSelfieContainer","helpAddressContainer","helpCovidContainer","modalDocumentClose","modalSelfieClose","modalAddressClose","modalCovidClose","modalDocumentGlareContainer","modalDocumentLowResContainer","modalDocumentBlurContainer","modalAddressGlareContainer","modalAddressLowResContainer","modalAddressBlurContainer","modalCovidGlareContainer","modalCovidLowResContainer","modalCovidBlurContainer","actionDocumentContainer","actionText","actionSelfieContainer","actionAddressContainer","actionCovidContainer","tripleScanGuidancePage","TripleScanGuidanceProvider","CAMERA","hint","helpModal","modalClose","modalBlurContainer","modalGlareContainer","modalLowResContainer","hideAutoCaptureHints","CAMERA_MANUAL_CAPTURE_FRONT","CAMERA_CAPTURE_BACK","CAMERA_LOADING","changeInputProvider","SMART_CAPTURE","ChangeMode","DEFAULT","glareAnimation","blurAnimation","lowResAnimation","show","closeModal","continueJourney","cameraFacingMode","backDualWideCamera","backDualWideCameraId","FILESYSTEM","FORCE","_previewPages","documentStep","manualCapture","poaStep","facematchStep","covidStep","continueJourneySkipPreviewCovid","helpContainer","destroy","coordinates","coords","point","journeyRetrievalObject","journeyUploadObject","ed","info","currentDocument","covid","defineProperty","callback","quality","dataURL","binStr","len","arr","charCodeAt","pascals","camels","types","server","client","destination","dict","newKey","ENV","LivenessStep","Liveness","getNewService","frameSubmissionDelay","imageQuality","mediaInstance","emitter","StopCapturing","msg","workflowState","livenessAnimation","cameraPoseSubscription","FinishLivenessCapturing","LIVENESS_PROCESSING","Close","LIVENESS_FINISHED","hintAnimationContainer","animationContainer","animationTitle","animationText","livenessStart","startContainerOverlay","startContainerButton","HTMLDivElement","HTMLParagraphElement","CAMERA_POSE","actionData","updateAnimation","handleCameraSelectedChange","canvasContainer","clientHeight","clientWidth","poseAction","pose","LIVENESS_ACTION_LOOK_STRAIGHT_TITLE","LIVENESS_ACTION_LOOK_STRAIGHT_TEXT","LIVENESS_ACTION_SMILE_TITLE","LIVENESS_ACTION_SMILE_TEXT","LIVENESS_ACTION_FROWN_TITLE","LIVENESS_ACTION_FROWN_TEXT","LIVENESS_ACTION_LOOK_LEFT_TITLE","LIVENESS_ACTION_LOOK_LEFT_TEXT","LIVENESS_ACTION_LOOK_RIGHT_TITLE","LIVENESS_ACTION_LOOK_RIGHT_TEXT","LIVENESS_ACTION_LOOK_UP_TITLE","LIVENESS_ACTION_LOOK_UP_TEXT","LIVENESS_ACTION_LOOK_DOWN_TITLE","LIVENESS_ACTION_LOOK_DOWN_TEXT","TermsAndConditionsStep","TermsAndConditions","termsAndConditionsModal","termsAndConditionsTickBox1","termsAndConditionsTickBox1Text","termsAndConditionsTickBox2","termsAndConditionsTickBox2Text","termsAndConditionsModalAgree","termsAndConditionsModalDisagree","termsAndConditionsModalText","HTMLLabelElement","getTermsAndConditionsConfigsFromBackend","_isPredefinedJourney","checked","_isTCCAccepted","cancel","TCCDisagree","journeyContainer","getTCCConfigs","ConsentCaptureEnabled","TCCText","ACCEPT_TERMS_AND_CONDITIONS","CONSENT_USE_BIOMETRIC_DATA","RetinaFactory","getService","authenticationToken","retinaSettings","_service","HttpRequestService","terminateService","RetinaService","service","DataStoreEvents","super","listener","getState","updates","previousState","nextState","fastDeepEqual","CHANGE","_default","ax","statusText","age","apiVersion","boundsOfIntrest","coordinate","countryCode","countryName","createDatetime","documentCategory","documentName","documentNumber","documentRole","evaluatedPersonEntryId","excludeOutputImagesFromResponse","identityMeansId","inputImageId","inputImages","isDocumentExtracted","isReconigned","page","processFinishDate","processStartDate","qualityChecks","side","source","workflowAttempt","COVIDPASSCROSSCHECKRESULT","covidpass","dataChecks","reducer","isRaw","SendingFramesManager","_stepNumber","connect","params","stepNumber","_socket","WebSocket","_host","onCaptureResponse","onCaptureError","onCaptureTerminate","send","readyState","OPEN","close","CLOSED","runTestResponse","prefix","DefaultTemplates","Initializing","Cropper","Filesystem","Gateway","Scanner","SmartCapture","JourneySelect","TripleScanGuidance","Covid","GatewayStep","selectedInputProvider","getInputProvider","inputProvider","CropperProvider","FileSystemProvider","SmartCaptureProvider","resolution","defaultInputProvider","SCANNER","ScannerProvider","uploadLabel","requiresCamera","EXCEPTION_PLATFORM_CAMERA_PERMISSION_UNAVAILABLE","_ready","_providers","_inputProvider","HTMLButtonElement","toggleFileUpload","toggleUploadLabel","toggle","fileUploadOnCameraCaptureJourneys","channelType","_mediaType","mediaType","finish","versions","node","JourneyState","RenderingService","getElement","substr","getElementBySelector","selector","XMLHttpRequest","open","onreadystatechange","EXCEPTION_PLATFORM_BROWSER_ONLY","classList","add","selected","disabled","option","Option","Boolean","supportsDragDrop","DataTransfer","innerText","setDataAttributeValue","attribute","getPlatform","_mockStorage","expiration","_storage","setItem","getItem","resolved","isValid","removeItem","setMockStorage","store","sessionStorage","ChannelType","SmartCaptureFailingReasons","toggleLabel","cropper","cropperSubmit","cropperReset","croppy","outputImage","CROPPER_UPLOADING","imgId","isDetected","CameraCaptureService","BaseImageCaptureService","_camera","_autoRun","CameraCapture","scannerAnimationContainer","failureReasonContainer","scannerAnimation","SCANNER_DESC_LOADING","_socketReady","startSocket","addListener","onSocketUpdate","onSocketResult","uuid","v4","scannerState","processMessage","console","warn","IS_LOCKED","updateScannerUI","actionEvent","ScannerAction","REGISTER","SCANNER_ACTION_REGISTER","titleText","SCANNER_TITLE_BUSY","SCANNER_DESC_BUSY","IS_OFFLINE","SCANNER_TITLE_OFFLINE","SCANNER_DESC_OFFLINE","SCANNER_TITLE_NOT_CONNECTED","SCANNER_DESC_NOT_CONNECTED","RELEASE","SCANNER_ACTION_RELEASE","SCANNER_TITLE_DISCONNECTED","SCANNER_TITLE_SCANNING","SCANNER_TITLE_PROCESSING","SCANNER_TITLE_AVAILABLE","scannerContainer","title","errorContainer","errorBusy","errorOffline","imageProcessing","errorImage","successImage","failureReasonMessage","tryAgainMessage","setTriplescanReasonMessages","stopSocket","stopped","releaseTerminal","SCANNER_UPDATE","SCANNER_RESULT","NotSupported","FAILURE_REASON_NOT_SUPPORTED","PLEASE_TRY_AGAIN_NOT_SUPPORTED","Refer","FAILURE_REASON_REFER","PLEASE_TRY_AGAIN_REFER","NotAccepted","FAILURE_REASON_NOT_ACCEPTED","PLEASE_TRY_AGAIN_NOT_ACCEPTED","Expired","FAILURE_REASON_EXPIRED","PLEASE_TRY_AGAIN_EXPIRED","ERROR","NotFoundException","UnavailableInputProviderException","WebSocketException","endDate","_endDate","_id","_glareCheck","_blurCheck","_lowResolutionCheck","_fullDocumentInViewCheck","_information","_isCancelled","_isFinished","_additionalData","startDate","_startDate","reference","_reference","_status","totalRequests","_totalRequests","_flow","_tripleScanReason","confidoInfo","_confidoInfo","generateId","_inProgress","Undefined","JourneyFlow","headerToken","assertIsNotInProgress","assertJourneyNotEnded","assertImgIdExists","assertCoordinatesExists","sendWithCoordinates","excludeOutputImages","assertImgListExists","sendCovid","ConfidoInfo","sendDataChecks","Aborted","ENDED","JOURNEY_CANCEL","img","getUsername","STARTED","JOURNEY_START","setMetaData","JOURNEY_PROGRESS","metadata","getMetaData","inferSource","splice","checkInformation","assertNoErrors","parseResult","JOURNEY_END","INPROGRESS","Passed","EXCEPTION_FLOW_STATE_JOURNEY_ENDED","EXCEPTION_MISSING_PARAMETER_COORDINATES_MISSING","EXCEPTION_MISSING_PARAMETER_IMAGES_MISSING","EXCEPTION_SERVER_DATA_NOT_PERSISTED","assertCurrentResult","cr","Pass","EXCEPTION_SERVER_RESULT_NOT_PASSING","EXCEPTION_BAD_REQUEST_WAITING_FOR_RESPONSE","FRONTSIDE","BACKSIDE","ADDRESSDOCUMENT","generalMetaData","captureType","ct","captureStudioMetaData","DocumentRole","REQUIRED_ACTION_KEEP_CAPTURING","REQUIRED_ACTION_STOP_CAPTURING","REQUIRED_ACTION_PAUSE_CAPTURING","REQUIRED_ACTION_CLOSE","REQUIRED_ACTION_ERROR","REQUIRED_ACTION_AGREE","REQUIRED_ACTION_DISAGREE","LIVENESS_ACTION_SMILE","LIVENESS_ACTION_FROWN","LIVENESS_ACTION_TILT_LEFT","LIVENESS_ACTION_TILT_RIGHT","LIVENESS_ACTION_TILT_UP","LIVENESS_ACTION_TILT_DOWN","LIVENESS_ACTION_TILT_STRAIGHT","LIVENESS_ACTION_NO_ACTION","LIVENESS_ACTION_PROCESSING_LIVENESS","LIVENESS_RESULT_FAILED","LIVENESS_RESULT_PASSED","LIVENESS_RESULT_ACTION_TIMED_OUT","LIVENESS_RESULT_INTERRUPTED","LIVENESS_RESULT_UNDEFINED","PASSIVE_LIVENESS_ERROR_FACE_TOO_CLOSE_TITLE","PASSIVE_LIVENESS_ERROR_FACE_TOO_CLOSE","PASSIVE_LIVENESS_ERROR_FACE_CLOSE_TO_BORDER_TITLE","PASSIVE_LIVENESS_ERROR_FACE_CLOSE_TO_BORDER","PASSIVE_LIVENESS_ERROR_FACE_CROPPED_TITLE","PASSIVE_LIVENESS_ERROR_FACE_CROPPED","PASSIVE_LIVENESS_ERROR_FACE_NOT_FOUND_TITLE","PASSIVE_LIVENESS_ERROR_FACE_NOT_FOUND","PASSIVE_LIVENESS_ERROR_FACE_TOO_SMALL_TITLE","PASSIVE_LIVENESS_ERROR_FACE_TOO_SMALL","PASSIVE_LIVENESS_ERROR_FACE_TOO_FAR_TITLE","PASSIVE_LIVENESS_ERROR_FACE_TOO_FAR","PASSIVE_LIVENESS_ERROR_NOT_INITIALIZED_TITLE","PASSIVE_LIVENESS_ERROR_NOT_INITIALIZED","PASSIVE_LIVENESS_ERROR_INITIALIZING_TITLE","PASSIVE_LIVENESS_ERROR_INITIALIZING","PASSIVE_LIVENESS_ERROR_TOO_MANY_FACES_TITLE","PASSIVE_LIVENESS_ERROR_TOO_MANY_FACES","PASSIVE_LIVENESS_ERROR_FACE_ANGLE_TOO_LARGE_TITLE","PASSIVE_LIVENESS_ERROR_FACE_ANGLE_TOO_LARGE","PASSIVE_LIVENESS_ERROR_PROBABILITY_TOO_SMALL_TITLE","PASSIVE_LIVENESS_ERROR_PROBABILITY_TOO_SMALL","PASSIVE_LIVENESS_ERROR_FACE_IS_OCCLUDED_TITLE","PASSIVE_LIVENESS_ERROR_FACE_IS_OCCLUDED","PASSIVE_LIVENESS_ERROR_UNKNOWN_TITLE","PASSIVE_LIVENESS_ERROR_UNKNOWN","PASSIVE_LIVENESS_ERROR_INTERNAL_TITLE","PASSIVE_LIVENESS_ERROR_INTERNAL","PASSIVE_LIVENESS_ERROR_LOW_THRESHOLD_TITLE","PASSIVE_LIVENESS_ERROR_LOW_THRESHOLD","PASSIVE_LIVENESS_ERROR_None_TITLE","PASSIVE_LIVENESS_ERROR_None","PASSIVE_LIVENESS_ERROR_FailedExpressions_TITLE","PASSIVE_LIVENESS_ERROR_FailedExpressions","PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_IMAGE_TITLE","PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_IMAGE","PASSIVE_LIVENESS_ERROR_IMAGE_ERROR_TITLE","PASSIVE_LIVENESS_ERROR_IMAGE_ERROR","PASSIVE_LIVENESS_ERROR_INTERNAL_ERROR_TITLE","PASSIVE_LIVENESS_ERROR_INTERNAL_ERROR","PASSIVE_LIVENESS_ERROR_FAILED_TO_WRITE_IMAGE_TITLE","PASSIVE_LIVENESS_ERROR_FAILED_TO_WRITE_IMAGE","PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_MODEL_TITLE","PASSIVE_LIVENESS_ERROR_FAILED_TO_READ_MODEL","PASSIVE_LIVENESS_ERROR_FAILED_TO_ALLOCATE_TITLE","PASSIVE_LIVENESS_ERROR_FAILED_TO_ALLOCATE","PASSIVE_LIVENESS_ERROR_INVALID_CONFIG_TITLE","PASSIVE_LIVENESS_ERROR_INVALID_CONFIG","PASSIVE_LIVENESS_ERROR_NO_SUCH_OBJECT_IN_BUILD_TITLE","PASSIVE_LIVENESS_ERROR_NO_SUCH_OBJECT_IN_BUILD","PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_PREDICT_TITLE","PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_PREDICT","PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_DETECT_TITLE","PASSIVE_LIVENESS_ERROR_FAILED_TO_PREPROCESS_IMAGE_WHILE_DETECT","PASSIVE_LIVENESS_ERROR_FAILED_TO_PREDICT_LANDMARKS_TITLE","PASSIVE_LIVENESS_ERROR_FAILED_TO_PREDICT_LANDMARKS","PASSIVE_LIVENESS_ERROR_INVALID_FUSE_MODE_TITLE","PASSIVE_LIVENESS_ERROR_INVALID_FUSE_MODE","PASSIVE_LIVENESS_ERROR_NULLPTR_TITLE","PASSIVE_LIVENESS_ERROR_NULLPTR","PASSIVE_LIVENESS_ERROR_LICENSE_ERROR_TITLE","PASSIVE_LIVENESS_ERROR_LICENSE_ERROR","PASSIVE_LIVENESS_ERROR_INVALID_META_TITLE","PASSIVE_LIVENESS_ERROR_INVALID_META","INITIALIZING_TITLE","INITIALIZING_DESCRIPTION","JOURNEY_STATE_STARTED","JOURNEY_STATE_IN_PROGRESS","JOURNEY_STATE_ENDED","INFO_JOURNEY_STATE","INFO_JOURNEY_ACTION","INFO_JOURNEY_ACTION_ATTEMPT","INFO_JOURNEY_ID","INFO_JOURNEY_RESULT","RESULTS_HIGH_LEVEL_EXPIRED_MESSAGE","INFO_JOURNEY_REFERENCE","FLOW_STATE_NONE","FLOW_STATE_IDENTITY_FRONT","FLOW_STATE_IDENTITY_BACK","FLOW_STATE_ADDRESS","FLOW_STATE_SELFIE","FLOW_STATE_LIVENESS","FLOW_STATE_COVID","PROVIDER_TITLE_CAMERA","PROVIDER_TITLE_CROPPER","PROVIDER_TITLE_FILESYSTEM_ID","PROVIDER_TITLE_FILESYSTEM_FACEMATCH","PROVIDER_TITLE_FILESYSTEM_ADDRESS","PROVIDER_TITLE_FILESYSTEM_COVID","PROVIDER_TITLE_GATEWAY","PROVIDER_TITLE_LIVENESS","PROVIDER_TITLE_PASSIVE_LIVENESS","PROVIDER_TITLE_LOGIN","PROVIDER_TITLE_RESULTS","PROVIDER_TITLE_SCANNER","PROVIDER_TITLE_VIEW_ID","PROVIDER_TITLE_VIEW_FACEMATCH","PROVIDER_TITLE_VIEW_ADDRESS","PROVIDER_TITLE_VIEW_COVID","PROVIDER_SUBTITLE_FILESYSTEM_ID","PROVIDER_SUBTITLE_FILESYSTEM_FACEMATCH","PROVIDER_SUBTITLE_FILESYSTEM_ADDRESS","PROVIDER_SUBTITLE_FILESYSTEM_COVID","PROVIDER_SUBTITLE_SCANNER_ID","PROVIDER_SUBTITLE_VIEW_ID","PROVIDER_SUBTITLE_VIEW_FACEMATCH","PROVIDER_SUBTITLE_VIEW_ADDRESS","PROVIDER_SUBTITLE_VIEW_COVID","PROVIDER_TITLE_SMART_CAPTURE","PROVIDER_TITLE_JOURNEY_SELECT","PROVIDER_TITLE_TERMS_AND_CONDITIONS","PROVIDER_TITLE_USER_INPUT","FILESYSTEM_SUPPORTED_TYPES_START","FILESYSTEM_SUPPORTED_TYPES_END","FILESYSTEM_SUPPORTED_TYPES_START_SELFIE","FILESYSTEM_MAX_FILE_SIZE","FILESYSTEM_CHECK_FILE_TOO_BIG","FILESYSTEM_CHECK_FILE_INCORRECT_FORMAT","FILESYSTEM_IDENTITY_DOCUMENT","FILESYSTEM_FACEMATCH","FILESYSTEM_ADDRESS","FILESYSTEM_COVID","FILESYSTEM_DRAG_DROP","FILESYSTEM_OR","FILESYSTEM_CHOOSE","FILESYSTEM_UPLOADING","TRIPLESCAN_GUIDANCE_TRYAGAIN","BLUR_CHECK_REASON","GLARE_CHECK_REASON","RESOLUTION_CHECK_REASON","EDGES_CHECK_REASON","VALIDATION_FAILED","VALIDATION_FAILED_REASON_DOC_UNKNOWN","VALIDATION_FAILED_REASON_DOC_NOT_ACCEPTED","VALIDATION_FAILED_REASON_DOC_EXPIRED","PREVIEW_INFO_TITLE_ID","PREVIEW_INFO_GOOD","PREVIEW_INFO_BAD","PREVIEW_INFO_GOOD_EXAMPLE_ID","PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ID","PREVIEW_INFO_BAD_EXAMPLE_COVER_ID","PREVIEW_INFO_BAD_EXAMPLE_BLUR_ID","PREVIEW_INFO_TITLE_FACEMATCH","PREVIEW_INFO_GOOD_EXAMPLE_FACEMATCH","PREVIEW_INFO_BAD_EXAMPLE_ANGLE_FACEMATCH","PREVIEW_INFO_BAD_EXAMPLE_COVER_FACEMATCH","PREVIEW_INFO_BAD_EXAMPLE_BLUR_FACEMATCH","PREVIEW_INFO_TITLE_ADDRESS","PREVIEW_INFO_GOOD_EXAMPLE_ADDRESS","PREVIEW_INFO_BAD_EXAMPLE_ANGLE_ADDRESS","PREVIEW_INFO_BAD_EXAMPLE_COVER_ADDRESS","PREVIEW_INFO_BAD_EXAMPLE_BLUR_ADDRESS","PREVIEW_INFO_TITLE_COVID","PREVIEW_INFO_GOOD_EXAMPLE_COVID","PREVIEW_INFO_BAD_EXAMPLE_ANGLE_COVID","PREVIEW_INFO_BAD_EXAMPLE_COVER_COVID","PREVIEW_INFO_BAD_EXAMPLE_BLUR_COVID","ATTEMPTS_REMAINING","CAMERA_CAPTURE","CAMERA_CAPTURE_START_BUTTON","CAMERA_CAPTURE_CAPTION","CAMERA_PREVIEW_START","CAMERA_CONDITION_BLUR","CAMERA_CONDITION_CAPTURING","CAMERA_CONDITION_UPLOADING","CAMERA_CONDITION_ALIGNMENT","CAMERA_CONDITION_GLARE","VERIFYING_TITLE","PREPARING_PREVIEW_TITLE","CAMERA_CONDITION_LOW_RESOLUTION","CAMERA_SMARTCAPTURE_ON","CAMERA_SMARTCAPTURE_OFF","CAMERA_CAPTURE_FRONT","CAMERA_CAPTURE_SELFIE_CAPTION","CAMERA_CAPTURE_ADDRESS_CAPTION","CAMERA_CAPTURE_COVID_CAPTION","CAMERA_PREVENT_GLARE_HINT","CAMERA_PREVENT_BLUR_HINT","CAMERA_PREVENT_LOW_RES_HINT","CROPPER_RETRY","CROPPER_UPLOAD","FILESYSTEM_SELECT","FILESYSTEM_DROP_IMAGE","GATEWAY_CAMERA","GATEWAY_CANCEL","LIVENESS_START","PASSIVE_LIVENESS_START","LOGIN_USERNAME","LOGIN_PASSWORD","LOGIN_SUBMIT","RESULTS_DOCUMENTS","RESULTS_DOCUMENTS_NONE","RESULTS_DOCUMENT_TYPE","RESULTS_DOCUMENT_RESULT","RESULTS_EXTRACTED_FIELDS_NONE","RESULTS_DETAILS","RESULTS_DETAILS_NONE","RESULTS_NEW_JOURNEY","RESULTS_NO_INFORMATION","RESULTS_LOGOUT","RESULTS_HIGH_LEVEL_ABORTED","RESULTS_HIGH_LEVEL_TCCDISAGREE","RESULTS_HIGH_LEVEL_EXPIRED","RESULTS_HIGH_LEVEL_NOT_ACCEPTED","RESULTS_HIGH_LEVEL_NOT_SUPPORTED","RESULTS_HIGH_LEVEL_NOTSUPPORTED","RESULTS_HIGH_LEVEL_PASSED","RESULTS_HIGH_LEVEL_REFER","RESULTS_HIGH_LEVEL_UNDEFINED","RESULTS_HIGH_LEVEL_DETAIL_ACCUMULATIVE_LIVENESS_RESULT","RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_FRONT_SIDE_TYPE_CHECK","RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_BACK_SIDE_TYPE_CHECK","RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_BACK_SIDE_CHECK","RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_BLOCKING_POLICY","RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_OVERALL_VALIDATION","RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_EXPIRY","RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_SUPPORT","RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_VALIDATION","RESULTS_HIGH_LEVEL_DETAIL_DOCUMENT_PROOF_POLICY","RESULTS_HIGH_LEVEL_DETAIL_FACEMATCH_VALIDATION","RESULTS_HIGH_LEVEL_DETAIL_UNDERAGE_RULE","RESULTS_HIGH_LEVEL_DETAIL_VALUE_SUCCESS_NEEDED","RESULTS_HIGH_LEVEL_DETAIL_COVID_PASS_CROSSCHECK","RESULTS_HIGH_LEVEL_DETAIL_DATA_CHECK","RESULTS_HIGH_LEVEL_DETAIL_VALUE_FAILED","RESULTS_HIGH_LEVEL_DETAIL_VALUE_FAIL","RESULTS_HIGH_LEVEL_DETAIL_VALUE_NOTNEEDED","RESULTS_HIGH_LEVEL_DETAIL_VALUE_PASSED","RESULTS_HIGH_LEVEL_DETAIL_VALUE_PASS","RESULTS_HIGH_LEVEL_DETAIL_VALUE_NA","RESULTS_HIGH_LEVEL_DETAIL_VALUE_SKIPPED","RESULTS_HIGH_LEVEL_DETAIL_VALUE_UNDETERMINED","ADDITIONAL_CHECKS_DETAILS","ADDITIONAL_CHECKS_DETAILS_NONE","ADDITIONAL_CHECKS_DETAIL_DATACHECKS","ADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK","ADDITIONAL_CHECKS_DETAIL_LOOKBACKCHECK_NA","GBG_SCORES","GBG_TRUST_SCORE","GBG_SCORE","IAD_RESULT","VIEW_RETRY","VIEW_CROP","VIEW_UPLOAD","VIEW_UPLOADING","SMART_CAPTURE_START","SMART_CAPTURE_INITIALIZING","SCANNER_DESC_AVAILABLE","SCANNER_DESC_PROCESSING","SCANNER_DESC_SCANNING","SCANNER_DESC_DISCONNECTED","SCANNER_DESC_WAITING","SCANNER_TITLE_WAITING","CANCEL_JOURNEY","MANUAL_PHOTO_UPLOAD_TOGGLE_FALSE","MANUAL_PHOTO_UPLOAD_TOGGLE_TRUE","JOURNEY_SELECT_CONTINUE","HELP_MODAL_AUTOCAPTURE_TITLE","HELP_MODAL_AUTOCAPTURE_SUBTITLE","HELP_MODAL_AUTOCAPTURE_TIPS","HELP_MODAL_AUTOCAPTURE_GLARE_TITLE","HELP_MODAL_AUTOCAPTURE_GLARE_SUBTITLE","HELP_MODAL_AUTOCAPTURE_FAR_TITLE","HELP_MODAL_AUTOCAPTURE_FAR_SUBTITLE","HELP_MODAL_AUTOCAPTURE_BLUR_TITLE","HELP_MODAL_AUTOCAPTURE_BLUR_SUBTITLE","HELP_MODAL_AUTOCAPTURE_MANUAL_CAPTURE","HELP_MODAL_AUTOCAPTURE_TURN_MANUAL_CAPTURE","HELP_MODAL_SELFIE_TITLE","HELP_MODAL_SELFIE_SUBTITLE","HELP_MODAL_POA_TITLE","HELP_MODAL_POA_SUBTITLE","HELP_MODAL_POA_TIPS","HELP_MODAL_POA_GLARE_TITLE","HELP_MODAL_POA_GLARE_SUBTITLE","HELP_MODAL_POA_FAR_TITLE","HELP_MODAL_POA_FAR_SUBTITLE","HELP_MODAL_POA_BLUR_TITLE","HELP_MODAL_POA_BLUR_SUBTITLE","HELP_MODAL_POA_MANUAL_CAPTURE","HELP_MODAL_POA_TURN_MANUAL_CAPTURE","HELP_MODAL_COVID_TITLE","HELP_MODAL_COVID_SUBTITLE","HELP_MODAL_COVID_TIPS","HELP_MODAL_COVID_GLARE_TITLE","HELP_MODAL_COVID_GLARE_SUBTITLE","HELP_MODAL_COVID_FAR_TITLE","HELP_MODAL_COVID_FAR_SUBTITLE","HELP_MODAL_COVID_BLUR_TITLE","HELP_MODAL_COVID_BLUR_SUBTITLE","HELP_MODAL_COVID_MANUAL_CAPTURE","HELP_MODAL_COVID_TURN_MANUAL_CAPTURE","HELP_MODAL_NEED_HELP","EXCEPTION_BAD_REQUEST_INVALID_IMAGE","EXCEPTION_INVALID_PARAMETER_SHOULD_BE_ELEMENT_OR_SELECTOR","EXCEPTION_JOURNEY_DEFINITIONS_MISSING","EXCEPTION_TEMPLATE_CANVAS_CONTEXT_UNAVAILABLE","EXCEPTION_TEMPLATE_CONTAINER_MISSING","EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_CANNOT_RETRIEVE","EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NONE_SPECIFIED","EXCEPTION_UNAVAILABLE_INPUT_PROVIDER_NOT_AVAILABLE","SUPPORTED_DOCUMENT_ACCOUNT_STATEMENT","SUPPORTED_DOCUMENT_AGREEMENT_TENANCY","SUPPORTED_DOCUMENT_BANK_DOCUMENT","SUPPORTED_DOCUMENT_BANK_LETTER","SUPPORTED_DOCUMENT_BANK_STATEMENT","SUPPORTED_DOCUMENT_BENEFIT_LETTER","SUPPORTED_DOCUMENT_CERTIFICATE","SUPPORTED_DOCUMENT_COUNCIL_DOCUMENT","SUPPORTED_DOCUMENT_COUNCIL_LETTER","SUPPORTED_DOCUMENT_COUNCIL_TAX","SUPPORTED_DOCUMENT_DRIVING_LICENSE","SUPPORTED_DOCUMENT_DWP_DOCUMENT","SUPPORTED_DOCUMENT_HMRC_DOCUMENT","SUPPORTED_DOCUMENT_INFORMATION_SHEET","SUPPORTED_DOCUMENT_INSURANCE_DOCUMENT","SUPPORTED_DOCUMENT_INSURANCE_LETTER","SUPPORTED_DOCUMENT_INVOICE","SUPPORTED_DOCUMENT_NIC_LETTER","SUPPORTED_DOCUMENT_NINO_LETTER","SUPPORTED_DOCUMENT_OFFICIAL_DOCUMENT","SUPPORTED_DOCUMENT_OFFICIAL_LETTER","SUPPORTED_DOCUMENT_REPAYMENT","SUPPORTED_DOCUMENT_TAX_LETTER","SUPPORTED_DOCUMENT_TAX_STATEMENT","SUPPORTED_DOCUMENT_TEL_BILL","SUPPORTED_DOCUMENT_TEL_LETTER","SUPPORTED_DOCUMENT_TELECOMMUNICATION_DOCUMENT","SUPPORTED_DOCUMENT_TV_LICENSE","SUPPORTED_DOCUMENT_UNIVERSITY_LETTER","SUPPORTED_DOCUMENT_UTILITY_BILL","SUPPORTED_DOCUMENT_UTILITY_DOCUMENT","SUPPORTED_DOCUMENT_UTILITY_LETTER","SUPPORTED_DOCUMENT_WATER_BILL","SUPPORTED_DOCUMENT_WATER_DOCUMENT","SUPPORTED_DOCUMENT_AGENTS_LICENCE","SUPPORTED_DOCUMENT_ELECTORAL_CARD","SUPPORTED_DOCUMENT_FOREIGNER_IDENTIFICATION_CARD","SUPPORTED_DOCUMENT_HEALTH_CARD","SUPPORTED_DOCUMENT_JOB_LICENCE","SUPPORTED_DOCUMENT_MEMBERSHIP_IDENTIFICATION_CARD","SUPPORTED_DOCUMENT_MILITARY_IDENTIFICATION_CARD","SUPPORTED_DOCUMENT_NATIONAL_IDENTIFICATION_CARD","SUPPORTED_DOCUMENT_PASSPORT","SUPPORTED_DOCUMENT_TRAVEL_PERMIT","SUPPORTED_DOCUMENT_VISA","SUPPORTED_DOCUMENT_WEAPONS_LICENCE","SUPPORTED_DOCUMENT_SELFIE_PHOTO","SUPPORTED_DOCUMENT_UNKNOWN","SUPPORTED_DOCUMENT_COVIDPASS","SUPPORTED_DOCUMENT_DATACHECKS","SUPPORTED_DOCUMENT_PAPER_DOCUMENT","SUPPORTED_DOCUMENT_ADDRESS_DOCUMENT","EXTRACTED_FIELDS_ADDRESS_FULL","EXTRACTED_FIELDS_ADDRESS_CITY","EXTRACTED_FIELDS_ADDRESS_POSTCODE","EXTRACTED_FIELDS_LASTNAME_FIRST_PART","EXTRACTED_FIELDS_SEX","EXTRACTED_FIELDS_BIRTH_PLACE","EXTRACTED_FIELDS_ISSUE_NUMBER","EXTRACTED_FIELDS_DOCUMENT_NUMBER_CHECK_DIGIT","EXTRACTED_FIELDS_BIRTH_DATE","EXTRACTED_FIELDS_DOCUMENT_NUMBER","EXTRACTED_FIELDS_FIRST_NAME","EXTRACTED_FIELDS_ARBITRARY_DIGIT","EXTRACTED_FIELDS_FIRST_NAME_INITIAL","EXTRACTED_FIELDS_EXPIRY_DATE","EXTRACTED_FIELDS_ISSUE_DATE","EXTRACTED_FIELDS_LAST_NAME","EXTRACTED_FIELDS_LICENSE_CATEGORY","EXTRACTED_FIELDS_DOCUMENT_CATEGORY","EXTRACTED_FIELDS_DOCUMENT_TYPE","EXTRACTED_FIELDS_DOCUMENT_SUB_TYPE","EXTRACTED_FIELDS_NATIONALITY_CODE","EXTRACTED_FIELDS_MIDDLE_NAME","EXTRACTED_FIELDS_FIRST_ISSUANCE_DATE","EXTRACTED_FIELDS_SECOND_LAST_NAME","EXTRACTED_FIELDS_FULL_NAME","EXTRACTED_FIELDS_PERSONAL_NUMBER","EXTRACTED_FIELDS_NATIONALITY_NAME","EXTRACTED_FIELDS_BARCODE_ITEMS","EXTRACTED_FIELDS_BIRTH_PLACE_CITY","EXTRACTED_FIELDS_BIRTH_PLACE_STATE","EXTRACTED_FIELDS_BIRTH_PLACE_COUNTRY","EXTRACTED_FIELDS_MRZ_FULL","EXTRACTED_FIELDS_MRZ_LINE_1","EXTRACTED_FIELDS_MRZ_LINE_2","EXTRACTED_FIELDS_MRZ_LINE_3","EXTRACTED_FIELDS_OBSERVATION_PAGE","EXTRACTED_FIELDS_ISSUING_AUTHORITY","EXTRACTED_FIELDS_ISSUING_LOCATION","EXTRACTED_FIELDS_MARITAL_STATUS","EXTRACTED_FIELDS_OCCUPATION","EXTRACTED_FIELDS_ALIEN_NUMBER","EXTRACTED_FIELDS_EMPLOYER","EXTRACTED_FIELDS_ADDRESS_LINE_1","EXTRACTED_FIELDS_ADDRESS_LINE_2","EXTRACTED_FIELDS_ADDRESS_LINE_3","EXTRACTED_FIELDS_ADDRESS_LINE_4","EXTRACTED_FIELDS_ADDRESS_STATE","EXTRACTED_FIELDS_ADDRESS_DISTRICT","EXTRACTED_FIELDS_ADDRESS_BUILDING_NUM","EXTRACTED_FIELDS_ADDRESS_BUILDING_NAME","EXTRACTED_FIELDS_ADDRESS_STREET","EXTRACTED_FIELDS_ADDRESS_COUNTRY","EXTRACTED_FIELDS_REF_ADDRESS_FULL","EXTRACTED_FIELDS_REF_ADDRESS_LINE_1","EXTRACTED_FIELDS_REF_ADDRESS_LINE_2","EXTRACTED_FIELDS_REF_ADDRESS_LINE_3","EXTRACTED_FIELDS_REF_ADDRESS_LINE_4","EXTRACTED_FIELDS_REF_ADDRESS_CITY","EXTRACTED_FIELDS_REF_ADDRESS_STATE","EXTRACTED_FIELDS_REF_ADDRESS_DISTRICT","EXTRACTED_FIELDS_REF_ADDRESS_BUILTING_NUM","EXTRACTED_FIELDS_REF_ADDRESS_BUILDING_NAME","EXTRACTED_FIELDS_REF_ADDRESS_SUB_BUILDING_NAME","EXTRACTED_FIELDS_REF_ADDRESS_STREET","EXTRACTED_FIELDS_REF_ADDRESS_COUNTRY","EXTRACTED_FIELDS_REF_ADDRESS_POST_CODE","EXTRACTED_FIELDS_HEALTH_NUMBER","EXTRACTED_FIELDS_ENDORSMENTS","EXTRACTED_FIELDS_CONSTRAINTS","EXTRACTED_FIELDS_LICENSE_MARINE","EXTRACTED_FIELDS_HEIGHT","EXTRACTED_FIELDS_WEIGHT","EXTRACTED_FIELDS_HAIR_COLOR","EXTRACTED_FIELDS_EYE_COLOR","EXTRACTED_FIELDS_LENS_DATA","EXTRACTED_FIELDS_SOCIAL_SECURITY_NUM","EXTRACTED_FIELDS_NATIONAL_INSURANCE_NUM","EXTRACTED_FIELDS_RACE","EXTRACTED_FIELDS_MOTHER_NAME","EXTRACTED_FIELDS_FATHER_NAME","EXTRACTED_FIELDS_PARENTS","EXTRACTED_FIELDS_REMARKS","EXTRACTED_FIELDS_DISTINGUISHING_MARKS","EXTRACTED_FIELDS_PERIOD_OF_STAY","EXTRACTED_FIELDS_TAX_NUMBER","EXTRACTED_FIELDS_DONOR","EXTRACTED_FIELDS_RFIDG1","EXTRACTED_FIELDS_RFIDG2","EXTRACTED_FIELDS_RFIDG3","EXTRACTED_FIELDS_RFIDG15","EXTRACTED_FIELDS_RFIDSOD","EXTRACTED_FIELDS_PORTRAIT_PHOTO","EXTRACTED_FIELDS_TITLE","EXTRACTED_FIELDS_ISSUE_DATE_2","EXTRACTED_FIELDS_EXPIRY_DATE_2","EXTRACTED_FIELDS_LICENSE_CATEGORY_2","EXTRACTED_FIELDS_ISSUE_DATE_3","EXTRACTED_FIELDS_EXPIRY_DATE_3","EXTRACTED_FIELDS_LICENSE_CATEGORY_3","EXTRACTED_FIELDS_ISSUE_DATE_4","EXTRACTED_FIELDS_EXPIRY_DATE_4","EXTRACTED_FIELDS_LICENSE_CATEGORY_4","EXTRACTED_FIELDS_MRZ_CODE_1","EXTRACTED_FIELDS_MRZ_CODE_2","EXTRACTED_FIELDS_MRZ_STANDARD_TYPE","EXTRACTED_FIELDS_ADDRESS_STREET_SUFFIX","EXTRACTED_FIELDS_ADDRESS_STREET_TYPE","EXTRACTED_FIELDS_ADDRESS_UNIT_NUMBER","EXTRACTED_FIELDS_LICENSE_NUMBER","EXTRACTED_FIELDS_ADDRESS_STATE_CODE","EXTRACTED_FIELDS_ADDRESS_STREET_TYPE_ABBREVIATION","EXTRACTED_FIELDS_ADDRESS_UNIT_TYPE","EXTRACTED_FIELDS_ADDRESS_DELIVERY_POINT_ID","EXTRACTED_FIELDS_AGE_CATEGORY","EXTRACTED_FIELDS_CHILDREN_COUNT","EXTRACTED_FIELDS_ENTRY_MODE","EXTRACTED_FIELDS_VAF_NUM","EXTRACTED_FIELDS_ADDRESS_LINE_5","EXTRACTED_FIELDS_RFID_PORTRAIT_PHOTO","EXTRACTED_FIELDS_REF_ADDRESS_LINE_5","EXTRACTED_FIELDS_REF_ADDRESS_STATE_CODE","EXTRACTED_FIELDS_REF_ADDRESS_STREET_TYPE","EXTRACTED_FIELDS_REF_ADDRESS_STREET_TYPE_ABBREVIATION","EXTRACTED_FIELDS_REF_ADDRESS_STREET_SUFFIX","EXTRACTED_FIELDS_REF_ADDRESS_UNIT_NUM","EXTRACTED_FIELDS_REF_ADDRESS_UNIT_TYPE","EXTRACTED_FIELDS_REF_ADDRESS_POST_CODE_TYPE","EXTRACTED_FIELDS_REF_ADDRESS_DELIVERY_POINT_ID","EXTRACTED_FIELDS_REF_ADDRESS_PO_BOX_NUM","EXTRACTED_FIELDS_REF_ADDRESS_DEPENDENT_LOCALITY","EXTRACTED_FIELDS_REF_ADDRESS_DOUBLE_DEPENDENT_LOCALITY","EXTRACTED_FIELDS_REF_ADDRESS_THOROUGHFARE","EXTRACTED_FIELDS_REF_ADDRESS_THOROUGHFARE_DESC","EXTRACTED_FIELDS_REF_ADDRESS_DEPENDENT_THOROUGHFARE","EXTRACTED_FIELDS_REF_ADDRESS_DEPENDENT_THOROUGHFARE_DESC","EXTRACTED_FIELDS_REF_ADDRESS_SUB_BUILDING_NUM","EXTRACTED_FIELDS_ADDRESS_SUB_BUILDING_NUM","EXTRACTED_FIELDS_ADDRESS_SUB_BUILDING_NAME","EXTRACTED_FIELDS_ADDRESS_POST_CODE_TYPE","EXTRACTED_FIELDS_ISSUING_AUTHORITY_TYPE","EXTRACTED_FIELDS_SIGNATURE","EXTRACTED_FIELDS_HOLOGRAM","EXTRACTED_FIELDS_CARD_NUMBER","EXTRACTED_FIELDS_MIDDLE_NAME_INITIAL","EXTRACTED_FIELDS_PERMIT_NUM","EXTRACTED_FIELDS_REFERENCE_NUM","EXTRACTED_FIELDS_CUSTOMER_NUM","EXTRACTED_FIELDS_BOS_NUM","EXTRACTED_FIELDS_STUDENT_ID","EXTRACTED_FIELDS_MEMBERSHIP_NUMBER","EXTRACTED_FIELDS_LICENSE_TYPE","EXTRACTED_FIELDS_LICENSE_TYPE_2","EXTRACTED_FIELDS_LICENSE_TYPE_3","EXTRACTED_FIELDS_LICENSE_TYPE_4","EXTRACTED_FIELDS_DOCUMENT_TYPE_CODE","EXTRACTED_FIELDS_MRZ_DOCUMENT_NUMBER_CHECK_DIGIT","EXTRACTED_FIELDS_MRZ_BIRTH_DATE_CHECK_DIGIT","EXTRACTED_FIELDS_MRZ_EXPORY_DATE_CHECK_DIGIT","EXTRACTED_FIELDS_MRZ_PERSONAL_NUMBER_CHECK_DIGIT","EXTRACTED_FIELDS_MRZ_COMPOSITE_CHECK_DIGIT","EXTRACTED_FIELDS_SECONDARY_PORTRAIT_PHOTO","EXTRACTED_FIELDS_FINGERPRINT","EXTRACTED_FIELDS_VERSION_NUMBER","EXTRACTED_FIELDS_CONDITIONS","EXTRACTED_FIELDS_NICKNAME","EXTRACTED_FIELDS_ADDRESS_APARTMENT_NUMBER","EXTRACTED_FIELDS_ADDRESS_FLOOR_NUM","EXTRACTED_FIELDS_FIRST_NAME_LOCAL","EXTRACTED_FIELDS_LAST_NAME_LOCAL","EXTRACTED_FIELDS_FULL_NAME_LOCAL","EXTRACTED_FIELDS_BIRTH_PLACE_LOCAL","EXTRACTED_FIELDS_ISSUING_AUTHORITY_LOCAL","EXTRACTED_FIELDS_MOTHER_NAME_LOCAL","EXTRACTED_FIELDS_FATHER_NAME_LOCAL","EXTRACTED_FIELDS_ADDRESS_FULL_LOCAL","EXTRACTED_FIELDS_MIDDLE_NAME_LOCAL","EXTRACTED_FIELDS_ADDRESS_LINE_1_LOCAL","EXTRACTED_FIELDS_ADDRESS_LINE_2_LOCAL","EXTRACTED_FIELDS_ADDRESS_LINE_3_LOCAL","EXTRACTED_FIELDS_IND_REF_NUMBER_1","EXTRACTED_FIELDS_IND_REF_NUMBER_2","EXTRACTED_FIELDS_IND_REF_NUMBER_3","EXTRACTED_FIELDS_IND_REF_NUMBER_4","EXTRACTED_FIELDS_IND_REF_NUMBER_5","EXTRACTED_FIELDS_NAME_1","EXTRACTED_FIELDS_NAME_2","EXTRACTED_FIELDS_NAME_3","EXTRACTED_FIELDS_NAME_4","EXTRACTED_FIELDS_NAME_5","EXTRACTED_FIELDS_RECIPIENT_NAME","EXTRACTED_FIELDS_RECIPIENT_NAME_1","EXTRACTED_FIELDS_RECIPIENT_NAME_2","EXTRACTED_FIELDS_RECIPIENT_NAME_3","EXTRACTED_FIELDS_RECIPIENT_NAME_4","EXTRACTED_FIELDS_RECIPIENT_ADDRESS_FULL","EXTRACTED_FIELDS_IBAN","EXTRACTED_FIELDS_ACCOUNT_NUM","EXTRACTED_FIELDS_ISSUER","EXTRACTED_FIELDS_RECIPIENT_ADDRESS_CITY","EXTRACTED_FIELDS_RECIPIENT_ADDRESS_POST_CODE","EXTRACTED_FIELDS_DAY","EXTRACTED_FIELDS_MONTH","EXTRACTED_FIELDS_YEAR","EXTRACTED_FIELDS_OPTIONAL_VALUE_1","EXTRACTED_FIELDS_OPTIONAL_VALUE_2","EXTRACTED_FIELDS_OPTIONAL_VALUE_3","EXTRACTED_FIELDS_OPTIONAL_VALUE_4","EXTRACTED_FIELDS_ISSUING_STATE_NAME","EXTRACTED_FIELDS_FRONT_DOCUMENT_TYPE_ID","EXTRACTED_FIELDS_BACK_DOCUMENT_TYPE_ID","HASNOCAMERA_TITLE","HASNOCAMERA_DESCRIPTION","EXTRACTED_FIELDS_COVIDPASSCROSSCHECKRESULT","USER_INPUT_FIRST_NAME","USER_INPUT_MIDDLE_NAME","USER_INPUT_LAST_NAME","USER_INPUT_DOB","USER_INPUT_HOUSE_NAME_NUMBER","USER_INPUT_STREET_NAME","USER_INPUT_TOWN","USER_INPUT_POSTAL_CODE","USER_INPUT_HOUSE_NAME_NUMBER_EXAMPLE","USER_INPUT_STREET_NAME_EXAMPLE","USER_INPUT_TOWN_EXAMPLE","USER_INPUT_POSTAL_CODE_EXAMPLE","EXTRACTED_FIELDS_RECIPIENT_ADDRESS","fileUploadButton","fileInput","dropbox","fileTooLargeError","invalidFileFormatError","uploading","supportedTypes","supportedTypesSelfie","dispatchEvent","accept","removeItems","getAllowedFileFormats","join","fileSelectHandler","fileDragHover","fileDropHandler","stopPropagation","fileDropBox","file","dataTransfer","files","checkAndShowErrors","skipPreviewAndUpload","currentTarget","DISPLAY_INFO","fileName","fileSize","size","fileType","htmlContainer","patchCustomElementsRegistry","hasPatched","customElements","originalDefine","animationPath","loop","autoplay","lottie","loadAnimation","renderer","rendererSettings","pause","hide","_dataStore","setContainer","onAuthStateChanged","onJourneyEvent","setJourneyDefinitonId","FALLBACK","terminateJourney","getJourneyState","getAvailableProviders","JOURNEY_CLEAR","jcs__id__box","isDisplay","actionContainer","CAMERA_CHANGE","setProviders","media","providers","parseProvidersFromCapturingMedia","allowedInputProviders","allowItems","WebAssembly","containsItems","eventData","FileUpload","WebCamera","assetsDirectory","smartCapture","fileUpload","passiveLivenessStep","dataChecksStep","previewPages","_manualCapture","enabled","allowedTypes","allowedFileFormats","recaptureDelay","autoStart","cameraViewfinderInnerContainer","errorImg","alignment","blur","glare","lowResolution","cameraOverlay","verifyingAnimation","manualCaptureButton","modalManualCaptureButton","cameraConditionsContainer","conditionDetailContainer","cameraCaptureHint","smartCaptureCancel","ManualInputProviderChange","isRunning","CameraChanged","startCapturing","animationCompleted","startCapturingWithDeviceDecision","selectedCamera","selectedCameraId","lastQualityCheckPriority","CAMERA_START","lengthStartTime","expiryDate","setMilliseconds","smartCaptureTimeout","processFrame","image64","CAMERA_FEEDBACK","succeeded","removeIDAnimation","failed","captureAnimationComplete","captureAnimation","setConditionsFlags","conditions","setConditionChecks","resolutionCheck","coordinateCheck","alignmentCheck","setConditionChecksDetail","detailContainer","checkPriority","showTitleHintAndAnimation","qualityChecksTimeout","clearTimeout","hintText","animation","RemoveHintImage","hintAnimation","lastStartFrameTime","blobFromCurrentStream","hasChecks","counterImage","Blur","Glare","Resolution","imagePath","_","Alignment","lengthStart","lastFrameTime","numberOfFrames","JourneyAction","tripleScanGuidanceContainer","tripleScanRetry","edgesCheck","qualityChecksContainer","validationFailedReason","focus","setQualityChecks","_sendingFramesManager","_SENDING_REQUESTS_DELAY_MILLISECOND","_CAPTURING_DELAY_MILLISECOND","_MAX_AVAILABLE_CAPTURED_IMAGES_COUNT","_SEND_REQUEST_TIMEOUT_SECOND","_capturedImagesQueue","_lastSentRequestTime","_isLastFrameConfirmed","_currentStep","cleanHtmlContent","renderStatus","attachEvents","startCapturingTimer","stopPausingTimers","stopCapturingTimer","stopSendingFramesTimer","cameraNotification","timeCounterContainer","messageContainer","_capturingTimer","captureAndSendFrame","frame","Response","arrayBuffer","finalBuffer","_appendBuffer","finalBlob","startSendingFramesTimer","_sendingFramesTimer","sendNewFrame","pauseCapturing","pauseDuration","showDownCounter","_pauseTimer","shift","firstBuffer","secondBuffer","tmp","byteLength","buffer","_updateCurrentActionEnum","Smile","Frown","TiltLeft","TiltRight","TiltUp","TiltDown","TiltStraight","NoAction","showMessage","ProcessingLiveness","Failed","ActionTimedOut","Interrupted","startTime","_downCounterTimer","KeepCapturing","vibrate","PauseCapturing","CAMERA_PAUSE","CAMERA_DONE","wasClean","journeyDefinitionsCount","externalJourneyDefinition","d","JourneyDefinitionId","externalHeaderJourneyDefinition","chooseJourney","definitions","definition","_definitionName","entryDefinitions","EntryDefinitions","entry","getJourneyEntryDefinitionName","JourneyEntryDefinitionId","choices","select","journeyDefinition","hasLivenessStep","IsPredefinedJourney","entryDefinitionType","_currentImageCaptureService","_retinaSettings","getMediaInstance","imageCaptureService","mediaChannelInformation","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","amdO","O","chunkIds","notFulfilled","Infinity","fulfilled","every","r","n","getter","__esModule","o","enumerable","g","globalThis","hasOwnProperty","Symbol","toStringTag","nmd","paths","scriptUrl","importScripts","currentScript","tagName","scripts","getElementsByTagName","p","baseURI","self","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}